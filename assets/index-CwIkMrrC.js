(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var Gg={exports:{}},Tc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JT;function EC(){if(JT)return Tc;JT=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:i,type:r,key:u,ref:a!==void 0?a:null,props:l}}return Tc.Fragment=e,Tc.jsx=t,Tc.jsxs=t,Tc}var ZT;function TC(){return ZT||(ZT=1,Gg.exports=EC()),Gg.exports}var A=TC(),Kg={exports:{}},Ce={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eb;function bC(){if(eb)return Ce;eb=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),v=Symbol.for("react.activity"),b=Symbol.iterator;function I(z){return z===null||typeof z!="object"?null:(z=b&&z[b]||z["@@iterator"],typeof z=="function"?z:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,V={};function $(z,ie,ce){this.props=z,this.context=ie,this.refs=V,this.updater=ce||O}$.prototype.isReactComponent={},$.prototype.setState=function(z,ie){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,ie,"setState")},$.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function H(){}H.prototype=$.prototype;function Q(z,ie,ce){this.props=z,this.context=ie,this.refs=V,this.updater=ce||O}var ue=Q.prototype=new H;ue.constructor=Q,M(ue,$.prototype),ue.isPureReactComponent=!0;var ye=Array.isArray;function pe(){}var x={H:null,A:null,T:null,S:null},R=Object.prototype.hasOwnProperty;function D(z,ie,ce){var ve=ce.ref;return{$$typeof:i,type:z,key:ie,ref:ve!==void 0?ve:null,props:ce}}function U(z,ie){return D(z.type,ie,z.props)}function B(z){return typeof z=="object"&&z!==null&&z.$$typeof===i}function q(z){var ie={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(ce){return ie[ce]})}var C=/\/+/g;function Ke(z,ie){return typeof z=="object"&&z!==null&&z.key!=null?q(""+z.key):ie.toString(36)}function Nt(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(pe,pe):(z.status="pending",z.then(function(ie){z.status==="pending"&&(z.status="fulfilled",z.value=ie)},function(ie){z.status==="pending"&&(z.status="rejected",z.reason=ie)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function ne(z,ie,ce,ve,xe){var Oe=typeof z;(Oe==="undefined"||Oe==="boolean")&&(z=null);var qe=!1;if(z===null)qe=!0;else switch(Oe){case"bigint":case"string":case"number":qe=!0;break;case"object":switch(z.$$typeof){case i:case e:qe=!0;break;case y:return qe=z._init,ne(qe(z._payload),ie,ce,ve,xe)}}if(qe)return xe=xe(z),qe=ve===""?"."+Ke(z,0):ve,ye(xe)?(ce="",qe!=null&&(ce=qe.replace(C,"$&/")+"/"),ne(xe,ie,ce,"",function(Di){return Di})):xe!=null&&(B(xe)&&(xe=U(xe,ce+(xe.key==null||z&&z.key===xe.key?"":(""+xe.key).replace(C,"$&/")+"/")+qe)),ie.push(xe)),1;qe=0;var sn=ve===""?".":ve+":";if(ye(z))for(var wt=0;wt<z.length;wt++)ve=z[wt],Oe=sn+Ke(ve,wt),qe+=ne(ve,ie,ce,Oe,xe);else if(wt=I(z),typeof wt=="function")for(z=wt.call(z),wt=0;!(ve=z.next()).done;)ve=ve.value,Oe=sn+Ke(ve,wt++),qe+=ne(ve,ie,ce,Oe,xe);else if(Oe==="object"){if(typeof z.then=="function")return ne(Nt(z),ie,ce,ve,xe);throw ie=String(z),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return qe}function me(z,ie,ce){if(z==null)return z;var ve=[],xe=0;return ne(z,ve,"","",function(Oe){return ie.call(ce,Oe,xe++)}),ve}function we(z){if(z._status===-1){var ie=z._result;ie=ie(),ie.then(function(ce){(z._status===0||z._status===-1)&&(z._status=1,z._result=ce)},function(ce){(z._status===0||z._status===-1)&&(z._status=2,z._result=ce)}),z._status===-1&&(z._status=0,z._result=ie)}if(z._status===1)return z._result.default;throw z._result}var Qe=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},Je={map:me,forEach:function(z,ie,ce){me(z,function(){ie.apply(this,arguments)},ce)},count:function(z){var ie=0;return me(z,function(){ie++}),ie},toArray:function(z){return me(z,function(ie){return ie})||[]},only:function(z){if(!B(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return Ce.Activity=v,Ce.Children=Je,Ce.Component=$,Ce.Fragment=t,Ce.Profiler=a,Ce.PureComponent=Q,Ce.StrictMode=r,Ce.Suspense=m,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=x,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(z){return x.H.useMemoCache(z)}},Ce.cache=function(z){return function(){return z.apply(null,arguments)}},Ce.cacheSignal=function(){return null},Ce.cloneElement=function(z,ie,ce){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var ve=M({},z.props),xe=z.key;if(ie!=null)for(Oe in ie.key!==void 0&&(xe=""+ie.key),ie)!R.call(ie,Oe)||Oe==="key"||Oe==="__self"||Oe==="__source"||Oe==="ref"&&ie.ref===void 0||(ve[Oe]=ie[Oe]);var Oe=arguments.length-2;if(Oe===1)ve.children=ce;else if(1<Oe){for(var qe=Array(Oe),sn=0;sn<Oe;sn++)qe[sn]=arguments[sn+2];ve.children=qe}return D(z.type,xe,ve)},Ce.createContext=function(z){return z={$$typeof:u,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:l,_context:z},z},Ce.createElement=function(z,ie,ce){var ve,xe={},Oe=null;if(ie!=null)for(ve in ie.key!==void 0&&(Oe=""+ie.key),ie)R.call(ie,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(xe[ve]=ie[ve]);var qe=arguments.length-2;if(qe===1)xe.children=ce;else if(1<qe){for(var sn=Array(qe),wt=0;wt<qe;wt++)sn[wt]=arguments[wt+2];xe.children=sn}if(z&&z.defaultProps)for(ve in qe=z.defaultProps,qe)xe[ve]===void 0&&(xe[ve]=qe[ve]);return D(z,Oe,xe)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(z){return{$$typeof:f,render:z}},Ce.isValidElement=B,Ce.lazy=function(z){return{$$typeof:y,_payload:{_status:-1,_result:z},_init:we}},Ce.memo=function(z,ie){return{$$typeof:g,type:z,compare:ie===void 0?null:ie}},Ce.startTransition=function(z){var ie=x.T,ce={};x.T=ce;try{var ve=z(),xe=x.S;xe!==null&&xe(ce,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(pe,Qe)}catch(Oe){Qe(Oe)}finally{ie!==null&&ce.types!==null&&(ie.types=ce.types),x.T=ie}},Ce.unstable_useCacheRefresh=function(){return x.H.useCacheRefresh()},Ce.use=function(z){return x.H.use(z)},Ce.useActionState=function(z,ie,ce){return x.H.useActionState(z,ie,ce)},Ce.useCallback=function(z,ie){return x.H.useCallback(z,ie)},Ce.useContext=function(z){return x.H.useContext(z)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(z,ie){return x.H.useDeferredValue(z,ie)},Ce.useEffect=function(z,ie){return x.H.useEffect(z,ie)},Ce.useEffectEvent=function(z){return x.H.useEffectEvent(z)},Ce.useId=function(){return x.H.useId()},Ce.useImperativeHandle=function(z,ie,ce){return x.H.useImperativeHandle(z,ie,ce)},Ce.useInsertionEffect=function(z,ie){return x.H.useInsertionEffect(z,ie)},Ce.useLayoutEffect=function(z,ie){return x.H.useLayoutEffect(z,ie)},Ce.useMemo=function(z,ie){return x.H.useMemo(z,ie)},Ce.useOptimistic=function(z,ie){return x.H.useOptimistic(z,ie)},Ce.useReducer=function(z,ie,ce){return x.H.useReducer(z,ie,ce)},Ce.useRef=function(z){return x.H.useRef(z)},Ce.useState=function(z){return x.H.useState(z)},Ce.useSyncExternalStore=function(z,ie,ce){return x.H.useSyncExternalStore(z,ie,ce)},Ce.useTransition=function(){return x.H.useTransition()},Ce.version="19.2.4",Ce}var tb;function r_(){return tb||(tb=1,Kg.exports=bC()),Kg.exports}var j=r_(),Qg={exports:{}},bc={},$g={exports:{}},Xg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nb;function SC(){return nb||(nb=1,(function(i){function e(ne,me){var we=ne.length;ne.push(me);e:for(;0<we;){var Qe=we-1>>>1,Je=ne[Qe];if(0<a(Je,me))ne[Qe]=me,ne[we]=Je,we=Qe;else break e}}function t(ne){return ne.length===0?null:ne[0]}function r(ne){if(ne.length===0)return null;var me=ne[0],we=ne.pop();if(we!==me){ne[0]=we;e:for(var Qe=0,Je=ne.length,z=Je>>>1;Qe<z;){var ie=2*(Qe+1)-1,ce=ne[ie],ve=ie+1,xe=ne[ve];if(0>a(ce,we))ve<Je&&0>a(xe,ce)?(ne[Qe]=xe,ne[ve]=we,Qe=ve):(ne[Qe]=ce,ne[ie]=we,Qe=ie);else if(ve<Je&&0>a(xe,we))ne[Qe]=xe,ne[ve]=we,Qe=ve;else break e}}return me}function a(ne,me){var we=ne.sortIndex-me.sortIndex;return we!==0?we:ne.id-me.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();i.unstable_now=function(){return u.now()-f}}var m=[],g=[],y=1,v=null,b=3,I=!1,O=!1,M=!1,V=!1,$=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;function ue(ne){for(var me=t(g);me!==null;){if(me.callback===null)r(g);else if(me.startTime<=ne)r(g),me.sortIndex=me.expirationTime,e(m,me);else break;me=t(g)}}function ye(ne){if(M=!1,ue(ne),!O)if(t(m)!==null)O=!0,pe||(pe=!0,q());else{var me=t(g);me!==null&&Nt(ye,me.startTime-ne)}}var pe=!1,x=-1,R=5,D=-1;function U(){return V?!0:!(i.unstable_now()-D<R)}function B(){if(V=!1,pe){var ne=i.unstable_now();D=ne;var me=!0;try{e:{O=!1,M&&(M=!1,H(x),x=-1),I=!0;var we=b;try{t:{for(ue(ne),v=t(m);v!==null&&!(v.expirationTime>ne&&U());){var Qe=v.callback;if(typeof Qe=="function"){v.callback=null,b=v.priorityLevel;var Je=Qe(v.expirationTime<=ne);if(ne=i.unstable_now(),typeof Je=="function"){v.callback=Je,ue(ne),me=!0;break t}v===t(m)&&r(m),ue(ne)}else r(m);v=t(m)}if(v!==null)me=!0;else{var z=t(g);z!==null&&Nt(ye,z.startTime-ne),me=!1}}break e}finally{v=null,b=we,I=!1}me=void 0}}finally{me?q():pe=!1}}}var q;if(typeof Q=="function")q=function(){Q(B)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Ke=C.port2;C.port1.onmessage=B,q=function(){Ke.postMessage(null)}}else q=function(){$(B,0)};function Nt(ne,me){x=$(function(){ne(i.unstable_now())},me)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ne){ne.callback=null},i.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<ne?Math.floor(1e3/ne):5},i.unstable_getCurrentPriorityLevel=function(){return b},i.unstable_next=function(ne){switch(b){case 1:case 2:case 3:var me=3;break;default:me=b}var we=b;b=me;try{return ne()}finally{b=we}},i.unstable_requestPaint=function(){V=!0},i.unstable_runWithPriority=function(ne,me){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var we=b;b=ne;try{return me()}finally{b=we}},i.unstable_scheduleCallback=function(ne,me,we){var Qe=i.unstable_now();switch(typeof we=="object"&&we!==null?(we=we.delay,we=typeof we=="number"&&0<we?Qe+we:Qe):we=Qe,ne){case 1:var Je=-1;break;case 2:Je=250;break;case 5:Je=1073741823;break;case 4:Je=1e4;break;default:Je=5e3}return Je=we+Je,ne={id:y++,callback:me,priorityLevel:ne,startTime:we,expirationTime:Je,sortIndex:-1},we>Qe?(ne.sortIndex=we,e(g,ne),t(m)===null&&ne===t(g)&&(M?(H(x),x=-1):M=!0,Nt(ye,we-Qe))):(ne.sortIndex=Je,e(m,ne),O||I||(O=!0,pe||(pe=!0,q()))),ne},i.unstable_shouldYield=U,i.unstable_wrapCallback=function(ne){var me=b;return function(){var we=b;b=me;try{return ne.apply(this,arguments)}finally{b=we}}}})(Xg)),Xg}var ib;function wC(){return ib||(ib=1,$g.exports=SC()),$g.exports}var Yg={exports:{}},_n={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rb;function AC(){if(rb)return _n;rb=1;var i=r_();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)g+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(m,g,y){var v=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:v==null?null:""+v,children:m,containerInfo:g,implementation:y}}var u=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return _n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,_n.createPortal=function(m,g){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return l(m,g,null,y)},_n.flushSync=function(m){var g=u.T,y=r.p;try{if(u.T=null,r.p=2,m)return m()}finally{u.T=g,r.p=y,r.d.f()}},_n.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,r.d.C(m,g))},_n.prefetchDNS=function(m){typeof m=="string"&&r.d.D(m)},_n.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var y=g.as,v=f(y,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,I=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;y==="style"?r.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:v,integrity:b,fetchPriority:I}):y==="script"&&r.d.X(m,{crossOrigin:v,integrity:b,fetchPriority:I,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},_n.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var y=f(g.as,g.crossOrigin);r.d.M(m,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&r.d.M(m)},_n.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var y=g.as,v=f(y,g.crossOrigin);r.d.L(m,y,{crossOrigin:v,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},_n.preloadModule=function(m,g){if(typeof m=="string")if(g){var y=f(g.as,g.crossOrigin);r.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else r.d.m(m)},_n.requestFormReset=function(m){r.d.r(m)},_n.unstable_batchedUpdates=function(m,g){return m(g)},_n.useFormState=function(m,g,y){return u.H.useFormState(m,g,y)},_n.useFormStatus=function(){return u.H.useHostTransitionStatus()},_n.version="19.2.4",_n}var sb;function IC(){if(sb)return Yg.exports;sb=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Yg.exports=AC(),Yg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ab;function RC(){if(ab)return bc;ab=1;var i=wC(),e=r_(),t=IC();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function u(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function f(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function m(n){if(l(n)!==n)throw Error(r(188))}function g(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(r(188));return s!==n?null:n}for(var o=n,c=s;;){var d=o.return;if(d===null)break;var p=d.alternate;if(p===null){if(c=d.return,c!==null){o=c;continue}break}if(d.child===p.child){for(p=d.child;p;){if(p===o)return m(d),n;if(p===c)return m(d),s;p=p.sibling}throw Error(r(188))}if(o.return!==c.return)o=d,c=p;else{for(var E=!1,S=d.child;S;){if(S===o){E=!0,o=d,c=p;break}if(S===c){E=!0,c=d,o=p;break}S=S.sibling}if(!E){for(S=p.child;S;){if(S===o){E=!0,o=p,c=d;break}if(S===c){E=!0,c=p,o=d;break}S=S.sibling}if(!E)throw Error(r(189))}}if(o.alternate!==c)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:s}function y(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=y(n),s!==null)return s;n=n.sibling}return null}var v=Object.assign,b=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),ue=Symbol.for("react.forward_ref"),ye=Symbol.for("react.suspense"),pe=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function q(n){return n===null||typeof n!="object"?null:(n=B&&n[B]||n["@@iterator"],typeof n=="function"?n:null)}var C=Symbol.for("react.client.reference");function Ke(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===C?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case M:return"Fragment";case $:return"Profiler";case V:return"StrictMode";case ye:return"Suspense";case pe:return"SuspenseList";case D:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case O:return"Portal";case Q:return n.displayName||"Context";case H:return(n._context.displayName||"Context")+".Consumer";case ue:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case x:return s=n.displayName||null,s!==null?s:Ke(n.type)||"Memo";case R:s=n._payload,n=n._init;try{return Ke(n(s))}catch{}}return null}var Nt=Array.isArray,ne=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,we={pending:!1,data:null,method:null,action:null},Qe=[],Je=-1;function z(n){return{current:n}}function ie(n){0>Je||(n.current=Qe[Je],Qe[Je]=null,Je--)}function ce(n,s){Je++,Qe[Je]=n.current,n.current=s}var ve=z(null),xe=z(null),Oe=z(null),qe=z(null);function sn(n,s){switch(ce(Oe,s),ce(xe,n),ce(ve,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?TT(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=TT(s),n=bT(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}ie(ve),ce(ve,n)}function wt(){ie(ve),ie(xe),ie(Oe)}function Di(n){n.memoizedState!==null&&ce(qe,n);var s=ve.current,o=bT(s,n.type);s!==o&&(ce(xe,n),ce(ve,o))}function Zi(n){xe.current===n&&(ie(ve),ie(xe)),qe.current===n&&(ie(qe),yc._currentValue=we)}var ga,Ro;function yi(n){if(ga===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);ga=s&&s[1]||"",Ro=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ga+n+Ro}var ya=!1;function xo(n,s){if(!n||ya)return"";ya=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(Z){var J=Z}Reflect.construct(n,[],ae)}else{try{ae.call()}catch(Z){J=Z}n.call(ae.prototype)}}else{try{throw Error()}catch(Z){J=Z}(ae=n())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(Z){if(Z&&J&&typeof Z.stack=="string")return[Z.stack,J.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=c.DetermineComponentFrameRoot(),E=p[0],S=p[1];if(E&&S){var N=E.split(`
`),Y=S.split(`
`);for(d=c=0;c<N.length&&!N[c].includes("DetermineComponentFrameRoot");)c++;for(;d<Y.length&&!Y[d].includes("DetermineComponentFrameRoot");)d++;if(c===N.length||d===Y.length)for(c=N.length-1,d=Y.length-1;1<=c&&0<=d&&N[c]!==Y[d];)d--;for(;1<=c&&0<=d;c--,d--)if(N[c]!==Y[d]){if(c!==1||d!==1)do if(c--,d--,0>d||N[c]!==Y[d]){var te=`
`+N[c].replace(" at new "," at ");return n.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",n.displayName)),te}while(1<=c&&0<=d);break}}}finally{ya=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?yi(o):""}function Fm(n,s){switch(n.tag){case 26:case 27:case 5:return yi(n.type);case 16:return yi("Lazy");case 13:return n.child!==s&&s!==null?yi("Suspense Fallback"):yi("Suspense");case 19:return yi("SuspenseList");case 0:case 15:return xo(n.type,!1);case 11:return xo(n.type.render,!1);case 1:return xo(n.type,!0);case 31:return yi("Activity");default:return""}}function Oh(n){try{var s="",o=null;do s+=Fm(n,o),o=n,n=n.return;while(n);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Co=Object.prototype.hasOwnProperty,_a=i.unstable_scheduleCallback,Do=i.unstable_cancelCallback,qm=i.unstable_shouldYield,Eu=i.unstable_requestPaint,an=i.unstable_now,Ph=i.unstable_getCurrentPriorityLevel,Ht=i.unstable_ImmediatePriority,Yt=i.unstable_UserBlockingPriority,er=i.unstable_NormalPriority,Mh=i.unstable_LowPriority,Tu=i.unstable_IdlePriority,Hm=i.log,va=i.unstable_setDisableYieldValue,Qr=null,gn=null;function ni(n){if(typeof Hm=="function"&&va(n),gn&&typeof gn.setStrictMode=="function")try{gn.setStrictMode(Qr,n)}catch{}}var wn=Math.clz32?Math.clz32:kh,Gm=Math.log,bu=Math.LN2;function kh(n){return n>>>=0,n===0?32:31-(Gm(n)/bu|0)|0}var Ea=256,Ni=262144,$r=4194304;function _i(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function ii(n,s,o){var c=n.pendingLanes;if(c===0)return 0;var d=0,p=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var S=c&134217727;return S!==0?(c=S&~p,c!==0?d=_i(c):(E&=S,E!==0?d=_i(E):o||(o=S&~n,o!==0&&(d=_i(o))))):(S=c&~p,S!==0?d=_i(S):E!==0?d=_i(E):o||(o=c&~n,o!==0&&(d=_i(o)))),d===0?0:s!==0&&s!==d&&(s&p)===0&&(p=d&-d,o=s&-s,p>=o||p===32&&(o&4194048)!==0)?s:d}function Xr(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function No(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Su(){var n=$r;return $r<<=1,($r&62914560)===0&&($r=4194304),n}function tr(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function Yr(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function on(n,s,o,c,d,p){var E=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var S=n.entanglements,N=n.expirationTimes,Y=n.hiddenUpdates;for(o=E&~o;0<o;){var te=31-wn(o),ae=1<<te;S[te]=0,N[te]=-1;var J=Y[te];if(J!==null)for(Y[te]=null,te=0;te<J.length;te++){var Z=J[te];Z!==null&&(Z.lane&=-536870913)}o&=~ae}c!==0&&wu(n,c,0),p!==0&&d===0&&n.tag!==0&&(n.suspendedLanes|=p&~(E&~s))}function wu(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var c=31-wn(s);n.entangledLanes|=s,n.entanglements[c]=n.entanglements[c]|1073741824|o&261930}function Wr(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var c=31-wn(o),d=1<<c;d&s|n[c]&s&&(n[c]|=s),o&=~d}}function Jr(n,s){var o=s&-s;return o=(o&42)!==0?1:Au(o),(o&(n.suspendedLanes|s))!==0?0:o}function Au(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Iu(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function nr(){var n=me.p;return n!==0?n:(n=window.event,n===void 0?32:GT(n.type))}function Lh(n,s){var o=me.p;try{return me.p=n,s()}finally{me.p=o}}var Vi=Math.random().toString(36).slice(2),Rt="__reactFiber$"+Vi,ln="__reactProps$"+Vi,Oi="__reactContainer$"+Vi,Zr="__reactEvents$"+Vi,Pi="__reactListeners$"+Vi,Uh="__reactHandles$"+Vi,Ru="__reactResources$"+Vi,ir="__reactMarker$"+Vi;function Ta(n){delete n[Rt],delete n[ln],delete n[Zr],delete n[Pi],delete n[Uh]}function rr(n){var s=n[Rt];if(s)return s;for(var o=n.parentNode;o;){if(s=o[Oi]||o[Rt]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=CT(n);n!==null;){if(o=n[Rt])return o;n=CT(n)}return s}n=o,o=n.parentNode}return null}function sr(n){if(n=n[Rt]||n[Oi]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function ba(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function vi(n){var s=n[Ru];return s||(s=n[Ru]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Vt(n){n[ir]=!0}var Vo=new Set,es={};function An(n,s){Mi(n,s),Mi(n+"Capture",s)}function Mi(n,s){for(es[n]=s,n=0;n<s.length;n++)Vo.add(s[n])}var Km=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),xu={},Cu={};function zh(n){return Co.call(Cu,n)?!0:Co.call(xu,n)?!1:Km.test(n)?Cu[n]=!0:(xu[n]=!0,!1)}function ts(n,s,o){if(zh(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function ns(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function ri(n,s,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+c)}}function In(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Bh(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function Qm(n,s,o){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var d=c.get,p=c.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return d.call(this)},set:function(E){o=""+E,p.call(this,E)}}),Object.defineProperty(n,s,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(E){o=""+E},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Oo(n){if(!n._valueTracker){var s=Bh(n)?"checked":"value";n._valueTracker=Qm(n,s,""+n[s])}}function Du(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),c="";return n&&(c=Bh(n)?n.checked?"true":"false":n.value),n=c,n!==o?(s.setValue(n),!0):!1}function Po(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var ar=/[\n"\\]/g;function xt(n){return n.replace(ar,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function is(n,s,o,c,d,p,E,S){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),s!=null?E==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+In(s)):n.value!==""+In(s)&&(n.value=""+In(s)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),s!=null?Mo(n,E,In(s)):o!=null?Mo(n,E,In(o)):c!=null&&n.removeAttribute("value"),d==null&&p!=null&&(n.defaultChecked=!!p),d!=null&&(n.checked=d&&typeof d!="function"&&typeof d!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?n.name=""+In(S):n.removeAttribute("name")}function Sa(n,s,o,c,d,p,E,S){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(n.type=p),s!=null||o!=null){if(!(p!=="submit"&&p!=="reset"||s!=null)){Oo(n);return}o=o!=null?""+In(o):"",s=s!=null?""+In(s):o,S||s===n.value||(n.value=s),n.defaultValue=s}c=c??d,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=S?n.checked:!!c,n.defaultChecked=!!c,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E),Oo(n)}function Mo(n,s,o){s==="number"&&Po(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function $e(n,s,o,c){if(n=n.options,s){s={};for(var d=0;d<o.length;d++)s["$"+o[d]]=!0;for(o=0;o<n.length;o++)d=s.hasOwnProperty("$"+n[o].value),n[o].selected!==d&&(n[o].selected=d),d&&c&&(n[o].defaultSelected=!0)}else{for(o=""+In(o),s=null,d=0;d<n.length;d++){if(n[d].value===o){n[d].selected=!0,c&&(n[d].defaultSelected=!0);return}s!==null||n[d].disabled||(s=n[d])}s!==null&&(s.selected=!0)}}function wa(n,s,o){if(s!=null&&(s=""+In(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+In(o):""}function rs(n,s,o,c){if(s==null){if(c!=null){if(o!=null)throw Error(r(92));if(Nt(c)){if(1<c.length)throw Error(r(93));c=c[0]}o=c}o==null&&(o=""),s=o}o=In(s),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c),Oo(n)}function si(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var $m=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Nu(n,s,o){var c=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":c?n.setProperty(s,o):typeof o!="number"||o===0||$m.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function jh(n,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var d in s)c=s[d],s.hasOwnProperty(d)&&o[d]!==c&&Nu(n,d,c)}else for(var p in s)s.hasOwnProperty(p)&&Nu(n,p,s[p])}function Vu(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xm=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ym=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ki(n){return Ym.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Wt(){}var ko=null;function Lo(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var or=null,Hn=null;function Fh(n){var s=sr(n);if(s&&(n=s.stateNode)){var o=n[ln]||null;e:switch(n=s.stateNode,s.type){case"input":if(is(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+xt(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var c=o[s];if(c!==n&&c.form===n.form){var d=c[ln]||null;if(!d)throw Error(r(90));is(c,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(s=0;s<o.length;s++)c=o[s],c.form===n.form&&Du(c)}break e;case"textarea":wa(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&$e(n,!!o.multiple,s,!1)}}}var Ou=!1;function qh(n,s,o){if(Ou)return n(s,o);Ou=!0;try{var c=n(s);return c}finally{if(Ou=!1,(or!==null||Hn!==null)&&(Bf(),or&&(s=or,n=Hn,Hn=or=null,Fh(s),n)))for(s=0;s<n.length;s++)Fh(n[s])}}function Nn(n,s){var o=n.stateNode;if(o===null)return null;var c=o[ln]||null;if(c===null)return null;o=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var Ei=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Pu=!1;if(Ei)try{var Li={};Object.defineProperty(Li,"passive",{get:function(){Pu=!0}}),window.addEventListener("test",Li,Li),window.removeEventListener("test",Li,Li)}catch{Pu=!1}var Gn=null,Uo=null,Ui=null;function ss(){if(Ui)return Ui;var n,s=Uo,o=s.length,c,d="value"in Gn?Gn.value:Gn.textContent,p=d.length;for(n=0;n<o&&s[n]===d[n];n++);var E=o-n;for(c=1;c<=E&&s[o-c]===d[p-c];c++);return Ui=d.slice(n,1<c?1-c:void 0)}function Aa(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function as(){return!0}function mt(){return!1}function yn(n){function s(o,c,d,p,E){this._reactName=o,this._targetInst=d,this.type=c,this.nativeEvent=p,this.target=E,this.currentTarget=null;for(var S in n)n.hasOwnProperty(S)&&(o=n[S],this[S]=o?o(p):p[S]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?as:mt,this.isPropagationStopped=mt,this}return v(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=as)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=as)},persist:function(){},isPersistent:as}),s}var lr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ia=yn(lr),os=v({},lr,{view:0,detail:0}),Hh=yn(os),ls,zo,Rn,Ra=v({},os,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Rn&&(Rn&&n.type==="mousemove"?(ls=n.screenX-Rn.screenX,zo=n.screenY-Rn.screenY):zo=ls=0,Rn=n),ls)},movementY:function(n){return"movementY"in n?n.movementY:zo}}),Gh=yn(Ra),xa=v({},Ra,{dataTransfer:0}),Kh=yn(xa),Mu=v({},os,{relatedTarget:0}),us=yn(Mu),Qh=v({},lr,{animationName:0,elapsedTime:0,pseudoElement:0}),Bo=yn(Qh),Wm=v({},lr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),$h=yn(Wm),Ca=v({},lr,{data:0}),ku=yn(Ca),Xh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yh(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Uu[n])?!!s[n]:!1}function cs(){return Yh}var Wh=v({},os,{key:function(n){if(n.key){var s=Xh[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Aa(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Lu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cs,charCode:function(n){return n.type==="keypress"?Aa(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Aa(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Jh=yn(Wh),ur=v({},Ra,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zu=yn(ur),Zh=v({},os,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cs}),ef=yn(Zh),tf=v({},lr,{propertyName:0,elapsedTime:0,pseudoElement:0}),jo=yn(tf),xn=v({},Ra,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),nf=yn(xn),rf=v({},lr,{newState:0,oldState:0}),hs=yn(rf),h=[9,13,27,32],_=Ei&&"CompositionEvent"in window,T=null;Ei&&"documentMode"in document&&(T=document.documentMode);var w=Ei&&"TextEvent"in window&&!T,K=Ei&&(!_||T&&8<T&&11>=T),ee=" ",he=!1;function Ze(n,s){switch(n){case"keyup":return h.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Lt(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Pe=!1;function Jt(n,s){switch(n){case"compositionend":return Lt(s);case"keypress":return s.which!==32?null:(he=!0,ee);case"textInput":return n=s.data,n===ee&&he?null:n;default:return null}}function Zt(n,s){if(Pe)return n==="compositionend"||!_&&Ze(n,s)?(n=ss(),Ui=Uo=Gn=null,Pe=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return K&&s.locale!=="ko"?null:s.data;default:return null}}var fs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vn(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!fs[n.type]:s==="textarea"}function Da(n,s,o,c){or?Hn?Hn.push(c):Hn=[c]:or=c,s=Qf(s,"onChange"),0<s.length&&(o=new Ia("onChange","change",null,o,c),n.push({event:o,listeners:s}))}var cr=null,Bu=null;function Q1(n){pT(n,0)}function sf(n){var s=ba(n);if(Du(s))return n}function Pv(n,s){if(n==="change")return s}var Mv=!1;if(Ei){var Jm;if(Ei){var Zm="oninput"in document;if(!Zm){var kv=document.createElement("div");kv.setAttribute("oninput","return;"),Zm=typeof kv.oninput=="function"}Jm=Zm}else Jm=!1;Mv=Jm&&(!document.documentMode||9<document.documentMode)}function Lv(){cr&&(cr.detachEvent("onpropertychange",Uv),Bu=cr=null)}function Uv(n){if(n.propertyName==="value"&&sf(Bu)){var s=[];Da(s,Bu,n,Lo(n)),qh(Q1,s)}}function $1(n,s,o){n==="focusin"?(Lv(),cr=s,Bu=o,cr.attachEvent("onpropertychange",Uv)):n==="focusout"&&Lv()}function X1(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return sf(Bu)}function Y1(n,s){if(n==="click")return sf(s)}function W1(n,s){if(n==="input"||n==="change")return sf(s)}function J1(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var Kn=typeof Object.is=="function"?Object.is:J1;function ju(n,s){if(Kn(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),c=Object.keys(s);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var d=o[c];if(!Co.call(s,d)||!Kn(n[d],s[d]))return!1}return!0}function zv(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Bv(n,s){var o=zv(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=s&&c>=s)return{node:o,offset:s-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=zv(o)}}function jv(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?jv(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function Fv(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=Po(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=Po(n.document)}return s}function ep(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var Z1=Ei&&"documentMode"in document&&11>=document.documentMode,Fo=null,tp=null,Fu=null,np=!1;function qv(n,s,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;np||Fo==null||Fo!==Po(c)||(c=Fo,"selectionStart"in c&&ep(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Fu&&ju(Fu,c)||(Fu=c,c=Qf(tp,"onSelect"),0<c.length&&(s=new Ia("onSelect","select",null,s,o),n.push({event:s,listeners:c}),s.target=Fo)))}function Na(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var qo={animationend:Na("Animation","AnimationEnd"),animationiteration:Na("Animation","AnimationIteration"),animationstart:Na("Animation","AnimationStart"),transitionrun:Na("Transition","TransitionRun"),transitionstart:Na("Transition","TransitionStart"),transitioncancel:Na("Transition","TransitionCancel"),transitionend:Na("Transition","TransitionEnd")},ip={},Hv={};Ei&&(Hv=document.createElement("div").style,"AnimationEvent"in window||(delete qo.animationend.animation,delete qo.animationiteration.animation,delete qo.animationstart.animation),"TransitionEvent"in window||delete qo.transitionend.transition);function Va(n){if(ip[n])return ip[n];if(!qo[n])return n;var s=qo[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in Hv)return ip[n]=s[o];return n}var Gv=Va("animationend"),Kv=Va("animationiteration"),Qv=Va("animationstart"),ex=Va("transitionrun"),tx=Va("transitionstart"),nx=Va("transitioncancel"),$v=Va("transitionend"),Xv=new Map,rp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rp.push("scrollEnd");function Ti(n,s){Xv.set(n,s),An(s,[n])}var af=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},ai=[],Ho=0,sp=0;function of(){for(var n=Ho,s=sp=Ho=0;s<n;){var o=ai[s];ai[s++]=null;var c=ai[s];ai[s++]=null;var d=ai[s];ai[s++]=null;var p=ai[s];if(ai[s++]=null,c!==null&&d!==null){var E=c.pending;E===null?d.next=d:(d.next=E.next,E.next=d),c.pending=d}p!==0&&Yv(o,d,p)}}function lf(n,s,o,c){ai[Ho++]=n,ai[Ho++]=s,ai[Ho++]=o,ai[Ho++]=c,sp|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function ap(n,s,o,c){return lf(n,s,o,c),uf(n)}function Oa(n,s){return lf(n,null,null,s),uf(n)}function Yv(n,s,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var d=!1,p=n.return;p!==null;)p.childLanes|=o,c=p.alternate,c!==null&&(c.childLanes|=o),p.tag===22&&(n=p.stateNode,n===null||n._visibility&1||(d=!0)),n=p,p=p.return;return n.tag===3?(p=n.stateNode,d&&s!==null&&(d=31-wn(o),n=p.hiddenUpdates,c=n[d],c===null?n[d]=[s]:c.push(s),s.lane=o|536870912),p):null}function uf(n){if(50<cc)throw cc=0,pg=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Go={};function ix(n,s,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(n,s,o,c){return new ix(n,s,o,c)}function op(n){return n=n.prototype,!(!n||!n.isReactComponent)}function hr(n,s){var o=n.alternate;return o===null?(o=Qn(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function Wv(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function cf(n,s,o,c,d,p){var E=0;if(c=n,typeof n=="function")op(n)&&(E=1);else if(typeof n=="string")E=lC(n,o,ve.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case D:return n=Qn(31,o,s,d),n.elementType=D,n.lanes=p,n;case M:return Pa(o.children,d,p,s);case V:E=8,d|=24;break;case $:return n=Qn(12,o,s,d|2),n.elementType=$,n.lanes=p,n;case ye:return n=Qn(13,o,s,d),n.elementType=ye,n.lanes=p,n;case pe:return n=Qn(19,o,s,d),n.elementType=pe,n.lanes=p,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Q:E=10;break e;case H:E=9;break e;case ue:E=11;break e;case x:E=14;break e;case R:E=16,c=null;break e}E=29,o=Error(r(130,n===null?"null":typeof n,"")),c=null}return s=Qn(E,o,s,d),s.elementType=n,s.type=c,s.lanes=p,s}function Pa(n,s,o,c){return n=Qn(7,n,c,s),n.lanes=o,n}function lp(n,s,o){return n=Qn(6,n,null,s),n.lanes=o,n}function Jv(n){var s=Qn(18,null,null,0);return s.stateNode=n,s}function up(n,s,o){return s=Qn(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var Zv=new WeakMap;function oi(n,s){if(typeof n=="object"&&n!==null){var o=Zv.get(n);return o!==void 0?o:(s={value:n,source:s,stack:Oh(s)},Zv.set(n,s),s)}return{value:n,source:s,stack:Oh(s)}}var Ko=[],Qo=0,hf=null,qu=0,li=[],ui=0,ds=null,zi=1,Bi="";function fr(n,s){Ko[Qo++]=qu,Ko[Qo++]=hf,hf=n,qu=s}function e0(n,s,o){li[ui++]=zi,li[ui++]=Bi,li[ui++]=ds,ds=n;var c=zi;n=Bi;var d=32-wn(c)-1;c&=~(1<<d),o+=1;var p=32-wn(s)+d;if(30<p){var E=d-d%5;p=(c&(1<<E)-1).toString(32),c>>=E,d-=E,zi=1<<32-wn(s)+d|o<<d|c,Bi=p+n}else zi=1<<p|o<<d|c,Bi=n}function cp(n){n.return!==null&&(fr(n,1),e0(n,1,0))}function hp(n){for(;n===hf;)hf=Ko[--Qo],Ko[Qo]=null,qu=Ko[--Qo],Ko[Qo]=null;for(;n===ds;)ds=li[--ui],li[ui]=null,Bi=li[--ui],li[ui]=null,zi=li[--ui],li[ui]=null}function t0(n,s){li[ui++]=zi,li[ui++]=Bi,li[ui++]=ds,zi=s.id,Bi=s.overflow,ds=n}var un=null,pt=null,He=!1,ms=null,ci=!1,fp=Error(r(519));function ps(n){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Hu(oi(s,n)),fp}function n0(n){var s=n.stateNode,o=n.type,c=n.memoizedProps;switch(s[Rt]=n,s[ln]=c,o){case"dialog":Ue("cancel",s),Ue("close",s);break;case"iframe":case"object":case"embed":Ue("load",s);break;case"video":case"audio":for(o=0;o<fc.length;o++)Ue(fc[o],s);break;case"source":Ue("error",s);break;case"img":case"image":case"link":Ue("error",s),Ue("load",s);break;case"details":Ue("toggle",s);break;case"input":Ue("invalid",s),Sa(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ue("invalid",s);break;case"textarea":Ue("invalid",s),rs(s,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||c.suppressHydrationWarning===!0||vT(s.textContent,o)?(c.popover!=null&&(Ue("beforetoggle",s),Ue("toggle",s)),c.onScroll!=null&&Ue("scroll",s),c.onScrollEnd!=null&&Ue("scrollend",s),c.onClick!=null&&(s.onclick=Wt),s=!0):s=!1,s||ps(n,!0)}function i0(n){for(un=n.return;un;)switch(un.tag){case 5:case 31:case 13:ci=!1;return;case 27:case 3:ci=!0;return;default:un=un.return}}function $o(n){if(n!==un)return!1;if(!He)return i0(n),He=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Dg(n.type,n.memoizedProps)),o=!o),o&&pt&&ps(n),i0(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));pt=xT(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));pt=xT(n)}else s===27?(s=pt,Cs(n.type)?(n=Mg,Mg=null,pt=n):pt=s):pt=un?fi(n.stateNode.nextSibling):null;return!0}function Ma(){pt=un=null,He=!1}function dp(){var n=ms;return n!==null&&(kn===null?kn=n:kn.push.apply(kn,n),ms=null),n}function Hu(n){ms===null?ms=[n]:ms.push(n)}var mp=z(null),ka=null,dr=null;function gs(n,s,o){ce(mp,s._currentValue),s._currentValue=o}function mr(n){n._currentValue=mp.current,ie(mp)}function pp(n,s,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===o)break;n=n.return}}function gp(n,s,o,c){var d=n.child;for(d!==null&&(d.return=n);d!==null;){var p=d.dependencies;if(p!==null){var E=d.child;p=p.firstContext;e:for(;p!==null;){var S=p;p=d;for(var N=0;N<s.length;N++)if(S.context===s[N]){p.lanes|=o,S=p.alternate,S!==null&&(S.lanes|=o),pp(p.return,o,n),c||(E=null);break e}p=S.next}}else if(d.tag===18){if(E=d.return,E===null)throw Error(r(341));E.lanes|=o,p=E.alternate,p!==null&&(p.lanes|=o),pp(E,o,n),E=null}else E=d.child;if(E!==null)E.return=d;else for(E=d;E!==null;){if(E===n){E=null;break}if(d=E.sibling,d!==null){d.return=E.return,E=d;break}E=E.return}d=E}}function Xo(n,s,o,c){n=null;for(var d=s,p=!1;d!==null;){if(!p){if((d.flags&524288)!==0)p=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var E=d.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var S=d.type;Kn(d.pendingProps.value,E.value)||(n!==null?n.push(S):n=[S])}}else if(d===qe.current){if(E=d.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(n!==null?n.push(yc):n=[yc])}d=d.return}n!==null&&gp(s,n,o,c),s.flags|=262144}function ff(n){for(n=n.firstContext;n!==null;){if(!Kn(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function La(n){ka=n,dr=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function cn(n){return r0(ka,n)}function df(n,s){return ka===null&&La(n),r0(n,s)}function r0(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},dr===null){if(n===null)throw Error(r(308));dr=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else dr=dr.next=s;return o}var rx=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},sx=i.unstable_scheduleCallback,ax=i.unstable_NormalPriority,Ut={$$typeof:Q,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function yp(){return{controller:new rx,data:new Map,refCount:0}}function Gu(n){n.refCount--,n.refCount===0&&sx(ax,function(){n.controller.abort()})}var Ku=null,_p=0,Yo=0,Wo=null;function ox(n,s){if(Ku===null){var o=Ku=[];_p=0,Yo=Tg(),Wo={status:"pending",value:void 0,then:function(c){o.push(c)}}}return _p++,s.then(s0,s0),s}function s0(){if(--_p===0&&Ku!==null){Wo!==null&&(Wo.status="fulfilled");var n=Ku;Ku=null,Yo=0,Wo=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function lx(n,s){var o=[],c={status:"pending",value:null,reason:null,then:function(d){o.push(d)}};return n.then(function(){c.status="fulfilled",c.value=s;for(var d=0;d<o.length;d++)(0,o[d])(s)},function(d){for(c.status="rejected",c.reason=d,d=0;d<o.length;d++)(0,o[d])(void 0)}),c}var a0=ne.S;ne.S=function(n,s){qE=an(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&ox(n,s),a0!==null&&a0(n,s)};var Ua=z(null);function vp(){var n=Ua.current;return n!==null?n:ft.pooledCache}function mf(n,s){s===null?ce(Ua,Ua.current):ce(Ua,s.pool)}function o0(){var n=vp();return n===null?null:{parent:Ut._currentValue,pool:n}}var Jo=Error(r(460)),Ep=Error(r(474)),pf=Error(r(542)),gf={then:function(){}};function l0(n){return n=n.status,n==="fulfilled"||n==="rejected"}function u0(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(Wt,Wt),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,h0(n),n;default:if(typeof s.status=="string")s.then(Wt,Wt);else{if(n=ft,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(c){if(s.status==="pending"){var d=s;d.status="fulfilled",d.value=c}},function(c){if(s.status==="pending"){var d=s;d.status="rejected",d.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,h0(n),n}throw Ba=s,Jo}}function za(n){try{var s=n._init;return s(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Ba=o,Jo):o}}var Ba=null;function c0(){if(Ba===null)throw Error(r(459));var n=Ba;return Ba=null,n}function h0(n){if(n===Jo||n===pf)throw Error(r(483))}var Zo=null,Qu=0;function yf(n){var s=Qu;return Qu+=1,Zo===null&&(Zo=[]),u0(Zo,n,s)}function $u(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function _f(n,s){throw s.$$typeof===b?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function f0(n){function s(F,L){if(n){var X=F.deletions;X===null?(F.deletions=[L],F.flags|=16):X.push(L)}}function o(F,L){if(!n)return null;for(;L!==null;)s(F,L),L=L.sibling;return null}function c(F){for(var L=new Map;F!==null;)F.key!==null?L.set(F.key,F):L.set(F.index,F),F=F.sibling;return L}function d(F,L){return F=hr(F,L),F.index=0,F.sibling=null,F}function p(F,L,X){return F.index=X,n?(X=F.alternate,X!==null?(X=X.index,X<L?(F.flags|=67108866,L):X):(F.flags|=67108866,L)):(F.flags|=1048576,L)}function E(F){return n&&F.alternate===null&&(F.flags|=67108866),F}function S(F,L,X,re){return L===null||L.tag!==6?(L=lp(X,F.mode,re),L.return=F,L):(L=d(L,X),L.return=F,L)}function N(F,L,X,re){var Se=X.type;return Se===M?te(F,L,X.props.children,re,X.key):L!==null&&(L.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===R&&za(Se)===L.type)?(L=d(L,X.props),$u(L,X),L.return=F,L):(L=cf(X.type,X.key,X.props,null,F.mode,re),$u(L,X),L.return=F,L)}function Y(F,L,X,re){return L===null||L.tag!==4||L.stateNode.containerInfo!==X.containerInfo||L.stateNode.implementation!==X.implementation?(L=up(X,F.mode,re),L.return=F,L):(L=d(L,X.children||[]),L.return=F,L)}function te(F,L,X,re,Se){return L===null||L.tag!==7?(L=Pa(X,F.mode,re,Se),L.return=F,L):(L=d(L,X),L.return=F,L)}function ae(F,L,X){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=lp(""+L,F.mode,X),L.return=F,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case I:return X=cf(L.type,L.key,L.props,null,F.mode,X),$u(X,L),X.return=F,X;case O:return L=up(L,F.mode,X),L.return=F,L;case R:return L=za(L),ae(F,L,X)}if(Nt(L)||q(L))return L=Pa(L,F.mode,X,null),L.return=F,L;if(typeof L.then=="function")return ae(F,yf(L),X);if(L.$$typeof===Q)return ae(F,df(F,L),X);_f(F,L)}return null}function J(F,L,X,re){var Se=L!==null?L.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return Se!==null?null:S(F,L,""+X,re);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case I:return X.key===Se?N(F,L,X,re):null;case O:return X.key===Se?Y(F,L,X,re):null;case R:return X=za(X),J(F,L,X,re)}if(Nt(X)||q(X))return Se!==null?null:te(F,L,X,re,null);if(typeof X.then=="function")return J(F,L,yf(X),re);if(X.$$typeof===Q)return J(F,L,df(F,X),re);_f(F,X)}return null}function Z(F,L,X,re,Se){if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return F=F.get(X)||null,S(L,F,""+re,Se);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case I:return F=F.get(re.key===null?X:re.key)||null,N(L,F,re,Se);case O:return F=F.get(re.key===null?X:re.key)||null,Y(L,F,re,Se);case R:return re=za(re),Z(F,L,X,re,Se)}if(Nt(re)||q(re))return F=F.get(X)||null,te(L,F,re,Se,null);if(typeof re.then=="function")return Z(F,L,X,yf(re),Se);if(re.$$typeof===Q)return Z(F,L,X,df(L,re),Se);_f(L,re)}return null}function _e(F,L,X,re){for(var Se=null,Xe=null,Te=L,Ve=L=0,Be=null;Te!==null&&Ve<X.length;Ve++){Te.index>Ve?(Be=Te,Te=null):Be=Te.sibling;var Ye=J(F,Te,X[Ve],re);if(Ye===null){Te===null&&(Te=Be);break}n&&Te&&Ye.alternate===null&&s(F,Te),L=p(Ye,L,Ve),Xe===null?Se=Ye:Xe.sibling=Ye,Xe=Ye,Te=Be}if(Ve===X.length)return o(F,Te),He&&fr(F,Ve),Se;if(Te===null){for(;Ve<X.length;Ve++)Te=ae(F,X[Ve],re),Te!==null&&(L=p(Te,L,Ve),Xe===null?Se=Te:Xe.sibling=Te,Xe=Te);return He&&fr(F,Ve),Se}for(Te=c(Te);Ve<X.length;Ve++)Be=Z(Te,F,Ve,X[Ve],re),Be!==null&&(n&&Be.alternate!==null&&Te.delete(Be.key===null?Ve:Be.key),L=p(Be,L,Ve),Xe===null?Se=Be:Xe.sibling=Be,Xe=Be);return n&&Te.forEach(function(Ps){return s(F,Ps)}),He&&fr(F,Ve),Se}function Ie(F,L,X,re){if(X==null)throw Error(r(151));for(var Se=null,Xe=null,Te=L,Ve=L=0,Be=null,Ye=X.next();Te!==null&&!Ye.done;Ve++,Ye=X.next()){Te.index>Ve?(Be=Te,Te=null):Be=Te.sibling;var Ps=J(F,Te,Ye.value,re);if(Ps===null){Te===null&&(Te=Be);break}n&&Te&&Ps.alternate===null&&s(F,Te),L=p(Ps,L,Ve),Xe===null?Se=Ps:Xe.sibling=Ps,Xe=Ps,Te=Be}if(Ye.done)return o(F,Te),He&&fr(F,Ve),Se;if(Te===null){for(;!Ye.done;Ve++,Ye=X.next())Ye=ae(F,Ye.value,re),Ye!==null&&(L=p(Ye,L,Ve),Xe===null?Se=Ye:Xe.sibling=Ye,Xe=Ye);return He&&fr(F,Ve),Se}for(Te=c(Te);!Ye.done;Ve++,Ye=X.next())Ye=Z(Te,F,Ve,Ye.value,re),Ye!==null&&(n&&Ye.alternate!==null&&Te.delete(Ye.key===null?Ve:Ye.key),L=p(Ye,L,Ve),Xe===null?Se=Ye:Xe.sibling=Ye,Xe=Ye);return n&&Te.forEach(function(vC){return s(F,vC)}),He&&fr(F,Ve),Se}function lt(F,L,X,re){if(typeof X=="object"&&X!==null&&X.type===M&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case I:e:{for(var Se=X.key;L!==null;){if(L.key===Se){if(Se=X.type,Se===M){if(L.tag===7){o(F,L.sibling),re=d(L,X.props.children),re.return=F,F=re;break e}}else if(L.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===R&&za(Se)===L.type){o(F,L.sibling),re=d(L,X.props),$u(re,X),re.return=F,F=re;break e}o(F,L);break}else s(F,L);L=L.sibling}X.type===M?(re=Pa(X.props.children,F.mode,re,X.key),re.return=F,F=re):(re=cf(X.type,X.key,X.props,null,F.mode,re),$u(re,X),re.return=F,F=re)}return E(F);case O:e:{for(Se=X.key;L!==null;){if(L.key===Se)if(L.tag===4&&L.stateNode.containerInfo===X.containerInfo&&L.stateNode.implementation===X.implementation){o(F,L.sibling),re=d(L,X.children||[]),re.return=F,F=re;break e}else{o(F,L);break}else s(F,L);L=L.sibling}re=up(X,F.mode,re),re.return=F,F=re}return E(F);case R:return X=za(X),lt(F,L,X,re)}if(Nt(X))return _e(F,L,X,re);if(q(X)){if(Se=q(X),typeof Se!="function")throw Error(r(150));return X=Se.call(X),Ie(F,L,X,re)}if(typeof X.then=="function")return lt(F,L,yf(X),re);if(X.$$typeof===Q)return lt(F,L,df(F,X),re);_f(F,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,L!==null&&L.tag===6?(o(F,L.sibling),re=d(L,X),re.return=F,F=re):(o(F,L),re=lp(X,F.mode,re),re.return=F,F=re),E(F)):o(F,L)}return function(F,L,X,re){try{Qu=0;var Se=lt(F,L,X,re);return Zo=null,Se}catch(Te){if(Te===Jo||Te===pf)throw Te;var Xe=Qn(29,Te,null,F.mode);return Xe.lanes=re,Xe.return=F,Xe}finally{}}}var ja=f0(!0),d0=f0(!1),ys=!1;function Tp(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function bp(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function _s(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function vs(n,s,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(We&2)!==0){var d=c.pending;return d===null?s.next=s:(s.next=d.next,d.next=s),c.pending=s,s=uf(n),Yv(n,null,o),s}return lf(n,c,s,o),uf(n)}function Xu(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var c=s.lanes;c&=n.pendingLanes,o|=c,s.lanes=o,Wr(n,o)}}function Sp(n,s){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var d=null,p=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};p===null?d=p=E:p=p.next=E,o=o.next}while(o!==null);p===null?d=p=s:p=p.next=s}else d=p=s;o={baseState:c.baseState,firstBaseUpdate:d,lastBaseUpdate:p,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var wp=!1;function Yu(){if(wp){var n=Wo;if(n!==null)throw n}}function Wu(n,s,o,c){wp=!1;var d=n.updateQueue;ys=!1;var p=d.firstBaseUpdate,E=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var N=S,Y=N.next;N.next=null,E===null?p=Y:E.next=Y,E=N;var te=n.alternate;te!==null&&(te=te.updateQueue,S=te.lastBaseUpdate,S!==E&&(S===null?te.firstBaseUpdate=Y:S.next=Y,te.lastBaseUpdate=N))}if(p!==null){var ae=d.baseState;E=0,te=Y=N=null,S=p;do{var J=S.lane&-536870913,Z=J!==S.lane;if(Z?(ze&J)===J:(c&J)===J){J!==0&&J===Yo&&(wp=!0),te!==null&&(te=te.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var _e=n,Ie=S;J=s;var lt=o;switch(Ie.tag){case 1:if(_e=Ie.payload,typeof _e=="function"){ae=_e.call(lt,ae,J);break e}ae=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=Ie.payload,J=typeof _e=="function"?_e.call(lt,ae,J):_e,J==null)break e;ae=v({},ae,J);break e;case 2:ys=!0}}J=S.callback,J!==null&&(n.flags|=64,Z&&(n.flags|=8192),Z=d.callbacks,Z===null?d.callbacks=[J]:Z.push(J))}else Z={lane:J,tag:S.tag,payload:S.payload,callback:S.callback,next:null},te===null?(Y=te=Z,N=ae):te=te.next=Z,E|=J;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;Z=S,S=Z.next,Z.next=null,d.lastBaseUpdate=Z,d.shared.pending=null}}while(!0);te===null&&(N=ae),d.baseState=N,d.firstBaseUpdate=Y,d.lastBaseUpdate=te,p===null&&(d.shared.lanes=0),ws|=E,n.lanes=E,n.memoizedState=ae}}function m0(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function p0(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)m0(o[n],s)}var el=z(null),vf=z(0);function g0(n,s){n=Sr,ce(vf,n),ce(el,s),Sr=n|s.baseLanes}function Ap(){ce(vf,Sr),ce(el,el.current)}function Ip(){Sr=vf.current,ie(el),ie(vf)}var $n=z(null),hi=null;function Es(n){var s=n.alternate;ce(Ot,Ot.current&1),ce($n,n),hi===null&&(s===null||el.current!==null||s.memoizedState!==null)&&(hi=n)}function Rp(n){ce(Ot,Ot.current),ce($n,n),hi===null&&(hi=n)}function y0(n){n.tag===22?(ce(Ot,Ot.current),ce($n,n),hi===null&&(hi=n)):Ts()}function Ts(){ce(Ot,Ot.current),ce($n,$n.current)}function Xn(n){ie($n),hi===n&&(hi=null),ie(Ot)}var Ot=z(0);function Ef(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Og(o)||Pg(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var pr=0,Ne=null,at=null,zt=null,Tf=!1,tl=!1,Fa=!1,bf=0,Ju=0,nl=null,ux=0;function Ct(){throw Error(r(321))}function xp(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!Kn(n[o],s[o]))return!1;return!0}function Cp(n,s,o,c,d,p){return pr=p,Ne=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ne.H=n===null||n.memoizedState===null?eE:Hp,Fa=!1,p=o(c,d),Fa=!1,tl&&(p=v0(s,o,c,d)),_0(n),p}function _0(n){ne.H=tc;var s=at!==null&&at.next!==null;if(pr=0,zt=at=Ne=null,Tf=!1,Ju=0,nl=null,s)throw Error(r(300));n===null||Bt||(n=n.dependencies,n!==null&&ff(n)&&(Bt=!0))}function v0(n,s,o,c){Ne=n;var d=0;do{if(tl&&(nl=null),Ju=0,tl=!1,25<=d)throw Error(r(301));if(d+=1,zt=at=null,n.updateQueue!=null){var p=n.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}ne.H=tE,p=s(o,c)}while(tl);return p}function cx(){var n=ne.H,s=n.useState()[0];return s=typeof s.then=="function"?Zu(s):s,n=n.useState()[0],(at!==null?at.memoizedState:null)!==n&&(Ne.flags|=1024),s}function Dp(){var n=bf!==0;return bf=0,n}function Np(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function Vp(n){if(Tf){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Tf=!1}pr=0,zt=at=Ne=null,tl=!1,Ju=bf=0,nl=null}function Cn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?Ne.memoizedState=zt=n:zt=zt.next=n,zt}function Pt(){if(at===null){var n=Ne.alternate;n=n!==null?n.memoizedState:null}else n=at.next;var s=zt===null?Ne.memoizedState:zt.next;if(s!==null)zt=s,at=n;else{if(n===null)throw Ne.alternate===null?Error(r(467)):Error(r(310));at=n,n={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},zt===null?Ne.memoizedState=zt=n:zt=zt.next=n}return zt}function Sf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Zu(n){var s=Ju;return Ju+=1,nl===null&&(nl=[]),n=u0(nl,n,s),s=Ne,(zt===null?s.memoizedState:zt.next)===null&&(s=s.alternate,ne.H=s===null||s.memoizedState===null?eE:Hp),n}function wf(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return Zu(n);if(n.$$typeof===Q)return cn(n)}throw Error(r(438,String(n)))}function Op(n){var s=null,o=Ne.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var c=Ne.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(d){return d.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Sf(),Ne.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),c=0;c<n;c++)o[c]=U;return s.index++,o}function gr(n,s){return typeof s=="function"?s(n):s}function Af(n){var s=Pt();return Pp(s,at,n)}function Pp(n,s,o){var c=n.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=o;var d=n.baseQueue,p=c.pending;if(p!==null){if(d!==null){var E=d.next;d.next=p.next,p.next=E}s.baseQueue=d=p,c.pending=null}if(p=n.baseState,d===null)n.memoizedState=p;else{s=d.next;var S=E=null,N=null,Y=s,te=!1;do{var ae=Y.lane&-536870913;if(ae!==Y.lane?(ze&ae)===ae:(pr&ae)===ae){var J=Y.revertLane;if(J===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ae===Yo&&(te=!0);else if((pr&J)===J){Y=Y.next,J===Yo&&(te=!0);continue}else ae={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},N===null?(S=N=ae,E=p):N=N.next=ae,Ne.lanes|=J,ws|=J;ae=Y.action,Fa&&o(p,ae),p=Y.hasEagerState?Y.eagerState:o(p,ae)}else J={lane:ae,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},N===null?(S=N=J,E=p):N=N.next=J,Ne.lanes|=ae,ws|=ae;Y=Y.next}while(Y!==null&&Y!==s);if(N===null?E=p:N.next=S,!Kn(p,n.memoizedState)&&(Bt=!0,te&&(o=Wo,o!==null)))throw o;n.memoizedState=p,n.baseState=E,n.baseQueue=N,c.lastRenderedState=p}return d===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function Mp(n){var s=Pt(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var c=o.dispatch,d=o.pending,p=s.memoizedState;if(d!==null){o.pending=null;var E=d=d.next;do p=n(p,E.action),E=E.next;while(E!==d);Kn(p,s.memoizedState)||(Bt=!0),s.memoizedState=p,s.baseQueue===null&&(s.baseState=p),o.lastRenderedState=p}return[p,c]}function E0(n,s,o){var c=Ne,d=Pt(),p=He;if(p){if(o===void 0)throw Error(r(407));o=o()}else o=s();var E=!Kn((at||d).memoizedState,o);if(E&&(d.memoizedState=o,Bt=!0),d=d.queue,Up(S0.bind(null,c,d,n),[n]),d.getSnapshot!==s||E||zt!==null&&zt.memoizedState.tag&1){if(c.flags|=2048,il(9,{destroy:void 0},b0.bind(null,c,d,o,s),null),ft===null)throw Error(r(349));p||(pr&127)!==0||T0(c,s,o)}return o}function T0(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=Ne.updateQueue,s===null?(s=Sf(),Ne.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function b0(n,s,o,c){s.value=o,s.getSnapshot=c,w0(s)&&A0(n)}function S0(n,s,o){return o(function(){w0(s)&&A0(n)})}function w0(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!Kn(n,o)}catch{return!0}}function A0(n){var s=Oa(n,2);s!==null&&Ln(s,n,2)}function kp(n){var s=Cn();if(typeof n=="function"){var o=n;if(n=o(),Fa){ni(!0);try{o()}finally{ni(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:n},s}function I0(n,s,o,c){return n.baseState=o,Pp(n,at,typeof c=="function"?c:gr)}function hx(n,s,o,c,d){if(xf(n))throw Error(r(485));if(n=s.action,n!==null){var p={payload:d,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){p.listeners.push(E)}};ne.T!==null?o(!0):p.isTransition=!1,c(p),o=s.pending,o===null?(p.next=s.pending=p,R0(s,p)):(p.next=o.next,s.pending=o.next=p)}}function R0(n,s){var o=s.action,c=s.payload,d=n.state;if(s.isTransition){var p=ne.T,E={};ne.T=E;try{var S=o(d,c),N=ne.S;N!==null&&N(E,S),x0(n,s,S)}catch(Y){Lp(n,s,Y)}finally{p!==null&&E.types!==null&&(p.types=E.types),ne.T=p}}else try{p=o(d,c),x0(n,s,p)}catch(Y){Lp(n,s,Y)}}function x0(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){C0(n,s,c)},function(c){return Lp(n,s,c)}):C0(n,s,o)}function C0(n,s,o){s.status="fulfilled",s.value=o,D0(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,R0(n,o)))}function Lp(n,s,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=o,D0(s),s=s.next;while(s!==c)}n.action=null}function D0(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function N0(n,s){return s}function V0(n,s){if(He){var o=ft.formState;if(o!==null){e:{var c=Ne;if(He){if(pt){t:{for(var d=pt,p=ci;d.nodeType!==8;){if(!p){d=null;break t}if(d=fi(d.nextSibling),d===null){d=null;break t}}p=d.data,d=p==="F!"||p==="F"?d:null}if(d){pt=fi(d.nextSibling),c=d.data==="F!";break e}}ps(c)}c=!1}c&&(s=o[0])}}return o=Cn(),o.memoizedState=o.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:N0,lastRenderedState:s},o.queue=c,o=W0.bind(null,Ne,c),c.dispatch=o,c=kp(!1),p=qp.bind(null,Ne,!1,c.queue),c=Cn(),d={state:s,dispatch:null,action:n,pending:null},c.queue=d,o=hx.bind(null,Ne,d,p,o),d.dispatch=o,c.memoizedState=n,[s,o,!1]}function O0(n){var s=Pt();return P0(s,at,n)}function P0(n,s,o){if(s=Pp(n,s,N0)[0],n=Af(gr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=Zu(s)}catch(E){throw E===Jo?pf:E}else c=s;s=Pt();var d=s.queue,p=d.dispatch;return o!==s.memoizedState&&(Ne.flags|=2048,il(9,{destroy:void 0},fx.bind(null,d,o),null)),[c,p,n]}function fx(n,s){n.action=s}function M0(n){var s=Pt(),o=at;if(o!==null)return P0(s,o,n);Pt(),s=s.memoizedState,o=Pt();var c=o.queue.dispatch;return o.memoizedState=n,[s,c,!1]}function il(n,s,o,c){return n={tag:n,create:o,deps:c,inst:s,next:null},s=Ne.updateQueue,s===null&&(s=Sf(),Ne.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,s.lastEffect=n),n}function k0(){return Pt().memoizedState}function If(n,s,o,c){var d=Cn();Ne.flags|=n,d.memoizedState=il(1|s,{destroy:void 0},o,c===void 0?null:c)}function Rf(n,s,o,c){var d=Pt();c=c===void 0?null:c;var p=d.memoizedState.inst;at!==null&&c!==null&&xp(c,at.memoizedState.deps)?d.memoizedState=il(s,p,o,c):(Ne.flags|=n,d.memoizedState=il(1|s,p,o,c))}function L0(n,s){If(8390656,8,n,s)}function Up(n,s){Rf(2048,8,n,s)}function dx(n){Ne.flags|=4;var s=Ne.updateQueue;if(s===null)s=Sf(),Ne.updateQueue=s,s.events=[n];else{var o=s.events;o===null?s.events=[n]:o.push(n)}}function U0(n){var s=Pt().memoizedState;return dx({ref:s,nextImpl:n}),function(){if((We&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function z0(n,s){return Rf(4,2,n,s)}function B0(n,s){return Rf(4,4,n,s)}function j0(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function F0(n,s,o){o=o!=null?o.concat([n]):null,Rf(4,4,j0.bind(null,s,n),o)}function zp(){}function q0(n,s){var o=Pt();s=s===void 0?null:s;var c=o.memoizedState;return s!==null&&xp(s,c[1])?c[0]:(o.memoizedState=[n,s],n)}function H0(n,s){var o=Pt();s=s===void 0?null:s;var c=o.memoizedState;if(s!==null&&xp(s,c[1]))return c[0];if(c=n(),Fa){ni(!0);try{n()}finally{ni(!1)}}return o.memoizedState=[c,s],c}function Bp(n,s,o){return o===void 0||(pr&1073741824)!==0&&(ze&261930)===0?n.memoizedState=s:(n.memoizedState=o,n=GE(),Ne.lanes|=n,ws|=n,o)}function G0(n,s,o,c){return Kn(o,s)?o:el.current!==null?(n=Bp(n,o,c),Kn(n,s)||(Bt=!0),n):(pr&42)===0||(pr&1073741824)!==0&&(ze&261930)===0?(Bt=!0,n.memoizedState=o):(n=GE(),Ne.lanes|=n,ws|=n,s)}function K0(n,s,o,c,d){var p=me.p;me.p=p!==0&&8>p?p:8;var E=ne.T,S={};ne.T=S,qp(n,!1,s,o);try{var N=d(),Y=ne.S;if(Y!==null&&Y(S,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var te=lx(N,c);ec(n,s,te,Jn(n))}else ec(n,s,c,Jn(n))}catch(ae){ec(n,s,{then:function(){},status:"rejected",reason:ae},Jn())}finally{me.p=p,E!==null&&S.types!==null&&(E.types=S.types),ne.T=E}}function mx(){}function jp(n,s,o,c){if(n.tag!==5)throw Error(r(476));var d=Q0(n).queue;K0(n,d,s,we,o===null?mx:function(){return $0(n),o(c)})}function Q0(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:we,baseState:we,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:we},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gr,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function $0(n){var s=Q0(n);s.next===null&&(s=n.alternate.memoizedState),ec(n,s.next.queue,{},Jn())}function Fp(){return cn(yc)}function X0(){return Pt().memoizedState}function Y0(){return Pt().memoizedState}function px(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=Jn();n=_s(o);var c=vs(s,n,o);c!==null&&(Ln(c,s,o),Xu(c,s,o)),s={cache:yp()},n.payload=s;return}s=s.return}}function gx(n,s,o){var c=Jn();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},xf(n)?J0(s,o):(o=ap(n,s,o,c),o!==null&&(Ln(o,n,c),Z0(o,s,c)))}function W0(n,s,o){var c=Jn();ec(n,s,o,c)}function ec(n,s,o,c){var d={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(xf(n))J0(s,d);else{var p=n.alternate;if(n.lanes===0&&(p===null||p.lanes===0)&&(p=s.lastRenderedReducer,p!==null))try{var E=s.lastRenderedState,S=p(E,o);if(d.hasEagerState=!0,d.eagerState=S,Kn(S,E))return lf(n,s,d,0),ft===null&&of(),!1}catch{}finally{}if(o=ap(n,s,d,c),o!==null)return Ln(o,n,c),Z0(o,s,c),!0}return!1}function qp(n,s,o,c){if(c={lane:2,revertLane:Tg(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},xf(n)){if(s)throw Error(r(479))}else s=ap(n,o,c,2),s!==null&&Ln(s,n,2)}function xf(n){var s=n.alternate;return n===Ne||s!==null&&s===Ne}function J0(n,s){tl=Tf=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function Z0(n,s,o){if((o&4194048)!==0){var c=s.lanes;c&=n.pendingLanes,o|=c,s.lanes=o,Wr(n,o)}}var tc={readContext:cn,use:wf,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useLayoutEffect:Ct,useInsertionEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useSyncExternalStore:Ct,useId:Ct,useHostTransitionStatus:Ct,useFormState:Ct,useActionState:Ct,useOptimistic:Ct,useMemoCache:Ct,useCacheRefresh:Ct};tc.useEffectEvent=Ct;var eE={readContext:cn,use:wf,useCallback:function(n,s){return Cn().memoizedState=[n,s===void 0?null:s],n},useContext:cn,useEffect:L0,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,If(4194308,4,j0.bind(null,s,n),o)},useLayoutEffect:function(n,s){return If(4194308,4,n,s)},useInsertionEffect:function(n,s){If(4,2,n,s)},useMemo:function(n,s){var o=Cn();s=s===void 0?null:s;var c=n();if(Fa){ni(!0);try{n()}finally{ni(!1)}}return o.memoizedState=[c,s],c},useReducer:function(n,s,o){var c=Cn();if(o!==void 0){var d=o(s);if(Fa){ni(!0);try{o(s)}finally{ni(!1)}}}else d=s;return c.memoizedState=c.baseState=d,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:d},c.queue=n,n=n.dispatch=gx.bind(null,Ne,n),[c.memoizedState,n]},useRef:function(n){var s=Cn();return n={current:n},s.memoizedState=n},useState:function(n){n=kp(n);var s=n.queue,o=W0.bind(null,Ne,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:zp,useDeferredValue:function(n,s){var o=Cn();return Bp(o,n,s)},useTransition:function(){var n=kp(!1);return n=K0.bind(null,Ne,n.queue,!0,!1),Cn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var c=Ne,d=Cn();if(He){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),ft===null)throw Error(r(349));(ze&127)!==0||T0(c,s,o)}d.memoizedState=o;var p={value:o,getSnapshot:s};return d.queue=p,L0(S0.bind(null,c,p,n),[n]),c.flags|=2048,il(9,{destroy:void 0},b0.bind(null,c,p,o,s),null),o},useId:function(){var n=Cn(),s=ft.identifierPrefix;if(He){var o=Bi,c=zi;o=(c&~(1<<32-wn(c)-1)).toString(32)+o,s="_"+s+"R_"+o,o=bf++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=ux++,s="_"+s+"r_"+o.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Fp,useFormState:V0,useActionState:V0,useOptimistic:function(n){var s=Cn();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=qp.bind(null,Ne,!0,o),o.dispatch=s,[n,s]},useMemoCache:Op,useCacheRefresh:function(){return Cn().memoizedState=px.bind(null,Ne)},useEffectEvent:function(n){var s=Cn(),o={impl:n};return s.memoizedState=o,function(){if((We&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},Hp={readContext:cn,use:wf,useCallback:q0,useContext:cn,useEffect:Up,useImperativeHandle:F0,useInsertionEffect:z0,useLayoutEffect:B0,useMemo:H0,useReducer:Af,useRef:k0,useState:function(){return Af(gr)},useDebugValue:zp,useDeferredValue:function(n,s){var o=Pt();return G0(o,at.memoizedState,n,s)},useTransition:function(){var n=Af(gr)[0],s=Pt().memoizedState;return[typeof n=="boolean"?n:Zu(n),s]},useSyncExternalStore:E0,useId:X0,useHostTransitionStatus:Fp,useFormState:O0,useActionState:O0,useOptimistic:function(n,s){var o=Pt();return I0(o,at,n,s)},useMemoCache:Op,useCacheRefresh:Y0};Hp.useEffectEvent=U0;var tE={readContext:cn,use:wf,useCallback:q0,useContext:cn,useEffect:Up,useImperativeHandle:F0,useInsertionEffect:z0,useLayoutEffect:B0,useMemo:H0,useReducer:Mp,useRef:k0,useState:function(){return Mp(gr)},useDebugValue:zp,useDeferredValue:function(n,s){var o=Pt();return at===null?Bp(o,n,s):G0(o,at.memoizedState,n,s)},useTransition:function(){var n=Mp(gr)[0],s=Pt().memoizedState;return[typeof n=="boolean"?n:Zu(n),s]},useSyncExternalStore:E0,useId:X0,useHostTransitionStatus:Fp,useFormState:M0,useActionState:M0,useOptimistic:function(n,s){var o=Pt();return at!==null?I0(o,at,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Op,useCacheRefresh:Y0};tE.useEffectEvent=U0;function Gp(n,s,o,c){s=n.memoizedState,o=o(c,s),o=o==null?s:v({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var Kp={enqueueSetState:function(n,s,o){n=n._reactInternals;var c=Jn(),d=_s(c);d.payload=s,o!=null&&(d.callback=o),s=vs(n,d,c),s!==null&&(Ln(s,n,c),Xu(s,n,c))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var c=Jn(),d=_s(c);d.tag=1,d.payload=s,o!=null&&(d.callback=o),s=vs(n,d,c),s!==null&&(Ln(s,n,c),Xu(s,n,c))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=Jn(),c=_s(o);c.tag=2,s!=null&&(c.callback=s),s=vs(n,c,o),s!==null&&(Ln(s,n,o),Xu(s,n,o))}};function nE(n,s,o,c,d,p,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,p,E):s.prototype&&s.prototype.isPureReactComponent?!ju(o,c)||!ju(d,p):!0}function iE(n,s,o,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,c),s.state!==n&&Kp.enqueueReplaceState(s,s.state,null)}function qa(n,s){var o=s;if("ref"in s){o={};for(var c in s)c!=="ref"&&(o[c]=s[c])}if(n=n.defaultProps){o===s&&(o=v({},o));for(var d in n)o[d]===void 0&&(o[d]=n[d])}return o}function rE(n){af(n)}function sE(n){console.error(n)}function aE(n){af(n)}function Cf(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function oE(n,s,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Qp(n,s,o){return o=_s(o),o.tag=3,o.payload={element:null},o.callback=function(){Cf(n,s)},o}function lE(n){return n=_s(n),n.tag=3,n}function uE(n,s,o,c){var d=o.type.getDerivedStateFromError;if(typeof d=="function"){var p=c.value;n.payload=function(){return d(p)},n.callback=function(){oE(s,o,c)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){oE(s,o,c),typeof d!="function"&&(As===null?As=new Set([this]):As.add(this));var S=c.stack;this.componentDidCatch(c.value,{componentStack:S!==null?S:""})})}function yx(n,s,o,c,d){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=o.alternate,s!==null&&Xo(s,o,d,!0),o=$n.current,o!==null){switch(o.tag){case 31:case 13:return hi===null?jf():o.alternate===null&&Dt===0&&(Dt=3),o.flags&=-257,o.flags|=65536,o.lanes=d,c===gf?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([c]):s.add(c),_g(n,c,d)),!1;case 22:return o.flags|=65536,c===gf?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([c]):o.add(c)),_g(n,c,d)),!1}throw Error(r(435,o.tag))}return _g(n,c,d),jf(),!1}if(He)return s=$n.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=d,c!==fp&&(n=Error(r(422),{cause:c}),Hu(oi(n,o)))):(c!==fp&&(s=Error(r(423),{cause:c}),Hu(oi(s,o))),n=n.current.alternate,n.flags|=65536,d&=-d,n.lanes|=d,c=oi(c,o),d=Qp(n.stateNode,c,d),Sp(n,d),Dt!==4&&(Dt=2)),!1;var p=Error(r(520),{cause:c});if(p=oi(p,o),uc===null?uc=[p]:uc.push(p),Dt!==4&&(Dt=2),s===null)return!0;c=oi(c,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=d&-d,o.lanes|=n,n=Qp(o.stateNode,c,n),Sp(o,n),!1;case 1:if(s=o.type,p=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(As===null||!As.has(p))))return o.flags|=65536,d&=-d,o.lanes|=d,d=lE(d),uE(d,n,o,c),Sp(o,d),!1}o=o.return}while(o!==null);return!1}var $p=Error(r(461)),Bt=!1;function hn(n,s,o,c){s.child=n===null?d0(s,null,o,c):ja(s,n.child,o,c)}function cE(n,s,o,c,d){o=o.render;var p=s.ref;if("ref"in c){var E={};for(var S in c)S!=="ref"&&(E[S]=c[S])}else E=c;return La(s),c=Cp(n,s,o,E,p,d),S=Dp(),n!==null&&!Bt?(Np(n,s,d),yr(n,s,d)):(He&&S&&cp(s),s.flags|=1,hn(n,s,c,d),s.child)}function hE(n,s,o,c,d){if(n===null){var p=o.type;return typeof p=="function"&&!op(p)&&p.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=p,fE(n,s,p,c,d)):(n=cf(o.type,null,c,s,s.mode,d),n.ref=s.ref,n.return=s,s.child=n)}if(p=n.child,!ng(n,d)){var E=p.memoizedProps;if(o=o.compare,o=o!==null?o:ju,o(E,c)&&n.ref===s.ref)return yr(n,s,d)}return s.flags|=1,n=hr(p,c),n.ref=s.ref,n.return=s,s.child=n}function fE(n,s,o,c,d){if(n!==null){var p=n.memoizedProps;if(ju(p,c)&&n.ref===s.ref)if(Bt=!1,s.pendingProps=c=p,ng(n,d))(n.flags&131072)!==0&&(Bt=!0);else return s.lanes=n.lanes,yr(n,s,d)}return Xp(n,s,o,c,d)}function dE(n,s,o,c){var d=c.children,p=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(p=p!==null?p.baseLanes|o:o,n!==null){for(c=s.child=n.child,d=0;c!==null;)d=d|c.lanes|c.childLanes,c=c.sibling;c=d&~p}else c=0,s.child=null;return mE(n,s,p,o,c)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&mf(s,p!==null?p.cachePool:null),p!==null?g0(s,p):Ap(),y0(s);else return c=s.lanes=536870912,mE(n,s,p!==null?p.baseLanes|o:o,o,c)}else p!==null?(mf(s,p.cachePool),g0(s,p),Ts(),s.memoizedState=null):(n!==null&&mf(s,null),Ap(),Ts());return hn(n,s,d,o),s.child}function nc(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function mE(n,s,o,c,d){var p=vp();return p=p===null?null:{parent:Ut._currentValue,pool:p},s.memoizedState={baseLanes:o,cachePool:p},n!==null&&mf(s,null),Ap(),y0(s),n!==null&&Xo(n,s,c,!0),s.childLanes=d,null}function Df(n,s){return s=Vf({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function pE(n,s,o){return ja(s,n.child,null,o),n=Df(s,s.pendingProps),n.flags|=2,Xn(s),s.memoizedState=null,n}function _x(n,s,o){var c=s.pendingProps,d=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(He){if(c.mode==="hidden")return n=Df(s,c),s.lanes=536870912,nc(null,n);if(Rp(s),(n=pt)?(n=RT(n,ci),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ds!==null?{id:zi,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},o=Jv(n),o.return=s,s.child=o,un=s,pt=null)):n=null,n===null)throw ps(s);return s.lanes=536870912,null}return Df(s,c)}var p=n.memoizedState;if(p!==null){var E=p.dehydrated;if(Rp(s),d)if(s.flags&256)s.flags&=-257,s=pE(n,s,o);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(r(558));else if(Bt||Xo(n,s,o,!1),d=(o&n.childLanes)!==0,Bt||d){if(c=ft,c!==null&&(E=Jr(c,o),E!==0&&E!==p.retryLane))throw p.retryLane=E,Oa(n,E),Ln(c,n,E),$p;jf(),s=pE(n,s,o)}else n=p.treeContext,pt=fi(E.nextSibling),un=s,He=!0,ms=null,ci=!1,n!==null&&t0(s,n),s=Df(s,c),s.flags|=4096;return s}return n=hr(n.child,{mode:c.mode,children:c.children}),n.ref=s.ref,s.child=n,n.return=s,n}function Nf(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function Xp(n,s,o,c,d){return La(s),o=Cp(n,s,o,c,void 0,d),c=Dp(),n!==null&&!Bt?(Np(n,s,d),yr(n,s,d)):(He&&c&&cp(s),s.flags|=1,hn(n,s,o,d),s.child)}function gE(n,s,o,c,d,p){return La(s),s.updateQueue=null,o=v0(s,c,o,d),_0(n),c=Dp(),n!==null&&!Bt?(Np(n,s,p),yr(n,s,p)):(He&&c&&cp(s),s.flags|=1,hn(n,s,o,p),s.child)}function yE(n,s,o,c,d){if(La(s),s.stateNode===null){var p=Go,E=o.contextType;typeof E=="object"&&E!==null&&(p=cn(E)),p=new o(c,p),s.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Kp,s.stateNode=p,p._reactInternals=s,p=s.stateNode,p.props=c,p.state=s.memoizedState,p.refs={},Tp(s),E=o.contextType,p.context=typeof E=="object"&&E!==null?cn(E):Go,p.state=s.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(Gp(s,o,E,c),p.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(E=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),E!==p.state&&Kp.enqueueReplaceState(p,p.state,null),Wu(s,c,p,d),Yu(),p.state=s.memoizedState),typeof p.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(n===null){p=s.stateNode;var S=s.memoizedProps,N=qa(o,S);p.props=N;var Y=p.context,te=o.contextType;E=Go,typeof te=="object"&&te!==null&&(E=cn(te));var ae=o.getDerivedStateFromProps;te=typeof ae=="function"||typeof p.getSnapshotBeforeUpdate=="function",S=s.pendingProps!==S,te||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(S||Y!==E)&&iE(s,p,c,E),ys=!1;var J=s.memoizedState;p.state=J,Wu(s,c,p,d),Yu(),Y=s.memoizedState,S||J!==Y||ys?(typeof ae=="function"&&(Gp(s,o,ae,c),Y=s.memoizedState),(N=ys||nE(s,o,N,c,J,Y,E))?(te||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(s.flags|=4194308)):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=Y),p.props=c,p.state=Y,p.context=E,c=N):(typeof p.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{p=s.stateNode,bp(n,s),E=s.memoizedProps,te=qa(o,E),p.props=te,ae=s.pendingProps,J=p.context,Y=o.contextType,N=Go,typeof Y=="object"&&Y!==null&&(N=cn(Y)),S=o.getDerivedStateFromProps,(Y=typeof S=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(E!==ae||J!==N)&&iE(s,p,c,N),ys=!1,J=s.memoizedState,p.state=J,Wu(s,c,p,d),Yu();var Z=s.memoizedState;E!==ae||J!==Z||ys||n!==null&&n.dependencies!==null&&ff(n.dependencies)?(typeof S=="function"&&(Gp(s,o,S,c),Z=s.memoizedState),(te=ys||nE(s,o,te,c,J,Z,N)||n!==null&&n.dependencies!==null&&ff(n.dependencies))?(Y||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(c,Z,N),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(c,Z,N)),typeof p.componentDidUpdate=="function"&&(s.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof p.componentDidUpdate!="function"||E===n.memoizedProps&&J===n.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&J===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=Z),p.props=c,p.state=Z,p.context=N,c=te):(typeof p.componentDidUpdate!="function"||E===n.memoizedProps&&J===n.memoizedState||(s.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&J===n.memoizedState||(s.flags|=1024),c=!1)}return p=c,Nf(n,s),c=(s.flags&128)!==0,p||c?(p=s.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:p.render(),s.flags|=1,n!==null&&c?(s.child=ja(s,n.child,null,d),s.child=ja(s,null,o,d)):hn(n,s,o,d),s.memoizedState=p.state,n=s.child):n=yr(n,s,d),n}function _E(n,s,o,c){return Ma(),s.flags|=256,hn(n,s,o,c),s.child}var Yp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wp(n){return{baseLanes:n,cachePool:o0()}}function Jp(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=Wn),n}function vE(n,s,o){var c=s.pendingProps,d=!1,p=(s.flags&128)!==0,E;if((E=p)||(E=n!==null&&n.memoizedState===null?!1:(Ot.current&2)!==0),E&&(d=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,n===null){if(He){if(d?Es(s):Ts(),(n=pt)?(n=RT(n,ci),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ds!==null?{id:zi,overflow:Bi}:null,retryLane:536870912,hydrationErrors:null},o=Jv(n),o.return=s,s.child=o,un=s,pt=null)):n=null,n===null)throw ps(s);return Pg(n)?s.lanes=32:s.lanes=536870912,null}var S=c.children;return c=c.fallback,d?(Ts(),d=s.mode,S=Vf({mode:"hidden",children:S},d),c=Pa(c,d,o,null),S.return=s,c.return=s,S.sibling=c,s.child=S,c=s.child,c.memoizedState=Wp(o),c.childLanes=Jp(n,E,o),s.memoizedState=Yp,nc(null,c)):(Es(s),Zp(s,S))}var N=n.memoizedState;if(N!==null&&(S=N.dehydrated,S!==null)){if(p)s.flags&256?(Es(s),s.flags&=-257,s=eg(n,s,o)):s.memoizedState!==null?(Ts(),s.child=n.child,s.flags|=128,s=null):(Ts(),S=c.fallback,d=s.mode,c=Vf({mode:"visible",children:c.children},d),S=Pa(S,d,o,null),S.flags|=2,c.return=s,S.return=s,c.sibling=S,s.child=c,ja(s,n.child,null,o),c=s.child,c.memoizedState=Wp(o),c.childLanes=Jp(n,E,o),s.memoizedState=Yp,s=nc(null,c));else if(Es(s),Pg(S)){if(E=S.nextSibling&&S.nextSibling.dataset,E)var Y=E.dgst;E=Y,c=Error(r(419)),c.stack="",c.digest=E,Hu({value:c,source:null,stack:null}),s=eg(n,s,o)}else if(Bt||Xo(n,s,o,!1),E=(o&n.childLanes)!==0,Bt||E){if(E=ft,E!==null&&(c=Jr(E,o),c!==0&&c!==N.retryLane))throw N.retryLane=c,Oa(n,c),Ln(E,n,c),$p;Og(S)||jf(),s=eg(n,s,o)}else Og(S)?(s.flags|=192,s.child=n.child,s=null):(n=N.treeContext,pt=fi(S.nextSibling),un=s,He=!0,ms=null,ci=!1,n!==null&&t0(s,n),s=Zp(s,c.children),s.flags|=4096);return s}return d?(Ts(),S=c.fallback,d=s.mode,N=n.child,Y=N.sibling,c=hr(N,{mode:"hidden",children:c.children}),c.subtreeFlags=N.subtreeFlags&65011712,Y!==null?S=hr(Y,S):(S=Pa(S,d,o,null),S.flags|=2),S.return=s,c.return=s,c.sibling=S,s.child=c,nc(null,c),c=s.child,S=n.child.memoizedState,S===null?S=Wp(o):(d=S.cachePool,d!==null?(N=Ut._currentValue,d=d.parent!==N?{parent:N,pool:N}:d):d=o0(),S={baseLanes:S.baseLanes|o,cachePool:d}),c.memoizedState=S,c.childLanes=Jp(n,E,o),s.memoizedState=Yp,nc(n.child,c)):(Es(s),o=n.child,n=o.sibling,o=hr(o,{mode:"visible",children:c.children}),o.return=s,o.sibling=null,n!==null&&(E=s.deletions,E===null?(s.deletions=[n],s.flags|=16):E.push(n)),s.child=o,s.memoizedState=null,o)}function Zp(n,s){return s=Vf({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Vf(n,s){return n=Qn(22,n,null,s),n.lanes=0,n}function eg(n,s,o){return ja(s,n.child,null,o),n=Zp(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function EE(n,s,o){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),pp(n.return,s,o)}function tg(n,s,o,c,d,p){var E=n.memoizedState;E===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:d,treeForkCount:p}:(E.isBackwards=s,E.rendering=null,E.renderingStartTime=0,E.last=c,E.tail=o,E.tailMode=d,E.treeForkCount=p)}function TE(n,s,o){var c=s.pendingProps,d=c.revealOrder,p=c.tail;c=c.children;var E=Ot.current,S=(E&2)!==0;if(S?(E=E&1|2,s.flags|=128):E&=1,ce(Ot,E),hn(n,s,c,o),c=He?qu:0,!S&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&EE(n,o,s);else if(n.tag===19)EE(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(d){case"forwards":for(o=s.child,d=null;o!==null;)n=o.alternate,n!==null&&Ef(n)===null&&(d=o),o=o.sibling;o=d,o===null?(d=s.child,s.child=null):(d=o.sibling,o.sibling=null),tg(s,!1,d,o,p,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,d=s.child,s.child=null;d!==null;){if(n=d.alternate,n!==null&&Ef(n)===null){s.child=d;break}n=d.sibling,d.sibling=o,o=d,d=n}tg(s,!0,o,null,p,c);break;case"together":tg(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function yr(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),ws|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(Xo(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,o=hr(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=hr(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function ng(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&ff(n)))}function vx(n,s,o){switch(s.tag){case 3:sn(s,s.stateNode.containerInfo),gs(s,Ut,n.memoizedState.cache),Ma();break;case 27:case 5:Di(s);break;case 4:sn(s,s.stateNode.containerInfo);break;case 10:gs(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Rp(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(Es(s),s.flags|=128,null):(o&s.child.childLanes)!==0?vE(n,s,o):(Es(s),n=yr(n,s,o),n!==null?n.sibling:null);Es(s);break;case 19:var d=(n.flags&128)!==0;if(c=(o&s.childLanes)!==0,c||(Xo(n,s,o,!1),c=(o&s.childLanes)!==0),d){if(c)return TE(n,s,o);s.flags|=128}if(d=s.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),ce(Ot,Ot.current),c)break;return null;case 22:return s.lanes=0,dE(n,s,o,s.pendingProps);case 24:gs(s,Ut,n.memoizedState.cache)}return yr(n,s,o)}function bE(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)Bt=!0;else{if(!ng(n,o)&&(s.flags&128)===0)return Bt=!1,vx(n,s,o);Bt=(n.flags&131072)!==0}else Bt=!1,He&&(s.flags&1048576)!==0&&e0(s,qu,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(n=za(s.elementType),s.type=n,typeof n=="function")op(n)?(c=qa(n,c),s.tag=1,s=yE(null,s,n,c,o)):(s.tag=0,s=Xp(null,s,n,c,o));else{if(n!=null){var d=n.$$typeof;if(d===ue){s.tag=11,s=cE(null,s,n,c,o);break e}else if(d===x){s.tag=14,s=hE(null,s,n,c,o);break e}}throw s=Ke(n)||n,Error(r(306,s,""))}}return s;case 0:return Xp(n,s,s.type,s.pendingProps,o);case 1:return c=s.type,d=qa(c,s.pendingProps),yE(n,s,c,d,o);case 3:e:{if(sn(s,s.stateNode.containerInfo),n===null)throw Error(r(387));c=s.pendingProps;var p=s.memoizedState;d=p.element,bp(n,s),Wu(s,c,null,o);var E=s.memoizedState;if(c=E.cache,gs(s,Ut,c),c!==p.cache&&gp(s,[Ut],o,!0),Yu(),c=E.element,p.isDehydrated)if(p={element:c,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=p,s.memoizedState=p,s.flags&256){s=_E(n,s,c,o);break e}else if(c!==d){d=oi(Error(r(424)),s),Hu(d),s=_E(n,s,c,o);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(pt=fi(n.firstChild),un=s,He=!0,ms=null,ci=!0,o=d0(s,null,c,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Ma(),c===d){s=yr(n,s,o);break e}hn(n,s,c,o)}s=s.child}return s;case 26:return Nf(n,s),n===null?(o=OT(s.type,null,s.pendingProps,null))?s.memoizedState=o:He||(o=s.type,n=s.pendingProps,c=$f(Oe.current).createElement(o),c[Rt]=s,c[ln]=n,fn(c,o,n),Vt(c),s.stateNode=c):s.memoizedState=OT(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Di(s),n===null&&He&&(c=s.stateNode=DT(s.type,s.pendingProps,Oe.current),un=s,ci=!0,d=pt,Cs(s.type)?(Mg=d,pt=fi(c.firstChild)):pt=d),hn(n,s,s.pendingProps.children,o),Nf(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&He&&((d=c=pt)&&(c=Xx(c,s.type,s.pendingProps,ci),c!==null?(s.stateNode=c,un=s,pt=fi(c.firstChild),ci=!1,d=!0):d=!1),d||ps(s)),Di(s),d=s.type,p=s.pendingProps,E=n!==null?n.memoizedProps:null,c=p.children,Dg(d,p)?c=null:E!==null&&Dg(d,E)&&(s.flags|=32),s.memoizedState!==null&&(d=Cp(n,s,cx,null,null,o),yc._currentValue=d),Nf(n,s),hn(n,s,c,o),s.child;case 6:return n===null&&He&&((n=o=pt)&&(o=Yx(o,s.pendingProps,ci),o!==null?(s.stateNode=o,un=s,pt=null,n=!0):n=!1),n||ps(s)),null;case 13:return vE(n,s,o);case 4:return sn(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=ja(s,null,c,o):hn(n,s,c,o),s.child;case 11:return cE(n,s,s.type,s.pendingProps,o);case 7:return hn(n,s,s.pendingProps,o),s.child;case 8:return hn(n,s,s.pendingProps.children,o),s.child;case 12:return hn(n,s,s.pendingProps.children,o),s.child;case 10:return c=s.pendingProps,gs(s,s.type,c.value),hn(n,s,c.children,o),s.child;case 9:return d=s.type._context,c=s.pendingProps.children,La(s),d=cn(d),c=c(d),s.flags|=1,hn(n,s,c,o),s.child;case 14:return hE(n,s,s.type,s.pendingProps,o);case 15:return fE(n,s,s.type,s.pendingProps,o);case 19:return TE(n,s,o);case 31:return _x(n,s,o);case 22:return dE(n,s,o,s.pendingProps);case 24:return La(s),c=cn(Ut),n===null?(d=vp(),d===null&&(d=ft,p=yp(),d.pooledCache=p,p.refCount++,p!==null&&(d.pooledCacheLanes|=o),d=p),s.memoizedState={parent:c,cache:d},Tp(s),gs(s,Ut,d)):((n.lanes&o)!==0&&(bp(n,s),Wu(s,null,null,o),Yu()),d=n.memoizedState,p=s.memoizedState,d.parent!==c?(d={parent:c,cache:c},s.memoizedState=d,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=d),gs(s,Ut,c)):(c=p.cache,gs(s,Ut,c),c!==d.cache&&gp(s,[Ut],o,!0))),hn(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function _r(n){n.flags|=4}function ig(n,s,o,c,d){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(d&335544128)===d)if(n.stateNode.complete)n.flags|=8192;else if(XE())n.flags|=8192;else throw Ba=gf,Ep}else n.flags&=-16777217}function SE(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!UT(s))if(XE())n.flags|=8192;else throw Ba=gf,Ep}function Of(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?Su():536870912,n.lanes|=s,ol|=s)}function ic(n,s){if(!He)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function gt(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(s)for(var d=n.child;d!==null;)o|=d.lanes|d.childLanes,c|=d.subtreeFlags&65011712,c|=d.flags&65011712,d.return=n,d=d.sibling;else for(d=n.child;d!==null;)o|=d.lanes|d.childLanes,c|=d.subtreeFlags,c|=d.flags,d.return=n,d=d.sibling;return n.subtreeFlags|=c,n.childLanes=o,s}function Ex(n,s,o){var c=s.pendingProps;switch(hp(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(s),null;case 1:return gt(s),null;case 3:return o=s.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),mr(Ut),wt(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&($o(s)?_r(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,dp())),gt(s),null;case 26:var d=s.type,p=s.memoizedState;return n===null?(_r(s),p!==null?(gt(s),SE(s,p)):(gt(s),ig(s,d,null,c,o))):p?p!==n.memoizedState?(_r(s),gt(s),SE(s,p)):(gt(s),s.flags&=-16777217):(n=n.memoizedProps,n!==c&&_r(s),gt(s),ig(s,d,n,c,o)),null;case 27:if(Zi(s),o=Oe.current,d=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&_r(s);else{if(!c){if(s.stateNode===null)throw Error(r(166));return gt(s),null}n=ve.current,$o(s)?n0(s):(n=DT(d,c,o),s.stateNode=n,_r(s))}return gt(s),null;case 5:if(Zi(s),d=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&_r(s);else{if(!c){if(s.stateNode===null)throw Error(r(166));return gt(s),null}if(p=ve.current,$o(s))n0(s);else{var E=$f(Oe.current);switch(p){case 1:p=E.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:p=E.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":p=E.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":p=E.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":p=E.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof c.is=="string"?E.createElement("select",{is:c.is}):E.createElement("select"),c.multiple?p.multiple=!0:c.size&&(p.size=c.size);break;default:p=typeof c.is=="string"?E.createElement(d,{is:c.is}):E.createElement(d)}}p[Rt]=s,p[ln]=c;e:for(E=s.child;E!==null;){if(E.tag===5||E.tag===6)p.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===s)break e;for(;E.sibling===null;){if(E.return===null||E.return===s)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}s.stateNode=p;e:switch(fn(p,d,c),d){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&_r(s)}}return gt(s),ig(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,o),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==c&&_r(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(r(166));if(n=Oe.current,$o(s)){if(n=s.stateNode,o=s.memoizedProps,c=null,d=un,d!==null)switch(d.tag){case 27:case 5:c=d.memoizedProps}n[Rt]=s,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||vT(n.nodeValue,o)),n||ps(s,!0)}else n=$f(n).createTextNode(c),n[Rt]=s,s.stateNode=n}return gt(s),null;case 31:if(o=s.memoizedState,n===null||n.memoizedState!==null){if(c=$o(s),o!==null){if(n===null){if(!c)throw Error(r(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[Rt]=s}else Ma(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;gt(s),n=!1}else o=dp(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return s.flags&256?(Xn(s),s):(Xn(s),null);if((s.flags&128)!==0)throw Error(r(558))}return gt(s),null;case 13:if(c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(d=$o(s),c!==null&&c.dehydrated!==null){if(n===null){if(!d)throw Error(r(318));if(d=s.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(r(317));d[Rt]=s}else Ma(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;gt(s),d=!1}else d=dp(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=d),d=!0;if(!d)return s.flags&256?(Xn(s),s):(Xn(s),null)}return Xn(s),(s.flags&128)!==0?(s.lanes=o,s):(o=c!==null,n=n!==null&&n.memoizedState!==null,o&&(c=s.child,d=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(d=c.alternate.memoizedState.cachePool.pool),p=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(p=c.memoizedState.cachePool.pool),p!==d&&(c.flags|=2048)),o!==n&&o&&(s.child.flags|=8192),Of(s,s.updateQueue),gt(s),null);case 4:return wt(),n===null&&Ag(s.stateNode.containerInfo),gt(s),null;case 10:return mr(s.type),gt(s),null;case 19:if(ie(Ot),c=s.memoizedState,c===null)return gt(s),null;if(d=(s.flags&128)!==0,p=c.rendering,p===null)if(d)ic(c,!1);else{if(Dt!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(p=Ef(n),p!==null){for(s.flags|=128,ic(c,!1),n=p.updateQueue,s.updateQueue=n,Of(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)Wv(o,n),o=o.sibling;return ce(Ot,Ot.current&1|2),He&&fr(s,c.treeForkCount),s.child}n=n.sibling}c.tail!==null&&an()>Uf&&(s.flags|=128,d=!0,ic(c,!1),s.lanes=4194304)}else{if(!d)if(n=Ef(p),n!==null){if(s.flags|=128,d=!0,n=n.updateQueue,s.updateQueue=n,Of(s,n),ic(c,!0),c.tail===null&&c.tailMode==="hidden"&&!p.alternate&&!He)return gt(s),null}else 2*an()-c.renderingStartTime>Uf&&o!==536870912&&(s.flags|=128,d=!0,ic(c,!1),s.lanes=4194304);c.isBackwards?(p.sibling=s.child,s.child=p):(n=c.last,n!==null?n.sibling=p:s.child=p,c.last=p)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=an(),n.sibling=null,o=Ot.current,ce(Ot,d?o&1|2:o&1),He&&fr(s,c.treeForkCount),n):(gt(s),null);case 22:case 23:return Xn(s),Ip(),c=s.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(o&536870912)!==0&&(s.flags&128)===0&&(gt(s),s.subtreeFlags&6&&(s.flags|=8192)):gt(s),o=s.updateQueue,o!==null&&Of(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==o&&(s.flags|=2048),n!==null&&ie(Ua),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),mr(Ut),gt(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function Tx(n,s){switch(hp(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return mr(Ut),wt(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return Zi(s),null;case 31:if(s.memoizedState!==null){if(Xn(s),s.alternate===null)throw Error(r(340));Ma()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(Xn(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Ma()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return ie(Ot),null;case 4:return wt(),null;case 10:return mr(s.type),null;case 22:case 23:return Xn(s),Ip(),n!==null&&ie(Ua),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return mr(Ut),null;case 25:return null;default:return null}}function wE(n,s){switch(hp(s),s.tag){case 3:mr(Ut),wt();break;case 26:case 27:case 5:Zi(s);break;case 4:wt();break;case 31:s.memoizedState!==null&&Xn(s);break;case 13:Xn(s);break;case 19:ie(Ot);break;case 10:mr(s.type);break;case 22:case 23:Xn(s),Ip(),n!==null&&ie(Ua);break;case 24:mr(Ut)}}function rc(n,s){try{var o=s.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var d=c.next;o=d;do{if((o.tag&n)===n){c=void 0;var p=o.create,E=o.inst;c=p(),E.destroy=c}o=o.next}while(o!==d)}}catch(S){nt(s,s.return,S)}}function bs(n,s,o){try{var c=s.updateQueue,d=c!==null?c.lastEffect:null;if(d!==null){var p=d.next;c=p;do{if((c.tag&n)===n){var E=c.inst,S=E.destroy;if(S!==void 0){E.destroy=void 0,d=s;var N=o,Y=S;try{Y()}catch(te){nt(d,N,te)}}}c=c.next}while(c!==p)}}catch(te){nt(s,s.return,te)}}function AE(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{p0(s,o)}catch(c){nt(n,n.return,c)}}}function IE(n,s,o){o.props=qa(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){nt(n,s,c)}}function sc(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(d){nt(n,s,d)}}function ji(n,s){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(d){nt(n,s,d)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(d){nt(n,s,d)}else o.current=null}function RE(n){var s=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(d){nt(n,n.return,d)}}function rg(n,s,o){try{var c=n.stateNode;qx(c,n.type,o,s),c[ln]=s}catch(d){nt(n,n.return,d)}}function xE(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Cs(n.type)||n.tag===4}function sg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||xE(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Cs(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ag(n,s,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Wt));else if(c!==4&&(c===27&&Cs(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(ag(n,s,o),n=n.sibling;n!==null;)ag(n,s,o),n=n.sibling}function Pf(n,s,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(c!==4&&(c===27&&Cs(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Pf(n,s,o),n=n.sibling;n!==null;)Pf(n,s,o),n=n.sibling}function CE(n){var s=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,d=s.attributes;d.length;)s.removeAttributeNode(d[0]);fn(s,c,o),s[Rt]=n,s[ln]=o}catch(p){nt(n,n.return,p)}}var vr=!1,jt=!1,og=!1,DE=typeof WeakSet=="function"?WeakSet:Set,en=null;function bx(n,s){if(n=n.containerInfo,xg=td,n=Fv(n),ep(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var d=c.anchorOffset,p=c.focusNode;c=c.focusOffset;try{o.nodeType,p.nodeType}catch{o=null;break e}var E=0,S=-1,N=-1,Y=0,te=0,ae=n,J=null;t:for(;;){for(var Z;ae!==o||d!==0&&ae.nodeType!==3||(S=E+d),ae!==p||c!==0&&ae.nodeType!==3||(N=E+c),ae.nodeType===3&&(E+=ae.nodeValue.length),(Z=ae.firstChild)!==null;)J=ae,ae=Z;for(;;){if(ae===n)break t;if(J===o&&++Y===d&&(S=E),J===p&&++te===c&&(N=E),(Z=ae.nextSibling)!==null)break;ae=J,J=ae.parentNode}ae=Z}o=S===-1||N===-1?null:{start:S,end:N}}else o=null}o=o||{start:0,end:0}}else o=null;for(Cg={focusedElem:n,selectionRange:o},td=!1,en=s;en!==null;)if(s=en,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,en=n;else for(;en!==null;){switch(s=en,p=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)d=n[o],d.ref.impl=d.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&p!==null){n=void 0,o=s,d=p.memoizedProps,p=p.memoizedState,c=o.stateNode;try{var _e=qa(o.type,d);n=c.getSnapshotBeforeUpdate(_e,p),c.__reactInternalSnapshotBeforeUpdate=n}catch(Ie){nt(o,o.return,Ie)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)Vg(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Vg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,en=n;break}en=s.return}}function NE(n,s,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Tr(n,o),c&4&&rc(5,o);break;case 1:if(Tr(n,o),c&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(E){nt(o,o.return,E)}else{var d=qa(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(d,s,n.__reactInternalSnapshotBeforeUpdate)}catch(E){nt(o,o.return,E)}}c&64&&AE(o),c&512&&sc(o,o.return);break;case 3:if(Tr(n,o),c&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{p0(n,s)}catch(E){nt(o,o.return,E)}}break;case 27:s===null&&c&4&&CE(o);case 26:case 5:Tr(n,o),s===null&&c&4&&RE(o),c&512&&sc(o,o.return);break;case 12:Tr(n,o);break;case 31:Tr(n,o),c&4&&PE(n,o);break;case 13:Tr(n,o),c&4&&ME(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=Nx.bind(null,o),Wx(n,o))));break;case 22:if(c=o.memoizedState!==null||vr,!c){s=s!==null&&s.memoizedState!==null||jt,d=vr;var p=jt;vr=c,(jt=s)&&!p?br(n,o,(o.subtreeFlags&8772)!==0):Tr(n,o),vr=d,jt=p}break;case 30:break;default:Tr(n,o)}}function VE(n){var s=n.alternate;s!==null&&(n.alternate=null,VE(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Ta(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var vt=null,On=!1;function Er(n,s,o){for(o=o.child;o!==null;)OE(n,s,o),o=o.sibling}function OE(n,s,o){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(Qr,o)}catch{}switch(o.tag){case 26:jt||ji(o,s),Er(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:jt||ji(o,s);var c=vt,d=On;Cs(o.type)&&(vt=o.stateNode,On=!1),Er(n,s,o),mc(o.stateNode),vt=c,On=d;break;case 5:jt||ji(o,s);case 6:if(c=vt,d=On,vt=null,Er(n,s,o),vt=c,On=d,vt!==null)if(On)try{(vt.nodeType===9?vt.body:vt.nodeName==="HTML"?vt.ownerDocument.body:vt).removeChild(o.stateNode)}catch(p){nt(o,s,p)}else try{vt.removeChild(o.stateNode)}catch(p){nt(o,s,p)}break;case 18:vt!==null&&(On?(n=vt,AT(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),pl(n)):AT(vt,o.stateNode));break;case 4:c=vt,d=On,vt=o.stateNode.containerInfo,On=!0,Er(n,s,o),vt=c,On=d;break;case 0:case 11:case 14:case 15:bs(2,o,s),jt||bs(4,o,s),Er(n,s,o);break;case 1:jt||(ji(o,s),c=o.stateNode,typeof c.componentWillUnmount=="function"&&IE(o,s,c)),Er(n,s,o);break;case 21:Er(n,s,o);break;case 22:jt=(c=jt)||o.memoizedState!==null,Er(n,s,o),jt=c;break;default:Er(n,s,o)}}function PE(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{pl(n)}catch(o){nt(s,s.return,o)}}}function ME(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{pl(n)}catch(o){nt(s,s.return,o)}}function Sx(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new DE),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new DE),s;default:throw Error(r(435,n.tag))}}function Mf(n,s){var o=Sx(n);s.forEach(function(c){if(!o.has(c)){o.add(c);var d=Vx.bind(null,n,c);c.then(d,d)}})}function Pn(n,s){var o=s.deletions;if(o!==null)for(var c=0;c<o.length;c++){var d=o[c],p=n,E=s,S=E;e:for(;S!==null;){switch(S.tag){case 27:if(Cs(S.type)){vt=S.stateNode,On=!1;break e}break;case 5:vt=S.stateNode,On=!1;break e;case 3:case 4:vt=S.stateNode.containerInfo,On=!0;break e}S=S.return}if(vt===null)throw Error(r(160));OE(p,E,d),vt=null,On=!1,p=d.alternate,p!==null&&(p.return=null),d.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)kE(s,n),s=s.sibling}var bi=null;function kE(n,s){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Pn(s,n),Mn(n),c&4&&(bs(3,n,n.return),rc(3,n),bs(5,n,n.return));break;case 1:Pn(s,n),Mn(n),c&512&&(jt||o===null||ji(o,o.return)),c&64&&vr&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var d=bi;if(Pn(s,n),Mn(n),c&512&&(jt||o===null||ji(o,o.return)),c&4){var p=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,d=d.ownerDocument||d;t:switch(c){case"title":p=d.getElementsByTagName("title")[0],(!p||p[ir]||p[Rt]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=d.createElement(c),d.head.insertBefore(p,d.querySelector("head > title"))),fn(p,c,o),p[Rt]=n,Vt(p),c=p;break e;case"link":var E=kT("link","href",d).get(c+(o.href||""));if(E){for(var S=0;S<E.length;S++)if(p=E[S],p.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&p.getAttribute("rel")===(o.rel==null?null:o.rel)&&p.getAttribute("title")===(o.title==null?null:o.title)&&p.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(S,1);break t}}p=d.createElement(c),fn(p,c,o),d.head.appendChild(p);break;case"meta":if(E=kT("meta","content",d).get(c+(o.content||""))){for(S=0;S<E.length;S++)if(p=E[S],p.getAttribute("content")===(o.content==null?null:""+o.content)&&p.getAttribute("name")===(o.name==null?null:o.name)&&p.getAttribute("property")===(o.property==null?null:o.property)&&p.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&p.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(S,1);break t}}p=d.createElement(c),fn(p,c,o),d.head.appendChild(p);break;default:throw Error(r(468,c))}p[Rt]=n,Vt(p),c=p}n.stateNode=c}else LT(d,n.type,n.stateNode);else n.stateNode=MT(d,c,n.memoizedProps);else p!==c?(p===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):p.count--,c===null?LT(d,n.type,n.stateNode):MT(d,c,n.memoizedProps)):c===null&&n.stateNode!==null&&rg(n,n.memoizedProps,o.memoizedProps)}break;case 27:Pn(s,n),Mn(n),c&512&&(jt||o===null||ji(o,o.return)),o!==null&&c&4&&rg(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Pn(s,n),Mn(n),c&512&&(jt||o===null||ji(o,o.return)),n.flags&32){d=n.stateNode;try{si(d,"")}catch(_e){nt(n,n.return,_e)}}c&4&&n.stateNode!=null&&(d=n.memoizedProps,rg(n,d,o!==null?o.memoizedProps:d)),c&1024&&(og=!0);break;case 6:if(Pn(s,n),Mn(n),c&4){if(n.stateNode===null)throw Error(r(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(_e){nt(n,n.return,_e)}}break;case 3:if(Wf=null,d=bi,bi=Xf(s.containerInfo),Pn(s,n),bi=d,Mn(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{pl(s.containerInfo)}catch(_e){nt(n,n.return,_e)}og&&(og=!1,LE(n));break;case 4:c=bi,bi=Xf(n.stateNode.containerInfo),Pn(s,n),Mn(n),bi=c;break;case 12:Pn(s,n),Mn(n);break;case 31:Pn(s,n),Mn(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Mf(n,c)));break;case 13:Pn(s,n),Mn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Lf=an()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Mf(n,c)));break;case 22:d=n.memoizedState!==null;var N=o!==null&&o.memoizedState!==null,Y=vr,te=jt;if(vr=Y||d,jt=te||N,Pn(s,n),jt=te,vr=Y,Mn(n),c&8192)e:for(s=n.stateNode,s._visibility=d?s._visibility&-2:s._visibility|1,d&&(o===null||N||vr||jt||Ha(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){N=o=s;try{if(p=N.stateNode,d)E=p.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{S=N.stateNode;var ae=N.memoizedProps.style,J=ae!=null&&ae.hasOwnProperty("display")?ae.display:null;S.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(_e){nt(N,N.return,_e)}}}else if(s.tag===6){if(o===null){N=s;try{N.stateNode.nodeValue=d?"":N.memoizedProps}catch(_e){nt(N,N.return,_e)}}}else if(s.tag===18){if(o===null){N=s;try{var Z=N.stateNode;d?IT(Z,!0):IT(N.stateNode,!1)}catch(_e){nt(N,N.return,_e)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,Mf(n,o))));break;case 19:Pn(s,n),Mn(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Mf(n,c)));break;case 30:break;case 21:break;default:Pn(s,n),Mn(n)}}function Mn(n){var s=n.flags;if(s&2){try{for(var o,c=n.return;c!==null;){if(xE(c)){o=c;break}c=c.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var d=o.stateNode,p=sg(n);Pf(n,p,d);break;case 5:var E=o.stateNode;o.flags&32&&(si(E,""),o.flags&=-33);var S=sg(n);Pf(n,S,E);break;case 3:case 4:var N=o.stateNode.containerInfo,Y=sg(n);ag(n,Y,N);break;default:throw Error(r(161))}}catch(te){nt(n,n.return,te)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function LE(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;LE(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Tr(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)NE(n,s.alternate,s),s=s.sibling}function Ha(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:bs(4,s,s.return),Ha(s);break;case 1:ji(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&IE(s,s.return,o),Ha(s);break;case 27:mc(s.stateNode);case 26:case 5:ji(s,s.return),Ha(s);break;case 22:s.memoizedState===null&&Ha(s);break;case 30:Ha(s);break;default:Ha(s)}n=n.sibling}}function br(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,d=n,p=s,E=p.flags;switch(p.tag){case 0:case 11:case 15:br(d,p,o),rc(4,p);break;case 1:if(br(d,p,o),c=p,d=c.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(Y){nt(c,c.return,Y)}if(c=p,d=c.updateQueue,d!==null){var S=c.stateNode;try{var N=d.shared.hiddenCallbacks;if(N!==null)for(d.shared.hiddenCallbacks=null,d=0;d<N.length;d++)m0(N[d],S)}catch(Y){nt(c,c.return,Y)}}o&&E&64&&AE(p),sc(p,p.return);break;case 27:CE(p);case 26:case 5:br(d,p,o),o&&c===null&&E&4&&RE(p),sc(p,p.return);break;case 12:br(d,p,o);break;case 31:br(d,p,o),o&&E&4&&PE(d,p);break;case 13:br(d,p,o),o&&E&4&&ME(d,p);break;case 22:p.memoizedState===null&&br(d,p,o),sc(p,p.return);break;case 30:break;default:br(d,p,o)}s=s.sibling}}function lg(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Gu(o))}function ug(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Gu(n))}function Si(n,s,o,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)UE(n,s,o,c),s=s.sibling}function UE(n,s,o,c){var d=s.flags;switch(s.tag){case 0:case 11:case 15:Si(n,s,o,c),d&2048&&rc(9,s);break;case 1:Si(n,s,o,c);break;case 3:Si(n,s,o,c),d&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Gu(n)));break;case 12:if(d&2048){Si(n,s,o,c),n=s.stateNode;try{var p=s.memoizedProps,E=p.id,S=p.onPostCommit;typeof S=="function"&&S(E,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(N){nt(s,s.return,N)}}else Si(n,s,o,c);break;case 31:Si(n,s,o,c);break;case 13:Si(n,s,o,c);break;case 23:break;case 22:p=s.stateNode,E=s.alternate,s.memoizedState!==null?p._visibility&2?Si(n,s,o,c):ac(n,s):p._visibility&2?Si(n,s,o,c):(p._visibility|=2,rl(n,s,o,c,(s.subtreeFlags&10256)!==0||!1)),d&2048&&lg(E,s);break;case 24:Si(n,s,o,c),d&2048&&ug(s.alternate,s);break;default:Si(n,s,o,c)}}function rl(n,s,o,c,d){for(d=d&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var p=n,E=s,S=o,N=c,Y=E.flags;switch(E.tag){case 0:case 11:case 15:rl(p,E,S,N,d),rc(8,E);break;case 23:break;case 22:var te=E.stateNode;E.memoizedState!==null?te._visibility&2?rl(p,E,S,N,d):ac(p,E):(te._visibility|=2,rl(p,E,S,N,d)),d&&Y&2048&&lg(E.alternate,E);break;case 24:rl(p,E,S,N,d),d&&Y&2048&&ug(E.alternate,E);break;default:rl(p,E,S,N,d)}s=s.sibling}}function ac(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,c=s,d=c.flags;switch(c.tag){case 22:ac(o,c),d&2048&&lg(c.alternate,c);break;case 24:ac(o,c),d&2048&&ug(c.alternate,c);break;default:ac(o,c)}s=s.sibling}}var oc=8192;function sl(n,s,o){if(n.subtreeFlags&oc)for(n=n.child;n!==null;)zE(n,s,o),n=n.sibling}function zE(n,s,o){switch(n.tag){case 26:sl(n,s,o),n.flags&oc&&n.memoizedState!==null&&uC(o,bi,n.memoizedState,n.memoizedProps);break;case 5:sl(n,s,o);break;case 3:case 4:var c=bi;bi=Xf(n.stateNode.containerInfo),sl(n,s,o),bi=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=oc,oc=16777216,sl(n,s,o),oc=c):sl(n,s,o));break;default:sl(n,s,o)}}function BE(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function lc(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];en=c,FE(c,n)}BE(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)jE(n),n=n.sibling}function jE(n){switch(n.tag){case 0:case 11:case 15:lc(n),n.flags&2048&&bs(9,n,n.return);break;case 3:lc(n);break;case 12:lc(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,kf(n)):lc(n);break;default:lc(n)}}function kf(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];en=c,FE(c,n)}BE(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:bs(8,s,s.return),kf(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,kf(s));break;default:kf(s)}n=n.sibling}}function FE(n,s){for(;en!==null;){var o=en;switch(o.tag){case 0:case 11:case 15:bs(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Gu(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,en=c;else e:for(o=n;en!==null;){c=en;var d=c.sibling,p=c.return;if(VE(c),c===o){en=null;break e}if(d!==null){d.return=p,en=d;break e}en=p}}}var wx={getCacheForType:function(n){var s=cn(Ut),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o},cacheSignal:function(){return cn(Ut).controller.signal}},Ax=typeof WeakMap=="function"?WeakMap:Map,We=0,ft=null,Le=null,ze=0,tt=0,Yn=null,Ss=!1,al=!1,cg=!1,Sr=0,Dt=0,ws=0,Ga=0,hg=0,Wn=0,ol=0,uc=null,kn=null,fg=!1,Lf=0,qE=0,Uf=1/0,zf=null,As=null,Gt=0,Is=null,ll=null,wr=0,dg=0,mg=null,HE=null,cc=0,pg=null;function Jn(){return(We&2)!==0&&ze!==0?ze&-ze:ne.T!==null?Tg():nr()}function GE(){if(Wn===0)if((ze&536870912)===0||He){var n=Ni;Ni<<=1,(Ni&3932160)===0&&(Ni=262144),Wn=n}else Wn=536870912;return n=$n.current,n!==null&&(n.flags|=32),Wn}function Ln(n,s,o){(n===ft&&(tt===2||tt===9)||n.cancelPendingCommit!==null)&&(ul(n,0),Rs(n,ze,Wn,!1)),Yr(n,o),((We&2)===0||n!==ft)&&(n===ft&&((We&2)===0&&(Ga|=o),Dt===4&&Rs(n,ze,Wn,!1)),Fi(n))}function KE(n,s,o){if((We&6)!==0)throw Error(r(327));var c=!o&&(s&127)===0&&(s&n.expiredLanes)===0||Xr(n,s),d=c?xx(n,s):yg(n,s,!0),p=c;do{if(d===0){al&&!c&&Rs(n,s,0,!1);break}else{if(o=n.current.alternate,p&&!Ix(o)){d=yg(n,s,!1),p=!1;continue}if(d===2){if(p=s,n.errorRecoveryDisabledLanes&p)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;e:{var S=n;d=uc;var N=S.current.memoizedState.isDehydrated;if(N&&(ul(S,E).flags|=256),E=yg(S,E,!1),E!==2){if(cg&&!N){S.errorRecoveryDisabledLanes|=p,Ga|=p,d=4;break e}p=kn,kn=d,p!==null&&(kn===null?kn=p:kn.push.apply(kn,p))}d=E}if(p=!1,d!==2)continue}}if(d===1){ul(n,0),Rs(n,s,0,!0);break}e:{switch(c=n,p=d,p){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Rs(c,s,Wn,!Ss);break e;case 2:kn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(d=Lf+300-an(),10<d)){if(Rs(c,s,Wn,!Ss),ii(c,0,!0)!==0)break e;wr=s,c.timeoutHandle=ST(QE.bind(null,c,o,kn,zf,fg,s,Wn,Ga,ol,Ss,p,"Throttled",-0,0),d);break e}QE(c,o,kn,zf,fg,s,Wn,Ga,ol,Ss,p,null,-0,0)}}break}while(!0);Fi(n)}function QE(n,s,o,c,d,p,E,S,N,Y,te,ae,J,Z){if(n.timeoutHandle=-1,ae=s.subtreeFlags,ae&8192||(ae&16785408)===16785408){ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Wt},zE(s,p,ae);var _e=(p&62914560)===p?Lf-an():(p&4194048)===p?qE-an():0;if(_e=cC(ae,_e),_e!==null){wr=p,n.cancelPendingCommit=_e(tT.bind(null,n,s,p,o,c,d,E,S,N,te,ae,null,J,Z)),Rs(n,p,E,!Y);return}}tT(n,s,p,o,c,d,E,S,N)}function Ix(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var d=o[c],p=d.getSnapshot;d=d.value;try{if(!Kn(p(),d))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Rs(n,s,o,c){s&=~hg,s&=~Ga,n.suspendedLanes|=s,n.pingedLanes&=~s,c&&(n.warmLanes|=s),c=n.expirationTimes;for(var d=s;0<d;){var p=31-wn(d),E=1<<p;c[p]=-1,d&=~E}o!==0&&wu(n,o,s)}function Bf(){return(We&6)===0?(hc(0),!1):!0}function gg(){if(Le!==null){if(tt===0)var n=Le.return;else n=Le,dr=ka=null,Vp(n),Zo=null,Qu=0,n=Le;for(;n!==null;)wE(n.alternate,n),n=n.return;Le=null}}function ul(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,Kx(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),wr=0,gg(),ft=n,Le=o=hr(n.current,null),ze=s,tt=0,Yn=null,Ss=!1,al=Xr(n,s),cg=!1,ol=Wn=hg=Ga=ws=Dt=0,kn=uc=null,fg=!1,(s&8)!==0&&(s|=s&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=s;0<c;){var d=31-wn(c),p=1<<d;s|=n[d],c&=~p}return Sr=s,of(),o}function $E(n,s){Ne=null,ne.H=tc,s===Jo||s===pf?(s=c0(),tt=3):s===Ep?(s=c0(),tt=4):tt=s===$p?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Yn=s,Le===null&&(Dt=1,Cf(n,oi(s,n.current)))}function XE(){var n=$n.current;return n===null?!0:(ze&4194048)===ze?hi===null:(ze&62914560)===ze||(ze&536870912)!==0?n===hi:!1}function YE(){var n=ne.H;return ne.H=tc,n===null?tc:n}function WE(){var n=ne.A;return ne.A=wx,n}function jf(){Dt=4,Ss||(ze&4194048)!==ze&&$n.current!==null||(al=!0),(ws&134217727)===0&&(Ga&134217727)===0||ft===null||Rs(ft,ze,Wn,!1)}function yg(n,s,o){var c=We;We|=2;var d=YE(),p=WE();(ft!==n||ze!==s)&&(zf=null,ul(n,s)),s=!1;var E=Dt;e:do try{if(tt!==0&&Le!==null){var S=Le,N=Yn;switch(tt){case 8:gg(),E=6;break e;case 3:case 2:case 9:case 6:$n.current===null&&(s=!0);var Y=tt;if(tt=0,Yn=null,cl(n,S,N,Y),o&&al){E=0;break e}break;default:Y=tt,tt=0,Yn=null,cl(n,S,N,Y)}}Rx(),E=Dt;break}catch(te){$E(n,te)}while(!0);return s&&n.shellSuspendCounter++,dr=ka=null,We=c,ne.H=d,ne.A=p,Le===null&&(ft=null,ze=0,of()),E}function Rx(){for(;Le!==null;)JE(Le)}function xx(n,s){var o=We;We|=2;var c=YE(),d=WE();ft!==n||ze!==s?(zf=null,Uf=an()+500,ul(n,s)):al=Xr(n,s);e:do try{if(tt!==0&&Le!==null){s=Le;var p=Yn;t:switch(tt){case 1:tt=0,Yn=null,cl(n,s,p,1);break;case 2:case 9:if(l0(p)){tt=0,Yn=null,ZE(s);break}s=function(){tt!==2&&tt!==9||ft!==n||(tt=7),Fi(n)},p.then(s,s);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:l0(p)?(tt=0,Yn=null,ZE(s)):(tt=0,Yn=null,cl(n,s,p,7));break;case 5:var E=null;switch(Le.tag){case 26:E=Le.memoizedState;case 5:case 27:var S=Le;if(E?UT(E):S.stateNode.complete){tt=0,Yn=null;var N=S.sibling;if(N!==null)Le=N;else{var Y=S.return;Y!==null?(Le=Y,Ff(Y)):Le=null}break t}}tt=0,Yn=null,cl(n,s,p,5);break;case 6:tt=0,Yn=null,cl(n,s,p,6);break;case 8:gg(),Dt=6;break e;default:throw Error(r(462))}}Cx();break}catch(te){$E(n,te)}while(!0);return dr=ka=null,ne.H=c,ne.A=d,We=o,Le!==null?0:(ft=null,ze=0,of(),Dt)}function Cx(){for(;Le!==null&&!qm();)JE(Le)}function JE(n){var s=bE(n.alternate,n,Sr);n.memoizedProps=n.pendingProps,s===null?Ff(n):Le=s}function ZE(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=gE(o,s,s.pendingProps,s.type,void 0,ze);break;case 11:s=gE(o,s,s.pendingProps,s.type.render,s.ref,ze);break;case 5:Vp(s);default:wE(o,s),s=Le=Wv(s,Sr),s=bE(o,s,Sr)}n.memoizedProps=n.pendingProps,s===null?Ff(n):Le=s}function cl(n,s,o,c){dr=ka=null,Vp(s),Zo=null,Qu=0;var d=s.return;try{if(yx(n,d,s,o,ze)){Dt=1,Cf(n,oi(o,n.current)),Le=null;return}}catch(p){if(d!==null)throw Le=d,p;Dt=1,Cf(n,oi(o,n.current)),Le=null;return}s.flags&32768?(He||c===1?n=!0:al||(ze&536870912)!==0?n=!1:(Ss=n=!0,(c===2||c===9||c===3||c===6)&&(c=$n.current,c!==null&&c.tag===13&&(c.flags|=16384))),eT(s,n)):Ff(s)}function Ff(n){var s=n;do{if((s.flags&32768)!==0){eT(s,Ss);return}n=s.return;var o=Ex(s.alternate,s,Sr);if(o!==null){Le=o;return}if(s=s.sibling,s!==null){Le=s;return}Le=s=n}while(s!==null);Dt===0&&(Dt=5)}function eT(n,s){do{var o=Tx(n.alternate,n);if(o!==null){o.flags&=32767,Le=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){Le=n;return}Le=n=o}while(n!==null);Dt=6,Le=null}function tT(n,s,o,c,d,p,E,S,N){n.cancelPendingCommit=null;do qf();while(Gt!==0);if((We&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(p=s.lanes|s.childLanes,p|=sp,on(n,o,p,E,S,N),n===ft&&(Le=ft=null,ze=0),ll=s,Is=n,wr=o,dg=p,mg=d,HE=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,Ox(er,function(){return aT(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=ne.T,ne.T=null,d=me.p,me.p=2,E=We,We|=4;try{bx(n,s,o)}finally{We=E,me.p=d,ne.T=c}}Gt=1,nT(),iT(),rT()}}function nT(){if(Gt===1){Gt=0;var n=Is,s=ll,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=ne.T,ne.T=null;var c=me.p;me.p=2;var d=We;We|=4;try{kE(s,n);var p=Cg,E=Fv(n.containerInfo),S=p.focusedElem,N=p.selectionRange;if(E!==S&&S&&S.ownerDocument&&jv(S.ownerDocument.documentElement,S)){if(N!==null&&ep(S)){var Y=N.start,te=N.end;if(te===void 0&&(te=Y),"selectionStart"in S)S.selectionStart=Y,S.selectionEnd=Math.min(te,S.value.length);else{var ae=S.ownerDocument||document,J=ae&&ae.defaultView||window;if(J.getSelection){var Z=J.getSelection(),_e=S.textContent.length,Ie=Math.min(N.start,_e),lt=N.end===void 0?Ie:Math.min(N.end,_e);!Z.extend&&Ie>lt&&(E=lt,lt=Ie,Ie=E);var F=Bv(S,Ie),L=Bv(S,lt);if(F&&L&&(Z.rangeCount!==1||Z.anchorNode!==F.node||Z.anchorOffset!==F.offset||Z.focusNode!==L.node||Z.focusOffset!==L.offset)){var X=ae.createRange();X.setStart(F.node,F.offset),Z.removeAllRanges(),Ie>lt?(Z.addRange(X),Z.extend(L.node,L.offset)):(X.setEnd(L.node,L.offset),Z.addRange(X))}}}}for(ae=[],Z=S;Z=Z.parentNode;)Z.nodeType===1&&ae.push({element:Z,left:Z.scrollLeft,top:Z.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<ae.length;S++){var re=ae[S];re.element.scrollLeft=re.left,re.element.scrollTop=re.top}}td=!!xg,Cg=xg=null}finally{We=d,me.p=c,ne.T=o}}n.current=s,Gt=2}}function iT(){if(Gt===2){Gt=0;var n=Is,s=ll,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=ne.T,ne.T=null;var c=me.p;me.p=2;var d=We;We|=4;try{NE(n,s.alternate,s)}finally{We=d,me.p=c,ne.T=o}}Gt=3}}function rT(){if(Gt===4||Gt===3){Gt=0,Eu();var n=Is,s=ll,o=wr,c=HE;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Gt=5:(Gt=0,ll=Is=null,sT(n,n.pendingLanes));var d=n.pendingLanes;if(d===0&&(As=null),Iu(o),s=s.stateNode,gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(Qr,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=ne.T,d=me.p,me.p=2,ne.T=null;try{for(var p=n.onRecoverableError,E=0;E<c.length;E++){var S=c[E];p(S.value,{componentStack:S.stack})}}finally{ne.T=s,me.p=d}}(wr&3)!==0&&qf(),Fi(n),d=n.pendingLanes,(o&261930)!==0&&(d&42)!==0?n===pg?cc++:(cc=0,pg=n):cc=0,hc(0)}}function sT(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Gu(s)))}function qf(){return nT(),iT(),rT(),aT()}function aT(){if(Gt!==5)return!1;var n=Is,s=dg;dg=0;var o=Iu(wr),c=ne.T,d=me.p;try{me.p=32>o?32:o,ne.T=null,o=mg,mg=null;var p=Is,E=wr;if(Gt=0,ll=Is=null,wr=0,(We&6)!==0)throw Error(r(331));var S=We;if(We|=4,jE(p.current),UE(p,p.current,E,o),We=S,hc(0,!1),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(Qr,p)}catch{}return!0}finally{me.p=d,ne.T=c,sT(n,s)}}function oT(n,s,o){s=oi(o,s),s=Qp(n.stateNode,s,2),n=vs(n,s,2),n!==null&&(Yr(n,2),Fi(n))}function nt(n,s,o){if(n.tag===3)oT(n,n,o);else for(;s!==null;){if(s.tag===3){oT(s,n,o);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(As===null||!As.has(c))){n=oi(o,n),o=lE(2),c=vs(s,o,2),c!==null&&(uE(o,c,s,n),Yr(c,2),Fi(c));break}}s=s.return}}function _g(n,s,o){var c=n.pingCache;if(c===null){c=n.pingCache=new Ax;var d=new Set;c.set(s,d)}else d=c.get(s),d===void 0&&(d=new Set,c.set(s,d));d.has(o)||(cg=!0,d.add(o),n=Dx.bind(null,n,s,o),s.then(n,n))}function Dx(n,s,o){var c=n.pingCache;c!==null&&c.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,ft===n&&(ze&o)===o&&(Dt===4||Dt===3&&(ze&62914560)===ze&&300>an()-Lf?(We&2)===0&&ul(n,0):hg|=o,ol===ze&&(ol=0)),Fi(n)}function lT(n,s){s===0&&(s=Su()),n=Oa(n,s),n!==null&&(Yr(n,s),Fi(n))}function Nx(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),lT(n,o)}function Vx(n,s){var o=0;switch(n.tag){case 31:case 13:var c=n.stateNode,d=n.memoizedState;d!==null&&(o=d.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(s),lT(n,o)}function Ox(n,s){return _a(n,s)}var Hf=null,hl=null,vg=!1,Gf=!1,Eg=!1,xs=0;function Fi(n){n!==hl&&n.next===null&&(hl===null?Hf=hl=n:hl=hl.next=n),Gf=!0,vg||(vg=!0,Mx())}function hc(n,s){if(!Eg&&Gf){Eg=!0;do for(var o=!1,c=Hf;c!==null;){if(n!==0){var d=c.pendingLanes;if(d===0)var p=0;else{var E=c.suspendedLanes,S=c.pingedLanes;p=(1<<31-wn(42|n)+1)-1,p&=d&~(E&~S),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(o=!0,fT(c,p))}else p=ze,p=ii(c,c===ft?p:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(p&3)===0||Xr(c,p)||(o=!0,fT(c,p));c=c.next}while(o);Eg=!1}}function Px(){uT()}function uT(){Gf=vg=!1;var n=0;xs!==0&&Gx()&&(n=xs);for(var s=an(),o=null,c=Hf;c!==null;){var d=c.next,p=cT(c,s);p===0?(c.next=null,o===null?Hf=d:o.next=d,d===null&&(hl=o)):(o=c,(n!==0||(p&3)!==0)&&(Gf=!0)),c=d}Gt!==0&&Gt!==5||hc(n),xs!==0&&(xs=0)}function cT(n,s){for(var o=n.suspendedLanes,c=n.pingedLanes,d=n.expirationTimes,p=n.pendingLanes&-62914561;0<p;){var E=31-wn(p),S=1<<E,N=d[E];N===-1?((S&o)===0||(S&c)!==0)&&(d[E]=No(S,s)):N<=s&&(n.expiredLanes|=S),p&=~S}if(s=ft,o=ze,o=ii(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===s&&(tt===2||tt===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Do(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Xr(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(c!==null&&Do(c),Iu(o)){case 2:case 8:o=Yt;break;case 32:o=er;break;case 268435456:o=Tu;break;default:o=er}return c=hT.bind(null,n),o=_a(o,c),n.callbackPriority=s,n.callbackNode=o,s}return c!==null&&c!==null&&Do(c),n.callbackPriority=2,n.callbackNode=null,2}function hT(n,s){if(Gt!==0&&Gt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(qf()&&n.callbackNode!==o)return null;var c=ze;return c=ii(n,n===ft?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(KE(n,c,s),cT(n,an()),n.callbackNode!=null&&n.callbackNode===o?hT.bind(null,n):null)}function fT(n,s){if(qf())return null;KE(n,s,!0)}function Mx(){Qx(function(){(We&6)!==0?_a(Ht,Px):uT()})}function Tg(){if(xs===0){var n=Yo;n===0&&(n=Ea,Ea<<=1,(Ea&261888)===0&&(Ea=256)),xs=n}return xs}function dT(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:ki(""+n)}function mT(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function kx(n,s,o,c,d){if(s==="submit"&&o&&o.stateNode===d){var p=dT((d[ln]||null).action),E=c.submitter;E&&(s=(s=E[ln]||null)?dT(s.formAction):E.getAttribute("formAction"),s!==null&&(p=s,E=null));var S=new Ia("action","action",null,c,d);n.push({event:S,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(xs!==0){var N=E?mT(d,E):new FormData(d);jp(o,{pending:!0,data:N,method:d.method,action:p},null,N)}}else typeof p=="function"&&(S.preventDefault(),N=E?mT(d,E):new FormData(d),jp(o,{pending:!0,data:N,method:d.method,action:p},p,N))},currentTarget:d}]})}}for(var bg=0;bg<rp.length;bg++){var Sg=rp[bg],Lx=Sg.toLowerCase(),Ux=Sg[0].toUpperCase()+Sg.slice(1);Ti(Lx,"on"+Ux)}Ti(Gv,"onAnimationEnd"),Ti(Kv,"onAnimationIteration"),Ti(Qv,"onAnimationStart"),Ti("dblclick","onDoubleClick"),Ti("focusin","onFocus"),Ti("focusout","onBlur"),Ti(ex,"onTransitionRun"),Ti(tx,"onTransitionStart"),Ti(nx,"onTransitionCancel"),Ti($v,"onTransitionEnd"),Mi("onMouseEnter",["mouseout","mouseover"]),Mi("onMouseLeave",["mouseout","mouseover"]),Mi("onPointerEnter",["pointerout","pointerover"]),Mi("onPointerLeave",["pointerout","pointerover"]),An("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),An("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),An("onBeforeInput",["compositionend","keypress","textInput","paste"]),An("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),An("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),An("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fc));function pT(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],d=c.event;c=c.listeners;e:{var p=void 0;if(s)for(var E=c.length-1;0<=E;E--){var S=c[E],N=S.instance,Y=S.currentTarget;if(S=S.listener,N!==p&&d.isPropagationStopped())break e;p=S,d.currentTarget=Y;try{p(d)}catch(te){af(te)}d.currentTarget=null,p=N}else for(E=0;E<c.length;E++){if(S=c[E],N=S.instance,Y=S.currentTarget,S=S.listener,N!==p&&d.isPropagationStopped())break e;p=S,d.currentTarget=Y;try{p(d)}catch(te){af(te)}d.currentTarget=null,p=N}}}}function Ue(n,s){var o=s[Zr];o===void 0&&(o=s[Zr]=new Set);var c=n+"__bubble";o.has(c)||(gT(s,n,2,!1),o.add(c))}function wg(n,s,o){var c=0;s&&(c|=4),gT(o,n,c,s)}var Kf="_reactListening"+Math.random().toString(36).slice(2);function Ag(n){if(!n[Kf]){n[Kf]=!0,Vo.forEach(function(o){o!=="selectionchange"&&(zx.has(o)||wg(o,!1,n),wg(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Kf]||(s[Kf]=!0,wg("selectionchange",!1,s))}}function gT(n,s,o,c){switch(GT(s)){case 2:var d=dC;break;case 8:d=mC;break;default:d=Bg}o=d.bind(null,s,o,n),d=void 0,!Pu||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(d=!0),c?d!==void 0?n.addEventListener(s,o,{capture:!0,passive:d}):n.addEventListener(s,o,!0):d!==void 0?n.addEventListener(s,o,{passive:d}):n.addEventListener(s,o,!1)}function Ig(n,s,o,c,d){var p=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var S=c.stateNode.containerInfo;if(S===d)break;if(E===4)for(E=c.return;E!==null;){var N=E.tag;if((N===3||N===4)&&E.stateNode.containerInfo===d)return;E=E.return}for(;S!==null;){if(E=rr(S),E===null)return;if(N=E.tag,N===5||N===6||N===26||N===27){c=p=E;continue e}S=S.parentNode}}c=c.return}qh(function(){var Y=p,te=Lo(o),ae=[];e:{var J=Xv.get(n);if(J!==void 0){var Z=Ia,_e=n;switch(n){case"keypress":if(Aa(o)===0)break e;case"keydown":case"keyup":Z=Jh;break;case"focusin":_e="focus",Z=us;break;case"focusout":_e="blur",Z=us;break;case"beforeblur":case"afterblur":Z=us;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Z=Gh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Z=Kh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Z=ef;break;case Gv:case Kv:case Qv:Z=Bo;break;case $v:Z=jo;break;case"scroll":case"scrollend":Z=Hh;break;case"wheel":Z=nf;break;case"copy":case"cut":case"paste":Z=$h;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Z=zu;break;case"toggle":case"beforetoggle":Z=hs}var Ie=(s&4)!==0,lt=!Ie&&(n==="scroll"||n==="scrollend"),F=Ie?J!==null?J+"Capture":null:J;Ie=[];for(var L=Y,X;L!==null;){var re=L;if(X=re.stateNode,re=re.tag,re!==5&&re!==26&&re!==27||X===null||F===null||(re=Nn(L,F),re!=null&&Ie.push(dc(L,re,X))),lt)break;L=L.return}0<Ie.length&&(J=new Z(J,_e,null,o,te),ae.push({event:J,listeners:Ie}))}}if((s&7)===0){e:{if(J=n==="mouseover"||n==="pointerover",Z=n==="mouseout"||n==="pointerout",J&&o!==ko&&(_e=o.relatedTarget||o.fromElement)&&(rr(_e)||_e[Oi]))break e;if((Z||J)&&(J=te.window===te?te:(J=te.ownerDocument)?J.defaultView||J.parentWindow:window,Z?(_e=o.relatedTarget||o.toElement,Z=Y,_e=_e?rr(_e):null,_e!==null&&(lt=l(_e),Ie=_e.tag,_e!==lt||Ie!==5&&Ie!==27&&Ie!==6)&&(_e=null)):(Z=null,_e=Y),Z!==_e)){if(Ie=Gh,re="onMouseLeave",F="onMouseEnter",L="mouse",(n==="pointerout"||n==="pointerover")&&(Ie=zu,re="onPointerLeave",F="onPointerEnter",L="pointer"),lt=Z==null?J:ba(Z),X=_e==null?J:ba(_e),J=new Ie(re,L+"leave",Z,o,te),J.target=lt,J.relatedTarget=X,re=null,rr(te)===Y&&(Ie=new Ie(F,L+"enter",_e,o,te),Ie.target=X,Ie.relatedTarget=lt,re=Ie),lt=re,Z&&_e)t:{for(Ie=Bx,F=Z,L=_e,X=0,re=F;re;re=Ie(re))X++;re=0;for(var Se=L;Se;Se=Ie(Se))re++;for(;0<X-re;)F=Ie(F),X--;for(;0<re-X;)L=Ie(L),re--;for(;X--;){if(F===L||L!==null&&F===L.alternate){Ie=F;break t}F=Ie(F),L=Ie(L)}Ie=null}else Ie=null;Z!==null&&yT(ae,J,Z,Ie,!1),_e!==null&&lt!==null&&yT(ae,lt,_e,Ie,!0)}}e:{if(J=Y?ba(Y):window,Z=J.nodeName&&J.nodeName.toLowerCase(),Z==="select"||Z==="input"&&J.type==="file")var Xe=Pv;else if(Vn(J))if(Mv)Xe=W1;else{Xe=X1;var Te=$1}else Z=J.nodeName,!Z||Z.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?Y&&Vu(Y.elementType)&&(Xe=Pv):Xe=Y1;if(Xe&&(Xe=Xe(n,Y))){Da(ae,Xe,o,te);break e}Te&&Te(n,J,Y),n==="focusout"&&Y&&J.type==="number"&&Y.memoizedProps.value!=null&&Mo(J,"number",J.value)}switch(Te=Y?ba(Y):window,n){case"focusin":(Vn(Te)||Te.contentEditable==="true")&&(Fo=Te,tp=Y,Fu=null);break;case"focusout":Fu=tp=Fo=null;break;case"mousedown":np=!0;break;case"contextmenu":case"mouseup":case"dragend":np=!1,qv(ae,o,te);break;case"selectionchange":if(Z1)break;case"keydown":case"keyup":qv(ae,o,te)}var Ve;if(_)e:{switch(n){case"compositionstart":var Be="onCompositionStart";break e;case"compositionend":Be="onCompositionEnd";break e;case"compositionupdate":Be="onCompositionUpdate";break e}Be=void 0}else Pe?Ze(n,o)&&(Be="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Be="onCompositionStart");Be&&(K&&o.locale!=="ko"&&(Pe||Be!=="onCompositionStart"?Be==="onCompositionEnd"&&Pe&&(Ve=ss()):(Gn=te,Uo="value"in Gn?Gn.value:Gn.textContent,Pe=!0)),Te=Qf(Y,Be),0<Te.length&&(Be=new ku(Be,n,null,o,te),ae.push({event:Be,listeners:Te}),Ve?Be.data=Ve:(Ve=Lt(o),Ve!==null&&(Be.data=Ve)))),(Ve=w?Jt(n,o):Zt(n,o))&&(Be=Qf(Y,"onBeforeInput"),0<Be.length&&(Te=new ku("onBeforeInput","beforeinput",null,o,te),ae.push({event:Te,listeners:Be}),Te.data=Ve)),kx(ae,n,Y,o,te)}pT(ae,s)})}function dc(n,s,o){return{instance:n,listener:s,currentTarget:o}}function Qf(n,s){for(var o=s+"Capture",c=[];n!==null;){var d=n,p=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||p===null||(d=Nn(n,o),d!=null&&c.unshift(dc(n,d,p)),d=Nn(n,s),d!=null&&c.push(dc(n,d,p))),n.tag===3)return c;n=n.return}return[]}function Bx(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function yT(n,s,o,c,d){for(var p=s._reactName,E=[];o!==null&&o!==c;){var S=o,N=S.alternate,Y=S.stateNode;if(S=S.tag,N!==null&&N===c)break;S!==5&&S!==26&&S!==27||Y===null||(N=Y,d?(Y=Nn(o,p),Y!=null&&E.unshift(dc(o,Y,N))):d||(Y=Nn(o,p),Y!=null&&E.push(dc(o,Y,N)))),o=o.return}E.length!==0&&n.push({event:s,listeners:E})}var jx=/\r\n?/g,Fx=/\u0000|\uFFFD/g;function _T(n){return(typeof n=="string"?n:""+n).replace(jx,`
`).replace(Fx,"")}function vT(n,s){return s=_T(s),_T(n)===s}function ot(n,s,o,c,d,p){switch(o){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||si(n,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&si(n,""+c);break;case"className":ns(n,"class",c);break;case"tabIndex":ns(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ns(n,o,c);break;case"style":jh(n,c,p);break;case"data":if(s!=="object"){ns(n,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=ki(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(o==="formAction"?(s!=="input"&&ot(n,s,"name",d.name,d,null),ot(n,s,"formEncType",d.formEncType,d,null),ot(n,s,"formMethod",d.formMethod,d,null),ot(n,s,"formTarget",d.formTarget,d,null)):(ot(n,s,"encType",d.encType,d,null),ot(n,s,"method",d.method,d,null),ot(n,s,"target",d.target,d,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=ki(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=Wt);break;case"onScroll":c!=null&&Ue("scroll",n);break;case"onScrollEnd":c!=null&&Ue("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(d.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=ki(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":Ue("beforetoggle",n),Ue("toggle",n),ts(n,"popover",c);break;case"xlinkActuate":ri(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":ri(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":ri(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":ri(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":ri(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":ri(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":ri(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":ri(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":ri(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":ts(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=Xm.get(o)||o,ts(n,o,c))}}function Rg(n,s,o,c,d,p){switch(o){case"style":jh(n,c,p);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(d.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof c=="string"?si(n,c):(typeof c=="number"||typeof c=="bigint")&&si(n,""+c);break;case"onScroll":c!=null&&Ue("scroll",n);break;case"onScrollEnd":c!=null&&Ue("scrollend",n);break;case"onClick":c!=null&&(n.onclick=Wt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!es.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(d=o.endsWith("Capture"),s=o.slice(2,d?o.length-7:void 0),p=n[ln]||null,p=p!=null?p[o]:null,typeof p=="function"&&n.removeEventListener(s,p,d),typeof c=="function")){typeof p!="function"&&p!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,c,d);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):ts(n,o,c)}}}function fn(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",n),Ue("load",n);var c=!1,d=!1,p;for(p in o)if(o.hasOwnProperty(p)){var E=o[p];if(E!=null)switch(p){case"src":c=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:ot(n,s,p,E,o,null)}}d&&ot(n,s,"srcSet",o.srcSet,o,null),c&&ot(n,s,"src",o.src,o,null);return;case"input":Ue("invalid",n);var S=p=E=d=null,N=null,Y=null;for(c in o)if(o.hasOwnProperty(c)){var te=o[c];if(te!=null)switch(c){case"name":d=te;break;case"type":E=te;break;case"checked":N=te;break;case"defaultChecked":Y=te;break;case"value":p=te;break;case"defaultValue":S=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,s));break;default:ot(n,s,c,te,o,null)}}Sa(n,p,S,N,Y,E,d,!1);return;case"select":Ue("invalid",n),c=E=p=null;for(d in o)if(o.hasOwnProperty(d)&&(S=o[d],S!=null))switch(d){case"value":p=S;break;case"defaultValue":E=S;break;case"multiple":c=S;default:ot(n,s,d,S,o,null)}s=p,o=E,n.multiple=!!c,s!=null?$e(n,!!c,s,!1):o!=null&&$e(n,!!c,o,!0);return;case"textarea":Ue("invalid",n),p=d=c=null;for(E in o)if(o.hasOwnProperty(E)&&(S=o[E],S!=null))switch(E){case"value":c=S;break;case"defaultValue":d=S;break;case"children":p=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:ot(n,s,E,S,o,null)}rs(n,c,d,p);return;case"option":for(N in o)if(o.hasOwnProperty(N)&&(c=o[N],c!=null))switch(N){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ot(n,s,N,c,o,null)}return;case"dialog":Ue("beforetoggle",n),Ue("toggle",n),Ue("cancel",n),Ue("close",n);break;case"iframe":case"object":Ue("load",n);break;case"video":case"audio":for(c=0;c<fc.length;c++)Ue(fc[c],n);break;case"image":Ue("error",n),Ue("load",n);break;case"details":Ue("toggle",n);break;case"embed":case"source":case"link":Ue("error",n),Ue("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in o)if(o.hasOwnProperty(Y)&&(c=o[Y],c!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:ot(n,s,Y,c,o,null)}return;default:if(Vu(s)){for(te in o)o.hasOwnProperty(te)&&(c=o[te],c!==void 0&&Rg(n,s,te,c,o,void 0));return}}for(S in o)o.hasOwnProperty(S)&&(c=o[S],c!=null&&ot(n,s,S,c,o,null))}function qx(n,s,o,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,p=null,E=null,S=null,N=null,Y=null,te=null;for(Z in o){var ae=o[Z];if(o.hasOwnProperty(Z)&&ae!=null)switch(Z){case"checked":break;case"value":break;case"defaultValue":N=ae;default:c.hasOwnProperty(Z)||ot(n,s,Z,null,c,ae)}}for(var J in c){var Z=c[J];if(ae=o[J],c.hasOwnProperty(J)&&(Z!=null||ae!=null))switch(J){case"type":p=Z;break;case"name":d=Z;break;case"checked":Y=Z;break;case"defaultChecked":te=Z;break;case"value":E=Z;break;case"defaultValue":S=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,s));break;default:Z!==ae&&ot(n,s,J,Z,c,ae)}}is(n,E,S,N,Y,te,p,d);return;case"select":Z=E=S=J=null;for(p in o)if(N=o[p],o.hasOwnProperty(p)&&N!=null)switch(p){case"value":break;case"multiple":Z=N;default:c.hasOwnProperty(p)||ot(n,s,p,null,c,N)}for(d in c)if(p=c[d],N=o[d],c.hasOwnProperty(d)&&(p!=null||N!=null))switch(d){case"value":J=p;break;case"defaultValue":S=p;break;case"multiple":E=p;default:p!==N&&ot(n,s,d,p,c,N)}s=S,o=E,c=Z,J!=null?$e(n,!!o,J,!1):!!c!=!!o&&(s!=null?$e(n,!!o,s,!0):$e(n,!!o,o?[]:"",!1));return;case"textarea":Z=J=null;for(S in o)if(d=o[S],o.hasOwnProperty(S)&&d!=null&&!c.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:ot(n,s,S,null,c,d)}for(E in c)if(d=c[E],p=o[E],c.hasOwnProperty(E)&&(d!=null||p!=null))switch(E){case"value":J=d;break;case"defaultValue":Z=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(r(91));break;default:d!==p&&ot(n,s,E,d,c,p)}wa(n,J,Z);return;case"option":for(var _e in o)if(J=o[_e],o.hasOwnProperty(_e)&&J!=null&&!c.hasOwnProperty(_e))switch(_e){case"selected":n.selected=!1;break;default:ot(n,s,_e,null,c,J)}for(N in c)if(J=c[N],Z=o[N],c.hasOwnProperty(N)&&J!==Z&&(J!=null||Z!=null))switch(N){case"selected":n.selected=J&&typeof J!="function"&&typeof J!="symbol";break;default:ot(n,s,N,J,c,Z)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in o)J=o[Ie],o.hasOwnProperty(Ie)&&J!=null&&!c.hasOwnProperty(Ie)&&ot(n,s,Ie,null,c,J);for(Y in c)if(J=c[Y],Z=o[Y],c.hasOwnProperty(Y)&&J!==Z&&(J!=null||Z!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,s));break;default:ot(n,s,Y,J,c,Z)}return;default:if(Vu(s)){for(var lt in o)J=o[lt],o.hasOwnProperty(lt)&&J!==void 0&&!c.hasOwnProperty(lt)&&Rg(n,s,lt,void 0,c,J);for(te in c)J=c[te],Z=o[te],!c.hasOwnProperty(te)||J===Z||J===void 0&&Z===void 0||Rg(n,s,te,J,c,Z);return}}for(var F in o)J=o[F],o.hasOwnProperty(F)&&J!=null&&!c.hasOwnProperty(F)&&ot(n,s,F,null,c,J);for(ae in c)J=c[ae],Z=o[ae],!c.hasOwnProperty(ae)||J===Z||J==null&&Z==null||ot(n,s,ae,J,c,Z)}function ET(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Hx(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var d=o[c],p=d.transferSize,E=d.initiatorType,S=d.duration;if(p&&S&&ET(E)){for(E=0,S=d.responseEnd,c+=1;c<o.length;c++){var N=o[c],Y=N.startTime;if(Y>S)break;var te=N.transferSize,ae=N.initiatorType;te&&ET(ae)&&(N=N.responseEnd,E+=te*(N<S?1:(S-Y)/(N-Y)))}if(--c,s+=8*(p+E)/(d.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var xg=null,Cg=null;function $f(n){return n.nodeType===9?n:n.ownerDocument}function TT(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bT(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Dg(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Ng=null;function Gx(){var n=window.event;return n&&n.type==="popstate"?n===Ng?!1:(Ng=n,!0):(Ng=null,!1)}var ST=typeof setTimeout=="function"?setTimeout:void 0,Kx=typeof clearTimeout=="function"?clearTimeout:void 0,wT=typeof Promise=="function"?Promise:void 0,Qx=typeof queueMicrotask=="function"?queueMicrotask:typeof wT<"u"?function(n){return wT.resolve(null).then(n).catch($x)}:ST;function $x(n){setTimeout(function(){throw n})}function Cs(n){return n==="head"}function AT(n,s){var o=s,c=0;do{var d=o.nextSibling;if(n.removeChild(o),d&&d.nodeType===8)if(o=d.data,o==="/$"||o==="/&"){if(c===0){n.removeChild(d),pl(s);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")mc(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,mc(o);for(var p=o.firstChild;p;){var E=p.nextSibling,S=p.nodeName;p[ir]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&p.rel.toLowerCase()==="stylesheet"||o.removeChild(p),p=E}}else o==="body"&&mc(n.ownerDocument.body);o=d}while(o);pl(s)}function IT(n,s){var o=n;n=0;do{var c=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=c}while(o)}function Vg(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Vg(o),Ta(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function Xx(n,s,o,c){for(;n.nodeType===1;){var d=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[ir])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(p=n.getAttribute("rel"),p==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(p!==d.rel||n.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||n.getAttribute("title")!==(d.title==null?null:d.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(p=n.getAttribute("src"),(p!==(d.src==null?null:d.src)||n.getAttribute("type")!==(d.type==null?null:d.type)||n.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&p&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var p=d.name==null?null:""+d.name;if(d.type==="hidden"&&n.getAttribute("name")===p)return n}else return n;if(n=fi(n.nextSibling),n===null)break}return null}function Yx(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=fi(n.nextSibling),n===null))return null;return n}function RT(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=fi(n.nextSibling),n===null))return null;return n}function Og(n){return n.data==="$?"||n.data==="$~"}function Pg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function Wx(n,s){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||o.readyState!=="loading")s();else{var c=function(){s(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function fi(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var Mg=null;function xT(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(s===0)return fi(n.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}n=n.nextSibling}return null}function CT(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return n;s--}else o!=="/$"&&o!=="/&"||s++}n=n.previousSibling}return null}function DT(n,s,o){switch(s=$f(o),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function mc(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Ta(n)}var di=new Map,NT=new Set;function Xf(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Ar=me.d;me.d={f:Jx,r:Zx,D:eC,C:tC,L:nC,m:iC,X:sC,S:rC,M:aC};function Jx(){var n=Ar.f(),s=Bf();return n||s}function Zx(n){var s=sr(n);s!==null&&s.tag===5&&s.type==="form"?$0(s):Ar.r(n)}var fl=typeof document>"u"?null:document;function VT(n,s,o){var c=fl;if(c&&typeof s=="string"&&s){var d=xt(s);d='link[rel="'+n+'"][href="'+d+'"]',typeof o=="string"&&(d+='[crossorigin="'+o+'"]'),NT.has(d)||(NT.add(d),n={rel:n,crossOrigin:o,href:s},c.querySelector(d)===null&&(s=c.createElement("link"),fn(s,"link",n),Vt(s),c.head.appendChild(s)))}}function eC(n){Ar.D(n),VT("dns-prefetch",n,null)}function tC(n,s){Ar.C(n,s),VT("preconnect",n,s)}function nC(n,s,o){Ar.L(n,s,o);var c=fl;if(c&&n&&s){var d='link[rel="preload"][as="'+xt(s)+'"]';s==="image"&&o&&o.imageSrcSet?(d+='[imagesrcset="'+xt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(d+='[imagesizes="'+xt(o.imageSizes)+'"]')):d+='[href="'+xt(n)+'"]';var p=d;switch(s){case"style":p=dl(n);break;case"script":p=ml(n)}di.has(p)||(n=v({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),di.set(p,n),c.querySelector(d)!==null||s==="style"&&c.querySelector(pc(p))||s==="script"&&c.querySelector(gc(p))||(s=c.createElement("link"),fn(s,"link",n),Vt(s),c.head.appendChild(s)))}}function iC(n,s){Ar.m(n,s);var o=fl;if(o&&n){var c=s&&typeof s.as=="string"?s.as:"script",d='link[rel="modulepreload"][as="'+xt(c)+'"][href="'+xt(n)+'"]',p=d;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=ml(n)}if(!di.has(p)&&(n=v({rel:"modulepreload",href:n},s),di.set(p,n),o.querySelector(d)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(gc(p)))return}c=o.createElement("link"),fn(c,"link",n),Vt(c),o.head.appendChild(c)}}}function rC(n,s,o){Ar.S(n,s,o);var c=fl;if(c&&n){var d=vi(c).hoistableStyles,p=dl(n);s=s||"default";var E=d.get(p);if(!E){var S={loading:0,preload:null};if(E=c.querySelector(pc(p)))S.loading=5;else{n=v({rel:"stylesheet",href:n,"data-precedence":s},o),(o=di.get(p))&&kg(n,o);var N=E=c.createElement("link");Vt(N),fn(N,"link",n),N._p=new Promise(function(Y,te){N.onload=Y,N.onerror=te}),N.addEventListener("load",function(){S.loading|=1}),N.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Yf(E,s,c)}E={type:"stylesheet",instance:E,count:1,state:S},d.set(p,E)}}}function sC(n,s){Ar.X(n,s);var o=fl;if(o&&n){var c=vi(o).hoistableScripts,d=ml(n),p=c.get(d);p||(p=o.querySelector(gc(d)),p||(n=v({src:n,async:!0},s),(s=di.get(d))&&Lg(n,s),p=o.createElement("script"),Vt(p),fn(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(d,p))}}function aC(n,s){Ar.M(n,s);var o=fl;if(o&&n){var c=vi(o).hoistableScripts,d=ml(n),p=c.get(d);p||(p=o.querySelector(gc(d)),p||(n=v({src:n,async:!0,type:"module"},s),(s=di.get(d))&&Lg(n,s),p=o.createElement("script"),Vt(p),fn(p,"link",n),o.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},c.set(d,p))}}function OT(n,s,o,c){var d=(d=Oe.current)?Xf(d):null;if(!d)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=dl(o.href),o=vi(d).hoistableStyles,c=o.get(s),c||(c={type:"style",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=dl(o.href);var p=vi(d).hoistableStyles,E=p.get(n);if(E||(d=d.ownerDocument||d,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(n,E),(p=d.querySelector(pc(n)))&&!p._p&&(E.instance=p,E.state.loading=5),di.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},di.set(n,o),p||oC(d,n,o,E.state))),s&&c===null)throw Error(r(528,""));return E}if(s&&c!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ml(o),o=vi(d).hoistableScripts,c=o.get(s),c||(c={type:"script",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function dl(n){return'href="'+xt(n)+'"'}function pc(n){return'link[rel="stylesheet"]['+n+"]"}function PT(n){return v({},n,{"data-precedence":n.precedence,precedence:null})}function oC(n,s,o,c){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=n.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),fn(s,"link",o),Vt(s),n.head.appendChild(s))}function ml(n){return'[src="'+xt(n)+'"]'}function gc(n){return"script[async]"+n}function MT(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var c=n.querySelector('style[data-href~="'+xt(o.href)+'"]');if(c)return s.instance=c,Vt(c),c;var d=v({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),Vt(c),fn(c,"style",d),Yf(c,o.precedence,n),s.instance=c;case"stylesheet":d=dl(o.href);var p=n.querySelector(pc(d));if(p)return s.state.loading|=4,s.instance=p,Vt(p),p;c=PT(o),(d=di.get(d))&&kg(c,d),p=(n.ownerDocument||n).createElement("link"),Vt(p);var E=p;return E._p=new Promise(function(S,N){E.onload=S,E.onerror=N}),fn(p,"link",c),s.state.loading|=4,Yf(p,o.precedence,n),s.instance=p;case"script":return p=ml(o.src),(d=n.querySelector(gc(p)))?(s.instance=d,Vt(d),d):(c=o,(d=di.get(p))&&(c=v({},o),Lg(c,d)),n=n.ownerDocument||n,d=n.createElement("script"),Vt(d),fn(d,"link",c),n.head.appendChild(d),s.instance=d);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,Yf(c,o.precedence,n));return s.instance}function Yf(n,s,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=c.length?c[c.length-1]:null,p=d,E=0;E<c.length;E++){var S=c[E];if(S.dataset.precedence===s)p=S;else if(p!==d)break}p?p.parentNode.insertBefore(n,p.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function kg(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Lg(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var Wf=null;function kT(n,s,o){if(Wf===null){var c=new Map,d=Wf=new Map;d.set(o,c)}else d=Wf,c=d.get(o),c||(c=new Map,d.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),d=0;d<o.length;d++){var p=o[d];if(!(p[ir]||p[Rt]||n==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var E=p.getAttribute(s)||"";E=n+E;var S=c.get(E);S?S.push(p):c.set(E,[p])}}return c}function LT(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function lC(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function UT(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function uC(n,s,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var d=dl(c.href),p=s.querySelector(pc(d));if(p){s=p._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=Jf.bind(n),s.then(n,n)),o.state.loading|=4,o.instance=p,Vt(p);return}p=s.ownerDocument||s,c=PT(c),(d=di.get(d))&&kg(c,d),p=p.createElement("link"),Vt(p);var E=p;E._p=new Promise(function(S,N){E.onload=S,E.onerror=N}),fn(p,"link",c),o.instance=p}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=Jf.bind(n),s.addEventListener("load",o),s.addEventListener("error",o))}}var Ug=0;function cC(n,s){return n.stylesheets&&n.count===0&&ed(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var c=setTimeout(function(){if(n.stylesheets&&ed(n,n.stylesheets),n.unsuspend){var p=n.unsuspend;n.unsuspend=null,p()}},6e4+s);0<n.imgBytes&&Ug===0&&(Ug=62500*Hx());var d=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&ed(n,n.stylesheets),n.unsuspend)){var p=n.unsuspend;n.unsuspend=null,p()}},(n.imgBytes>Ug?50:800)+s);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(d)}}:null}function Jf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)ed(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var Zf=null;function ed(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,Zf=new Map,s.forEach(hC,n),Zf=null,Jf.call(n))}function hC(n,s){if(!(s.state.loading&4)){var o=Zf.get(n);if(o)var c=o.get(null);else{o=new Map,Zf.set(n,o);for(var d=n.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<d.length;p++){var E=d[p];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),c=E)}c&&o.set(null,c)}d=s.instance,E=d.getAttribute("data-precedence"),p=o.get(E)||c,p===c&&o.set(null,d),o.set(E,d),this.count++,c=Jf.bind(this),d.addEventListener("load",c),d.addEventListener("error",c),p?p.parentNode.insertBefore(d,p.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(d,n.firstChild)),s.state.loading|=4}}var yc={$$typeof:Q,Provider:null,Consumer:null,_currentValue:we,_currentValue2:we,_threadCount:0};function fC(n,s,o,c,d,p,E,S,N){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=tr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tr(0),this.hiddenUpdates=tr(null),this.identifierPrefix=c,this.onUncaughtError=d,this.onCaughtError=p,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function zT(n,s,o,c,d,p,E,S,N,Y,te,ae){return n=new fC(n,s,o,E,N,Y,te,ae,S),s=1,p===!0&&(s|=24),p=Qn(3,null,null,s),n.current=p,p.stateNode=n,s=yp(),s.refCount++,n.pooledCache=s,s.refCount++,p.memoizedState={element:c,isDehydrated:o,cache:s},Tp(p),n}function BT(n){return n?(n=Go,n):Go}function jT(n,s,o,c,d,p){d=BT(d),c.context===null?c.context=d:c.pendingContext=d,c=_s(s),c.payload={element:o},p=p===void 0?null:p,p!==null&&(c.callback=p),o=vs(n,c,s),o!==null&&(Ln(o,n,s),Xu(o,n,s))}function FT(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function zg(n,s){FT(n,s),(n=n.alternate)&&FT(n,s)}function qT(n){if(n.tag===13||n.tag===31){var s=Oa(n,67108864);s!==null&&Ln(s,n,67108864),zg(n,67108864)}}function HT(n){if(n.tag===13||n.tag===31){var s=Jn();s=Au(s);var o=Oa(n,s);o!==null&&Ln(o,n,s),zg(n,s)}}var td=!0;function dC(n,s,o,c){var d=ne.T;ne.T=null;var p=me.p;try{me.p=2,Bg(n,s,o,c)}finally{me.p=p,ne.T=d}}function mC(n,s,o,c){var d=ne.T;ne.T=null;var p=me.p;try{me.p=8,Bg(n,s,o,c)}finally{me.p=p,ne.T=d}}function Bg(n,s,o,c){if(td){var d=jg(c);if(d===null)Ig(n,s,c,nd,o),KT(n,c);else if(gC(d,n,s,o,c))c.stopPropagation();else if(KT(n,c),s&4&&-1<pC.indexOf(n)){for(;d!==null;){var p=sr(d);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var E=_i(p.pendingLanes);if(E!==0){var S=p;for(S.pendingLanes|=2,S.entangledLanes|=2;E;){var N=1<<31-wn(E);S.entanglements[1]|=N,E&=~N}Fi(p),(We&6)===0&&(Uf=an()+500,hc(0))}}break;case 31:case 13:S=Oa(p,2),S!==null&&Ln(S,p,2),Bf(),zg(p,2)}if(p=jg(c),p===null&&Ig(n,s,c,nd,o),p===d)break;d=p}d!==null&&c.stopPropagation()}else Ig(n,s,c,null,o)}}function jg(n){return n=Lo(n),Fg(n)}var nd=null;function Fg(n){if(nd=null,n=rr(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=u(s),n!==null)return n;n=null}else if(o===31){if(n=f(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return nd=n,null}function GT(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ph()){case Ht:return 2;case Yt:return 8;case er:case Mh:return 32;case Tu:return 268435456;default:return 32}default:return 32}}var qg=!1,Ds=null,Ns=null,Vs=null,_c=new Map,vc=new Map,Os=[],pC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function KT(n,s){switch(n){case"focusin":case"focusout":Ds=null;break;case"dragenter":case"dragleave":Ns=null;break;case"mouseover":case"mouseout":Vs=null;break;case"pointerover":case"pointerout":_c.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":vc.delete(s.pointerId)}}function Ec(n,s,o,c,d,p){return n===null||n.nativeEvent!==p?(n={blockedOn:s,domEventName:o,eventSystemFlags:c,nativeEvent:p,targetContainers:[d]},s!==null&&(s=sr(s),s!==null&&qT(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,d!==null&&s.indexOf(d)===-1&&s.push(d),n)}function gC(n,s,o,c,d){switch(s){case"focusin":return Ds=Ec(Ds,n,s,o,c,d),!0;case"dragenter":return Ns=Ec(Ns,n,s,o,c,d),!0;case"mouseover":return Vs=Ec(Vs,n,s,o,c,d),!0;case"pointerover":var p=d.pointerId;return _c.set(p,Ec(_c.get(p)||null,n,s,o,c,d)),!0;case"gotpointercapture":return p=d.pointerId,vc.set(p,Ec(vc.get(p)||null,n,s,o,c,d)),!0}return!1}function QT(n){var s=rr(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=u(o),s!==null){n.blockedOn=s,Lh(n.priority,function(){HT(o)});return}}else if(s===31){if(s=f(o),s!==null){n.blockedOn=s,Lh(n.priority,function(){HT(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function id(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=jg(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);ko=c,o.target.dispatchEvent(c),ko=null}else return s=sr(o),s!==null&&qT(s),n.blockedOn=o,!1;s.shift()}return!0}function $T(n,s,o){id(n)&&o.delete(s)}function yC(){qg=!1,Ds!==null&&id(Ds)&&(Ds=null),Ns!==null&&id(Ns)&&(Ns=null),Vs!==null&&id(Vs)&&(Vs=null),_c.forEach($T),vc.forEach($T)}function rd(n,s){n.blockedOn===s&&(n.blockedOn=null,qg||(qg=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,yC)))}var sd=null;function XT(n){sd!==n&&(sd=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){sd===n&&(sd=null);for(var s=0;s<n.length;s+=3){var o=n[s],c=n[s+1],d=n[s+2];if(typeof c!="function"){if(Fg(c||o)===null)continue;break}var p=sr(o);p!==null&&(n.splice(s,3),s-=3,jp(p,{pending:!0,data:d,method:o.method,action:c},c,d))}}))}function pl(n){function s(N){return rd(N,n)}Ds!==null&&rd(Ds,n),Ns!==null&&rd(Ns,n),Vs!==null&&rd(Vs,n),_c.forEach(s),vc.forEach(s);for(var o=0;o<Os.length;o++){var c=Os[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Os.length&&(o=Os[0],o.blockedOn===null);)QT(o),o.blockedOn===null&&Os.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var d=o[c],p=o[c+1],E=d[ln]||null;if(typeof p=="function")E||XT(o);else if(E){var S=null;if(p&&p.hasAttribute("formAction")){if(d=p,E=p[ln]||null)S=E.formAction;else if(Fg(d)!==null)continue}else S=E.action;typeof S=="function"?o[c+1]=S:(o.splice(c,3),c-=3),XT(o)}}}function YT(){function n(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(E){return d=E})},focusReset:"manual",scroll:"manual"})}function s(){d!==null&&(d(),d=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,d=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),d!==null&&(d(),d=null)}}}function Hg(n){this._internalRoot=n}ad.prototype.render=Hg.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,c=Jn();jT(o,c,n,s,null,null)},ad.prototype.unmount=Hg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;jT(n.current,2,null,n,null,null),Bf(),s[Oi]=null}};function ad(n){this._internalRoot=n}ad.prototype.unstable_scheduleHydration=function(n){if(n){var s=nr();n={blockedOn:null,target:n,priority:s};for(var o=0;o<Os.length&&s!==0&&s<Os[o].priority;o++);Os.splice(o,0,n),o===0&&QT(n)}};var WT=e.version;if(WT!=="19.2.4")throw Error(r(527,WT,"19.2.4"));me.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=g(s),n=n!==null?y(n):null,n=n===null?null:n.stateNode,n};var _C={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ne,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var od=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!od.isDisabled&&od.supportsFiber)try{Qr=od.inject(_C),gn=od}catch{}}return bc.createRoot=function(n,s){if(!a(n))throw Error(r(299));var o=!1,c="",d=rE,p=sE,E=aE;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(d=s.onUncaughtError),s.onCaughtError!==void 0&&(p=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError)),s=zT(n,1,!1,null,null,o,c,null,d,p,E,YT),n[Oi]=s.current,Ag(n),new Hg(s)},bc.hydrateRoot=function(n,s,o){if(!a(n))throw Error(r(299));var c=!1,d="",p=rE,E=sE,S=aE,N=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(p=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.formState!==void 0&&(N=o.formState)),s=zT(n,1,!0,s,o??null,c,d,N,p,E,S,YT),s.context=BT(null),o=s.current,c=Jn(),c=Au(c),d=_s(c),d.callback=null,vs(o,d,c),o=c,s.current.lanes=o,Yr(s,o),Fi(s),n[Oi]=s.current,Ag(n),new ad(s)},bc.version="19.2.4",bc}var ob;function xC(){if(ob)return Qg.exports;ob=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),Qg.exports=RC(),Qg.exports}var CC=xC();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var lb="popstate";function DC(i={}){function e(a,l){let{pathname:u="/",search:f="",hash:m=""}=_o(a.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),Ey("",{pathname:u,search:f,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(a,l){let u=a.document.querySelector("base"),f="";if(u&&u.getAttribute("href")){let m=a.location.href,g=m.indexOf("#");f=g===-1?m:m.slice(0,g)}return f+"#"+(typeof l=="string"?l:Kc(l))}function r(a,l){gi(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return VC(e,t,r,i)}function bt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function gi(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function NC(){return Math.random().toString(36).substring(2,10)}function ub(i,e){return{usr:i.state,key:i.key,idx:e}}function Ey(i,e,t=null,r){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?_o(e):e,state:t,key:e&&e.key||r||NC()}}function Kc({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function _o(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let r=i.indexOf("?");r>=0&&(e.search=i.substring(r),i=i.substring(0,r)),i&&(e.pathname=i)}return e}function VC(i,e,t,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,u=a.history,f="POP",m=null,g=y();g==null&&(g=0,u.replaceState({...u.state,idx:g},""));function y(){return(u.state||{idx:null}).idx}function v(){f="POP";let V=y(),$=V==null?null:V-g;g=V,m&&m({action:f,location:M.location,delta:$})}function b(V,$){f="PUSH";let H=Ey(M.location,V,$);t&&t(H,V),g=y()+1;let Q=ub(H,g),ue=M.createHref(H);try{u.pushState(Q,"",ue)}catch(ye){if(ye instanceof DOMException&&ye.name==="DataCloneError")throw ye;a.location.assign(ue)}l&&m&&m({action:f,location:M.location,delta:1})}function I(V,$){f="REPLACE";let H=Ey(M.location,V,$);t&&t(H,V),g=y();let Q=ub(H,g),ue=M.createHref(H);u.replaceState(Q,"",ue),l&&m&&m({action:f,location:M.location,delta:0})}function O(V){return OC(V)}let M={get action(){return f},get location(){return i(a,u)},listen(V){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(lb,v),m=V,()=>{a.removeEventListener(lb,v),m=null}},createHref(V){return e(a,V)},createURL:O,encodeLocation(V){let $=O(V);return{pathname:$.pathname,search:$.search,hash:$.hash}},push:b,replace:I,go(V){return u.go(V)}};return M}function OC(i,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),bt(t,"No window.location.(origin|href) available to create URL");let r=typeof i=="string"?i:Kc(i);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function _w(i,e,t="/"){return PC(i,e,t,!1)}function PC(i,e,t,r){let a=typeof e=="string"?_o(e):e,l=Pr(a.pathname||"/",t);if(l==null)return null;let u=vw(i);MC(u);let f=null;for(let m=0;f==null&&m<u.length;++m){let g=KC(l);f=HC(u[m],g,r)}return f}function vw(i,e=[],t=[],r="",a=!1){let l=(u,f,m=a,g)=>{let y={relativePath:g===void 0?u.path||"":g,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(r)&&m)return;bt(y.relativePath.startsWith(r),`Absolute route path "${y.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(r.length)}let v=Nr([r,y.relativePath]),b=t.concat(y);u.children&&u.children.length>0&&(bt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),vw(u.children,e,b,v,m)),!(u.path==null&&!u.index)&&e.push({path:v,score:FC(v,u.index),routesMeta:b})};return i.forEach((u,f)=>{var m;if(u.path===""||!((m=u.path)!=null&&m.includes("?")))l(u,f);else for(let g of Ew(u.path))l(u,f,!0,g)}),e}function Ew(i){let e=i.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let u=Ew(r.join("/")),f=[];return f.push(...u.map(m=>m===""?l:[l,m].join("/"))),a&&f.push(...u),f.map(m=>i.startsWith("/")&&m===""?"/":m)}function MC(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:qC(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var kC=/^:[\w-]+$/,LC=3,UC=2,zC=1,BC=10,jC=-2,cb=i=>i==="*";function FC(i,e){let t=i.split("/"),r=t.length;return t.some(cb)&&(r+=jC),e&&(r+=UC),t.filter(a=>!cb(a)).reduce((a,l)=>a+(kC.test(l)?LC:l===""?zC:BC),r)}function qC(i,e){return i.length===e.length&&i.slice(0,-1).every((r,a)=>r===e[a])?i[i.length-1]-e[e.length-1]:0}function HC(i,e,t=!1){let{routesMeta:r}=i,a={},l="/",u=[];for(let f=0;f<r.length;++f){let m=r[f],g=f===r.length-1,y=l==="/"?e:e.slice(l.length)||"/",v=Pd({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},y),b=m.route;if(!v&&g&&t&&!r[r.length-1].route.index&&(v=Pd({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},y)),!v)return null;Object.assign(a,v.params),u.push({params:a,pathname:Nr([l,v.pathname]),pathnameBase:YC(Nr([l,v.pathnameBase])),route:b}),v.pathnameBase!=="/"&&(l=Nr([l,v.pathnameBase]))}return u}function Pd(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,r]=GC(i.path,i.caseSensitive,i.end),a=e.match(t);if(!a)return null;let l=a[0],u=l.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:r.reduce((g,{paramName:y,isOptional:v},b)=>{if(y==="*"){let O=f[b]||"";u=l.slice(0,l.length-O.length).replace(/(.)\/+$/,"$1")}const I=f[b];return v&&!I?g[y]=void 0:g[y]=(I||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:u,pattern:i}}function GC(i,e=!1,t=!0){gi(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let r=[],a="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,m)=>(r.push({paramName:f,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(r.push({paramName:"*"}),a+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":i!==""&&i!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function KC(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return gi(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Pr(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=i.charAt(t);return r&&r!=="/"?null:i.slice(t)||"/"}var QC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function $C(i,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof i=="string"?_o(i):i,l;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?l=hb(t.substring(1),"/"):l=hb(t,e)):l=e,{pathname:l,search:WC(r),hash:JC(a)}}function hb(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function Wg(i,e,t,r){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function XC(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function s_(i){let e=XC(i);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function a_(i,e,t,r=!1){let a;typeof i=="string"?a=_o(i):(a={...i},bt(!a.pathname||!a.pathname.includes("?"),Wg("?","pathname","search",a)),bt(!a.pathname||!a.pathname.includes("#"),Wg("#","pathname","hash",a)),bt(!a.search||!a.search.includes("#"),Wg("#","search","hash",a)));let l=i===""||a.pathname==="",u=l?"/":a.pathname,f;if(u==null)f=t;else{let v=e.length-1;if(!r&&u.startsWith("..")){let b=u.split("/");for(;b[0]==="..";)b.shift(),v-=1;a.pathname=b.join("/")}f=v>=0?e[v]:"/"}let m=$C(a,f),g=u&&u!=="/"&&u.endsWith("/"),y=(l||u===".")&&t.endsWith("/");return!m.pathname.endsWith("/")&&(g||y)&&(m.pathname+="/"),m}var Nr=i=>i.join("/").replace(/\/\/+/g,"/"),YC=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),WC=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,JC=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,ZC=class{constructor(i,e,t,r=!1){this.status=i,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function eD(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}function tD(i){return i.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Tw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function bw(i,e){let t=i;if(typeof t!="string"||!QC.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,a=!1;if(Tw)try{let l=new URL(window.location.href),u=t.startsWith("//")?new URL(l.protocol+t):new URL(t),f=Pr(u.pathname,e);u.origin===l.origin&&f!=null?t=f+u.search+u.hash:a=!0}catch{gi(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:a,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Sw=["POST","PUT","PATCH","DELETE"];new Set(Sw);var nD=["GET",...Sw];new Set(nD);var iu=j.createContext(null);iu.displayName="DataRouter";var om=j.createContext(null);om.displayName="DataRouterState";var iD=j.createContext(!1),ww=j.createContext({isTransitioning:!1});ww.displayName="ViewTransition";var rD=j.createContext(new Map);rD.displayName="Fetchers";var sD=j.createContext(null);sD.displayName="Await";var ti=j.createContext(null);ti.displayName="Navigation";var uh=j.createContext(null);uh.displayName="Location";var Ji=j.createContext({outlet:null,matches:[],isDataRoute:!1});Ji.displayName="Route";var o_=j.createContext(null);o_.displayName="RouteError";var Aw="REACT_ROUTER_ERROR",aD="REDIRECT",oD="ROUTE_ERROR_RESPONSE";function lD(i){if(i.startsWith(`${Aw}:${aD}:{`))try{let e=JSON.parse(i.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function uD(i){if(i.startsWith(`${Aw}:${oD}:{`))try{let e=JSON.parse(i.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new ZC(e.status,e.statusText,e.data)}catch{}}function cD(i,{relative:e}={}){bt(ru(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=j.useContext(ti),{hash:a,pathname:l,search:u}=ch(i,{relative:e}),f=l;return t!=="/"&&(f=l==="/"?t:Nr([t,l])),r.createHref({pathname:f,search:u,hash:a})}function ru(){return j.useContext(uh)!=null}function Br(){return bt(ru(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(uh).location}var Iw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Rw(i){j.useContext(ti).static||j.useLayoutEffect(i)}function su(){let{isDataRoute:i}=j.useContext(Ji);return i?SD():hD()}function hD(){bt(ru(),"useNavigate() may be used only in the context of a <Router> component.");let i=j.useContext(iu),{basename:e,navigator:t}=j.useContext(ti),{matches:r}=j.useContext(Ji),{pathname:a}=Br(),l=JSON.stringify(s_(r)),u=j.useRef(!1);return Rw(()=>{u.current=!0}),j.useCallback((m,g={})=>{if(gi(u.current,Iw),!u.current)return;if(typeof m=="number"){t.go(m);return}let y=a_(m,JSON.parse(l),a,g.relative==="path");i==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Nr([e,y.pathname])),(g.replace?t.replace:t.push)(y,g.state,g)},[e,t,l,a,i])}j.createContext(null);function ch(i,{relative:e}={}){let{matches:t}=j.useContext(Ji),{pathname:r}=Br(),a=JSON.stringify(s_(t));return j.useMemo(()=>a_(i,JSON.parse(a),r,e==="path"),[i,a,r,e])}function fD(i,e){return xw(i,e)}function xw(i,e,t,r,a){var H;bt(ru(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=j.useContext(ti),{matches:u}=j.useContext(Ji),f=u[u.length-1],m=f?f.params:{},g=f?f.pathname:"/",y=f?f.pathnameBase:"/",v=f&&f.route;{let Q=v&&v.path||"";Dw(g,!v||Q.endsWith("*")||Q.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${Q}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Q}"> to <Route path="${Q==="/"?"*":`${Q}/*`}">.`)}let b=Br(),I;if(e){let Q=typeof e=="string"?_o(e):e;bt(y==="/"||((H=Q.pathname)==null?void 0:H.startsWith(y)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${Q.pathname}" was given in the \`location\` prop.`),I=Q}else I=b;let O=I.pathname||"/",M=O;if(y!=="/"){let Q=y.replace(/^\//,"").split("/");M="/"+O.replace(/^\//,"").split("/").slice(Q.length).join("/")}let V=_w(i,{pathname:M});gi(v||V!=null,`No routes matched location "${I.pathname}${I.search}${I.hash}" `),gi(V==null||V[V.length-1].route.element!==void 0||V[V.length-1].route.Component!==void 0||V[V.length-1].route.lazy!==void 0,`Matched leaf route at location "${I.pathname}${I.search}${I.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let $=yD(V&&V.map(Q=>Object.assign({},Q,{params:Object.assign({},m,Q.params),pathname:Nr([y,l.encodeLocation?l.encodeLocation(Q.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathname]),pathnameBase:Q.pathnameBase==="/"?y:Nr([y,l.encodeLocation?l.encodeLocation(Q.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Q.pathnameBase])})),u,t,r,a);return e&&$?j.createElement(uh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...I},navigationType:"POP"}},$):$}function dD(){let i=bD(),e=eD(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",i),u=j.createElement(j.Fragment,null,j.createElement("p",null," Hey developer "),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:l},"ErrorBoundary")," or"," ",j.createElement("code",{style:l},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),t?j.createElement("pre",{style:a},t):null,u)}var mD=j.createElement(dD,null),Cw=class extends j.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.onError?this.props.onError(i,e):console.error("React Router caught the following error during render",i)}render(){let i=this.state.error;if(this.context&&typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){const t=uD(i.digest);t&&(i=t)}let e=i!==void 0?j.createElement(Ji.Provider,{value:this.props.routeContext},j.createElement(o_.Provider,{value:i,children:this.props.component})):this.props.children;return this.context?j.createElement(pD,{error:i},e):e}};Cw.contextType=iD;var Jg=new WeakMap;function pD({children:i,error:e}){let{basename:t}=j.useContext(ti);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=lD(e.digest);if(r){let a=Jg.get(e);if(a)throw a;let l=bw(r.location,t);if(Tw&&!Jg.get(e))if(l.isExternal||r.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const u=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:r.replace}));throw Jg.set(e,u),u}return j.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return i}function gD({routeContext:i,match:e,children:t}){let r=j.useContext(iu);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),j.createElement(Ji.Provider,{value:i},t)}function yD(i,e=[],t=null,r=null,a=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let l=i,u=t==null?void 0:t.errors;if(u!=null){let y=l.findIndex(v=>v.route.id&&(u==null?void 0:u[v.route.id])!==void 0);bt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let f=!1,m=-1;if(t)for(let y=0;y<l.length;y++){let v=l[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(m=y),v.route.id){let{loaderData:b,errors:I}=t,O=v.route.loader&&!b.hasOwnProperty(v.route.id)&&(!I||I[v.route.id]===void 0);if(v.route.lazy||O){f=!0,m>=0?l=l.slice(0,m+1):l=[l[0]];break}}}let g=t&&r?(y,v)=>{var b,I;r(y,{location:t.location,params:((I=(b=t.matches)==null?void 0:b[0])==null?void 0:I.params)??{},unstable_pattern:tD(t.matches),errorInfo:v})}:void 0;return l.reduceRight((y,v,b)=>{let I,O=!1,M=null,V=null;t&&(I=u&&v.route.id?u[v.route.id]:void 0,M=v.route.errorElement||mD,f&&(m<0&&b===0?(Dw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),O=!0,V=null):m===b&&(O=!0,V=v.route.hydrateFallbackElement||null)));let $=e.concat(l.slice(0,b+1)),H=()=>{let Q;return I?Q=M:O?Q=V:v.route.Component?Q=j.createElement(v.route.Component,null):v.route.element?Q=v.route.element:Q=y,j.createElement(gD,{match:v,routeContext:{outlet:y,matches:$,isDataRoute:t!=null},children:Q})};return t&&(v.route.ErrorBoundary||v.route.errorElement||b===0)?j.createElement(Cw,{location:t.location,revalidation:t.revalidation,component:M,error:I,children:H(),routeContext:{outlet:null,matches:$,isDataRoute:!0},onError:g}):H()},null)}function l_(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function _D(i){let e=j.useContext(iu);return bt(e,l_(i)),e}function vD(i){let e=j.useContext(om);return bt(e,l_(i)),e}function ED(i){let e=j.useContext(Ji);return bt(e,l_(i)),e}function u_(i){let e=ED(i),t=e.matches[e.matches.length-1];return bt(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function TD(){return u_("useRouteId")}function bD(){var r;let i=j.useContext(o_),e=vD("useRouteError"),t=u_("useRouteError");return i!==void 0?i:(r=e.errors)==null?void 0:r[t]}function SD(){let{router:i}=_D("useNavigate"),e=u_("useNavigate"),t=j.useRef(!1);return Rw(()=>{t.current=!0}),j.useCallback(async(a,l={})=>{gi(t.current,Iw),t.current&&(typeof a=="number"?await i.navigate(a):await i.navigate(a,{fromRouteId:e,...l}))},[i,e])}var fb={};function Dw(i,e,t){!e&&!fb[i]&&(fb[i]=!0,gi(!1,t))}j.memo(wD);function wD({routes:i,future:e,state:t,onError:r}){return xw(i,void 0,t,r,e)}function AD({to:i,replace:e,state:t,relative:r}){bt(ru(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=j.useContext(ti);gi(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=j.useContext(Ji),{pathname:u}=Br(),f=su(),m=a_(i,s_(l),u,r==="path"),g=JSON.stringify(m);return j.useEffect(()=>{f(JSON.parse(g),{replace:e,state:t,relative:r})},[f,g,r,e,t]),null}function eo(i){bt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function ID({basename:i="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:l=!1,unstable_useTransitions:u}){bt(!ru(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=i.replace(/^\/*/,"/"),m=j.useMemo(()=>({basename:f,navigator:a,static:l,unstable_useTransitions:u,future:{}}),[f,a,l,u]);typeof t=="string"&&(t=_o(t));let{pathname:g="/",search:y="",hash:v="",state:b=null,key:I="default"}=t,O=j.useMemo(()=>{let M=Pr(g,f);return M==null?null:{location:{pathname:M,search:y,hash:v,state:b,key:I},navigationType:r}},[f,g,y,v,b,I,r]);return gi(O!=null,`<Router basename="${f}"> is not able to match the URL "${g}${y}${v}" because it does not start with the basename, so the <Router> won't render anything.`),O==null?null:j.createElement(ti.Provider,{value:m},j.createElement(uh.Provider,{children:e,value:O}))}function Nw({children:i,location:e}){return fD(Ty(i),e)}function Ty(i,e=[]){let t=[];return j.Children.forEach(i,(r,a)=>{if(!j.isValidElement(r))return;let l=[...e,a];if(r.type===j.Fragment){t.push.apply(t,Ty(r.props.children,l));return}bt(r.type===eo,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),bt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=Ty(r.props.children,l)),t.push(u)}),t}var _d="get",vd="application/x-www-form-urlencoded";function lm(i){return typeof HTMLElement<"u"&&i instanceof HTMLElement}function RD(i){return lm(i)&&i.tagName.toLowerCase()==="button"}function xD(i){return lm(i)&&i.tagName.toLowerCase()==="form"}function CD(i){return lm(i)&&i.tagName.toLowerCase()==="input"}function DD(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function ND(i,e){return i.button===0&&(!e||e==="_self")&&!DD(i)}var ld=null;function VD(){if(ld===null)try{new FormData(document.createElement("form"),0),ld=!1}catch{ld=!0}return ld}var OD=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Zg(i){return i!=null&&!OD.has(i)?(gi(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${vd}"`),null):i}function PD(i,e){let t,r,a,l,u;if(xD(i)){let f=i.getAttribute("action");r=f?Pr(f,e):null,t=i.getAttribute("method")||_d,a=Zg(i.getAttribute("enctype"))||vd,l=new FormData(i)}else if(RD(i)||CD(i)&&(i.type==="submit"||i.type==="image")){let f=i.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=i.getAttribute("formaction")||f.getAttribute("action");if(r=m?Pr(m,e):null,t=i.getAttribute("formmethod")||f.getAttribute("method")||_d,a=Zg(i.getAttribute("formenctype"))||Zg(f.getAttribute("enctype"))||vd,l=new FormData(f,i),!VD()){let{name:g,type:y,value:v}=i;if(y==="image"){let b=g?`${g}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else g&&l.append(g,v)}}else{if(lm(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=_d,r=null,a=vd,u=i}return l&&a==="text/plain"&&(u=l,l=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:l,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function c_(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function MD(i,e,t,r){let a=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return t?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${r}`:a.pathname=`${a.pathname}.${r}`:a.pathname==="/"?a.pathname=`_root.${r}`:e&&Pr(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${r}`,a}async function kD(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function LD(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function UD(i,e,t){let r=await Promise.all(i.map(async a=>{let l=e.routes[a.route.id];if(l){let u=await kD(l,t);return u.links?u.links():[]}return[]}));return FD(r.flat(1).filter(LD).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function db(i,e,t,r,a,l){let u=(m,g)=>t[g]?m.route.id!==t[g].route.id:!0,f=(m,g)=>{var y;return t[g].pathname!==m.pathname||((y=t[g].route.path)==null?void 0:y.endsWith("*"))&&t[g].params["*"]!==m.params["*"]};return l==="assets"?e.filter((m,g)=>u(m,g)||f(m,g)):l==="data"?e.filter((m,g)=>{var v;let y=r.routes[m.route.id];if(!y||!y.hasLoader)return!1;if(u(m,g)||f(m,g))return!0;if(m.route.shouldRevalidate){let b=m.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((v=t[0])==null?void 0:v.params)||{},nextUrl:new URL(i,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function zD(i,e,{includeHydrateFallback:t}={}){return BD(i.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function BD(i){return[...new Set(i)]}function jD(i){let e={},t=Object.keys(i).sort();for(let r of t)e[r]=i[r];return e}function FD(i,e){let t=new Set;return new Set(e),i.reduce((r,a)=>{let l=JSON.stringify(jD(a));return t.has(l)||(t.add(l),r.push({key:l,link:a})),r},[])}function Vw(){let i=j.useContext(iu);return c_(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function qD(){let i=j.useContext(om);return c_(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var h_=j.createContext(void 0);h_.displayName="FrameworkContext";function Ow(){let i=j.useContext(h_);return c_(i,"You must render this element inside a <HydratedRouter> element"),i}function HD(i,e){let t=j.useContext(h_),[r,a]=j.useState(!1),[l,u]=j.useState(!1),{onFocus:f,onBlur:m,onMouseEnter:g,onMouseLeave:y,onTouchStart:v}=e,b=j.useRef(null);j.useEffect(()=>{if(i==="render"&&u(!0),i==="viewport"){let M=$=>{$.forEach(H=>{u(H.isIntersecting)})},V=new IntersectionObserver(M,{threshold:.5});return b.current&&V.observe(b.current),()=>{V.disconnect()}}},[i]),j.useEffect(()=>{if(r){let M=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(M)}}},[r]);let I=()=>{a(!0)},O=()=>{a(!1),u(!1)};return t?i!=="intent"?[l,b,{}]:[l,b,{onFocus:Sc(f,I),onBlur:Sc(m,O),onMouseEnter:Sc(g,I),onMouseLeave:Sc(y,O),onTouchStart:Sc(v,I)}]:[!1,b,{}]}function Sc(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function GD({page:i,...e}){let{router:t}=Vw(),r=j.useMemo(()=>_w(t.routes,i,t.basename),[t.routes,i,t.basename]);return r?j.createElement(QD,{page:i,matches:r,...e}):null}function KD(i){let{manifest:e,routeModules:t}=Ow(),[r,a]=j.useState([]);return j.useEffect(()=>{let l=!1;return UD(i,e,t).then(u=>{l||a(u)}),()=>{l=!0}},[i,e,t]),r}function QD({page:i,matches:e,...t}){let r=Br(),{future:a,manifest:l,routeModules:u}=Ow(),{basename:f}=Vw(),{loaderData:m,matches:g}=qD(),y=j.useMemo(()=>db(i,e,g,l,r,"data"),[i,e,g,l,r]),v=j.useMemo(()=>db(i,e,g,l,r,"assets"),[i,e,g,l,r]),b=j.useMemo(()=>{if(i===r.pathname+r.search+r.hash)return[];let M=new Set,V=!1;if(e.forEach(H=>{var ue;let Q=l.routes[H.route.id];!Q||!Q.hasLoader||(!y.some(ye=>ye.route.id===H.route.id)&&H.route.id in m&&((ue=u[H.route.id])!=null&&ue.shouldRevalidate)||Q.hasClientLoader?V=!0:M.add(H.route.id))}),M.size===0)return[];let $=MD(i,f,a.unstable_trailingSlashAwareDataRequests,"data");return V&&M.size>0&&$.searchParams.set("_routes",e.filter(H=>M.has(H.route.id)).map(H=>H.route.id).join(",")),[$.pathname+$.search]},[f,a.unstable_trailingSlashAwareDataRequests,m,r,l,y,e,i,u]),I=j.useMemo(()=>zD(v,l),[v,l]),O=KD(v);return j.createElement(j.Fragment,null,b.map(M=>j.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...t})),I.map(M=>j.createElement("link",{key:M,rel:"modulepreload",href:M,...t})),O.map(({key:M,link:V})=>j.createElement("link",{key:M,nonce:t.nonce,...V,crossOrigin:V.crossOrigin??t.crossOrigin})))}function $D(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var XD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{XD&&(window.__reactRouterVersion="7.13.0")}catch{}function YD({basename:i,children:e,unstable_useTransitions:t,window:r}){let a=j.useRef();a.current==null&&(a.current=DC({window:r,v5Compat:!0}));let l=a.current,[u,f]=j.useState({action:l.action,location:l.location}),m=j.useCallback(g=>{t===!1?f(g):j.startTransition(()=>f(g))},[t]);return j.useLayoutEffect(()=>l.listen(m),[l,m]),j.createElement(ID,{basename:i,children:e,location:u.location,navigationType:u.action,navigator:l,unstable_useTransitions:t})}var Pw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,um=j.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:l,replace:u,state:f,target:m,to:g,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:b,...I},O){let{basename:M,unstable_useTransitions:V}=j.useContext(ti),$=typeof g=="string"&&Pw.test(g),H=bw(g,M);g=H.to;let Q=cD(g,{relative:a}),[ue,ye,pe]=HD(r,I),x=e2(g,{replace:u,state:f,target:m,preventScrollReset:y,relative:a,viewTransition:v,unstable_defaultShouldRevalidate:b,unstable_useTransitions:V});function R(U){e&&e(U),U.defaultPrevented||x(U)}let D=j.createElement("a",{...I,...pe,href:H.absoluteURL||Q,onClick:H.isExternal||l?e:R,ref:$D(O,ye),target:m,"data-discover":!$&&t==="render"?"true":void 0});return ue&&!$?j.createElement(j.Fragment,null,D,j.createElement(GD,{page:Q})):D});um.displayName="Link";var WD=j.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:l,to:u,viewTransition:f,children:m,...g},y){let v=ch(u,{relative:g.relative}),b=Br(),I=j.useContext(om),{navigator:O,basename:M}=j.useContext(ti),V=I!=null&&s2(v)&&f===!0,$=O.encodeLocation?O.encodeLocation(v).pathname:v.pathname,H=b.pathname,Q=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;t||(H=H.toLowerCase(),Q=Q?Q.toLowerCase():null,$=$.toLowerCase()),Q&&M&&(Q=Pr(Q,M)||Q);const ue=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let ye=H===$||!a&&H.startsWith($)&&H.charAt(ue)==="/",pe=Q!=null&&(Q===$||!a&&Q.startsWith($)&&Q.charAt($.length)==="/"),x={isActive:ye,isPending:pe,isTransitioning:V},R=ye?e:void 0,D;typeof r=="function"?D=r(x):D=[r,ye?"active":null,pe?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let U=typeof l=="function"?l(x):l;return j.createElement(um,{...g,"aria-current":R,className:D,ref:y,style:U,to:u,viewTransition:f},typeof m=="function"?m(x):m)});WD.displayName="NavLink";var JD=j.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:l,method:u=_d,action:f,onSubmit:m,relative:g,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:b,...I},O)=>{let{unstable_useTransitions:M}=j.useContext(ti),V=i2(),$=r2(f,{relative:g}),H=u.toLowerCase()==="get"?"get":"post",Q=typeof f=="string"&&Pw.test(f),ue=ye=>{if(m&&m(ye),ye.defaultPrevented)return;ye.preventDefault();let pe=ye.nativeEvent.submitter,x=(pe==null?void 0:pe.getAttribute("formmethod"))||u,R=()=>V(pe||ye.currentTarget,{fetcherKey:e,method:x,navigate:t,replace:a,state:l,relative:g,preventScrollReset:y,viewTransition:v,unstable_defaultShouldRevalidate:b});M&&t!==!1?j.startTransition(()=>R()):R()};return j.createElement("form",{ref:O,method:H,action:$,onSubmit:r?m:ue,...I,"data-discover":!Q&&i==="render"?"true":void 0})});JD.displayName="Form";function ZD(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Mw(i){let e=j.useContext(iu);return bt(e,ZD(i)),e}function e2(i,{target:e,replace:t,state:r,preventScrollReset:a,relative:l,viewTransition:u,unstable_defaultShouldRevalidate:f,unstable_useTransitions:m}={}){let g=su(),y=Br(),v=ch(i,{relative:l});return j.useCallback(b=>{if(ND(b,e)){b.preventDefault();let I=t!==void 0?t:Kc(y)===Kc(v),O=()=>g(i,{replace:I,state:r,preventScrollReset:a,relative:l,viewTransition:u,unstable_defaultShouldRevalidate:f});m?j.startTransition(()=>O()):O()}},[y,g,v,t,r,e,i,a,l,u,f,m])}var t2=0,n2=()=>`__${String(++t2)}__`;function i2(){let{router:i}=Mw("useSubmit"),{basename:e}=j.useContext(ti),t=TD(),r=i.fetch,a=i.navigate;return j.useCallback(async(l,u={})=>{let{action:f,method:m,encType:g,formData:y,body:v}=PD(l,e);if(u.navigate===!1){let b=u.fetcherKey||n2();await r(b,t,u.action||f,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:y,body:v,formMethod:u.method||m,formEncType:u.encType||g,flushSync:u.flushSync})}else await a(u.action||f,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:y,body:v,formMethod:u.method||m,formEncType:u.encType||g,replace:u.replace,state:u.state,fromRouteId:t,flushSync:u.flushSync,viewTransition:u.viewTransition})},[r,a,e,t])}function r2(i,{relative:e}={}){let{basename:t}=j.useContext(ti),r=j.useContext(Ji);bt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={...ch(i||".",{relative:e})},u=Br();if(i==null){l.search=u.search;let f=new URLSearchParams(l.search),m=f.getAll("index");if(m.some(y=>y==="")){f.delete("index"),m.filter(v=>v).forEach(v=>f.append("index",v));let y=f.toString();l.search=y?`?${y}`:""}}return(!i||i===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Nr([t,l.pathname])),Kc(l)}function s2(i,{relative:e}={}){let t=j.useContext(ww);bt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Mw("useViewTransitionState"),a=ch(i,{relative:e});if(!t.isTransitioning)return!1;let l=Pr(t.currentLocation.pathname,r)||t.currentLocation.pathname,u=Pr(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Pd(a.pathname,u)!=null||Pd(a.pathname,l)!=null}const a2=()=>{};var mb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kw=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let a=i.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},o2=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const a=i[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=i[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=i[t++],u=i[t++],f=i[t++],m=((a&7)<<18|(l&63)<<12|(u&63)<<6|f&63)-65536;e[r++]=String.fromCharCode(55296+(m>>10)),e[r++]=String.fromCharCode(56320+(m&1023))}else{const l=i[t++],u=i[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},Lw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<i.length;a+=3){const l=i[a],u=a+1<i.length,f=u?i[a+1]:0,m=a+2<i.length,g=m?i[a+2]:0,y=l>>2,v=(l&3)<<4|f>>4;let b=(f&15)<<2|g>>6,I=g&63;m||(I=64,u||(b=64)),r.push(t[y],t[v],t[b],t[I])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(kw(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):o2(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<i.length;){const l=t[i.charAt(a++)],f=a<i.length?t[i.charAt(a)]:0;++a;const g=a<i.length?t[i.charAt(a)]:64;++a;const v=a<i.length?t[i.charAt(a)]:64;if(++a,l==null||f==null||g==null||v==null)throw new l2;const b=l<<2|f>>4;if(r.push(b),g!==64){const I=f<<4&240|g>>2;if(r.push(I),v!==64){const O=g<<6&192|v;r.push(O)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class l2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const u2=function(i){const e=kw(i);return Lw.encodeByteArray(e,!0)},Md=function(i){return u2(i).replace(/\./g,"")},Uw=function(i){try{return Lw.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2=()=>zw().__FIREBASE_DEFAULTS__,h2=()=>{if(typeof process>"u"||typeof mb>"u")return;const i=mb.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},f2=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Uw(i[1]);return e&&JSON.parse(e)},cm=()=>{try{return a2()||c2()||h2()||f2()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Bw=i=>{var e,t;return(t=(e=cm())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},d2=i=>{const e=Bw(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},jw=()=>{var i;return(i=cm())===null||i===void 0?void 0:i.config},Fw=i=>{var e;return(e=cm())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vo(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function f_(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=i.iat||0,l=i.sub||i.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Md(JSON.stringify(t)),Md(JSON.stringify(u)),""].join(".")}const Mc={};function g2(){const i={prod:[],emulator:[]};for(const e of Object.keys(Mc))Mc[e]?i.emulator.push(e):i.prod.push(e);return i}function y2(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let pb=!1;function qw(i,e){if(typeof window>"u"||typeof document>"u"||!vo(window.location.host)||Mc[i]===e||Mc[i]||pb)return;Mc[i]=e;function t(b){return`__firebase__banner__${b}`}const r="__firebase__banner",l=g2().prod.length>0;function u(){const b=document.getElementById(r);b&&b.remove()}function f(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function m(b,I){b.setAttribute("width","24"),b.setAttribute("id",I),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{pb=!0,u()},b}function y(b,I){b.setAttribute("id",I),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function v(){const b=y2(r),I=t("text"),O=document.getElementById(I)||document.createElement("span"),M=t("learnmore"),V=document.getElementById(M)||document.createElement("a"),$=t("preprendIcon"),H=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const Q=b.element;f(Q),y(V,M);const ue=g();m(H,$),Q.append(H,O,V,ue),document.body.appendChild(Q)}l?(O.innerText="Preview backend disconnected.",H.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(H.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,O.innerText="Preview backend running in this workspace."),O.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",v):v()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qt())}function Hw(){var i;const e=(i=cm())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function v2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function E2(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function T2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function b2(){const i=Qt();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function Gw(){return!Hw()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Kw(){return!Hw()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Qw(){try{return typeof indexedDB=="object"}catch{return!1}}function S2(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2="FirebaseError";class jr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=w2,Object.setPrototypeOf(this,jr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,hh.prototype.create)}}class hh{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?A2(l,r):"Error",f=`${this.serviceName}: ${u} (${a}).`;return new jr(a,f,r)}}function A2(i,e){return i.replace(I2,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const I2=/\{\$([^}]+)}/g;function R2(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function xi(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=i[a],u=e[a];if(gb(l)&&gb(u)){if(!xi(l,u))return!1}else if(l!==u)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function gb(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fh(i){const e=[];for(const[t,r]of Object.entries(i))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Cc(i){const e={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Dc(i){const e=i.indexOf("?");if(!e)return"";const t=i.indexOf("#",e);return i.substring(e,t>0?t:void 0)}function x2(i,e){const t=new C2(i,e);return t.subscribe.bind(t)}class C2{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");D2(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=ey),a.error===void 0&&(a.error=ey),a.complete===void 0&&(a.complete=ey);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function D2(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function ey(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(i){return i&&i._delegate?i._delegate:i}class so{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new m2;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(O2(e))try{this.getOrInitializeService({instanceIdentifier:Qa})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=Qa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Qa){return this.instances.has(e)}getOptions(e=Qa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);r===f&&u.resolve(a)}return a}onInit(e,t){var r;const a=this.normalizeInstanceIdentifier(t),l=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(a,l);const u=this.instances.get(a);return u&&e(u,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:V2(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Qa){return this.component?this.component.multipleInstances?e:Qa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function V2(i){return i===Qa?void 0:i}function O2(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new N2(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(je||(je={}));const M2={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},k2=je.INFO,L2={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},U2=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),a=L2[e];if(a)console[a](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class d_{constructor(e){this.name=e,this._logLevel=k2,this._logHandler=U2,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?M2[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const z2=(i,e)=>e.some(t=>i instanceof t);let yb,_b;function B2(){return yb||(yb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function j2(){return _b||(_b=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $w=new WeakMap,by=new WeakMap,Xw=new WeakMap,ty=new WeakMap,m_=new WeakMap;function F2(i){const e=new Promise((t,r)=>{const a=()=>{i.removeEventListener("success",l),i.removeEventListener("error",u)},l=()=>{t(Qs(i.result)),a()},u=()=>{r(i.error),a()};i.addEventListener("success",l),i.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&$w.set(t,i)}).catch(()=>{}),m_.set(e,i),e}function q2(i){if(by.has(i))return;const e=new Promise((t,r)=>{const a=()=>{i.removeEventListener("complete",l),i.removeEventListener("error",u),i.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{r(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",l),i.addEventListener("error",u),i.addEventListener("abort",u)});by.set(i,e)}let Sy={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return by.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Xw.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Qs(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function H2(i){Sy=i(Sy)}function G2(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(ny(this),e,...t);return Xw.set(r,e.sort?e.sort():[e]),Qs(r)}:j2().includes(i)?function(...e){return i.apply(ny(this),e),Qs($w.get(this))}:function(...e){return Qs(i.apply(ny(this),e))}}function K2(i){return typeof i=="function"?G2(i):(i instanceof IDBTransaction&&q2(i),z2(i,B2())?new Proxy(i,Sy):i)}function Qs(i){if(i instanceof IDBRequest)return F2(i);if(ty.has(i))return ty.get(i);const e=K2(i);return e!==i&&(ty.set(i,e),m_.set(e,i)),e}const ny=i=>m_.get(i);function Q2(i,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const u=indexedDB.open(i,e),f=Qs(u);return r&&u.addEventListener("upgradeneeded",m=>{r(Qs(u.result),m.oldVersion,m.newVersion,Qs(u.transaction),m)}),t&&u.addEventListener("blocked",m=>t(m.oldVersion,m.newVersion,m)),f.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),f}const $2=["get","getKey","getAll","getAllKeys","count"],X2=["put","add","delete","clear"],iy=new Map;function vb(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(iy.get(e))return iy.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=X2.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||$2.includes(t)))return;const l=async function(u,...f){const m=this.transaction(u,a?"readwrite":"readonly");let g=m.store;return r&&(g=g.index(f.shift())),(await Promise.all([g[t](...f),a&&m.done]))[0]};return iy.set(e,l),l}H2(i=>({...i,get:(e,t,r)=>vb(e,t)||i.get(e,t,r),has:(e,t)=>!!vb(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(W2(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function W2(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const wy="@firebase/app",Eb="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mr=new d_("@firebase/app"),J2="@firebase/app-compat",Z2="@firebase/analytics-compat",eN="@firebase/analytics",tN="@firebase/app-check-compat",nN="@firebase/app-check",iN="@firebase/auth",rN="@firebase/auth-compat",sN="@firebase/database",aN="@firebase/data-connect",oN="@firebase/database-compat",lN="@firebase/functions",uN="@firebase/functions-compat",cN="@firebase/installations",hN="@firebase/installations-compat",fN="@firebase/messaging",dN="@firebase/messaging-compat",mN="@firebase/performance",pN="@firebase/performance-compat",gN="@firebase/remote-config",yN="@firebase/remote-config-compat",_N="@firebase/storage",vN="@firebase/storage-compat",EN="@firebase/firestore",TN="@firebase/ai",bN="@firebase/firestore-compat",SN="firebase",wN="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kd="[DEFAULT]",AN={[wy]:"fire-core",[J2]:"fire-core-compat",[eN]:"fire-analytics",[Z2]:"fire-analytics-compat",[nN]:"fire-app-check",[tN]:"fire-app-check-compat",[iN]:"fire-auth",[rN]:"fire-auth-compat",[sN]:"fire-rtdb",[aN]:"fire-data-connect",[oN]:"fire-rtdb-compat",[lN]:"fire-fn",[uN]:"fire-fn-compat",[cN]:"fire-iid",[hN]:"fire-iid-compat",[fN]:"fire-fcm",[dN]:"fire-fcm-compat",[mN]:"fire-perf",[pN]:"fire-perf-compat",[gN]:"fire-rc",[yN]:"fire-rc-compat",[_N]:"fire-gcs",[vN]:"fire-gcs-compat",[EN]:"fire-fst",[bN]:"fire-fst-compat",[TN]:"fire-vertex","fire-js":"fire-js",[SN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld=new Map,IN=new Map,Ay=new Map;function Tb(i,e){try{i.container.addComponent(e)}catch(t){Mr.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Ol(i){const e=i.name;if(Ay.has(e))return Mr.debug(`There were multiple attempts to register component ${e}.`),!1;Ay.set(e,i);for(const t of Ld.values())Tb(t,i);for(const t of IN.values())Tb(t,i);return!0}function dh(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function RN(i,e,t=kd){dh(i,e).clearInstance(t)}function mi(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$s=new hh("app","Firebase",xN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new so("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $s.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const au=wN;function Yw(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r=Object.assign({name:kd,automaticDataCollectionEnabled:!0},e),a=r.name;if(typeof a!="string"||!a)throw $s.create("bad-app-name",{appName:String(a)});if(t||(t=jw()),!t)throw $s.create("no-options");const l=Ld.get(a);if(l){if(xi(t,l.options)&&xi(r,l.config))return l;throw $s.create("duplicate-app",{appName:a})}const u=new P2(a);for(const m of Ay.values())u.addComponent(m);const f=new CN(t,r,u);return Ld.set(a,f),f}function Ww(i=kd){const e=Ld.get(i);if(!e&&i===kd&&jw())return Yw();if(!e)throw $s.create("no-app",{appName:i});return e}function Xs(i,e,t){var r;let a=(r=AN[i])!==null&&r!==void 0?r:i;t&&(a+=`-${t}`);const l=a.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const f=[`Unable to register library "${a}" with version "${e}":`];l&&f.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Mr.warn(f.join(" "));return}Ol(new so(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN="firebase-heartbeat-database",NN=1,Qc="firebase-heartbeat-store";let ry=null;function Jw(){return ry||(ry=Q2(DN,NN,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(Qc)}catch(t){console.warn(t)}}}}).catch(i=>{throw $s.create("idb-open",{originalErrorMessage:i.message})})),ry}async function VN(i){try{const t=(await Jw()).transaction(Qc),r=await t.objectStore(Qc).get(Zw(i));return await t.done,r}catch(e){if(e instanceof jr)Mr.warn(e.message);else{const t=$s.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Mr.warn(t.message)}}}async function bb(i,e){try{const r=(await Jw()).transaction(Qc,"readwrite");await r.objectStore(Qc).put(e,Zw(i)),await r.done}catch(t){if(t instanceof jr)Mr.warn(t.message);else{const r=$s.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Mr.warn(r.message)}}}function Zw(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON=1024,PN=30;class MN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new LN(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=Sb();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>PN){const u=UN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Mr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Sb(),{heartbeatsToSend:r,unsentEntries:a}=kN(this._heartbeatsCache.heartbeats),l=Md(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Mr.warn(t),""}}}function Sb(){return new Date().toISOString().substring(0,10)}function kN(i,e=ON){const t=[];let r=i.slice();for(const a of i){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),wb(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),wb(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class LN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Qw()?S2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await VN(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return bb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return bb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function wb(i){return Md(JSON.stringify({version:2,heartbeats:i})).length}function UN(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let r=1;r<i.length;r++)i[r].date<t&&(t=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zN(i){Ol(new so("platform-logger",e=>new Y2(e),"PRIVATE")),Ol(new so("heartbeat",e=>new MN(e),"PRIVATE")),Xs(wy,Eb,i),Xs(wy,Eb,"esm2017"),Xs("fire-js","")}zN("");function p_(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(i);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(i,r[a])&&(t[r[a]]=i[r[a]]);return t}function eA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const BN=eA,tA=new hh("auth","Firebase",eA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud=new d_("@firebase/auth");function jN(i,...e){Ud.logLevel<=je.WARN&&Ud.warn(`Auth (${au}): ${i}`,...e)}function Ed(i,...e){Ud.logLevel<=je.ERROR&&Ud.error(`Auth (${au}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ci(i,...e){throw g_(i,...e)}function Qi(i,...e){return g_(i,...e)}function nA(i,e,t){const r=Object.assign(Object.assign({},BN()),{[e]:t});return new hh("auth","Firebase",r).create(e,{appName:i.name})}function Vr(i){return nA(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function g_(i,...e){if(typeof i!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(t,...r)}return tA.create(i,...e)}function Re(i,e,...t){if(!i)throw g_(e,...t)}function Ir(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Ed(e),new Error(e)}function kr(i,e){i||Ir(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iy(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function FN(){return Ab()==="http:"||Ab()==="https:"}function Ab(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(FN()||E2()||"connection"in navigator)?navigator.onLine:!0}function HN(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,t){this.shortDelay=e,this.longDelay=t,kr(t>e,"Short delay should be less than long delay!"),this.isMobile=_2()||T2()}get(){return qN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y_(i,e){kr(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ir("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ir("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ir("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],QN=new mh(3e4,6e4);function aa(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function oa(i,e,t,r,a={}){return rA(i,a,async()=>{let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});const f=fh(Object.assign({key:i.config.apiKey},u)).slice(1),m=await i._getAdditionalHeaders();m["Content-Type"]="application/json",i.languageCode&&(m["X-Firebase-Locale"]=i.languageCode);const g=Object.assign({method:e,headers:m},l);return v2()||(g.referrerPolicy="no-referrer"),i.emulatorConfig&&vo(i.emulatorConfig.host)&&(g.credentials="include"),iA.fetch()(await sA(i,i.config.apiHost,t,f),g)})}async function rA(i,e,t){i._canInitEmulator=!1;const r=Object.assign(Object.assign({},GN),e);try{const a=new XN(i),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw ud(i,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const f=l.ok?u.errorMessage:u.error.message,[m,g]=f.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw ud(i,"credential-already-in-use",u);if(m==="EMAIL_EXISTS")throw ud(i,"email-already-in-use",u);if(m==="USER_DISABLED")throw ud(i,"user-disabled",u);const y=r[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw nA(i,y,g);Ci(i,y)}}catch(a){if(a instanceof jr)throw a;Ci(i,"network-request-failed",{message:String(a)})}}async function ph(i,e,t,r,a={}){const l=await oa(i,e,t,r,a);return"mfaPendingCredential"in l&&Ci(i,"multi-factor-auth-required",{_serverResponse:l}),l}async function sA(i,e,t,r){const a=`${e}${t}?${r}`,l=i,u=l.config.emulator?y_(i.config,a):`${i.config.apiScheme}://${a}`;return KN.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function $N(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class XN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Qi(this.auth,"network-request-failed")),QN.get())})}}function ud(i,e,t){const r={appName:i.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=Qi(i,e,r);return a.customData._tokenResponse=t,a}function Ib(i){return i!==void 0&&i.enterprise!==void 0}class YN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return $N(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function WN(i,e){return oa(i,"GET","/v2/recaptchaConfig",aa(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JN(i,e){return oa(i,"POST","/v1/accounts:delete",e)}async function zd(i,e){return oa(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ZN(i,e=!1){const t=ct(i),r=await t.getIdToken(e),a=__(r);Re(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:a,token:r,authTime:kc(sy(a.auth_time)),issuedAtTime:kc(sy(a.iat)),expirationTime:kc(sy(a.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function sy(i){return Number(i)*1e3}function __(i){const[e,t,r]=i.split(".");if(e===void 0||t===void 0||r===void 0)return Ed("JWT malformed, contained fewer than 3 sections"),null;try{const a=Uw(t);return a?JSON.parse(a):(Ed("Failed to decode base64 JWT payload"),null)}catch(a){return Ed("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function Rb(i){const e=__(i);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $c(i,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof jr&&eV(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function eV({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ry{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=kc(this.lastLoginAt),this.creationTime=kc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bd(i){var e;const t=i.auth,r=await i.getIdToken(),a=await $c(i,zd(t,{idToken:r}));Re(a==null?void 0:a.users.length,t,"internal-error");const l=a.users[0];i._notifyReloadListener(l);const u=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?aA(l.providerUserInfo):[],f=iV(i.providerData,u),m=i.isAnonymous,g=!(i.email&&l.passwordHash)&&!(f!=null&&f.length),y=m?g:!1,v={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new Ry(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(i,v)}async function nV(i){const e=ct(i);await Bd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function iV(i,e){return[...i.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function aA(i){return i.map(e=>{var{providerId:t}=e,r=p_(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rV(i,e){const t=await rA(i,{},async()=>{const r=fh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=i.config,u=await sA(i,a,"/v1/token",`key=${l}`),f=await i._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:f,body:r};return i.emulatorConfig&&vo(i.emulatorConfig.host)&&(m.credentials="include"),iA.fetch()(u,m)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function sV(i,e){return oa(i,"POST","/v2/accounts:revokeToken",aa(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Rb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const t=Rb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await rV(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,u=new Rl;return r&&(Re(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),a&&(Re(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(Re(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Rl,this.toJSON())}_performRefresh(){return Ir("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(i,e){Re(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Ai{constructor(e){var{uid:t,auth:r,stsTokenManager:a}=e,l=p_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new tV(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new Ry(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await $c(this,this.stsTokenManager.getToken(this.auth,e));return Re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return ZN(this,e)}reload(){return nV(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ai(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Bd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mi(this.auth.app))return Promise.reject(Vr(this.auth));const e=await this.getIdToken();return await $c(this,JN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,a,l,u,f,m,g,y;const v=(r=t.displayName)!==null&&r!==void 0?r:void 0,b=(a=t.email)!==null&&a!==void 0?a:void 0,I=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,O=(u=t.photoURL)!==null&&u!==void 0?u:void 0,M=(f=t.tenantId)!==null&&f!==void 0?f:void 0,V=(m=t._redirectEventId)!==null&&m!==void 0?m:void 0,$=(g=t.createdAt)!==null&&g!==void 0?g:void 0,H=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:Q,emailVerified:ue,isAnonymous:ye,providerData:pe,stsTokenManager:x}=t;Re(Q&&x,e,"internal-error");const R=Rl.fromJSON(this.name,x);Re(typeof Q=="string",e,"internal-error"),Ms(v,e.name),Ms(b,e.name),Re(typeof ue=="boolean",e,"internal-error"),Re(typeof ye=="boolean",e,"internal-error"),Ms(I,e.name),Ms(O,e.name),Ms(M,e.name),Ms(V,e.name),Ms($,e.name),Ms(H,e.name);const D=new Ai({uid:Q,auth:e,email:b,emailVerified:ue,displayName:v,isAnonymous:ye,photoURL:O,phoneNumber:I,tenantId:M,stsTokenManager:R,createdAt:$,lastLoginAt:H});return pe&&Array.isArray(pe)&&(D.providerData=pe.map(U=>Object.assign({},U))),V&&(D._redirectEventId=V),D}static async _fromIdTokenResponse(e,t,r=!1){const a=new Rl;a.updateFromServerResponse(t);const l=new Ai({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await Bd(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];Re(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?aA(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),f=new Rl;f.updateFromIdToken(r);const m=new Ai({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:u}),g={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Ry(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(m,g),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb=new Map;function Rr(i){kr(i instanceof Function,"Expected a class definition");let e=xb.get(i);return e?(kr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,xb.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}oA.type="NONE";const Cb=oA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(i,e,t){return`firebase:${i}:${e}:${t}`}class xl{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=Td(this.userKey,a.apiKey,l),this.fullPersistenceKey=Td("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await zd(this.auth,{idToken:e}).catch(()=>{});return t?Ai._fromGetAccountInfoResponse(this.auth,t,e):null}return Ai._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new xl(Rr(Cb),e,r);const a=(await Promise.all(t.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let l=a[0]||Rr(Cb);const u=Td(r,e.config.apiKey,e.name);let f=null;for(const g of t)try{const y=await g._get(u);if(y){let v;if(typeof y=="string"){const b=await zd(e,{idToken:y}).catch(()=>{});if(!b)break;v=await Ai._fromGetAccountInfoResponse(e,b,y)}else v=Ai._fromJSON(e,y);g!==l&&(f=v),l=g;break}}catch{}const m=a.filter(g=>g._shouldAllowMigration);return!l._shouldAllowMigration||!m.length?new xl(l,e,r):(l=m[0],f&&await l._set(u,f.toJSON()),await Promise.all(t.map(async g=>{if(g!==l)try{await g._remove(u)}catch{}})),new xl(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dA(e))return"Blackberry";if(mA(e))return"Webos";if(uA(e))return"Safari";if((e.includes("chrome/")||cA(e))&&!e.includes("edge/"))return"Chrome";if(fA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function lA(i=Qt()){return/firefox\//i.test(i)}function uA(i=Qt()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cA(i=Qt()){return/crios\//i.test(i)}function hA(i=Qt()){return/iemobile/i.test(i)}function fA(i=Qt()){return/android/i.test(i)}function dA(i=Qt()){return/blackberry/i.test(i)}function mA(i=Qt()){return/webos/i.test(i)}function v_(i=Qt()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function aV(i=Qt()){var e;return v_(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function oV(){return b2()&&document.documentMode===10}function pA(i=Qt()){return v_(i)||fA(i)||mA(i)||dA(i)||/windows phone/i.test(i)||hA(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(i,e=[]){let t;switch(i){case"Browser":t=Db(Qt());break;case"Worker":t=`${Db(Qt())}-${i}`;break;default:t=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${au}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((u,f)=>{try{const m=e(l);u(m)}catch(m){f(m)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uV(i,e={}){return oa(i,"GET","/v2/passwordPolicy",aa(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV=6;class hV{constructor(e){var t,r,a,l;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:cV,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,a,l,u,f;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,m),this.validatePasswordCharacterOptions(e,m),m.isValid&&(m.isValid=(t=m.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),m.isValid&&(m.isValid=(r=m.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),m.isValid&&(m.isValid=(a=m.containsLowercaseLetter)!==null&&a!==void 0?a:!0),m.isValid&&(m.isValid=(l=m.containsUppercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(u=m.containsNumericCharacter)!==null&&u!==void 0?u:!0),m.isValid&&(m.isValid=(f=m.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),m}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Nb(this),this.idTokenSubscription=new Nb(this),this.beforeStateQueue=new lV(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Rr(t)),this._initializationPromise=this.queue(async()=>{var r,a,l;if(!this._deleted&&(this.persistenceManager=await xl.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await zd(this,{idToken:e}),r=await Ai._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(mi(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=a==null?void 0:a._redirectEventId,m=await this.tryRedirectSignIn(e);(!u||u===f)&&(m!=null&&m.user)&&(a=m.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(u){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Bd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=HN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mi(this.app))return Promise.reject(Vr(this));const t=e?ct(e):null;return t&&Re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mi(this.app)?Promise.reject(Vr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mi(this.app)?Promise.reject(Vr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Rr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await uV(this),t=new hV(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new hh("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await sV(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Rr(e)||this._popupRedirectResolver;Re(t,this,"argument-error"),this.redirectPersistenceManager=await xl.create(this,[Rr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(f,this,"internal-error"),f.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const m=e.addObserver(t,r,a);return()=>{u=!0,m()}}else{const m=e.addObserver(t);return()=>{u=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(mi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&jN(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Eo(i){return ct(i)}class Nb{constructor(e){this.auth=e,this.observer=null,this.addObserver=x2(t=>this.observer=t)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function dV(i){hm=i}function yA(i){return hm.loadJS(i)}function mV(){return hm.recaptchaEnterpriseScript}function pV(){return hm.gapiScript}function gV(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class yV{constructor(){this.enterprise=new _V}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class _V{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const vV="recaptcha-enterprise",_A="NO_RECAPTCHA";class EV{constructor(e){this.type=vV,this.auth=Eo(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,f)=>{WN(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const g=new YN(m);return l.tenantId==null?l._agentRecaptchaConfig=g:l._tenantRecaptchaConfigs[l.tenantId]=g,u(g.siteKey)}}).catch(m=>{f(m)})})}function a(l,u,f){const m=window.grecaptcha;Ib(m)?m.enterprise.ready(()=>{m.enterprise.execute(l,{action:e}).then(g=>{u(g)}).catch(()=>{u(_A)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new yV().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{r(this.auth).then(f=>{if(!t&&Ib(window.grecaptcha))a(f,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let m=mV();m.length!==0&&(m+=f),yA(m).then(()=>{a(f,l,u)}).catch(g=>{u(g)})}}).catch(f=>{u(f)})})}}async function Vb(i,e,t,r=!1,a=!1){const l=new EV(i);let u;if(a)u=_A;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const m=f.phoneEnrollmentInfo.phoneNumber,g=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const m=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return r?Object.assign(f,{captchaResp:u}):Object.assign(f,{captchaResponse:u}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function xy(i,e,t,r,a){var l;if(!((l=i._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Vb(i,e,t,t==="getOobCode");return r(i,u)}else return r(i,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Vb(i,e,t,t==="getOobCode");return r(i,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TV(i,e){const t=dh(i,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(xi(l,e??{}))return a;Ci(a,"already-initialized")}return t.initialize({options:e})}function bV(i,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Rr);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function SV(i,e,t){const r=Eo(i);Re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=vA(e),{host:u,port:f}=wV(e),m=f===null?"":`:${f}`,g={url:`${l}//${u}${m}/`},y=Object.freeze({host:u,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){Re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Re(xi(g,r.config.emulator)&&xi(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=g,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,vo(u)?(f_(`${l}//${u}${m}`),qw("Auth",!0)):AV()}function vA(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function wV(i){const e=vA(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:Ob(r.substr(l.length+1))}}else{const[l,u]=r.split(":");return{host:l,port:Ob(u)}}}function Ob(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function AV(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ir("not implemented")}_getIdTokenResponse(e){return Ir("not implemented")}_linkToIdToken(e,t){return Ir("not implemented")}_getReauthenticationResolver(e){return Ir("not implemented")}}async function IV(i,e){return oa(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RV(i,e){return ph(i,"POST","/v1/accounts:signInWithPassword",aa(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xV(i,e){return ph(i,"POST","/v1/accounts:signInWithEmailLink",aa(i,e))}async function CV(i,e){return ph(i,"POST","/v1/accounts:signInWithEmailLink",aa(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc extends E_{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new Xc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Xc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xy(e,t,"signInWithPassword",RV);case"emailLink":return xV(e,{email:this._email,oobCode:this._password});default:Ci(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return xy(e,r,"signUpPassword",IV);case"emailLink":return CV(e,{idToken:t,email:this._email,oobCode:this._password});default:Ci(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cl(i,e){return ph(i,"POST","/v1/accounts:signInWithIdp",aa(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DV="http://localhost";class ao extends E_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ao(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ci("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a}=t,l=p_(t,["providerId","signInMethod"]);if(!r||!a)return null;const u=new ao(r,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Cl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Cl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Cl(e,t)}buildRequest(){const e={requestUri:DV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=fh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NV(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function VV(i){const e=Cc(Dc(i)).link,t=e?Cc(Dc(e)).deep_link_id:null,r=Cc(Dc(i)).deep_link_id;return(r?Cc(Dc(r)).link:null)||r||t||e||i}class T_{constructor(e){var t,r,a,l,u,f;const m=Cc(Dc(e)),g=(t=m.apiKey)!==null&&t!==void 0?t:null,y=(r=m.oobCode)!==null&&r!==void 0?r:null,v=NV((a=m.mode)!==null&&a!==void 0?a:null);Re(g&&y&&v,"argument-error"),this.apiKey=g,this.operation=v,this.code=y,this.continueUrl=(l=m.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(u=m.lang)!==null&&u!==void 0?u:null,this.tenantId=(f=m.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=VV(e);try{return new T_(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(){this.providerId=ou.PROVIDER_ID}static credential(e,t){return Xc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=T_.parseLink(t);return Re(r,"argument-error"),Xc._fromEmailAndCode(e,r.code,r.tenantId)}}ou.PROVIDER_ID="password";ou.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ou.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh extends EA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends gh{constructor(){super("facebook.com")}static credential(e){return ao._fromParams({providerId:zs.PROVIDER_ID,signInMethod:zs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zs.credentialFromTaggedObject(e)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zs.credential(e.oauthAccessToken)}catch{return null}}}zs.FACEBOOK_SIGN_IN_METHOD="facebook.com";zs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends gh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ao._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Bs.credential(t,r)}catch{return null}}}Bs.GOOGLE_SIGN_IN_METHOD="google.com";Bs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js extends gh{constructor(){super("github.com")}static credential(e){return ao._fromParams({providerId:js.PROVIDER_ID,signInMethod:js.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return js.credentialFromTaggedObject(e)}static credentialFromError(e){return js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return js.credential(e.oauthAccessToken)}catch{return null}}}js.GITHUB_SIGN_IN_METHOD="github.com";js.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends gh{constructor(){super("twitter.com")}static credential(e,t){return ao._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Fs.credential(t,r)}catch{return null}}}Fs.TWITTER_SIGN_IN_METHOD="twitter.com";Fs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OV(i,e){return ph(i,"POST","/v1/accounts:signUp",aa(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await Ai._fromIdTokenResponse(e,r,a),u=Pb(r);return new oo({user:l,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=Pb(r);return new oo({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function Pb(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd extends jr{constructor(e,t,r,a){var l;super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,jd.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new jd(e,t,r,a)}}function TA(i,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?jd._fromErrorAndOperation(i,l,e,r):l})}async function PV(i,e,t=!1){const r=await $c(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return oo._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MV(i,e,t=!1){const{auth:r}=i;if(mi(r.app))return Promise.reject(Vr(r));const a="reauthenticate";try{const l=await $c(i,TA(r,a,e,i),t);Re(l.idToken,r,"internal-error");const u=__(l.idToken);Re(u,r,"internal-error");const{sub:f}=u;return Re(i.uid===f,r,"user-mismatch"),oo._forOperation(i,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Ci(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bA(i,e,t=!1){if(mi(i.app))return Promise.reject(Vr(i));const r="signIn",a=await TA(i,r,e),l=await oo._fromIdTokenResponse(i,r,a);return t||await i._updateCurrentUser(l.user),l}async function kV(i,e){return bA(Eo(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SA(i){const e=Eo(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function LV(i,e,t){if(mi(i.app))return Promise.reject(Vr(i));const r=Eo(i),u=await xy(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",OV).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&SA(i),m}),f=await oo._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(f.user),f}function UV(i,e,t){return mi(i.app)?Promise.reject(Vr(i)):kV(ct(i),ou.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&SA(i),r})}function zV(i,e,t,r){return ct(i).onIdTokenChanged(e,t,r)}function BV(i,e,t){return ct(i).beforeAuthStateChanged(e,t)}function jV(i,e,t,r){return ct(i).onAuthStateChanged(e,t,r)}function FV(i){return ct(i).signOut()}const Fd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Fd,"1"),this.storage.removeItem(Fd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qV=1e3,HV=10;class AA extends wA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=pA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,m)=>{this.notifyListeners(u,m)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},l=this.storage.getItem(r);oV()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,HV):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},qV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}AA.type="LOCAL";const GV=AA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA extends wA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}IA.type="SESSION";const RA=IA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KV(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new fm(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const f=Array.from(u).map(async g=>g(t.origin,l)),m=await KV(f);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:m})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}fm.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(i="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((f,m)=>{const g=b_("",20);a.port1.start();const y=setTimeout(()=>{m(new Error("unsupported_event"))},r);u={messageChannel:a,onMessage(v){const b=v;if(b.data.eventId===g)switch(b.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(b.data.response);break;default:clearTimeout(y),clearTimeout(l),m(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:g,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(){return window}function $V(i){$i().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(){return typeof $i().WorkerGlobalScope<"u"&&typeof $i().importScripts=="function"}async function XV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function YV(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function WV(){return xA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA="firebaseLocalStorageDb",JV=1,qd="firebaseLocalStorage",DA="fbase_key";class yh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function dm(i,e){return i.transaction([qd],e?"readwrite":"readonly").objectStore(qd)}function ZV(){const i=indexedDB.deleteDatabase(CA);return new yh(i).toPromise()}function Cy(){const i=indexedDB.open(CA,JV);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(qd,{keyPath:DA})}catch(a){t(a)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(qd)?e(r):(r.close(),await ZV(),e(await Cy()))})})}async function Mb(i,e,t){const r=dm(i,!0).put({[DA]:e,value:t});return new yh(r).toPromise()}async function eO(i,e){const t=dm(i,!1).get(e),r=await new yh(t).toPromise();return r===void 0?null:r.value}function kb(i,e){const t=dm(i,!0).delete(e);return new yh(t).toPromise()}const tO=800,nO=3;class NA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Cy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>nO)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fm._getInstance(WV()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await XV(),!this.activeServiceWorker)return;this.sender=new QV(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||YV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cy();return await Mb(e,Fd,"1"),await kb(e,Fd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Mb(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>eO(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>kb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=dm(a,!1).getAll();return new yh(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}NA.type="LOCAL";const iO=NA;new mh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(i,e){return e?Rr(e):(Re(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_ extends E_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Cl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Cl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Cl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function sO(i){return bA(i.auth,new S_(i),i.bypassAuthState)}function aO(i){const{auth:e,user:t}=i;return Re(t,e,"internal-error"),MV(t,new S_(i),i.bypassAuthState)}async function oO(i){const{auth:e,user:t}=i;return Re(t,e,"internal-error"),PV(t,new S_(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:u,type:f}=e;if(u){this.reject(u);return}const m={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return sO;case"linkViaPopup":case"linkViaRedirect":return oO;case"reauthViaPopup":case"reauthViaRedirect":return aO;default:Ci(this.auth,"internal-error")}}resolve(e){kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){kr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO=new mh(2e3,1e4);class Il extends VA{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,Il.currentPopupAction&&Il.currentPopupAction.cancel(),Il.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){kr(this.filter.length===1,"Popup operations only handle one event");const e=b_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Qi(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Qi(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Il.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qi(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,lO.get())};e()}}Il.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO="pendingRedirect",bd=new Map;class cO extends VA{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=bd.get(this.auth._key());if(!e){try{const r=await hO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}bd.set(this.auth._key(),e)}return this.bypassAuthState||bd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hO(i,e){const t=mO(e),r=dO(i);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function fO(i,e){bd.set(i._key(),e)}function dO(i){return Rr(i._redirectPersistence)}function mO(i){return Td(uO,i.config.apiKey,i.name)}async function pO(i,e,t=!1){if(mi(i.app))return Promise.reject(Vr(i));const r=Eo(i),a=rO(r,e),u=await new cO(r,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO=600*1e3;class yO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_O(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!OA(e)){const a=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Qi(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gO&&this.cachedEventUids.clear(),this.cachedEventUids.has(Lb(e))}saveEventToCache(e){this.cachedEventUids.add(Lb(e)),this.lastProcessedEventTime=Date.now()}}function Lb(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function OA({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function _O(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return OA(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vO(i,e={}){return oa(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,TO=/^https?/;async function bO(i){if(i.config.emulator)return;const{authorizedDomains:e}=await vO(i);for(const t of e)try{if(SO(t))return}catch{}Ci(i,"unauthorized-domain")}function SO(i){const e=Iy(),{protocol:t,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const u=new URL(i);return u.hostname===""&&r===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!TO.test(t))return!1;if(EO.test(i))return r===i;const a=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO=new mh(3e4,6e4);function Ub(){const i=$i().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function AO(i){return new Promise((e,t)=>{var r,a,l;function u(){Ub(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ub(),t(Qi(i,"network-request-failed"))},timeout:wO.get()})}if(!((a=(r=$i().gapi)===null||r===void 0?void 0:r.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=$i().gapi)===null||l===void 0)&&l.load)u();else{const f=gV("iframefcb");return $i()[f]=()=>{gapi.load?u():t(Qi(i,"network-request-failed"))},yA(`${pV()}?onload=${f}`).catch(m=>t(m))}}).catch(e=>{throw Sd=null,e})}let Sd=null;function IO(i){return Sd=Sd||AO(i),Sd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RO=new mh(5e3,15e3),xO="__/auth/iframe",CO="emulator/auth/iframe",DO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},NO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function VO(i){const e=i.config;Re(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?y_(e,CO):`https://${i.config.authDomain}/${xO}`,r={apiKey:e.apiKey,appName:i.name,v:au},a=NO.get(i.config.apiHost);a&&(r.eid=a);const l=i._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${fh(r).slice(1)}`}async function OO(i){const e=await IO(i),t=$i().gapi;return Re(t,i,"internal-error"),e.open({where:document.body,url:VO(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:DO,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const u=Qi(i,"network-request-failed"),f=$i().setTimeout(()=>{l(u)},RO.get());function m(){$i().clearTimeout(f),a(r)}r.ping(m).then(m,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MO=500,kO=600,LO="_blank",UO="http://localhost";class zb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function zO(i,e,t,r=MO,a=kO){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let f="";const m=Object.assign(Object.assign({},PO),{width:r.toString(),height:a.toString(),top:l,left:u}),g=Qt().toLowerCase();t&&(f=cA(g)?LO:t),lA(g)&&(e=e||UO,m.scrollbars="yes");const y=Object.entries(m).reduce((b,[I,O])=>`${b}${I}=${O},`,"");if(aV(g)&&f!=="_self")return BO(e||"",f),new zb(null);const v=window.open(e||"",f,y);Re(v,i,"popup-blocked");try{v.focus()}catch{}return new zb(v)}function BO(i,e){const t=document.createElement("a");t.href=i,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO="__/auth/handler",FO="emulator/auth/handler",qO=encodeURIComponent("fac");async function Bb(i,e,t,r,a,l){Re(i.config.authDomain,i,"auth-domain-config-required"),Re(i.config.apiKey,i,"invalid-api-key");const u={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:r,v:au,eventId:a};if(e instanceof EA){e.setDefaultLanguage(i.languageCode),u.providerId=e.providerId||"",R2(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,v]of Object.entries({}))u[y]=v}if(e instanceof gh){const y=e.getScopes().filter(v=>v!=="");y.length>0&&(u.scopes=y.join(","))}i.tenantId&&(u.tid=i.tenantId);const f=u;for(const y of Object.keys(f))f[y]===void 0&&delete f[y];const m=await i._getAppCheckToken(),g=m?`#${qO}=${encodeURIComponent(m)}`:"";return`${HO(i)}?${fh(f).slice(1)}${g}`}function HO({config:i}){return i.emulator?y_(i,FO):`https://${i.authDomain}/${jO}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ay="webStorageSupport";class GO{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=RA,this._completeRedirectFn=pO,this._overrideRedirectResult=fO}async _openPopup(e,t,r,a){var l;kr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const u=await Bb(e,t,r,Iy(),a);return zO(e,u,b_())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await Bb(e,t,r,Iy(),a);return $V(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(kr(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await OO(e),r=new yO(e);return t.register("authEvent",a=>(Re(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ay,{type:ay},a=>{var l;const u=(l=a==null?void 0:a[0])===null||l===void 0?void 0:l[ay];u!==void 0&&t(!!u),Ci(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=bO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return pA()||uA()||v_()}}const KO=GO;var jb="@firebase/auth",Fb="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $O(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function XO(i){Ol(new so("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=r.options;Re(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const m={apiKey:u,authDomain:f,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gA(i)},g=new fV(r,a,l,m);return bV(g,t),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ol(new so("auth-internal",e=>{const t=Eo(e.getProvider("auth").getImmediate());return(r=>new QO(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Xs(jb,Fb,$O(i)),Xs(jb,Fb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=300,WO=Fw("authIdTokenMaxAge")||YO;let qb=null;const JO=i=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>WO)return;const a=t==null?void 0:t.token;qb!==a&&(qb=a,await fetch(i,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function ZO(i=Ww()){const e=dh(i,"auth");if(e.isInitialized())return e.getImmediate();const t=TV(i,{popupRedirectResolver:KO,persistence:[iO,GV,RA]}),r=Fw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const u=JO(l.toString());BV(t,u,()=>u(t.currentUser)),zV(t,f=>u(f))}}const a=Bw("auth");return a&&SV(t,`http://${a}`),t}function eP(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}dV({loadJS(i){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=a=>{const l=Qi("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",eP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});XO("Browser");var Hb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ys,PA;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(x,R){function D(){}D.prototype=R.prototype,x.D=R.prototype,x.prototype=new D,x.prototype.constructor=x,x.C=function(U,B,q){for(var C=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)C[Ke-2]=arguments[Ke];return R.prototype[B].apply(U,C)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(x,R,D){D||(D=0);var U=Array(16);if(typeof R=="string")for(var B=0;16>B;++B)U[B]=R.charCodeAt(D++)|R.charCodeAt(D++)<<8|R.charCodeAt(D++)<<16|R.charCodeAt(D++)<<24;else for(B=0;16>B;++B)U[B]=R[D++]|R[D++]<<8|R[D++]<<16|R[D++]<<24;R=x.g[0],D=x.g[1],B=x.g[2];var q=x.g[3],C=R+(q^D&(B^q))+U[0]+3614090360&4294967295;R=D+(C<<7&4294967295|C>>>25),C=q+(B^R&(D^B))+U[1]+3905402710&4294967295,q=R+(C<<12&4294967295|C>>>20),C=B+(D^q&(R^D))+U[2]+606105819&4294967295,B=q+(C<<17&4294967295|C>>>15),C=D+(R^B&(q^R))+U[3]+3250441966&4294967295,D=B+(C<<22&4294967295|C>>>10),C=R+(q^D&(B^q))+U[4]+4118548399&4294967295,R=D+(C<<7&4294967295|C>>>25),C=q+(B^R&(D^B))+U[5]+1200080426&4294967295,q=R+(C<<12&4294967295|C>>>20),C=B+(D^q&(R^D))+U[6]+2821735955&4294967295,B=q+(C<<17&4294967295|C>>>15),C=D+(R^B&(q^R))+U[7]+4249261313&4294967295,D=B+(C<<22&4294967295|C>>>10),C=R+(q^D&(B^q))+U[8]+1770035416&4294967295,R=D+(C<<7&4294967295|C>>>25),C=q+(B^R&(D^B))+U[9]+2336552879&4294967295,q=R+(C<<12&4294967295|C>>>20),C=B+(D^q&(R^D))+U[10]+4294925233&4294967295,B=q+(C<<17&4294967295|C>>>15),C=D+(R^B&(q^R))+U[11]+2304563134&4294967295,D=B+(C<<22&4294967295|C>>>10),C=R+(q^D&(B^q))+U[12]+1804603682&4294967295,R=D+(C<<7&4294967295|C>>>25),C=q+(B^R&(D^B))+U[13]+4254626195&4294967295,q=R+(C<<12&4294967295|C>>>20),C=B+(D^q&(R^D))+U[14]+2792965006&4294967295,B=q+(C<<17&4294967295|C>>>15),C=D+(R^B&(q^R))+U[15]+1236535329&4294967295,D=B+(C<<22&4294967295|C>>>10),C=R+(B^q&(D^B))+U[1]+4129170786&4294967295,R=D+(C<<5&4294967295|C>>>27),C=q+(D^B&(R^D))+U[6]+3225465664&4294967295,q=R+(C<<9&4294967295|C>>>23),C=B+(R^D&(q^R))+U[11]+643717713&4294967295,B=q+(C<<14&4294967295|C>>>18),C=D+(q^R&(B^q))+U[0]+3921069994&4294967295,D=B+(C<<20&4294967295|C>>>12),C=R+(B^q&(D^B))+U[5]+3593408605&4294967295,R=D+(C<<5&4294967295|C>>>27),C=q+(D^B&(R^D))+U[10]+38016083&4294967295,q=R+(C<<9&4294967295|C>>>23),C=B+(R^D&(q^R))+U[15]+3634488961&4294967295,B=q+(C<<14&4294967295|C>>>18),C=D+(q^R&(B^q))+U[4]+3889429448&4294967295,D=B+(C<<20&4294967295|C>>>12),C=R+(B^q&(D^B))+U[9]+568446438&4294967295,R=D+(C<<5&4294967295|C>>>27),C=q+(D^B&(R^D))+U[14]+3275163606&4294967295,q=R+(C<<9&4294967295|C>>>23),C=B+(R^D&(q^R))+U[3]+4107603335&4294967295,B=q+(C<<14&4294967295|C>>>18),C=D+(q^R&(B^q))+U[8]+1163531501&4294967295,D=B+(C<<20&4294967295|C>>>12),C=R+(B^q&(D^B))+U[13]+2850285829&4294967295,R=D+(C<<5&4294967295|C>>>27),C=q+(D^B&(R^D))+U[2]+4243563512&4294967295,q=R+(C<<9&4294967295|C>>>23),C=B+(R^D&(q^R))+U[7]+1735328473&4294967295,B=q+(C<<14&4294967295|C>>>18),C=D+(q^R&(B^q))+U[12]+2368359562&4294967295,D=B+(C<<20&4294967295|C>>>12),C=R+(D^B^q)+U[5]+4294588738&4294967295,R=D+(C<<4&4294967295|C>>>28),C=q+(R^D^B)+U[8]+2272392833&4294967295,q=R+(C<<11&4294967295|C>>>21),C=B+(q^R^D)+U[11]+1839030562&4294967295,B=q+(C<<16&4294967295|C>>>16),C=D+(B^q^R)+U[14]+4259657740&4294967295,D=B+(C<<23&4294967295|C>>>9),C=R+(D^B^q)+U[1]+2763975236&4294967295,R=D+(C<<4&4294967295|C>>>28),C=q+(R^D^B)+U[4]+1272893353&4294967295,q=R+(C<<11&4294967295|C>>>21),C=B+(q^R^D)+U[7]+4139469664&4294967295,B=q+(C<<16&4294967295|C>>>16),C=D+(B^q^R)+U[10]+3200236656&4294967295,D=B+(C<<23&4294967295|C>>>9),C=R+(D^B^q)+U[13]+681279174&4294967295,R=D+(C<<4&4294967295|C>>>28),C=q+(R^D^B)+U[0]+3936430074&4294967295,q=R+(C<<11&4294967295|C>>>21),C=B+(q^R^D)+U[3]+3572445317&4294967295,B=q+(C<<16&4294967295|C>>>16),C=D+(B^q^R)+U[6]+76029189&4294967295,D=B+(C<<23&4294967295|C>>>9),C=R+(D^B^q)+U[9]+3654602809&4294967295,R=D+(C<<4&4294967295|C>>>28),C=q+(R^D^B)+U[12]+3873151461&4294967295,q=R+(C<<11&4294967295|C>>>21),C=B+(q^R^D)+U[15]+530742520&4294967295,B=q+(C<<16&4294967295|C>>>16),C=D+(B^q^R)+U[2]+3299628645&4294967295,D=B+(C<<23&4294967295|C>>>9),C=R+(B^(D|~q))+U[0]+4096336452&4294967295,R=D+(C<<6&4294967295|C>>>26),C=q+(D^(R|~B))+U[7]+1126891415&4294967295,q=R+(C<<10&4294967295|C>>>22),C=B+(R^(q|~D))+U[14]+2878612391&4294967295,B=q+(C<<15&4294967295|C>>>17),C=D+(q^(B|~R))+U[5]+4237533241&4294967295,D=B+(C<<21&4294967295|C>>>11),C=R+(B^(D|~q))+U[12]+1700485571&4294967295,R=D+(C<<6&4294967295|C>>>26),C=q+(D^(R|~B))+U[3]+2399980690&4294967295,q=R+(C<<10&4294967295|C>>>22),C=B+(R^(q|~D))+U[10]+4293915773&4294967295,B=q+(C<<15&4294967295|C>>>17),C=D+(q^(B|~R))+U[1]+2240044497&4294967295,D=B+(C<<21&4294967295|C>>>11),C=R+(B^(D|~q))+U[8]+1873313359&4294967295,R=D+(C<<6&4294967295|C>>>26),C=q+(D^(R|~B))+U[15]+4264355552&4294967295,q=R+(C<<10&4294967295|C>>>22),C=B+(R^(q|~D))+U[6]+2734768916&4294967295,B=q+(C<<15&4294967295|C>>>17),C=D+(q^(B|~R))+U[13]+1309151649&4294967295,D=B+(C<<21&4294967295|C>>>11),C=R+(B^(D|~q))+U[4]+4149444226&4294967295,R=D+(C<<6&4294967295|C>>>26),C=q+(D^(R|~B))+U[11]+3174756917&4294967295,q=R+(C<<10&4294967295|C>>>22),C=B+(R^(q|~D))+U[2]+718787259&4294967295,B=q+(C<<15&4294967295|C>>>17),C=D+(q^(B|~R))+U[9]+3951481745&4294967295,x.g[0]=x.g[0]+R&4294967295,x.g[1]=x.g[1]+(B+(C<<21&4294967295|C>>>11))&4294967295,x.g[2]=x.g[2]+B&4294967295,x.g[3]=x.g[3]+q&4294967295}r.prototype.u=function(x,R){R===void 0&&(R=x.length);for(var D=R-this.blockSize,U=this.B,B=this.h,q=0;q<R;){if(B==0)for(;q<=D;)a(this,x,q),q+=this.blockSize;if(typeof x=="string"){for(;q<R;)if(U[B++]=x.charCodeAt(q++),B==this.blockSize){a(this,U),B=0;break}}else for(;q<R;)if(U[B++]=x[q++],B==this.blockSize){a(this,U),B=0;break}}this.h=B,this.o+=R},r.prototype.v=function(){var x=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);x[0]=128;for(var R=1;R<x.length-8;++R)x[R]=0;var D=8*this.o;for(R=x.length-8;R<x.length;++R)x[R]=D&255,D/=256;for(this.u(x),x=Array(16),R=D=0;4>R;++R)for(var U=0;32>U;U+=8)x[D++]=this.g[R]>>>U&255;return x};function l(x,R){var D=f;return Object.prototype.hasOwnProperty.call(D,x)?D[x]:D[x]=R(x)}function u(x,R){this.h=R;for(var D=[],U=!0,B=x.length-1;0<=B;B--){var q=x[B]|0;U&&q==R||(D[B]=q,U=!1)}this.g=D}var f={};function m(x){return-128<=x&&128>x?l(x,function(R){return new u([R|0],0>R?-1:0)}):new u([x|0],0>x?-1:0)}function g(x){if(isNaN(x)||!isFinite(x))return v;if(0>x)return V(g(-x));for(var R=[],D=1,U=0;x>=D;U++)R[U]=x/D|0,D*=4294967296;return new u(R,0)}function y(x,R){if(x.length==0)throw Error("number format error: empty string");if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(x.charAt(0)=="-")return V(y(x.substring(1),R));if(0<=x.indexOf("-"))throw Error('number format error: interior "-" character');for(var D=g(Math.pow(R,8)),U=v,B=0;B<x.length;B+=8){var q=Math.min(8,x.length-B),C=parseInt(x.substring(B,B+q),R);8>q?(q=g(Math.pow(R,q)),U=U.j(q).add(g(C))):(U=U.j(D),U=U.add(g(C)))}return U}var v=m(0),b=m(1),I=m(16777216);i=u.prototype,i.m=function(){if(M(this))return-V(this).m();for(var x=0,R=1,D=0;D<this.g.length;D++){var U=this.i(D);x+=(0<=U?U:4294967296+U)*R,R*=4294967296}return x},i.toString=function(x){if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(O(this))return"0";if(M(this))return"-"+V(this).toString(x);for(var R=g(Math.pow(x,6)),D=this,U="";;){var B=ue(D,R).g;D=$(D,B.j(R));var q=((0<D.g.length?D.g[0]:D.h)>>>0).toString(x);if(D=B,O(D))return q+U;for(;6>q.length;)q="0"+q;U=q+U}},i.i=function(x){return 0>x?0:x<this.g.length?this.g[x]:this.h};function O(x){if(x.h!=0)return!1;for(var R=0;R<x.g.length;R++)if(x.g[R]!=0)return!1;return!0}function M(x){return x.h==-1}i.l=function(x){return x=$(this,x),M(x)?-1:O(x)?0:1};function V(x){for(var R=x.g.length,D=[],U=0;U<R;U++)D[U]=~x.g[U];return new u(D,~x.h).add(b)}i.abs=function(){return M(this)?V(this):this},i.add=function(x){for(var R=Math.max(this.g.length,x.g.length),D=[],U=0,B=0;B<=R;B++){var q=U+(this.i(B)&65535)+(x.i(B)&65535),C=(q>>>16)+(this.i(B)>>>16)+(x.i(B)>>>16);U=C>>>16,q&=65535,C&=65535,D[B]=C<<16|q}return new u(D,D[D.length-1]&-2147483648?-1:0)};function $(x,R){return x.add(V(R))}i.j=function(x){if(O(this)||O(x))return v;if(M(this))return M(x)?V(this).j(V(x)):V(V(this).j(x));if(M(x))return V(this.j(V(x)));if(0>this.l(I)&&0>x.l(I))return g(this.m()*x.m());for(var R=this.g.length+x.g.length,D=[],U=0;U<2*R;U++)D[U]=0;for(U=0;U<this.g.length;U++)for(var B=0;B<x.g.length;B++){var q=this.i(U)>>>16,C=this.i(U)&65535,Ke=x.i(B)>>>16,Nt=x.i(B)&65535;D[2*U+2*B]+=C*Nt,H(D,2*U+2*B),D[2*U+2*B+1]+=q*Nt,H(D,2*U+2*B+1),D[2*U+2*B+1]+=C*Ke,H(D,2*U+2*B+1),D[2*U+2*B+2]+=q*Ke,H(D,2*U+2*B+2)}for(U=0;U<R;U++)D[U]=D[2*U+1]<<16|D[2*U];for(U=R;U<2*R;U++)D[U]=0;return new u(D,0)};function H(x,R){for(;(x[R]&65535)!=x[R];)x[R+1]+=x[R]>>>16,x[R]&=65535,R++}function Q(x,R){this.g=x,this.h=R}function ue(x,R){if(O(R))throw Error("division by zero");if(O(x))return new Q(v,v);if(M(x))return R=ue(V(x),R),new Q(V(R.g),V(R.h));if(M(R))return R=ue(x,V(R)),new Q(V(R.g),R.h);if(30<x.g.length){if(M(x)||M(R))throw Error("slowDivide_ only works with positive integers.");for(var D=b,U=R;0>=U.l(x);)D=ye(D),U=ye(U);var B=pe(D,1),q=pe(U,1);for(U=pe(U,2),D=pe(D,2);!O(U);){var C=q.add(U);0>=C.l(x)&&(B=B.add(D),q=C),U=pe(U,1),D=pe(D,1)}return R=$(x,B.j(R)),new Q(B,R)}for(B=v;0<=x.l(R);){for(D=Math.max(1,Math.floor(x.m()/R.m())),U=Math.ceil(Math.log(D)/Math.LN2),U=48>=U?1:Math.pow(2,U-48),q=g(D),C=q.j(R);M(C)||0<C.l(x);)D-=U,q=g(D),C=q.j(R);O(q)&&(q=b),B=B.add(q),x=$(x,C)}return new Q(B,x)}i.A=function(x){return ue(this,x).h},i.and=function(x){for(var R=Math.max(this.g.length,x.g.length),D=[],U=0;U<R;U++)D[U]=this.i(U)&x.i(U);return new u(D,this.h&x.h)},i.or=function(x){for(var R=Math.max(this.g.length,x.g.length),D=[],U=0;U<R;U++)D[U]=this.i(U)|x.i(U);return new u(D,this.h|x.h)},i.xor=function(x){for(var R=Math.max(this.g.length,x.g.length),D=[],U=0;U<R;U++)D[U]=this.i(U)^x.i(U);return new u(D,this.h^x.h)};function ye(x){for(var R=x.g.length+1,D=[],U=0;U<R;U++)D[U]=x.i(U)<<1|x.i(U-1)>>>31;return new u(D,x.h)}function pe(x,R){var D=R>>5;R%=32;for(var U=x.g.length-D,B=[],q=0;q<U;q++)B[q]=0<R?x.i(q+D)>>>R|x.i(q+D+1)<<32-R:x.i(q+D);return new u(B,x.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,PA=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=g,u.fromString=y,Ys=u}).apply(typeof Hb<"u"?Hb:typeof self<"u"?self:typeof window<"u"?window:{});var cd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var MA,Nc,kA,wd,Dy,LA,UA,zA;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,_,T){return h==Array.prototype||h==Object.prototype||(h[_]=T.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof cd=="object"&&cd];for(var _=0;_<h.length;++_){var T=h[_];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function a(h,_){if(_)e:{var T=r;h=h.split(".");for(var w=0;w<h.length-1;w++){var K=h[w];if(!(K in T))break e;T=T[K]}h=h[h.length-1],w=T[h],_=_(w),_!=w&&_!=null&&e(T,h,{configurable:!0,writable:!0,value:_})}}function l(h,_){h instanceof String&&(h+="");var T=0,w=!1,K={next:function(){if(!w&&T<h.length){var ee=T++;return{value:_(ee,h[ee]),done:!1}}return w=!0,{done:!0,value:void 0}}};return K[Symbol.iterator]=function(){return K},K}a("Array.prototype.values",function(h){return h||function(){return l(this,function(_,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function m(h){var _=typeof h;return _=_!="object"?_:h?Array.isArray(h)?"array":_:"null",_=="array"||_=="object"&&typeof h.length=="number"}function g(h){var _=typeof h;return _=="object"&&h!=null||_=="function"}function y(h,_,T){return h.call.apply(h.bind,arguments)}function v(h,_,T){if(!h)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var K=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(K,w),h.apply(_,K)}}return function(){return h.apply(_,arguments)}}function b(h,_,T){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:v,b.apply(null,arguments)}function I(h,_){var T=Array.prototype.slice.call(arguments,1);return function(){var w=T.slice();return w.push.apply(w,arguments),h.apply(this,w)}}function O(h,_){function T(){}T.prototype=_.prototype,h.aa=_.prototype,h.prototype=new T,h.prototype.constructor=h,h.Qb=function(w,K,ee){for(var he=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)he[Ze-2]=arguments[Ze];return _.prototype[K].apply(w,he)}}function M(h){const _=h.length;if(0<_){const T=Array(_);for(let w=0;w<_;w++)T[w]=h[w];return T}return[]}function V(h,_){for(let T=1;T<arguments.length;T++){const w=arguments[T];if(m(w)){const K=h.length||0,ee=w.length||0;h.length=K+ee;for(let he=0;he<ee;he++)h[K+he]=w[he]}else h.push(w)}}class ${constructor(_,T){this.i=_,this.j=T,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function H(h){return/^[\s\xa0]*$/.test(h)}function Q(){var h=f.navigator;return h&&(h=h.userAgent)?h:""}function ue(h){return ue[" "](h),h}ue[" "]=function(){};var ye=Q().indexOf("Gecko")!=-1&&!(Q().toLowerCase().indexOf("webkit")!=-1&&Q().indexOf("Edge")==-1)&&!(Q().indexOf("Trident")!=-1||Q().indexOf("MSIE")!=-1)&&Q().indexOf("Edge")==-1;function pe(h,_,T){for(const w in h)_.call(T,h[w],w,h)}function x(h,_){for(const T in h)_.call(void 0,h[T],T,h)}function R(h){const _={};for(const T in h)_[T]=h[T];return _}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function U(h,_){let T,w;for(let K=1;K<arguments.length;K++){w=arguments[K];for(T in w)h[T]=w[T];for(let ee=0;ee<D.length;ee++)T=D[ee],Object.prototype.hasOwnProperty.call(w,T)&&(h[T]=w[T])}}function B(h){var _=1;h=h.split(":");const T=[];for(;0<_&&h.length;)T.push(h.shift()),_--;return h.length&&T.push(h.join(":")),T}function q(h){f.setTimeout(()=>{throw h},0)}function C(){var h=Qe;let _=null;return h.g&&(_=h.g,h.g=h.g.next,h.g||(h.h=null),_.next=null),_}class Ke{constructor(){this.h=this.g=null}add(_,T){const w=Nt.get();w.set(_,T),this.h?this.h.next=w:this.g=w,this.h=w}}var Nt=new $(()=>new ne,h=>h.reset());class ne{constructor(){this.next=this.g=this.h=null}set(_,T){this.h=_,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let me,we=!1,Qe=new Ke,Je=()=>{const h=f.Promise.resolve(void 0);me=()=>{h.then(z)}};var z=()=>{for(var h;h=C();){try{h.h.call(h.g)}catch(T){q(T)}var _=Nt;_.j(h),100>_.h&&(_.h++,h.next=_.g,_.g=h)}we=!1};function ie(){this.s=this.s,this.C=this.C}ie.prototype.s=!1,ie.prototype.ma=function(){this.s||(this.s=!0,this.N())},ie.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ce(h,_){this.type=h,this.g=this.target=_,this.defaultPrevented=!1}ce.prototype.h=function(){this.defaultPrevented=!0};var ve=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var h=!1,_=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};f.addEventListener("test",T,_),f.removeEventListener("test",T,_)}catch{}return h})();function xe(h,_){if(ce.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var T=this.type=h.type,w=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=_,_=h.relatedTarget){if(ye){e:{try{ue(_.nodeName);var K=!0;break e}catch{}K=!1}K||(_=null)}}else T=="mouseover"?_=h.fromElement:T=="mouseout"&&(_=h.toElement);this.relatedTarget=_,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Oe[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&xe.aa.h.call(this)}}O(xe,ce);var Oe={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var qe="closure_listenable_"+(1e6*Math.random()|0),sn=0;function wt(h,_,T,w,K){this.listener=h,this.proxy=null,this.src=_,this.type=T,this.capture=!!w,this.ha=K,this.key=++sn,this.da=this.fa=!1}function Di(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function Zi(h){this.src=h,this.g={},this.h=0}Zi.prototype.add=function(h,_,T,w,K){var ee=h.toString();h=this.g[ee],h||(h=this.g[ee]=[],this.h++);var he=Ro(h,_,w,K);return-1<he?(_=h[he],T||(_.fa=!1)):(_=new wt(_,this.src,ee,!!w,K),_.fa=T,h.push(_)),_};function ga(h,_){var T=_.type;if(T in h.g){var w=h.g[T],K=Array.prototype.indexOf.call(w,_,void 0),ee;(ee=0<=K)&&Array.prototype.splice.call(w,K,1),ee&&(Di(_),h.g[T].length==0&&(delete h.g[T],h.h--))}}function Ro(h,_,T,w){for(var K=0;K<h.length;++K){var ee=h[K];if(!ee.da&&ee.listener==_&&ee.capture==!!T&&ee.ha==w)return K}return-1}var yi="closure_lm_"+(1e6*Math.random()|0),ya={};function xo(h,_,T,w,K){if(Array.isArray(_)){for(var ee=0;ee<_.length;ee++)xo(h,_[ee],T,w,K);return null}return T=Ph(T),h&&h[qe]?h.K(_,T,g(w)?!!w.capture:!1,K):Fm(h,_,T,!1,w,K)}function Fm(h,_,T,w,K,ee){if(!_)throw Error("Invalid event type");var he=g(K)?!!K.capture:!!K,Ze=Eu(h);if(Ze||(h[yi]=Ze=new Zi(h)),T=Ze.add(_,T,w,he,ee),T.proxy)return T;if(w=Oh(),T.proxy=w,w.src=h,w.listener=T,h.addEventListener)ve||(K=he),K===void 0&&(K=!1),h.addEventListener(_.toString(),w,K);else if(h.attachEvent)h.attachEvent(Do(_.toString()),w);else if(h.addListener&&h.removeListener)h.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return T}function Oh(){function h(T){return _.call(h.src,h.listener,T)}const _=qm;return h}function Co(h,_,T,w,K){if(Array.isArray(_))for(var ee=0;ee<_.length;ee++)Co(h,_[ee],T,w,K);else w=g(w)?!!w.capture:!!w,T=Ph(T),h&&h[qe]?(h=h.i,_=String(_).toString(),_ in h.g&&(ee=h.g[_],T=Ro(ee,T,w,K),-1<T&&(Di(ee[T]),Array.prototype.splice.call(ee,T,1),ee.length==0&&(delete h.g[_],h.h--)))):h&&(h=Eu(h))&&(_=h.g[_.toString()],h=-1,_&&(h=Ro(_,T,w,K)),(T=-1<h?_[h]:null)&&_a(T))}function _a(h){if(typeof h!="number"&&h&&!h.da){var _=h.src;if(_&&_[qe])ga(_.i,h);else{var T=h.type,w=h.proxy;_.removeEventListener?_.removeEventListener(T,w,h.capture):_.detachEvent?_.detachEvent(Do(T),w):_.addListener&&_.removeListener&&_.removeListener(w),(T=Eu(_))?(ga(T,h),T.h==0&&(T.src=null,_[yi]=null)):Di(h)}}}function Do(h){return h in ya?ya[h]:ya[h]="on"+h}function qm(h,_){if(h.da)h=!0;else{_=new xe(_,this);var T=h.listener,w=h.ha||h.src;h.fa&&_a(h),h=T.call(w,_)}return h}function Eu(h){return h=h[yi],h instanceof Zi?h:null}var an="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ph(h){return typeof h=="function"?h:(h[an]||(h[an]=function(_){return h.handleEvent(_)}),h[an])}function Ht(){ie.call(this),this.i=new Zi(this),this.M=this,this.F=null}O(Ht,ie),Ht.prototype[qe]=!0,Ht.prototype.removeEventListener=function(h,_,T,w){Co(this,h,_,T,w)};function Yt(h,_){var T,w=h.F;if(w)for(T=[];w;w=w.F)T.push(w);if(h=h.M,w=_.type||_,typeof _=="string")_=new ce(_,h);else if(_ instanceof ce)_.target=_.target||h;else{var K=_;_=new ce(w,h),U(_,K)}if(K=!0,T)for(var ee=T.length-1;0<=ee;ee--){var he=_.g=T[ee];K=er(he,w,!0,_)&&K}if(he=_.g=h,K=er(he,w,!0,_)&&K,K=er(he,w,!1,_)&&K,T)for(ee=0;ee<T.length;ee++)he=_.g=T[ee],K=er(he,w,!1,_)&&K}Ht.prototype.N=function(){if(Ht.aa.N.call(this),this.i){var h=this.i,_;for(_ in h.g){for(var T=h.g[_],w=0;w<T.length;w++)Di(T[w]);delete h.g[_],h.h--}}this.F=null},Ht.prototype.K=function(h,_,T,w){return this.i.add(String(h),_,!1,T,w)},Ht.prototype.L=function(h,_,T,w){return this.i.add(String(h),_,!0,T,w)};function er(h,_,T,w){if(_=h.i.g[String(_)],!_)return!0;_=_.concat();for(var K=!0,ee=0;ee<_.length;++ee){var he=_[ee];if(he&&!he.da&&he.capture==T){var Ze=he.listener,Lt=he.ha||he.src;he.fa&&ga(h.i,he),K=Ze.call(Lt,w)!==!1&&K}}return K&&!w.defaultPrevented}function Mh(h,_,T){if(typeof h=="function")T&&(h=b(h,T));else if(h&&typeof h.handleEvent=="function")h=b(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:f.setTimeout(h,_||0)}function Tu(h){h.g=Mh(()=>{h.g=null,h.i&&(h.i=!1,Tu(h))},h.l);const _=h.h;h.h=null,h.m.apply(null,_)}class Hm extends ie{constructor(_,T){super(),this.m=_,this.l=T,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Tu(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function va(h){ie.call(this),this.h=h,this.g={}}O(va,ie);var Qr=[];function gn(h){pe(h.g,function(_,T){this.g.hasOwnProperty(T)&&_a(_)},h),h.g={}}va.prototype.N=function(){va.aa.N.call(this),gn(this)},va.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ni=f.JSON.stringify,wn=f.JSON.parse,Gm=class{stringify(h){return f.JSON.stringify(h,void 0)}parse(h){return f.JSON.parse(h,void 0)}};function bu(){}bu.prototype.h=null;function kh(h){return h.h||(h.h=h.i())}function Ea(){}var Ni={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $r(){ce.call(this,"d")}O($r,ce);function _i(){ce.call(this,"c")}O(_i,ce);var ii={},Xr=null;function No(){return Xr=Xr||new Ht}ii.La="serverreachability";function Su(h){ce.call(this,ii.La,h)}O(Su,ce);function tr(h){const _=No();Yt(_,new Su(_))}ii.STAT_EVENT="statevent";function Yr(h,_){ce.call(this,ii.STAT_EVENT,h),this.stat=_}O(Yr,ce);function on(h){const _=No();Yt(_,new Yr(_,h))}ii.Ma="timingevent";function wu(h,_){ce.call(this,ii.Ma,h),this.size=_}O(wu,ce);function Wr(h,_){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){h()},_)}function Jr(){this.g=!0}Jr.prototype.xa=function(){this.g=!1};function Au(h,_,T,w,K,ee){h.info(function(){if(h.g)if(ee)for(var he="",Ze=ee.split("&"),Lt=0;Lt<Ze.length;Lt++){var Pe=Ze[Lt].split("=");if(1<Pe.length){var Jt=Pe[0];Pe=Pe[1];var Zt=Jt.split("_");he=2<=Zt.length&&Zt[1]=="type"?he+(Jt+"="+Pe+"&"):he+(Jt+"=redacted&")}}else he=null;else he=ee;return"XMLHTTP REQ ("+w+") [attempt "+K+"]: "+_+`
`+T+`
`+he})}function Iu(h,_,T,w,K,ee,he){h.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+K+"]: "+_+`
`+T+`
`+ee+" "+he})}function nr(h,_,T,w){h.info(function(){return"XMLHTTP TEXT ("+_+"): "+Vi(h,T)+(w?" "+w:"")})}function Lh(h,_){h.info(function(){return"TIMEOUT: "+_})}Jr.prototype.info=function(){};function Vi(h,_){if(!h.g)return _;if(!_)return null;try{var T=JSON.parse(_);if(T){for(h=0;h<T.length;h++)if(Array.isArray(T[h])){var w=T[h];if(!(2>w.length)){var K=w[1];if(Array.isArray(K)&&!(1>K.length)){var ee=K[0];if(ee!="noop"&&ee!="stop"&&ee!="close")for(var he=1;he<K.length;he++)K[he]=""}}}}return ni(T)}catch{return _}}var Rt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ln={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Oi;function Zr(){}O(Zr,bu),Zr.prototype.g=function(){return new XMLHttpRequest},Zr.prototype.i=function(){return{}},Oi=new Zr;function Pi(h,_,T,w){this.j=h,this.i=_,this.l=T,this.R=w||1,this.U=new va(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Uh}function Uh(){this.i=null,this.g="",this.h=!1}var Ru={},ir={};function Ta(h,_,T){h.L=1,h.v=wa(xt(_)),h.m=T,h.P=!0,rr(h,null)}function rr(h,_){h.F=Date.now(),vi(h),h.A=xt(h.v);var T=h.A,w=h.R;Array.isArray(w)||(w=[String(w)]),or(T.i,"t",w),h.C=0,T=h.j.J,h.h=new Uh,h.g=ef(h.j,T?_:null,!h.m),0<h.O&&(h.M=new Hm(b(h.Y,h,h.g),h.O)),_=h.U,T=h.g,w=h.ca;var K="readystatechange";Array.isArray(K)||(K&&(Qr[0]=K.toString()),K=Qr);for(var ee=0;ee<K.length;ee++){var he=xo(T,K[ee],w||_.handleEvent,!1,_.h||_);if(!he)break;_.g[he.key]=he}_=h.H?R(h.H):{},h.m?(h.u||(h.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,_)):(h.u="GET",h.g.ea(h.A,h.u,null,_)),tr(),Au(h.i,h.u,h.A,h.l,h.R,h.m)}Pi.prototype.ca=function(h){h=h.target;const _=this.M;_&&Rn(h)==3?_.j():this.Y(h)},Pi.prototype.Y=function(h){try{if(h==this.g)e:{const Zt=Rn(this.g);var _=this.g.Ba();const fs=this.g.Z();if(!(3>Zt)&&(Zt!=3||this.g&&(this.h.h||this.g.oa()||Ra(this.g)))){this.J||Zt!=4||_==7||(_==8||0>=fs?tr(3):tr(2)),Vo(this);var T=this.g.Z();this.X=T;t:if(sr(this)){var w=Ra(this.g);h="";var K=w.length,ee=Rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){An(this),es(this);var he="";break t}this.h.i=new f.TextDecoder}for(_=0;_<K;_++)this.h.h=!0,h+=this.h.i.decode(w[_],{stream:!(ee&&_==K-1)});w.length=0,this.h.g+=h,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=T==200,Iu(this.i,this.u,this.A,this.l,this.R,Zt,T),this.o){if(this.T&&!this.K){t:{if(this.g){var Ze,Lt=this.g;if((Ze=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(Ze)){var Pe=Ze;break t}}Pe=null}if(T=Pe)nr(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Mi(this,T);else{this.o=!1,this.s=3,on(12),An(this),es(this);break e}}if(this.P){T=!0;let Vn;for(;!this.J&&this.C<he.length;)if(Vn=ba(this,he),Vn==ir){Zt==4&&(this.s=4,on(14),T=!1),nr(this.i,this.l,null,"[Incomplete Response]");break}else if(Vn==Ru){this.s=4,on(15),nr(this.i,this.l,he,"[Invalid Chunk]"),T=!1;break}else nr(this.i,this.l,Vn,null),Mi(this,Vn);if(sr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Zt!=4||he.length!=0||this.h.h||(this.s=1,on(16),T=!1),this.o=this.o&&T,!T)nr(this.i,this.l,he,"[Invalid Chunked Response]"),An(this),es(this);else if(0<he.length&&!this.W){this.W=!0;var Jt=this.j;Jt.g==this&&Jt.ba&&!Jt.M&&(Jt.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),Uu(Jt),Jt.M=!0,on(11))}}else nr(this.i,this.l,he,null),Mi(this,he);Zt==4&&An(this),this.o&&!this.J&&(Zt==4?Wh(this.j,this):(this.o=!1,vi(this)))}else Gh(this.g),T==400&&0<he.indexOf("Unknown SID")?(this.s=3,on(12)):(this.s=0,on(13)),An(this),es(this)}}}catch{}finally{}};function sr(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function ba(h,_){var T=h.C,w=_.indexOf(`
`,T);return w==-1?ir:(T=Number(_.substring(T,w)),isNaN(T)?Ru:(w+=1,w+T>_.length?ir:(_=_.slice(w,w+T),h.C=w+T,_)))}Pi.prototype.cancel=function(){this.J=!0,An(this)};function vi(h){h.S=Date.now()+h.I,Vt(h,h.I)}function Vt(h,_){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Wr(b(h.ba,h),_)}function Vo(h){h.B&&(f.clearTimeout(h.B),h.B=null)}Pi.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Lh(this.i,this.A),this.L!=2&&(tr(),on(17)),An(this),this.s=2,es(this)):Vt(this,this.S-h)};function es(h){h.j.G==0||h.J||Wh(h.j,h)}function An(h){Vo(h);var _=h.M;_&&typeof _.ma=="function"&&_.ma(),h.M=null,gn(h.U),h.g&&(_=h.g,h.g=null,_.abort(),_.ma())}function Mi(h,_){try{var T=h.j;if(T.G!=0&&(T.g==h||ts(T.h,h))){if(!h.K&&ts(T.h,h)&&T.G==3){try{var w=T.Da.g.parse(_)}catch{w=null}if(Array.isArray(w)&&w.length==3){var K=w;if(K[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<h.F)cs(T),us(T);else break e;Lu(T),on(18)}}else T.za=K[1],0<T.za-T.T&&37500>K[2]&&T.F&&T.v==0&&!T.C&&(T.C=Wr(b(T.Za,T),6e3));if(1>=zh(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else ur(T,11)}else if((h.K||T.g==h)&&cs(T),!H(_))for(K=T.Da.g.parse(_),_=0;_<K.length;_++){let Pe=K[_];if(T.T=Pe[0],Pe=Pe[1],T.G==2)if(Pe[0]=="c"){T.K=Pe[1],T.ia=Pe[2];const Jt=Pe[3];Jt!=null&&(T.la=Jt,T.j.info("VER="+T.la));const Zt=Pe[4];Zt!=null&&(T.Aa=Zt,T.j.info("SVER="+T.Aa));const fs=Pe[5];fs!=null&&typeof fs=="number"&&0<fs&&(w=1.5*fs,T.L=w,T.j.info("backChannelRequestTimeoutMs_="+w)),w=T;const Vn=h.g;if(Vn){const Da=Vn.g?Vn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Da){var ee=w.h;ee.g||Da.indexOf("spdy")==-1&&Da.indexOf("quic")==-1&&Da.indexOf("h2")==-1||(ee.j=ee.l,ee.g=new Set,ee.h&&(ns(ee,ee.h),ee.h=null))}if(w.D){const cr=Vn.g?Vn.g.getResponseHeader("X-HTTP-Session-Id"):null;cr&&(w.ya=cr,$e(w.I,w.D,cr))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-h.F,T.j.info("Handshake RTT: "+T.R+"ms")),w=T;var he=h;if(w.qa=Zh(w,w.J?w.ia:null,w.W),he.K){ri(w.h,he);var Ze=he,Lt=w.L;Lt&&(Ze.I=Lt),Ze.B&&(Vo(Ze),vi(Ze)),w.g=he}else Xh(w);0<T.i.length&&Bo(T)}else Pe[0]!="stop"&&Pe[0]!="close"||ur(T,7);else T.G==3&&(Pe[0]=="stop"||Pe[0]=="close"?Pe[0]=="stop"?ur(T,7):Mu(T):Pe[0]!="noop"&&T.l&&T.l.ta(Pe),T.v=0)}}tr(4)}catch{}}var Km=class{constructor(h,_){this.g=h,this.map=_}};function xu(h){this.l=h||10,f.PerformanceNavigationTiming?(h=f.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Cu(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function zh(h){return h.h?1:h.g?h.g.size:0}function ts(h,_){return h.h?h.h==_:h.g?h.g.has(_):!1}function ns(h,_){h.g?h.g.add(_):h.h=_}function ri(h,_){h.h&&h.h==_?h.h=null:h.g&&h.g.has(_)&&h.g.delete(_)}xu.prototype.cancel=function(){if(this.i=In(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function In(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let _=h.i;for(const T of h.g.values())_=_.concat(T.D);return _}return M(h.i)}function Bh(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(m(h)){for(var _=[],T=h.length,w=0;w<T;w++)_.push(h[w]);return _}_=[],T=0;for(w in h)_[T++]=h[w];return _}function Qm(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(m(h)||typeof h=="string"){var _=[];h=h.length;for(var T=0;T<h;T++)_.push(T);return _}_=[],T=0;for(const w in h)_[T++]=w;return _}}}function Oo(h,_){if(h.forEach&&typeof h.forEach=="function")h.forEach(_,void 0);else if(m(h)||typeof h=="string")Array.prototype.forEach.call(h,_,void 0);else for(var T=Qm(h),w=Bh(h),K=w.length,ee=0;ee<K;ee++)_.call(void 0,w[ee],T&&T[ee],h)}var Du=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Po(h,_){if(h){h=h.split("&");for(var T=0;T<h.length;T++){var w=h[T].indexOf("="),K=null;if(0<=w){var ee=h[T].substring(0,w);K=h[T].substring(w+1)}else ee=h[T];_(ee,K?decodeURIComponent(K.replace(/\+/g," ")):"")}}}function ar(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof ar){this.h=h.h,is(this,h.j),this.o=h.o,this.g=h.g,Sa(this,h.s),this.l=h.l;var _=h.i,T=new ki;T.i=_.i,_.g&&(T.g=new Map(_.g),T.h=_.h),Mo(this,T),this.m=h.m}else h&&(_=String(h).match(Du))?(this.h=!1,is(this,_[1]||"",!0),this.o=rs(_[2]||""),this.g=rs(_[3]||"",!0),Sa(this,_[4]),this.l=rs(_[5]||"",!0),Mo(this,_[6]||"",!0),this.m=rs(_[7]||"")):(this.h=!1,this.i=new ki(null,this.h))}ar.prototype.toString=function(){var h=[],_=this.j;_&&h.push(si(_,Nu,!0),":");var T=this.g;return(T||_=="file")&&(h.push("//"),(_=this.o)&&h.push(si(_,Nu,!0),"@"),h.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&h.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(si(T,T.charAt(0)=="/"?Vu:jh,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",si(T,Ym)),h.join("")};function xt(h){return new ar(h)}function is(h,_,T){h.j=T?rs(_,!0):_,h.j&&(h.j=h.j.replace(/:$/,""))}function Sa(h,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);h.s=_}else h.s=null}function Mo(h,_,T){_ instanceof ki?(h.i=_,Fh(h.i,h.h)):(T||(_=si(_,Xm)),h.i=new ki(_,h.h))}function $e(h,_,T){h.i.set(_,T)}function wa(h){return $e(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function rs(h,_){return h?_?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function si(h,_,T){return typeof h=="string"?(h=encodeURI(h).replace(_,$m),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function $m(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Nu=/[#\/\?@]/g,jh=/[#\?:]/g,Vu=/[#\?]/g,Xm=/[#\?@]/g,Ym=/#/g;function ki(h,_){this.h=this.g=null,this.i=h||null,this.j=!!_}function Wt(h){h.g||(h.g=new Map,h.h=0,h.i&&Po(h.i,function(_,T){h.add(decodeURIComponent(_.replace(/\+/g," ")),T)}))}i=ki.prototype,i.add=function(h,_){Wt(this),this.i=null,h=Hn(this,h);var T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(_),this.h+=1,this};function ko(h,_){Wt(h),_=Hn(h,_),h.g.has(_)&&(h.i=null,h.h-=h.g.get(_).length,h.g.delete(_))}function Lo(h,_){return Wt(h),_=Hn(h,_),h.g.has(_)}i.forEach=function(h,_){Wt(this),this.g.forEach(function(T,w){T.forEach(function(K){h.call(_,K,w,this)},this)},this)},i.na=function(){Wt(this);const h=Array.from(this.g.values()),_=Array.from(this.g.keys()),T=[];for(let w=0;w<_.length;w++){const K=h[w];for(let ee=0;ee<K.length;ee++)T.push(_[w])}return T},i.V=function(h){Wt(this);let _=[];if(typeof h=="string")Lo(this,h)&&(_=_.concat(this.g.get(Hn(this,h))));else{h=Array.from(this.g.values());for(let T=0;T<h.length;T++)_=_.concat(h[T])}return _},i.set=function(h,_){return Wt(this),this.i=null,h=Hn(this,h),Lo(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[_]),this.h+=1,this},i.get=function(h,_){return h?(h=this.V(h),0<h.length?String(h[0]):_):_};function or(h,_,T){ko(h,_),0<T.length&&(h.i=null,h.g.set(Hn(h,_),M(T)),h.h+=T.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],_=Array.from(this.g.keys());for(var T=0;T<_.length;T++){var w=_[T];const ee=encodeURIComponent(String(w)),he=this.V(w);for(w=0;w<he.length;w++){var K=ee;he[w]!==""&&(K+="="+encodeURIComponent(String(he[w]))),h.push(K)}}return this.i=h.join("&")};function Hn(h,_){return _=String(_),h.j&&(_=_.toLowerCase()),_}function Fh(h,_){_&&!h.j&&(Wt(h),h.i=null,h.g.forEach(function(T,w){var K=w.toLowerCase();w!=K&&(ko(this,w),or(this,K,T))},h)),h.j=_}function Ou(h,_){const T=new Jr;if(f.Image){const w=new Image;w.onload=I(Nn,T,"TestLoadImage: loaded",!0,_,w),w.onerror=I(Nn,T,"TestLoadImage: error",!1,_,w),w.onabort=I(Nn,T,"TestLoadImage: abort",!1,_,w),w.ontimeout=I(Nn,T,"TestLoadImage: timeout",!1,_,w),f.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=h}else _(!1)}function qh(h,_){const T=new Jr,w=new AbortController,K=setTimeout(()=>{w.abort(),Nn(T,"TestPingServer: timeout",!1,_)},1e4);fetch(h,{signal:w.signal}).then(ee=>{clearTimeout(K),ee.ok?Nn(T,"TestPingServer: ok",!0,_):Nn(T,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(K),Nn(T,"TestPingServer: error",!1,_)})}function Nn(h,_,T,w,K){try{K&&(K.onload=null,K.onerror=null,K.onabort=null,K.ontimeout=null),w(T)}catch{}}function Ei(){this.g=new Gm}function Pu(h,_,T){const w=T||"";try{Oo(h,function(K,ee){let he=K;g(K)&&(he=ni(K)),_.push(w+ee+"="+encodeURIComponent(he))})}catch(K){throw _.push(w+"type="+encodeURIComponent("_badmap")),K}}function Li(h){this.l=h.Ub||null,this.j=h.eb||!1}O(Li,bu),Li.prototype.g=function(){return new Gn(this.l,this.j)},Li.prototype.i=(function(h){return function(){return h}})({});function Gn(h,_){Ht.call(this),this.D=h,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}O(Gn,Ht),i=Gn.prototype,i.open=function(h,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=_,this.readyState=1,ss(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(_.body=h),(this.D||f).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ui(this)),this.readyState=0},i.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,ss(this)),this.g&&(this.readyState=3,ss(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Uo(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Uo(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}i.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var _=h.value?h.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!h.done}))&&(this.response=this.responseText+=_)}h.done?Ui(this):ss(this),this.readyState==3&&Uo(this)}},i.Ra=function(h){this.g&&(this.response=this.responseText=h,Ui(this))},i.Qa=function(h){this.g&&(this.response=h,Ui(this))},i.ga=function(){this.g&&Ui(this)};function Ui(h){h.readyState=4,h.l=null,h.j=null,h.v=null,ss(h)}i.setRequestHeader=function(h,_){this.u.append(h,_)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],_=this.h.entries();for(var T=_.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=_.next();return h.join(`\r
`)};function ss(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Gn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Aa(h){let _="";return pe(h,function(T,w){_+=w,_+=":",_+=T,_+=`\r
`}),_}function as(h,_,T){e:{for(w in T){var w=!1;break e}w=!0}w||(T=Aa(T),typeof h=="string"?T!=null&&encodeURIComponent(String(T)):$e(h,_,T))}function mt(h){Ht.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}O(mt,Ht);var yn=/^https?$/i,lr=["POST","PUT"];i=mt.prototype,i.Ha=function(h){this.J=h},i.ea=function(h,_,T,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);_=_?_.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Oi.g(),this.v=this.o?kh(this.o):kh(Oi),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(_,String(h),!0),this.B=!1}catch(ee){Ia(this,ee);return}if(h=T||"",T=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var K in w)T.set(K,w[K]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const ee of w.keys())T.set(ee,w.get(ee));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(T.keys()).find(ee=>ee.toLowerCase()=="content-type"),K=f.FormData&&h instanceof f.FormData,!(0<=Array.prototype.indexOf.call(lr,_,void 0))||w||K||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ee,he]of T)this.g.setRequestHeader(ee,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zo(this),this.u=!0,this.g.send(h),this.u=!1}catch(ee){Ia(this,ee)}};function Ia(h,_){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=_,h.m=5,os(h),ls(h)}function os(h){h.A||(h.A=!0,Yt(h,"complete"),Yt(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Yt(this,"complete"),Yt(this,"abort"),ls(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ls(this,!0)),mt.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Hh(this):this.bb())},i.bb=function(){Hh(this)};function Hh(h){if(h.h&&typeof u<"u"&&(!h.v[1]||Rn(h)!=4||h.Z()!=2)){if(h.u&&Rn(h)==4)Mh(h.Ea,0,h);else if(Yt(h,"readystatechange"),Rn(h)==4){h.h=!1;try{const he=h.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var T;if(!(T=_)){var w;if(w=he===0){var K=String(h.D).match(Du)[1]||null;!K&&f.self&&f.self.location&&(K=f.self.location.protocol.slice(0,-1)),w=!yn.test(K?K.toLowerCase():"")}T=w}if(T)Yt(h,"complete"),Yt(h,"success");else{h.m=6;try{var ee=2<Rn(h)?h.g.statusText:""}catch{ee=""}h.l=ee+" ["+h.Z()+"]",os(h)}}finally{ls(h)}}}}function ls(h,_){if(h.g){zo(h);const T=h.g,w=h.v[0]?()=>{}:null;h.g=null,h.v=null,_||Yt(h,"ready");try{T.onreadystatechange=w}catch{}}}function zo(h){h.I&&(f.clearTimeout(h.I),h.I=null)}i.isActive=function(){return!!this.g};function Rn(h){return h.g?h.g.readyState:0}i.Z=function(){try{return 2<Rn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(h){if(this.g){var _=this.g.responseText;return h&&_.indexOf(h)==0&&(_=_.substring(h.length)),wn(_)}};function Ra(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Gh(h){const _={};h=(h.g&&2<=Rn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<h.length;w++){if(H(h[w]))continue;var T=B(h[w]);const K=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const ee=_[K]||[];_[K]=ee,ee.push(T)}x(_,function(w){return w.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function xa(h,_,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||_}function Kh(h){this.Aa=0,this.i=[],this.j=new Jr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=xa("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=xa("baseRetryDelayMs",5e3,h),this.cb=xa("retryDelaySeedMs",1e4,h),this.Wa=xa("forwardChannelMaxRetries",2,h),this.wa=xa("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new xu(h&&h.concurrentRequestLimit),this.Da=new Ei,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Kh.prototype,i.la=8,i.G=1,i.connect=function(h,_,T,w){on(0),this.W=h,this.H=_||{},T&&w!==void 0&&(this.H.OSID=T,this.H.OAID=w),this.F=this.X,this.I=Zh(this,null,this.W),Bo(this)};function Mu(h){if(Qh(h),h.G==3){var _=h.U++,T=xt(h.I);if($e(T,"SID",h.K),$e(T,"RID",_),$e(T,"TYPE","terminate"),Ca(h,T),_=new Pi(h,h.j,_),_.L=2,_.v=wa(xt(T)),T=!1,f.navigator&&f.navigator.sendBeacon)try{T=f.navigator.sendBeacon(_.v.toString(),"")}catch{}!T&&f.Image&&(new Image().src=_.v,T=!0),T||(_.g=ef(_.j,null),_.g.ea(_.v)),_.F=Date.now(),vi(_)}zu(h)}function us(h){h.g&&(Uu(h),h.g.cancel(),h.g=null)}function Qh(h){us(h),h.u&&(f.clearTimeout(h.u),h.u=null),cs(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&f.clearTimeout(h.s),h.s=null)}function Bo(h){if(!Cu(h.h)&&!h.s){h.s=!0;var _=h.Ga;me||Je(),we||(me(),we=!0),Qe.add(_,h),h.B=0}}function Wm(h,_){return zh(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=_.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Wr(b(h.Ga,h,_),Jh(h,h.B)),h.B++,!0)}i.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const K=new Pi(this,this.j,h);let ee=this.o;if(this.S&&(ee?(ee=R(ee),U(ee,this.S)):ee=this.S),this.m!==null||this.O||(K.H=ee,ee=null),this.P)e:{for(var _=0,T=0;T<this.i.length;T++){t:{var w=this.i[T];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(_+=w,4096<_){_=T;break e}if(_===4096||T===this.i.length-1){_=T+1;break e}}_=1e3}else _=1e3;_=ku(this,K,_),T=xt(this.I),$e(T,"RID",h),$e(T,"CVER",22),this.D&&$e(T,"X-HTTP-Session-Id",this.D),Ca(this,T),ee&&(this.O?_="headers="+encodeURIComponent(String(Aa(ee)))+"&"+_:this.m&&as(T,this.m,ee)),ns(this.h,K),this.Ua&&$e(T,"TYPE","init"),this.P?($e(T,"$req",_),$e(T,"SID","null"),K.T=!0,Ta(K,T,null)):Ta(K,T,_),this.G=2}}else this.G==3&&(h?$h(this,h):this.i.length==0||Cu(this.h)||$h(this))};function $h(h,_){var T;_?T=_.l:T=h.U++;const w=xt(h.I);$e(w,"SID",h.K),$e(w,"RID",T),$e(w,"AID",h.T),Ca(h,w),h.m&&h.o&&as(w,h.m,h.o),T=new Pi(h,h.j,T,h.B+1),h.m===null&&(T.H=h.o),_&&(h.i=_.D.concat(h.i)),_=ku(h,T,1e3),T.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),ns(h.h,T),Ta(T,w,_)}function Ca(h,_){h.H&&pe(h.H,function(T,w){$e(_,w,T)}),h.l&&Oo({},function(T,w){$e(_,w,T)})}function ku(h,_,T){T=Math.min(h.i.length,T);var w=h.l?b(h.l.Na,h.l,h):null;e:{var K=h.i;let ee=-1;for(;;){const he=["count="+T];ee==-1?0<T?(ee=K[0].g,he.push("ofs="+ee)):ee=0:he.push("ofs="+ee);let Ze=!0;for(let Lt=0;Lt<T;Lt++){let Pe=K[Lt].g;const Jt=K[Lt].map;if(Pe-=ee,0>Pe)ee=Math.max(0,K[Lt].g-100),Ze=!1;else try{Pu(Jt,he,"req"+Pe+"_")}catch{w&&w(Jt)}}if(Ze){w=he.join("&");break e}}}return h=h.i.splice(0,T),_.D=h,w}function Xh(h){if(!h.g&&!h.u){h.Y=1;var _=h.Fa;me||Je(),we||(me(),we=!0),Qe.add(_,h),h.v=0}}function Lu(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Wr(b(h.Fa,h),Jh(h,h.v)),h.v++,!0)}i.Fa=function(){if(this.u=null,Yh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Wr(b(this.ab,this),h)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,on(10),us(this),Yh(this))};function Uu(h){h.A!=null&&(f.clearTimeout(h.A),h.A=null)}function Yh(h){h.g=new Pi(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var _=xt(h.qa);$e(_,"RID","rpc"),$e(_,"SID",h.K),$e(_,"AID",h.T),$e(_,"CI",h.F?"0":"1"),!h.F&&h.ja&&$e(_,"TO",h.ja),$e(_,"TYPE","xmlhttp"),Ca(h,_),h.m&&h.o&&as(_,h.m,h.o),h.L&&(h.g.I=h.L);var T=h.g;h=h.ia,T.L=1,T.v=wa(xt(_)),T.m=null,T.P=!0,rr(T,h)}i.Za=function(){this.C!=null&&(this.C=null,us(this),Lu(this),on(19))};function cs(h){h.C!=null&&(f.clearTimeout(h.C),h.C=null)}function Wh(h,_){var T=null;if(h.g==_){cs(h),Uu(h),h.g=null;var w=2}else if(ts(h.h,_))T=_.D,ri(h.h,_),w=1;else return;if(h.G!=0){if(_.o)if(w==1){T=_.m?_.m.length:0,_=Date.now()-_.F;var K=h.B;w=No(),Yt(w,new wu(w,T)),Bo(h)}else Xh(h);else if(K=_.s,K==3||K==0&&0<_.X||!(w==1&&Wm(h,_)||w==2&&Lu(h)))switch(T&&0<T.length&&(_=h.h,_.i=_.i.concat(T)),K){case 1:ur(h,5);break;case 4:ur(h,10);break;case 3:ur(h,6);break;default:ur(h,2)}}}function Jh(h,_){let T=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(T*=2),T*_}function ur(h,_){if(h.j.info("Error code "+_),_==2){var T=b(h.fb,h),w=h.Xa;const K=!w;w=new ar(w||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||is(w,"https"),wa(w),K?Ou(w.toString(),T):qh(w.toString(),T)}else on(2);h.G=0,h.l&&h.l.sa(_),zu(h),Qh(h)}i.fb=function(h){h?(this.j.info("Successfully pinged google.com"),on(2)):(this.j.info("Failed to ping google.com"),on(1))};function zu(h){if(h.G=0,h.ka=[],h.l){const _=In(h.h);(_.length!=0||h.i.length!=0)&&(V(h.ka,_),V(h.ka,h.i),h.h.i.length=0,M(h.i),h.i.length=0),h.l.ra()}}function Zh(h,_,T){var w=T instanceof ar?xt(T):new ar(T);if(w.g!="")_&&(w.g=_+"."+w.g),Sa(w,w.s);else{var K=f.location;w=K.protocol,_=_?_+"."+K.hostname:K.hostname,K=+K.port;var ee=new ar(null);w&&is(ee,w),_&&(ee.g=_),K&&Sa(ee,K),T&&(ee.l=T),w=ee}return T=h.D,_=h.ya,T&&_&&$e(w,T,_),$e(w,"VER",h.la),Ca(h,w),w}function ef(h,_,T){if(_&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=h.Ca&&!h.pa?new mt(new Li({eb:T})):new mt(h.pa),_.Ha(h.J),_}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function tf(){}i=tf.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function jo(){}jo.prototype.g=function(h,_){return new xn(h,_)};function xn(h,_){Ht.call(this),this.g=new Kh(_),this.l=h,this.h=_&&_.messageUrlParams||null,h=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(h?h["X-WebChannel-Content-Type"]=_.messageContentType:h={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(h?h["X-WebChannel-Client-Profile"]=_.va:h={"X-WebChannel-Client-Profile":_.va}),this.g.S=h,(h=_&&_.Sb)&&!H(h)&&(this.g.m=h),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!H(_)&&(this.g.D=_,h=this.h,h!==null&&_ in h&&(h=this.h,_ in h&&delete h[_])),this.j=new hs(this)}O(xn,Ht),xn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){Mu(this.g)},xn.prototype.o=function(h){var _=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.u&&(T={},T.__data__=ni(h),h=T);_.i.push(new Km(_.Ya++,h)),_.G==3&&Bo(_)},xn.prototype.N=function(){this.g.l=null,delete this.j,Mu(this.g),delete this.g,xn.aa.N.call(this)};function nf(h){$r.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var _=h.__sm__;if(_){e:{for(const T in _){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,_=_!==null&&h in _?_[h]:void 0),this.data=_}else this.data=h}O(nf,$r);function rf(){_i.call(this),this.status=1}O(rf,_i);function hs(h){this.g=h}O(hs,tf),hs.prototype.ua=function(){Yt(this.g,"a")},hs.prototype.ta=function(h){Yt(this.g,new nf(h))},hs.prototype.sa=function(h){Yt(this.g,new rf)},hs.prototype.ra=function(){Yt(this.g,"b")},jo.prototype.createWebChannel=jo.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,zA=function(){return new jo},UA=function(){return No()},LA=ii,Dy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Rt.NO_ERROR=0,Rt.TIMEOUT=8,Rt.HTTP_ERROR=6,wd=Rt,ln.COMPLETE="complete",kA=ln,Ea.EventType=Ni,Ni.OPEN="a",Ni.CLOSE="b",Ni.ERROR="c",Ni.MESSAGE="d",Ht.prototype.listen=Ht.prototype.K,Nc=Ea,mt.prototype.listenOnce=mt.prototype.L,mt.prototype.getLastError=mt.prototype.Ka,mt.prototype.getLastErrorCode=mt.prototype.Ba,mt.prototype.getStatus=mt.prototype.Z,mt.prototype.getResponseJson=mt.prototype.Oa,mt.prototype.getResponseText=mt.prototype.oa,mt.prototype.send=mt.prototype.ea,mt.prototype.setWithCredentials=mt.prototype.Ha,MA=mt}).apply(typeof cd<"u"?cd:typeof self<"u"?self:typeof window<"u"?window:{});const Gb="@firebase/firestore",Kb="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lu="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=new d_("@firebase/firestore");function bl(){return Js.logLevel}function tP(i){Js.setLogLevel(i)}function oe(i,...e){if(Js.logLevel<=je.DEBUG){const t=e.map(w_);Js.debug(`Firestore (${lu}): ${i}`,...t)}}function Mt(i,...e){if(Js.logLevel<=je.ERROR){const t=e.map(w_);Js.error(`Firestore (${lu}): ${i}`,...t)}}function Sn(i,...e){if(Js.logLevel<=je.WARN){const t=e.map(w_);Js.warn(`Firestore (${lu}): ${i}`,...t)}}function w_(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ge(i,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,BA(i,r,t)}function BA(i,e,t){let r=`FIRESTORE (${lu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw Mt(r),new Error(r)}function Ee(i,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,i||BA(e,a,r)}function nP(i,e){i||ge(57014,e)}function de(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class se extends jr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class FA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(nn.UNAUTHENTICATED)))}shutdown(){}}class iP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class rP{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ee(this.o===void 0,42304);let r=this.i;const a=m=>this.i!==r?(r=this.i,t(m)):Promise.resolve();let l=new rn;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new rn,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const m=l;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},f=m=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((m=>f(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?f(m):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new rn)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ee(typeof r.accessToken=="string",31837,{l:r}),new jA(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class sP{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class aP{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new sP(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ny{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class oP{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,mi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ee(this.o===void 0,3512);const r=l=>{l.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,oe("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ny(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ee(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ny(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class lP{getToken(){return Promise.resolve(new Ny(""))}invalidateToken(){}start(e,t){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uP(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=uP(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function Ae(i,e){return i<e?-1:i>e?1:0}function Vy(i,e){let t=0;for(;t<i.length&&t<e.length;){const r=i.codePointAt(t),a=e.codePointAt(t);if(r!==a){if(r<128&&a<128)return Ae(r,a);{const l=A_(),u=cP(l.encode(Qb(i,t)),l.encode(Qb(e,t)));return u!==0?u:Ae(r,a)}}t+=r>65535?2:1}return Ae(i.length,e.length)}function Qb(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function cP(i,e){for(let t=0;t<i.length&&t<e.length;++t)if(i[t]!==e[t])return Ae(i[t],e[t]);return Ae(i.length,e.length)}function Pl(i,e,t){return i.length===e.length&&i.every(((r,a)=>t(r,e[a])))}function qA(i){return i+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oy="__name__";class qi{constructor(e,t,r){t===void 0?t=0:t>e.length&&ge(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&ge(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return qi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof qi?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=qi.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Ae(e.length,t.length)}static compareSegments(e,t){const r=qi.isNumericId(e),a=qi.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?qi.extractNumericId(e).compare(qi.extractNumericId(t)):Vy(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ys.fromString(e.substring(4,e.length-2))}}class Me extends qi{construct(e,t,r){return new Me(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new se(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new Me(t)}static emptyPath(){return new Me([])}}const hP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _t extends qi{construct(e,t,r){return new _t(e,t,r)}static isValidIdentifier(e){return hP.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_t.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Oy}static keyField(){return new _t([Oy])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new se(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new se(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new se(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,a+=2}else f==="`"?(u=!u,a++):f!=="."||u?(r+=f,a++):(l(),a++)}if(l(),u)throw new se(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _t(t)}static emptyPath(){return new _t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(e){this.path=e}static fromPath(e){return new fe(Me.fromString(e))}static fromName(e){return new fe(Me.fromString(e).popFirst(5))}static empty(){return new fe(Me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Me.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new fe(new Me(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(i,e,t){if(!t)throw new se(W.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function HA(i,e,t,r){if(e===!0&&r===!0)throw new se(W.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function $b(i){if(!fe.isDocumentKey(i))throw new se(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Xb(i){if(fe.isDocumentKey(i))throw new se(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function GA(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function pm(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":ge(12329,{type:typeof i})}function ke(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new se(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=pm(i);throw new se(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function KA(i,e){if(e<=0)throw new se(W.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qt(i,e){const t={typeString:i};return e&&(t.value=e),t}function To(i,e){if(!GA(i))throw new se(W.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){t=`JSON missing required field: '${r}'`;break}const u=i[r];if(a&&typeof u!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new se(W.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb=-62135596800,Wb=1e6;class et{static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Wb);return new et(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new se(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new se(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Yb)throw new se(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new se(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Wb}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(To(e,et._jsonSchema))return new et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Yb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}et._jsonSchemaVersion="firestore/timestamp/1.0",et._jsonSchema={type:qt("string",et._jsonSchemaVersion),seconds:qt("number"),nanoseconds:qt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{static fromTimestamp(e){return new be(e)}static min(){return new be(new et(0,0))}static max(){return new be(new et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml=-1;class kl{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function Py(i){return i.fields.find((e=>e.kind===2))}function $a(i){return i.fields.filter((e=>e.kind!==2))}function fP(i,e){let t=Ae(i.collectionGroup,e.collectionGroup);if(t!==0)return t;for(let r=0;r<Math.min(i.fields.length,e.fields.length);++r)if(t=dP(i.fields[r],e.fields[r]),t!==0)return t;return Ae(i.fields.length,e.fields.length)}kl.UNKNOWN_ID=-1;class no{constructor(e,t){this.fieldPath=e,this.kind=t}}function dP(i,e){const t=_t.comparator(i.fieldPath,e.fieldPath);return t!==0?t:Ae(i.kind,e.kind)}class Ll{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ll(0,ei.min())}}function QA(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,a=be.fromTimestamp(r===1e9?new et(t+1,0):new et(t,r));return new ei(a,fe.empty(),e)}function $A(i){return new ei(i.readTime,i.key,Ml)}class ei{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ei(be.min(),fe.empty(),Ml)}static max(){return new ei(be.max(),fe.empty(),Ml)}}function R_(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=fe.comparator(i.documentKey,e.documentKey),t!==0?t:Ae(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YA{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function la(i){if(i.code!==W.FAILED_PRECONDITION||i.message!==XA)throw i;oe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ge(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):G.reject(t)}static resolve(e){return new G(((t,r)=>{t(e)}))}static reject(e){return new G(((t,r)=>{r(e)}))}static waitFor(e){return new G(((t,r)=>{let a=0,l=0,u=!1;e.forEach((f=>{++a,f.next((()=>{++l,u&&l===a&&t()}),(m=>r(m)))})),u=!0,l===a&&t()}))}static or(e){let t=G.resolve(!1);for(const r of e)t=t.next((a=>a?G.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new G(((r,a)=>{const l=e.length,u=new Array(l);let f=0;for(let m=0;m<l;m++){const g=m;t(e[g]).next((y=>{u[g]=y,++f,f===l&&r(u)}),(y=>a(y)))}}))}static doWhile(e,t){return new G(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zn="SimpleDb";class gm{static open(e,t,r,a){try{return new gm(t,e.transaction(a,r))}catch(l){throw new Lc(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new rn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Lc(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const a=x_(r.target.error);this.S.reject(new Lc(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(oe(Zn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new pP(t)}}class Xi{static delete(e){return oe(Zn,"Removing database:",e),Ya(zw().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!Qw())return!1;if(Xi.F())return!0;const e=Qt(),t=Xi.M(e),r=0<t&&t<10,a=WA(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,Xi.M(Qt())===12.2&&Mt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(oe(Zn,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const u=l.target.result;t(u)},a.onblocked=()=>{r(new Lc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const u=l.target.error;u.name==="VersionError"?r(new se(W.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?r(new se(W.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):r(new Lc(e,u))},a.onupgradeneeded=l=>{oe(Zn,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const u=l.target.result;if(this.L!==null&&this.L!==l.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${l.oldVersion}, event.newVersion=${l.newVersion}, db.version=${u.version}`);this.B.q(u,a.transaction,l.oldVersion,this.version).next((()=>{oe(Zn,"Database upgrade to version "+this.version+" complete")}))}})),this.db.addEventListener("close",(t=>{const r=t.target;this.L=r.version}),{passive:!0})),this.db.addEventListener("versionchange",(t=>{var r;t.newVersion===null&&(Sn('Received "versionchange" event with newVersion===null; notifying the registered DatabaseDeletedListener, if any'),(r=this.databaseDeletedListener)===null||r===void 0||r.call(this))}),{passive:!0}),this.db}setDatabaseDeletedListener(e){if(this.databaseDeletedListener)throw new Error("setDatabaseDeletedListener() may only be called once, and it has already been called");this.databaseDeletedListener=e}async runTransaction(e,t,r,a){const l=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.k(e);const f=gm.open(this.db,e,l?"readonly":"readwrite",r),m=a(f).next((g=>(f.v(),g))).catch((g=>(f.abort(g),G.reject(g)))).toPromise();return m.catch((()=>{})),await f.D,m}catch(f){const m=f,g=m.name!=="FirebaseError"&&u<3;if(oe(Zn,"Transaction failed with error:",m.message,"Retrying:",g),this.close(),!g)return Promise.reject(m)}}}close(){this.db&&this.db.close(),this.db=void 0}}function WA(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class mP{constructor(e){this.$=e,this.U=!1,this.K=null}get isDone(){return this.U}get W(){return this.K}set cursor(e){this.$=e}done(){this.U=!0}G(e){this.K=e}delete(){return Ya(this.$.delete())}}class Lc extends se{constructor(e,t){super(W.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ua(i){return i.name==="IndexedDbTransactionError"}class pP{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(oe(Zn,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(oe(Zn,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ya(r)}add(e){return oe(Zn,"ADD",this.store.name,e,e),Ya(this.store.add(e))}get(e){return Ya(this.store.get(e)).next((t=>(t===void 0&&(t=null),oe(Zn,"GET",this.store.name,e,t),t)))}delete(e){return oe(Zn,"DELETE",this.store.name,e),Ya(this.store.delete(e))}count(){return oe(Zn,"COUNT",this.store.name),Ya(this.store.count())}j(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(r.range);return new G(((u,f)=>{l.onerror=m=>{f(m.target.error)},l.onsuccess=m=>{u(m.target.result)}}))}{const l=this.cursor(r),u=[];return this.J(l,((f,m)=>{u.push(m)})).next((()=>u))}}H(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new G(((a,l)=>{r.onerror=u=>{l(u.target.error)},r.onsuccess=u=>{a(u.target.result)}}))}Y(e,t){oe(Zn,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Z=!1;const a=this.cursor(r);return this.J(a,((l,u,f)=>f.delete()))}X(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.J(a,t)}ee(e){const t=this.cursor({});return new G(((r,a)=>{t.onerror=l=>{const u=x_(l.target.error);a(u)},t.onsuccess=l=>{const u=l.target.result;u?e(u.primaryKey,u.value).next((f=>{f?u.continue():r()})):r()}}))}J(e,t){const r=[];return new G(((a,l)=>{e.onerror=u=>{l(u.target.error)},e.onsuccess=u=>{const f=u.target.result;if(!f)return void a();const m=new mP(f),g=t(f.primaryKey,f.value,m);if(g instanceof G){const y=g.catch((v=>(m.done(),G.reject(v))));r.push(y)}m.isDone?a():m.W===null?f.continue():f.continue(m.W)}})).next((()=>G.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ya(i){return new G(((e,t)=>{i.onsuccess=r=>{const a=r.target.result;e(a)},i.onerror=r=>{const a=x_(r.target.error);t(a)}}))}let Jb=!1;function x_(i){const e=Xi.M(Qt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const r=new se("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Jb||(Jb=!0,setTimeout((()=>{throw r}),0)),r}}return i}const Uc="IndexBackfiller";class gP{constructor(e,t){this.asyncQueue=e,this.te=t,this.task=null}start(){this.ne(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ne(e){oe(Uc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.te.re();oe(Uc,`Documents written: ${t}`)}catch(t){ua(t)?oe(Uc,"Ignoring IndexedDB error during index backfill: ",t):await la(t)}await this.ne(6e4)}))}}class yP{constructor(e,t){this.localStore=e,this.persistence=t}async re(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ie(t,e)))}ie(e,t){const r=new Set;let a=t,l=!0;return G.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((u=>{if(u!==null&&!r.has(u))return oe(Uc,`Processing collection: ${u}`),this.se(e,u,a).next((f=>{a-=f,r.add(u)}));l=!1})))).next((()=>t-a))}se(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next((l=>{const u=l.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next((()=>this.oe(a,l))).next((f=>(oe(Uc,`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f)))).next((()=>u.size))}))))}oe(e,t){let r=e;return t.changes.forEach(((a,l)=>{const u=$A(l);R_(u,r)>0&&(r=u)})),new ei(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}zn.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws=-1;function _h(i){return i==null}function Yc(i){return i===0&&1/i==-1/0}function JA(i){return typeof i=="number"&&Number.isInteger(i)&&!Yc(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="";function Tn(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=Zb(e)),e=_P(i.get(t),e);return Zb(e)}function _P(i,e){let t=e;const r=i.length;for(let a=0;a<r;a++){const l=i.charAt(a);switch(l){case"\0":t+="";break;case Hd:t+="";break;default:t+=l}}return t}function Zb(i){return i+Hd+""}function Gi(i){const e=i.length;if(Ee(e>=2,64408,{path:i}),e===2)return Ee(i.charAt(0)===Hd&&i.charAt(1)==="",56145,{path:i}),Me.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const u=i.indexOf(Hd,l);switch((u<0||u>t)&&ge(50515,{path:i}),i.charAt(u+1)){case"":const f=i.substring(l,u);let m;a.length===0?m=f:(a+=f,m=a,a=""),r.push(m);break;case"":a+=i.substring(l,u),a+="\0";break;case"":a+=i.substring(l,u+1);break;default:ge(61167,{path:i})}l=u+2}return new Me(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xa="remoteDocuments",vh="owner",gl="owner",Wc="mutationQueues",vP="userId",wi="mutations",eS="batchId",to="userMutationsIndex",tS=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ad(i,e){return[i,Tn(e)]}function ZA(i,e,t){return[i,Tn(e),t]}const EP={},Ul="documentMutations",Gd="remoteDocumentsV14",TP=["prefixPath","collectionGroup","readTime","documentId"],Id="documentKeyIndex",bP=["prefixPath","collectionGroup","documentId"],eI="collectionGroupIndex",SP=["collectionGroup","readTime","prefixPath","documentId"],Jc="remoteDocumentGlobal",My="remoteDocumentGlobalKey",zl="targets",tI="queryTargetsIndex",wP=["canonicalId","targetId"],Bl="targetDocuments",AP=["targetId","path"],C_="documentTargetsIndex",IP=["path","targetId"],Kd="targetGlobalKey",io="targetGlobal",Zc="collectionParents",RP=["collectionId","parent"],jl="clientMetadata",xP="clientId",ym="bundles",CP="bundleId",_m="namedQueries",DP="name",D_="indexConfiguration",NP="indexId",ky="collectionGroupIndex",VP="collectionGroup",zc="indexState",OP=["indexId","uid"],nI="sequenceNumberIndex",PP=["uid","sequenceNumber"],Bc="indexEntries",MP=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],iI="documentKeyIndex",kP=["indexId","uid","orderedDocumentKey"],vm="documentOverlays",LP=["userId","collectionPath","documentId"],Ly="collectionPathOverlayIndex",UP=["userId","collectionPath","largestBatchId"],rI="collectionGroupOverlayIndex",zP=["userId","collectionGroup","largestBatchId"],N_="globals",BP="name",sI=[Wc,wi,Ul,Xa,zl,vh,io,Bl,jl,Jc,Zc,ym,_m],jP=[...sI,vm],aI=[Wc,wi,Ul,Gd,zl,vh,io,Bl,jl,Jc,Zc,ym,_m,vm],oI=aI,V_=[...oI,D_,zc,Bc],FP=V_,lI=[...V_,N_],qP=lI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy extends YA{constructor(e,t){super(),this.ce=e,this.currentSequenceNumber=t}}function Xt(i,e){const t=de(i);return Xi.N(t.ce,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function ca(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function uI(i,e){const t=[];for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&t.push(e(i[r],r,i));return t}function cI(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,t){this.comparator=e,this.root=t||mn.EMPTY}insert(e,t){return new dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mn.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hd(this.root,e,this.comparator,!1)}getReverseIterator(){return new hd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hd(this.root,e,this.comparator,!0)}}class hd{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mn{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??mn.RED,this.left=a??mn.EMPTY,this.right=l??mn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new mn(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return mn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return mn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ge(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ge(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ge(27949);return e+(this.isRed()?0:1)}}mn.EMPTY=null,mn.RED=!0,mn.BLACK=!1;mn.EMPTY=new class{constructor(){this.size=0}get key(){throw ge(57766)}get value(){throw ge(16141)}get color(){throw ge(16727)}get left(){throw ge(29726)}get right(){throw ge(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new mn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new iS(this.data.getIterator())}getIteratorFrom(e){return new iS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof st)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new st(this.comparator);return t.data=e,t}}class iS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function yl(i){return i.hasNext()?i.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(e){this.fields=e,e.sort(_t.comparator)}static empty(){return new Bn([])}unionWith(e){let t=new st(_t.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Bn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Pl(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new hI("Invalid base64 string: "+l):l}})(e);return new It(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new It(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}It.EMPTY_BYTE_STRING=new It("");const GP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Lr(i){if(Ee(!!i,39018),typeof i=="string"){let e=0;const t=GP.exec(i);if(Ee(!!t,46558,{timestamp:i}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Et(i.seconds),nanos:Et(i.nanos)}}function Et(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Ur(i){return typeof i=="string"?It.fromBase64String(i):It.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI="server_timestamp",dI="__type__",mI="__previous_value__",pI="__local_write_time__";function Em(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[dI])===null||t===void 0?void 0:t.stringValue)===fI}function Tm(i){const e=i.mapValue.fields[mI];return Em(e)?Tm(e):e}function eh(i){const e=Lr(i.mapValue.fields[pI].timestampValue);return new et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,t,r,a,l,u,f,m,g,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=y}}const th="(default)";class Zs{constructor(e,t){this.projectId=e,this.database=t||th}static empty(){return new Zs("","")}get isDefaultDatabase(){return this.database===th}isEqual(e){return e instanceof Zs&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O_="__type__",gI="__max__",Gs={mapValue:{fields:{__type__:{stringValue:gI}}}},P_="__vector__",Fl="value",Rd={nullValue:"NULL_VALUE"};function ea(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Em(i)?4:yI(i)?9007199254740991:bm(i)?10:11:ge(28295,{value:i})}function Wi(i,e){if(i===e)return!0;const t=ea(i);if(t!==ea(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return eh(i).isEqual(eh(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=Lr(a.timestampValue),f=Lr(l.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(a,l){return Ur(a.bytesValue).isEqual(Ur(l.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(a,l){return Et(a.geoPointValue.latitude)===Et(l.geoPointValue.latitude)&&Et(a.geoPointValue.longitude)===Et(l.geoPointValue.longitude)})(i,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return Et(a.integerValue)===Et(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=Et(a.doubleValue),f=Et(l.doubleValue);return u===f?Yc(u)===Yc(f):isNaN(u)&&isNaN(f)}return!1})(i,e);case 9:return Pl(i.arrayValue.values||[],e.arrayValue.values||[],Wi);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},f=l.mapValue.fields||{};if(nS(u)!==nS(f))return!1;for(const m in u)if(u.hasOwnProperty(m)&&(f[m]===void 0||!Wi(u[m],f[m])))return!1;return!0})(i,e);default:return ge(52216,{left:i})}}function nh(i,e){return(i.values||[]).find((t=>Wi(t,e)))!==void 0}function ta(i,e){if(i===e)return 0;const t=ea(i),r=ea(e);if(t!==r)return Ae(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ae(i.booleanValue,e.booleanValue);case 2:return(function(l,u){const f=Et(l.integerValue||l.doubleValue),m=Et(u.integerValue||u.doubleValue);return f<m?-1:f>m?1:f===m?0:isNaN(f)?isNaN(m)?0:-1:1})(i,e);case 3:return rS(i.timestampValue,e.timestampValue);case 4:return rS(eh(i),eh(e));case 5:return Vy(i.stringValue,e.stringValue);case 6:return(function(l,u){const f=Ur(l),m=Ur(u);return f.compareTo(m)})(i.bytesValue,e.bytesValue);case 7:return(function(l,u){const f=l.split("/"),m=u.split("/");for(let g=0;g<f.length&&g<m.length;g++){const y=Ae(f[g],m[g]);if(y!==0)return y}return Ae(f.length,m.length)})(i.referenceValue,e.referenceValue);case 8:return(function(l,u){const f=Ae(Et(l.latitude),Et(u.latitude));return f!==0?f:Ae(Et(l.longitude),Et(u.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return sS(i.arrayValue,e.arrayValue);case 10:return(function(l,u){var f,m,g,y;const v=l.fields||{},b=u.fields||{},I=(f=v[Fl])===null||f===void 0?void 0:f.arrayValue,O=(m=b[Fl])===null||m===void 0?void 0:m.arrayValue,M=Ae(((g=I==null?void 0:I.values)===null||g===void 0?void 0:g.length)||0,((y=O==null?void 0:O.values)===null||y===void 0?void 0:y.length)||0);return M!==0?M:sS(I,O)})(i.mapValue,e.mapValue);case 11:return(function(l,u){if(l===Gs.mapValue&&u===Gs.mapValue)return 0;if(l===Gs.mapValue)return 1;if(u===Gs.mapValue)return-1;const f=l.fields||{},m=Object.keys(f),g=u.fields||{},y=Object.keys(g);m.sort(),y.sort();for(let v=0;v<m.length&&v<y.length;++v){const b=Vy(m[v],y[v]);if(b!==0)return b;const I=ta(f[m[v]],g[y[v]]);if(I!==0)return I}return Ae(m.length,y.length)})(i.mapValue,e.mapValue);default:throw ge(23264,{le:t})}}function rS(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ae(i,e);const t=Lr(i),r=Lr(e),a=Ae(t.seconds,r.seconds);return a!==0?a:Ae(t.nanos,r.nanos)}function sS(i,e){const t=i.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=ta(t[a],r[a]);if(l)return l}return Ae(t.length,r.length)}function ql(i){return zy(i)}function zy(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const r=Lr(t);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return Ur(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return fe.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=zy(l);return r+"]"})(i.arrayValue):"mapValue"in i?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of r)l?l=!1:a+=",",a+=`${u}:${zy(t.fields[u])}`;return a+"}"})(i.mapValue):ge(61005,{value:i})}function xd(i){switch(ea(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Tm(i);return e?16+xd(e):16;case 5:return 2*i.stringValue.length;case 6:return Ur(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+xd(l)),0)})(i.arrayValue);case 10:case 11:return(function(r){let a=0;return ca(r.fields,((l,u)=>{a+=l.length+xd(u)})),a})(i.mapValue);default:throw ge(13486,{value:i})}}function lo(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function By(i){return!!i&&"integerValue"in i}function ih(i){return!!i&&"arrayValue"in i}function aS(i){return!!i&&"nullValue"in i}function oS(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Cd(i){return!!i&&"mapValue"in i}function bm(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[O_])===null||t===void 0?void 0:t.stringValue)===P_}function jc(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return ca(i.mapValue.fields,((t,r)=>e.mapValue.fields[t]=jc(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=jc(i.arrayValue.values[t]);return e}return Object.assign({},i)}function yI(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===gI}const _I={mapValue:{fields:{[O_]:{stringValue:P_},[Fl]:{arrayValue:{}}}}};function QP(i){return"nullValue"in i?Rd:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?lo(Zs.empty(),fe.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?bm(i)?_I:{mapValue:{}}:ge(35942,{value:i})}function $P(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?lo(Zs.empty(),fe.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?_I:"mapValue"in i?bm(i)?{mapValue:{}}:Gs:ge(61959,{value:i})}function lS(i,e){const t=ta(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function uS(i,e){const t=ta(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.value=e}static empty(){return new pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Cd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jc(t)}setAll(e){let t=_t.emptyPath(),r={},a=[];e.forEach(((u,f)=>{if(!t.isImmediateParentOf(f)){const m=this.getFieldsMap(t);this.applyChanges(m,r,a),r={},a=[],t=f.popLast()}u?r[f.lastSegment()]=jc(u):a.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());Cd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];Cd(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){ca(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new pn(jc(this.value))}}function vI(i){const e=[];return ca(i.fields,((t,r)=>{const a=new _t([t]);if(Cd(r)){const l=vI(r.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new Bn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,t,r,a,l,u,f){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=u,this.documentState=f}static newInvalidDocument(e){return new yt(e,0,be.min(),be.min(),be.min(),pn.empty(),0)}static newFoundDocument(e,t,r,a){return new yt(e,1,t,be.min(),r,a,0)}static newNoDocument(e,t){return new yt(e,2,t,be.min(),be.min(),pn.empty(),0)}static newUnknownDocument(e,t){return new yt(e,3,t,be.min(),be.min(),pn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof yt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new yt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,t){this.position=e,this.inclusive=t}}function cS(i,e,t){let r=0;for(let a=0;a<i.position.length;a++){const l=e[a],u=i.position[a];if(l.field.isKeyField()?r=fe.comparator(fe.fromName(u.referenceValue),t.key):r=ta(u,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function hS(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Wi(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(e,t="asc"){this.field=e,this.dir=t}}function XP(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{}class Fe extends EI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new YP(e,t,r):t==="array-contains"?new ZP(e,r):t==="in"?new II(e,r):t==="not-in"?new eM(e,r):t==="array-contains-any"?new tM(e,r):new Fe(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new WP(e,r):new JP(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ta(t,this.value)):t!==null&&ea(this.value)===ea(t)&&this.matchesComparison(ta(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ge(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class it extends EI{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new it(e,t)}matches(e){return Hl(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Hl(i){return i.op==="and"}function jy(i){return i.op==="or"}function M_(i){return TI(i)&&Hl(i)}function TI(i){for(const e of i.filters)if(e instanceof it)return!1;return!0}function Fy(i){if(i instanceof Fe)return i.field.canonicalString()+i.op.toString()+ql(i.value);if(M_(i))return i.filters.map((e=>Fy(e))).join(",");{const e=i.filters.map((t=>Fy(t))).join(",");return`${i.op}(${e})`}}function bI(i,e){return i instanceof Fe?(function(r,a){return a instanceof Fe&&r.op===a.op&&r.field.isEqual(a.field)&&Wi(r.value,a.value)})(i,e):i instanceof it?(function(r,a){return a instanceof it&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,u,f)=>l&&bI(u,a.filters[f])),!0):!1})(i,e):void ge(19439)}function SI(i,e){const t=i.filters.concat(e);return it.create(t,i.op)}function wI(i){return i instanceof Fe?(function(t){return`${t.field.canonicalString()} ${t.op} ${ql(t.value)}`})(i):i instanceof it?(function(t){return t.op.toString()+" {"+t.getFilters().map(wI).join(" ,")+"}"})(i):"Filter"}class YP extends Fe{constructor(e,t,r){super(e,t,r),this.key=fe.fromName(r.referenceValue)}matches(e){const t=fe.comparator(e.key,this.key);return this.matchesComparison(t)}}class WP extends Fe{constructor(e,t){super(e,"in",t),this.keys=AI("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class JP extends Fe{constructor(e,t){super(e,"not-in",t),this.keys=AI("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function AI(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>fe.fromName(r.referenceValue)))}class ZP extends Fe{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ih(t)&&nh(t.arrayValue,this.value)}}class II extends Fe{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&nh(this.value.arrayValue,t)}}class eM extends Fe{constructor(e,t){super(e,"not-in",t)}matches(e){if(nh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!nh(this.value.arrayValue,t)}}class tM extends Fe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ih(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>nh(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(e,t=null,r=[],a=[],l=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=u,this.endAt=f,this.Pe=null}}function qy(i,e=null,t=[],r=[],a=null,l=null,u=null){return new nM(i,e,t,r,a,l,u)}function uo(i){const e=de(i);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Fy(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),_h(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>ql(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>ql(r))).join(",")),e.Pe=t}return e.Pe}function Eh(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!XP(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!bI(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!hS(i.startAt,e.startAt)&&hS(i.endAt,e.endAt)}function Qd(i){return fe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function $d(i,e){return i.filters.filter((t=>t instanceof Fe&&t.field.isEqual(e)))}function fS(i,e,t){let r=Rd,a=!0;for(const l of $d(i,e)){let u=Rd,f=!0;switch(l.op){case"<":case"<=":u=QP(l.value);break;case"==":case"in":case">=":u=l.value;break;case">":u=l.value,f=!1;break;case"!=":case"not-in":u=Rd}lS({value:r,inclusive:a},{value:u,inclusive:f})<0&&(r=u,a=f)}if(t!==null){for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const u=t.position[l];lS({value:r,inclusive:a},{value:u,inclusive:t.inclusive})<0&&(r=u,a=t.inclusive);break}}return{value:r,inclusive:a}}function dS(i,e,t){let r=Gs,a=!0;for(const l of $d(i,e)){let u=Gs,f=!0;switch(l.op){case">=":case">":u=$P(l.value),f=!1;break;case"==":case"in":case"<=":u=l.value;break;case"<":u=l.value,f=!1;break;case"!=":case"not-in":u=Gs}uS({value:r,inclusive:a},{value:u,inclusive:f})>0&&(r=u,a=f)}if(t!==null){for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const u=t.position[l];uS({value:r,inclusive:a},{value:u,inclusive:t.inclusive})>0&&(r=u,a=t.inclusive);break}}return{value:r,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(e,t=null,r=[],a=[],l=null,u="F",f=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=u,this.startAt=f,this.endAt=m,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function RI(i,e,t,r,a,l,u,f){return new Fr(i,e,t,r,a,l,u,f)}function uu(i){return new Fr(i)}function mS(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function k_(i){return i.collectionGroup!==null}function Dl(i){const e=de(i);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new st(_t.comparator);return u.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(f=f.add(g.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new rh(l,r))})),t.has(_t.keyField().canonicalString())||e.Te.push(new rh(_t.keyField(),r))}return e.Te}function bn(i){const e=de(i);return e.Ie||(e.Ie=CI(e,Dl(i))),e.Ie}function xI(i){const e=de(i);return e.de||(e.de=CI(e,i.explicitOrderBy)),e.de}function CI(i,e){if(i.limitType==="F")return qy(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new rh(a.field,l)}));const t=i.endAt?new na(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new na(i.startAt.position,i.startAt.inclusive):null;return qy(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function Hy(i,e){const t=i.filters.concat([e]);return new Fr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function Xd(i,e,t){return new Fr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Th(i,e){return Eh(bn(i),bn(e))&&i.limitType===e.limitType}function DI(i){return`${uo(bn(i))}|lt:${i.limitType}`}function Sl(i){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>wI(a))).join(", ")}]`),_h(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>ql(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>ql(a))).join(",")),`Target(${r})`})(bn(i))}; limitType=${i.limitType})`}function bh(i,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):fe.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(i,e)&&(function(r,a){for(const l of Dl(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(i,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(i,e)&&(function(r,a){return!(r.startAt&&!(function(u,f,m){const g=cS(u,f,m);return u.inclusive?g<=0:g<0})(r.startAt,Dl(r),a)||r.endAt&&!(function(u,f,m){const g=cS(u,f,m);return u.inclusive?g>=0:g>0})(r.endAt,Dl(r),a))})(i,e)}function NI(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function VI(i){return(e,t)=>{let r=!1;for(const a of Dl(i)){const l=iM(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function iM(i,e,t){const r=i.field.isKeyField()?fe.comparator(e.key,t.key):(function(l,u,f){const m=u.data.field(l),g=f.data.field(l);return m!==null&&g!==null?ta(m,g):ge(42886)})(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return ge(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){ca(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return cI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rM=new dt(fe.comparator);function jn(){return rM}const OI=new dt(fe.comparator);function Vc(...i){let e=OI;for(const t of i)e=e.insert(t.key,t);return e}function PI(i){let e=OI;return i.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Ki(){return Fc()}function MI(){return Fc()}function Fc(){return new qr((i=>i.toString()),((i,e)=>i.isEqual(e)))}const sM=new dt(fe.comparator),aM=new st(fe.comparator);function De(...i){let e=aM;for(const t of i)e=e.add(t);return e}const oM=new st(Ae);function L_(){return oM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yc(e)?"-0":e}}function kI(i){return{integerValue:""+i}}function LI(i,e){return JA(e)?kI(e):U_(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(){this._=void 0}}function lM(i,e,t){return i instanceof Gl?(function(a,l){const u={fields:{[dI]:{stringValue:fI},[pI]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Em(l)&&(l=Tm(l)),l&&(u.fields[mI]=l),{mapValue:u}})(t,e):i instanceof co?zI(i,e):i instanceof ho?BI(i,e):(function(a,l){const u=UI(a,l),f=pS(u)+pS(a.Ee);return By(u)&&By(a.Ee)?kI(f):U_(a.serializer,f)})(i,e)}function uM(i,e,t){return i instanceof co?zI(i,e):i instanceof ho?BI(i,e):t}function UI(i,e){return i instanceof Kl?(function(r){return By(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class Gl extends Sm{}class co extends Sm{constructor(e){super(),this.elements=e}}function zI(i,e){const t=jI(e);for(const r of i.elements)t.some((a=>Wi(a,r)))||t.push(r);return{arrayValue:{values:t}}}class ho extends Sm{constructor(e){super(),this.elements=e}}function BI(i,e){let t=jI(e);for(const r of i.elements)t=t.filter((a=>!Wi(a,r)));return{arrayValue:{values:t}}}class Kl extends Sm{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function pS(i){return Et(i.integerValue||i.doubleValue)}function jI(i){return ih(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,t){this.field=e,this.transform=t}}function cM(i,e){return i.field.isEqual(e.field)&&(function(r,a){return r instanceof co&&a instanceof co||r instanceof ho&&a instanceof ho?Pl(r.elements,a.elements,Wi):r instanceof Kl&&a instanceof Kl?Wi(r.Ee,a.Ee):r instanceof Gl&&a instanceof Gl})(i.transform,e.transform)}class hM{constructor(e,t){this.version=e,this.transformResults=t}}class Tt{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Tt}static exists(e){return new Tt(void 0,e)}static updateTime(e){return new Tt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Dd(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class wm{}function FI(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new hu(i.key,Tt.none()):new cu(i.key,i.data,Tt.none());{const t=i.data,r=pn.empty();let a=new st(_t.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?r.delete(l):r.set(l,u),a=a.add(l)}return new Hr(i.key,r,new Bn(a.toArray()),Tt.none())}}function fM(i,e,t){i instanceof cu?(function(a,l,u){const f=a.value.clone(),m=yS(a.fieldTransforms,l,u.transformResults);f.setAll(m),l.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(i,e,t):i instanceof Hr?(function(a,l,u){if(!Dd(a.precondition,l))return void l.convertToUnknownDocument(u.version);const f=yS(a.fieldTransforms,l,u.transformResults),m=l.data;m.setAll(qI(a)),m.setAll(f),l.convertToFoundDocument(u.version,m).setHasCommittedMutations()})(i,e,t):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function qc(i,e,t,r){return i instanceof cu?(function(l,u,f,m){if(!Dd(l.precondition,u))return f;const g=l.value.clone(),y=_S(l.fieldTransforms,m,u);return g.setAll(y),u.convertToFoundDocument(u.version,g).setHasLocalMutations(),null})(i,e,t,r):i instanceof Hr?(function(l,u,f,m){if(!Dd(l.precondition,u))return f;const g=_S(l.fieldTransforms,m,u),y=u.data;return y.setAll(qI(l)),y.setAll(g),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((v=>v.field)))})(i,e,t,r):(function(l,u,f){return Dd(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(i,e,t)}function dM(i,e){let t=null;for(const r of i.fieldTransforms){const a=e.data.field(r.field),l=UI(r.transform,a||null);l!=null&&(t===null&&(t=pn.empty()),t.set(r.field,l))}return t||null}function gS(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&Pl(r,a,((l,u)=>cM(l,u)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class cu extends wm{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Hr extends wm{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function qI(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}})),e}function yS(i,e,t){const r=new Map;Ee(i.length===t.length,32656,{Ae:t.length,Re:i.length});for(let a=0;a<t.length;a++){const l=i[a],u=l.transform,f=e.data.field(l.field);r.set(l.field,uM(u,f,t[a]))}return r}function _S(i,e,t){const r=new Map;for(const a of i){const l=a.transform,u=t.data.field(a.field);r.set(a.field,lM(l,u,e))}return r}class hu extends wm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class z_ extends wm{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&fM(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=qc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=qc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=MI();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let f=this.applyToLocalView(u,l.mutatedFields);f=t.has(a.key)?null:f;const m=FI(u,f);m!==null&&r.set(a.key,m),u.isValidDocument()||u.convertToNoDocument(be.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),De())}isEqual(e){return this.batchId===e.batchId&&Pl(this.mutations,e.mutations,((t,r)=>gS(t,r)))&&Pl(this.baseMutations,e.baseMutations,((t,r)=>gS(t,r)))}}class j_{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){Ee(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let a=(function(){return sM})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,r[u].version);return new j_(e,t,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,t,r){this.alias=e,this.aggregateType=t,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,Ge;function GI(i){switch(i){case W.OK:return ge(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return ge(15467,{code:i})}}function KI(i){if(i===void 0)return Mt("GRPC error has no .code"),W.UNKNOWN;switch(i){case Ft.OK:return W.OK;case Ft.CANCELLED:return W.CANCELLED;case Ft.UNKNOWN:return W.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return W.INTERNAL;case Ft.UNAVAILABLE:return W.UNAVAILABLE;case Ft.UNAUTHENTICATED:return W.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case Ft.NOT_FOUND:return W.NOT_FOUND;case Ft.ALREADY_EXISTS:return W.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return W.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case Ft.ABORTED:return W.ABORTED;case Ft.OUT_OF_RANGE:return W.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return W.UNIMPLEMENTED;case Ft.DATA_LOSS:return W.DATA_LOSS;default:return ge(39323,{code:i})}}(Ge=Ft||(Ft={}))[Ge.OK=0]="OK",Ge[Ge.CANCELLED=1]="CANCELLED",Ge[Ge.UNKNOWN=2]="UNKNOWN",Ge[Ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ge[Ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ge[Ge.NOT_FOUND=5]="NOT_FOUND",Ge[Ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ge[Ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ge[Ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ge[Ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ge[Ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ge[Ge.ABORTED=10]="ABORTED",Ge[Ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ge[Ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ge[Ge.INTERNAL=13]="INTERNAL",Ge[Ge.UNAVAILABLE=14]="UNAVAILABLE",Ge[Ge.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yd=null;/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM=new Ys([4294967295,4294967295],0);function vS(i){const e=A_().encode(i),t=new PA;return t.update(e),new Uint8Array(t.digest())}function ES(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Ys([t,r],0),new Ys([a,l],0)]}class q_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Oc(`Invalid padding: ${t}`);if(r<0)throw new Oc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Oc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Oc(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Ys.fromNumber(this.fe)}pe(e,t,r){let a=e.add(t.multiply(Ys.fromNumber(r)));return a.compare(pM)===1&&(a=new Ys([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=vS(e),[r,a]=ES(t);for(let l=0;l<this.hashCount;l++){const u=this.pe(r,a,l);if(!this.ye(u))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new q_(l,a,t);return r.forEach((f=>u.insert(f))),u}insert(e){if(this.fe===0)return;const t=vS(e),[r,a]=ES(t);for(let l=0;l<this.hashCount;l++){const u=this.pe(r,a,l);this.we(u)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Oc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Ah.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new wh(be.min(),a,new dt(Ae),jn(),De())}}class Ah{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Ah(r,t,De(),De(),De())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e,t,r,a){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=a}}class QI{constructor(e,t){this.targetId=e,this.De=t}}class $I{constructor(e,t,r=It.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class TS{constructor(){this.ve=0,this.Ce=bS(),this.Fe=It.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=De(),t=De(),r=De();return this.Ce.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:ge(38017,{changeType:l})}})),new Ah(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=bS()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Ee(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class gM{constructor(e){this.We=e,this.Ge=new Map,this.ze=jn(),this.je=fd(),this.Je=fd(),this.He=new dt(Ae)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:ge(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((r,a)=>{this.nt(a)&&t(a)}))}it(e){const t=e.targetId,r=e.De.count,a=this.st(t);if(a){const l=a.target;if(Qd(l))if(r===0){const u=new fe(l.path);this.Xe(t,u,yt.newNoDocument(u,be.min()))}else Ee(r===1,20013,{expectedCount:r});else{const u=this.ot(t);if(u!==r){const f=this._t(e),m=f?this.ut(f,e,u):1;if(m!==0){this.rt(t);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,g)}Yd==null||Yd.ct((function(y,v,b,I,O){var M,V,$,H,Q,ue;const ye={localCacheCount:y,existenceFilterCount:v.count,databaseId:b.database,projectId:b.projectId},pe=v.unchangedNames;return pe&&(ye.bloomFilter={applied:O===0,hashCount:(M=pe==null?void 0:pe.hashCount)!==null&&M!==void 0?M:0,bitmapLength:(H=($=(V=pe==null?void 0:pe.bits)===null||V===void 0?void 0:V.bitmap)===null||$===void 0?void 0:$.length)!==null&&H!==void 0?H:0,padding:(ue=(Q=pe==null?void 0:pe.bits)===null||Q===void 0?void 0:Q.padding)!==null&&ue!==void 0?ue:0,mightContain:x=>{var R;return(R=I==null?void 0:I.mightContain(x))!==null&&R!==void 0&&R}}),ye})(u,e.De,this.We.lt(),f,m))}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let u,f;try{u=Ur(r).toUint8Array()}catch(m){if(m instanceof hI)return Sn("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{f=new q_(u,a,l)}catch(m){return Sn(m instanceof Oc?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return f.fe===0?null:f}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const u=this.We.lt(),f=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.Xe(t,l,null),a++)})),a}Pt(e){const t=new Map;this.Ge.forEach(((l,u)=>{const f=this.st(u);if(f){if(l.current&&Qd(f.target)){const m=new fe(f.target.path);this.Tt(m).has(u)||this.It(u,m)||this.Xe(u,m,yt.newNoDocument(m,e))}l.Ne&&(t.set(u,l.Le()),l.ke())}}));let r=De();this.Je.forEach(((l,u)=>{let f=!0;u.forEachWhile((m=>{const g=this.st(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(r=r.add(l))})),this.ze.forEach(((l,u)=>u.setReadTime(e)));const a=new wh(e,t,this.He,this.ze,r);return this.ze=jn(),this.je=fd(),this.Je=fd(),this.He=new dt(Ae),a}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const a=this.tt(e);this.It(e,t)?a.qe(t,1):a.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new TS,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new st(Ae),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new st(Ae),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||oe("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new TS),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function fd(){return new dt(fe.comparator)}function bS(){return new dt(fe.comparator)}const yM={asc:"ASCENDING",desc:"DESCENDING"},_M={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vM={and:"AND",or:"OR"};class EM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Gy(i,e){return i.useProto3Json||_h(e)?e:{value:e}}function Ql(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function XI(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function TM(i,e){return Ql(i,e.toTimestamp())}function kt(i){return Ee(!!i,49232),be.fromTimestamp((function(t){const r=Lr(t);return new et(r.seconds,r.nanos)})(i))}function H_(i,e){return Ky(i,e).canonicalString()}function Ky(i,e){const t=(function(a){return new Me(["projects",a.projectId,"databases",a.database])})(i).child("documents");return e===void 0?t:t.child(e)}function YI(i){const e=Me.fromString(i);return Ee(sR(e),10190,{key:e.toString()}),e}function sh(i,e){return H_(i.databaseId,e.path)}function Yi(i,e){const t=YI(e);if(t.get(1)!==i.databaseId.projectId)throw new se(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new se(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new fe(ZI(t))}function WI(i,e){return H_(i.databaseId,e)}function JI(i){const e=YI(i);return e.length===4?Me.emptyPath():ZI(e)}function Qy(i){return new Me(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function ZI(i){return Ee(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function SS(i,e,t){return{name:sh(i,e),fields:t.value.mapValue.fields}}function Am(i,e,t){const r=Yi(i,e.name),a=kt(e.updateTime),l=e.createTime?kt(e.createTime):be.min(),u=new pn({mapValue:{fields:e.fields}}),f=yt.newFoundDocument(r,a,l,u);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function bM(i,e){return"found"in e?(function(r,a){Ee(!!a.found,43571),a.found.name,a.found.updateTime;const l=Yi(r,a.found.name),u=kt(a.found.updateTime),f=a.found.createTime?kt(a.found.createTime):be.min(),m=new pn({mapValue:{fields:a.found.fields}});return yt.newFoundDocument(l,u,f,m)})(i,e):"missing"in e?(function(r,a){Ee(!!a.missing,3894),Ee(!!a.readTime,22933);const l=Yi(r,a.missing),u=kt(a.readTime);return yt.newNoDocument(l,u)})(i,e):ge(7234,{result:e})}function SM(i,e){let t;if("targetChange"in e){e.targetChange;const r=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:ge(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(g,y){return g.useProto3Json?(Ee(y===void 0||typeof y=="string",58123),It.fromBase64String(y||"")):(Ee(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),It.fromUint8Array(y||new Uint8Array))})(i,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(g){const y=g.code===void 0?W.UNKNOWN:KI(g.code);return new se(y,g.message||"")})(u);t=new $I(r,a,l,f||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=Yi(i,r.document.name),l=kt(r.document.updateTime),u=r.document.createTime?kt(r.document.createTime):be.min(),f=new pn({mapValue:{fields:r.document.fields}}),m=yt.newFoundDocument(a,l,u,f),g=r.targetIds||[],y=r.removedTargetIds||[];t=new Nd(g,y,m.key,m)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=Yi(i,r.document),l=r.readTime?kt(r.readTime):be.min(),u=yt.newNoDocument(a,l),f=r.removedTargetIds||[];t=new Nd([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=Yi(i,r.document),l=r.removedTargetIds||[];t=new Nd([],l,a,null)}else{if(!("filter"in e))return ge(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,u=new mM(a,l),f=r.targetId;t=new QI(f,u)}}return t}function ah(i,e){let t;if(e instanceof cu)t={update:SS(i,e.key,e.value)};else if(e instanceof hu)t={delete:sh(i,e.key)};else if(e instanceof Hr)t={update:SS(i,e.key,e.data),updateMask:CM(e.fieldMask)};else{if(!(e instanceof z_))return ge(16599,{Rt:e.type});t={verify:sh(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,u){const f=u.transform;if(f instanceof Gl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof co)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof ho)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Kl)return{fieldPath:u.field.canonicalString(),increment:f.Ee};throw ge(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:TM(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:ge(27497)})(i,e.precondition)),t}function $y(i,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?Tt.updateTime(kt(l.updateTime)):l.exists!==void 0?Tt.exists(l.exists):Tt.none()})(e.currentDocument):Tt.none(),r=e.updateTransforms?e.updateTransforms.map((a=>(function(u,f){let m=null;if("setToServerValue"in f)Ee(f.setToServerValue==="REQUEST_TIME",16630,{proto:f}),m=new Gl;else if("appendMissingElements"in f){const y=f.appendMissingElements.values||[];m=new co(y)}else if("removeAllFromArray"in f){const y=f.removeAllFromArray.values||[];m=new ho(y)}else"increment"in f?m=new Kl(u,f.increment):ge(16584,{proto:f});const g=_t.fromServerFormat(f.fieldPath);return new Sh(g,m)})(i,a))):[];if(e.update){e.update.name;const a=Yi(i,e.update.name),l=new pn({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=(function(m){const g=m.fieldPaths||[];return new Bn(g.map((y=>_t.fromServerFormat(y))))})(e.updateMask);return new Hr(a,l,u,t,r)}return new cu(a,l,t,r)}if(e.delete){const a=Yi(i,e.delete);return new hu(a,t)}if(e.verify){const a=Yi(i,e.verify);return new z_(a,t)}return ge(1463,{proto:e})}function wM(i,e){return i&&i.length>0?(Ee(e!==void 0,14353),i.map((t=>(function(a,l){let u=a.updateTime?kt(a.updateTime):kt(l);return u.isEqual(be.min())&&(u=kt(l)),new hM(u,a.transformResults||[])})(t,e)))):[]}function eR(i,e){return{documents:[WI(i,e.path)]}}function Im(i,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=WI(i,a);const l=(function(g){if(g.length!==0)return rR(it.create(g,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(g){if(g.length!==0)return g.map((y=>(function(b){return{field:qs(b.field),direction:IM(b.dir)}})(y)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=Gy(i,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{Vt:t,parent:a}}function tR(i,e,t,r){const{Vt:a,parent:l}=Im(i,e),u={},f=[];let m=0;return t.forEach((g=>{const y=r?g.alias:"aggregate_"+m++;u[y]=g.alias,g.aggregateType==="count"?f.push({alias:y,count:{}}):g.aggregateType==="avg"?f.push({alias:y,avg:{field:qs(g.fieldPath)}}):g.aggregateType==="sum"&&f.push({alias:y,sum:{field:qs(g.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:f,structuredQuery:a.structuredQuery},parent:a.parent},ft:u,parent:l}}function nR(i){let e=JI(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){Ee(r===1,65062);const y=t.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=(function(v){const b=iR(v);return b instanceof it&&M_(b)?b.getFilters():[b]})(t.where));let u=[];t.orderBy&&(u=(function(v){return v.map((b=>(function(O){return new rh(wl(O.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(O.direction))})(b)))})(t.orderBy));let f=null;t.limit&&(f=(function(v){let b;return b=typeof v=="object"?v.value:v,_h(b)?null:b})(t.limit));let m=null;t.startAt&&(m=(function(v){const b=!!v.before,I=v.values||[];return new na(I,b)})(t.startAt));let g=null;return t.endAt&&(g=(function(v){const b=!v.before,I=v.values||[];return new na(I,b)})(t.endAt)),RI(e,a,u,l,f,"F",m,g)}function AM(i,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ge(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function iR(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=wl(t.unaryFilter.field);return Fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=wl(t.unaryFilter.field);return Fe.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=wl(t.unaryFilter.field);return Fe.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=wl(t.unaryFilter.field);return Fe.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ge(61313);default:return ge(60726)}})(i):i.fieldFilter!==void 0?(function(t){return Fe.create(wl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ge(58110);default:return ge(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return it.create(t.compositeFilter.filters.map((r=>iR(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return ge(1026)}})(t.compositeFilter.op))})(i):ge(30097,{filter:i})}function IM(i){return yM[i]}function RM(i){return _M[i]}function xM(i){return vM[i]}function qs(i){return{fieldPath:i.canonicalString()}}function wl(i){return _t.fromServerFormat(i.fieldPath)}function rR(i){return i instanceof Fe?(function(t){if(t.op==="=="){if(oS(t.value))return{unaryFilter:{field:qs(t.field),op:"IS_NAN"}};if(aS(t.value))return{unaryFilter:{field:qs(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(oS(t.value))return{unaryFilter:{field:qs(t.field),op:"IS_NOT_NAN"}};if(aS(t.value))return{unaryFilter:{field:qs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qs(t.field),op:RM(t.op),value:t.value}}})(i):i instanceof it?(function(t){const r=t.getFilters().map((a=>rR(a)));return r.length===1?r[0]:{compositeFilter:{op:xM(t.op),filters:r}}})(i):ge(54877,{filter:i})}function CM(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function sR(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,t,r,a,l=be.min(),u=be.min(),f=It.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=m}withSequenceNumber(e){return new xr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new xr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e){this.gt=e}}function DM(i,e){let t;if(e.document)t=Am(i.gt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=fe.fromSegments(e.noDocument.path),a=mo(e.noDocument.readTime);t=yt.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ge(56709);{const r=fe.fromSegments(e.unknownDocument.path),a=mo(e.unknownDocument.version);t=yt.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime((function(a){const l=new et(a[0],a[1]);return be.fromTimestamp(l)})(e.readTime)),t}function wS(i,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Wd(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(l,u){return{name:sh(l,u.key),fields:u.data.value.mapValue.fields,updateTime:Ql(l,u.version.toTimestamp()),createTime:Ql(l,u.createTime.toTimestamp())}})(i.gt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:fo(e.version)};else{if(!e.isUnknownDocument())return ge(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:fo(e.version)}}return r}function Wd(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function fo(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function mo(i){const e=new et(i.seconds,i.nanoseconds);return be.fromTimestamp(e)}function Wa(i,e){const t=(e.baseMutations||[]).map((l=>$y(i.gt,l)));for(let l=0;l<e.mutations.length-1;++l){const u=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const f=e.mutations[l+1];u.updateTransforms=f.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map((l=>$y(i.gt,l))),a=et.fromMillis(e.localWriteTimeMs);return new B_(e.batchId,a,t,r)}function Pc(i){const e=mo(i.readTime),t=i.lastLimboFreeSnapshotVersion!==void 0?mo(i.lastLimboFreeSnapshotVersion):be.min();let r;return r=(function(l){return l.documents!==void 0})(i.query)?(function(l){const u=l.documents.length;return Ee(u===1,1966,{count:u}),bn(uu(JI(l.documents[0])))})(i.query):(function(l){return bn(nR(l))})(i.query),new xr(r,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,It.fromBase64String(i.resumeToken))}function oR(i,e){const t=fo(e.snapshotVersion),r=fo(e.lastLimboFreeSnapshotVersion);let a;a=Qd(e.target)?eR(i.gt,e.target):Im(i.gt,e.target).Vt;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:uo(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function Rm(i){const e=nR({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Xd(e,e.limit,"L"):e}function oy(i,e){return new F_(e.largestBatchId,$y(i.gt,e.overlayMutation))}function AS(i,e){const t=e.path.lastSegment();return[i,Tn(e.path.popLast()),t]}function IS(i,e,t,r){return{indexId:i,uid:e,sequenceNumber:t,readTime:fo(r.readTime),documentKey:Tn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{getBundleMetadata(e,t){return RS(e).get(t).next((r=>{if(r)return(function(l){return{id:l.bundleId,createTime:mo(l.createTime),version:l.version}})(r)}))}saveBundleMetadata(e,t){return RS(e).put((function(a){return{bundleId:a.id,createTime:fo(kt(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return xS(e).get(t).next((r=>{if(r)return(function(l){return{name:l.name,query:Rm(l.bundledQuery),readTime:mo(l.readTime)}})(r)}))}saveNamedQuery(e,t){return xS(e).put((function(a){return{name:a.name,readTime:fo(kt(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function RS(i){return Xt(i,ym)}function xS(i){return Xt(i,_m)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,t){this.serializer=e,this.userId=t}static yt(e,t){const r=t.uid||"";return new xm(e,r)}getOverlay(e,t){return wc(e).get(AS(this.userId,t)).next((r=>r?oy(this.serializer,r):null))}getOverlays(e,t){const r=Ki();return G.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){const a=[];return r.forEach(((l,u)=>{const f=new F_(t,u);a.push(this.wt(e,f))})),G.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach((u=>a.add(Tn(u.getCollectionPath()))));const l=[];return a.forEach((u=>{const f=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);l.push(wc(e).Y(Ly,f))})),G.waitFor(l)}getOverlaysForCollection(e,t,r){const a=Ki(),l=Tn(t),u=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return wc(e).j(Ly,u).next((f=>{for(const m of f){const g=oy(this.serializer,m);a.set(g.getKey(),g)}return a}))}getOverlaysForCollectionGroup(e,t,r,a){const l=Ki();let u;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return wc(e).X({index:rI,range:f},((m,g,y)=>{const v=oy(this.serializer,g);l.size()<a||v.largestBatchId===u?(l.set(v.getKey(),v),u=v.largestBatchId):y.done()})).next((()=>l))}wt(e,t){return wc(e).put((function(a,l,u){const[f,m,g]=AS(l,u.mutation.key);return{userId:l,collectionPath:m,documentId:g,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:ah(a.gt,u.mutation)}})(this.serializer,this.userId,t))}}function wc(i){return Xt(i,vm)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VM{St(e){return Xt(e,N_)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const r=t==null?void 0:t.value;return r?It.fromUint8Array(r):It.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(Et(e.integerValue));else if("doubleValue"in e){const r=Et(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),Yc(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Lr(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Ur(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?yI(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):bm(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):ge(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){const r=e.fields||{};this.Ct(t,55);for(const a of Object.keys(r))this.xt(a,t),this.Dt(r[a],t)}Lt(e,t){var r,a;const l=e.fields||{};this.Ct(t,53);const u=Fl,f=((a=(r=l[u].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.length)||0;this.Ct(t,15),t.Ft(Et(f)),this.xt(u,t),this.Dt(l[u],t)}qt(e,t){const r=e.values||[];this.Ct(t,50);for(const a of r)this.Dt(a,t)}Bt(e,t){this.Ct(t,37),fe.fromName(e).path.forEach((r=>{this.Ct(t,60),this.$t(r,t)}))}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}}Ja.Ut=new Ja;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _l=255;function OM(i){if(i===0)return 8;let e=0;return i>>4||(e+=4,i<<=4),i>>6||(e+=2,i<<=2),i>>7||(e+=1),e}function CS(i){const e=64-(function(r){let a=0;for(let l=0;l<8;++l){const u=OM(255&r[l]);if(a+=u,u!==8)break}return a})(i);return Math.ceil(e/8)}class PM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Kt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Wt(r.value),r=t.next();this.Gt()}zt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.jt(r.value),r=t.next();this.Jt()}Ht(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Wt(r);else if(r<2048)this.Wt(960|r>>>6),this.Wt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Wt(480|r>>>12),this.Wt(128|63&r>>>6),this.Wt(128|63&r);else{const a=t.codePointAt(0);this.Wt(240|a>>>18),this.Wt(128|63&a>>>12),this.Wt(128|63&a>>>6),this.Wt(128|63&a)}}this.Gt()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.jt(r);else if(r<2048)this.jt(960|r>>>6),this.jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.jt(480|r>>>12),this.jt(128|63&r>>>6),this.jt(128|63&r);else{const a=t.codePointAt(0);this.jt(240|a>>>18),this.jt(128|63&a>>>12),this.jt(128|63&a>>>6),this.jt(128|63&a)}}this.Jt()}Zt(e){const t=this.Xt(e),r=CS(t);this.en(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}tn(e){const t=this.Xt(e),r=CS(t);this.en(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}nn(){this.rn(_l),this.rn(255)}sn(){this._n(_l),this._n(255)}reset(){this.position=0}seed(e){this.en(e.length),this.buffer.set(e,this.position),this.position+=e.length}an(){return this.buffer.slice(0,this.position)}Xt(e){const t=(function(l){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,l,!1),new Uint8Array(u.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Wt(e){const t=255&e;t===0?(this.rn(0),this.rn(255)):t===_l?(this.rn(_l),this.rn(0)):this.rn(t)}jt(e){const t=255&e;t===0?(this._n(0),this._n(255)):t===_l?(this._n(_l),this._n(0)):this._n(e)}Gt(){this.rn(0),this.rn(1)}Jt(){this._n(0),this._n(1)}rn(e){this.en(1),this.buffer[this.position++]=e}_n(e){this.en(1),this.buffer[this.position++]=~e}en(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class MM{constructor(e){this.un=e}Nt(e){this.un.Kt(e)}Mt(e){this.un.Ht(e)}Ft(e){this.un.Zt(e)}vt(){this.un.nn()}}class kM{constructor(e){this.un=e}Nt(e){this.un.zt(e)}Mt(e){this.un.Yt(e)}Ft(e){this.un.tn(e)}vt(){this.un.sn()}}class Ac{constructor(){this.un=new PM,this.cn=new MM(this.un),this.ln=new kM(this.un)}seed(e){this.un.seed(e)}hn(e){return e===0?this.cn:this.ln}an(){return this.un.an()}reset(){this.un.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,t,r,a){this.Pn=e,this.Tn=t,this.In=r,this.dn=a}En(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new Za(this.Pn,this.Tn,this.In,r)}An(e,t,r){return{indexId:this.Pn,uid:e,arrayValue:Vd(this.In),directionalValue:Vd(this.dn),orderedDocumentKey:Vd(t),documentKey:r.path.toArray()}}Rn(e,t,r){const a=this.An(e,t,r);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function ks(i,e){let t=i.Pn-e.Pn;return t!==0?t:(t=DS(i.In,e.In),t!==0?t:(t=DS(i.dn,e.dn),t!==0?t:fe.comparator(i.Tn,e.Tn)))}function DS(i,e){for(let t=0;t<i.length&&t<e.length;++t){const r=i[t]-e[t];if(r!==0)return r}return i.length-e.length}function Vd(i){return Kw()?(function(t){let r="";for(let a=0;a<t.length;a++)r+=String.fromCharCode(t[a]);return r})(i):i}function NS(i){return typeof i!="string"?i:(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(i)}class VS{constructor(e){this.Vn=new st(((t,r)=>_t.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.mn=e.orderBy,this.fn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.fn.push(r)}}get gn(){return this.Vn.size>1}pn(e){if(Ee(e.collectionGroup===this.collectionId,49279),this.gn)return!1;const t=Py(e);if(t!==void 0&&!this.yn(t))return!1;const r=$a(e);let a=new Set,l=0,u=0;for(;l<r.length&&this.yn(r[l]);++l)a=a.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.Vn.size>0){const f=this.Vn.getIterator().getNext();if(!a.has(f.field.canonicalString())){const m=r[l];if(!this.wn(f,m)||!this.Sn(this.mn[u++],m))return!1}++l}for(;l<r.length;++l){const f=r[l];if(u>=this.mn.length||!this.Sn(this.mn[u++],f))return!1}return!0}bn(){if(this.gn)return null;let e=new st(_t.comparator);const t=[];for(const r of this.fn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new no(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new no(r.field,0))}for(const r of this.mn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new no(r.field,r.dir==="asc"?0:1)));return new kl(kl.UNKNOWN_ID,this.collectionId,t,Ll.empty())}yn(e){for(const t of this.fn)if(this.wn(t,e))return!0;return!1}wn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}Sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(i){var e,t;if(Ee(i instanceof Fe||i instanceof it,20012),i instanceof Fe){if(i instanceof II){const a=((t=(e=i.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map((l=>Fe.create(i.field,"==",l))))||[];return it.create(a,"or")}return i}const r=i.filters.map((a=>lR(a)));return it.create(r,i.op)}function LM(i){if(i.getFilters().length===0)return[];const e=Wy(lR(i));return Ee(uR(e),7391),Xy(e)||Yy(e)?[e]:e.getFilters()}function Xy(i){return i instanceof Fe}function Yy(i){return i instanceof it&&M_(i)}function uR(i){return Xy(i)||Yy(i)||(function(t){if(t instanceof it&&jy(t)){for(const r of t.getFilters())if(!Xy(r)&&!Yy(r))return!1;return!0}return!1})(i)}function Wy(i){if(Ee(i instanceof Fe||i instanceof it,34018),i instanceof Fe)return i;if(i.filters.length===1)return Wy(i.filters[0]);const e=i.filters.map((r=>Wy(r)));let t=it.create(e,i.op);return t=Jd(t),uR(t)?t:(Ee(t instanceof it,64498),Ee(Hl(t),40251),Ee(t.filters.length>1,57927),t.filters.reduce(((r,a)=>G_(r,a))))}function G_(i,e){let t;return Ee(i instanceof Fe||i instanceof it,38388),Ee(e instanceof Fe||e instanceof it,25473),t=i instanceof Fe?e instanceof Fe?(function(a,l){return it.create([a,l],"and")})(i,e):OS(i,e):e instanceof Fe?OS(e,i):(function(a,l){if(Ee(a.filters.length>0&&l.filters.length>0,48005),Hl(a)&&Hl(l))return SI(a,l.getFilters());const u=jy(a)?a:l,f=jy(a)?l:a,m=u.filters.map((g=>G_(g,f)));return it.create(m,"or")})(i,e),Jd(t)}function OS(i,e){if(Hl(e))return SI(e,i.getFilters());{const t=e.filters.map((r=>G_(i,r)));return it.create(t,"or")}}function Jd(i){if(Ee(i instanceof Fe||i instanceof it,11850),i instanceof Fe)return i;const e=i.getFilters();if(e.length===1)return Jd(e[0]);if(TI(i))return i;const t=e.map((a=>Jd(a))),r=[];return t.forEach((a=>{a instanceof Fe?r.push(a):a instanceof it&&(a.op===i.op?r.push(...a.filters):r.push(a))})),r.length===1?r[0]:it.create(r,i.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(){this.Dn=new K_}addToCollectionParentIndex(e,t){return this.Dn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(ei.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(ei.min())}updateCollectionGroup(e,t,r){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class K_{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new st(Me.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new st(Me.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS="IndexedDbIndexManager",dd=new Uint8Array(0);class zM{constructor(e,t){this.databaseId=t,this.vn=new K_,this.Cn=new qr((r=>uo(r)),((r,a)=>Eh(r,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const l={collectionId:r,parent:Tn(a)};return MS(e).put(l)}return G.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[qA(t),""],!1,!0);return MS(e).j(a).next((l=>{for(const u of l){if(u.collectionId!==t)break;r.push(Gi(u.parent))}return r}))}addFieldIndex(e,t){const r=Ic(e),a=(function(f){return{indexId:f.indexId,collectionGroup:f.collectionGroup,fields:f.fields.map((m=>[m.fieldPath.canonicalString(),m.kind]))}})(t);delete a.indexId;const l=r.add(a);if(t.indexState){const u=El(e);return l.next((f=>{u.put(IS(f,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const r=Ic(e),a=El(e),l=vl(e);return r.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Ic(e),r=vl(e),a=El(e);return t.Y().next((()=>r.Y())).next((()=>a.Y()))}createTargetIndexes(e,t){return G.forEach(this.Fn(t),(r=>this.getIndexType(e,r).next((a=>{if(a===0||a===1){const l=new VS(r).bn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const r=vl(e);let a=!0;const l=new Map;return G.forEach(this.Fn(t),(u=>this.Mn(e,u).next((f=>{a&&(a=!!f),l.set(u,f)})))).next((()=>{if(a){let u=De();const f=[];return G.forEach(l,((m,g)=>{oe(PS,`Using index ${(function(Q){return`id=${Q.indexId}|cg=${Q.collectionGroup}|f=${Q.fields.map((ue=>`${ue.fieldPath}:${ue.kind}`)).join(",")}`})(m)} to execute ${uo(t)}`);const y=(function(Q,ue){const ye=Py(ue);if(ye===void 0)return null;for(const pe of $d(Q,ye.fieldPath))switch(pe.op){case"array-contains-any":return pe.value.arrayValue.values||[];case"array-contains":return[pe.value]}return null})(g,m),v=(function(Q,ue){const ye=new Map;for(const pe of $a(ue))for(const x of $d(Q,pe.fieldPath))switch(x.op){case"==":case"in":ye.set(pe.fieldPath.canonicalString(),x.value);break;case"not-in":case"!=":return ye.set(pe.fieldPath.canonicalString(),x.value),Array.from(ye.values())}return null})(g,m),b=(function(Q,ue){const ye=[];let pe=!0;for(const x of $a(ue)){const R=x.kind===0?fS(Q,x.fieldPath,Q.startAt):dS(Q,x.fieldPath,Q.startAt);ye.push(R.value),pe&&(pe=R.inclusive)}return new na(ye,pe)})(g,m),I=(function(Q,ue){const ye=[];let pe=!0;for(const x of $a(ue)){const R=x.kind===0?dS(Q,x.fieldPath,Q.endAt):fS(Q,x.fieldPath,Q.endAt);ye.push(R.value),pe&&(pe=R.inclusive)}return new na(ye,pe)})(g,m),O=this.xn(m,g,b),M=this.xn(m,g,I),V=this.On(m,g,v),$=this.Nn(m.indexId,y,O,b.inclusive,M,I.inclusive,V);return G.forEach($,(H=>r.H(H,t.limit).next((Q=>{Q.forEach((ue=>{const ye=fe.fromSegments(ue.documentKey);u.has(ye)||(u=u.add(ye),f.push(ye))}))}))))})).next((()=>f))}return G.resolve(null)}))}Fn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=LM(it.create(e.filters,"and")).map((r=>qy(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}Nn(e,t,r,a,l,u,f){const m=(t!=null?t.length:1)*Math.max(r.length,l.length),g=m/(t!=null?t.length:1),y=[];for(let v=0;v<m;++v){const b=t?this.Bn(t[v/g]):dd,I=this.Ln(e,b,r[v%g],a),O=this.kn(e,b,l[v%g],u),M=f.map((V=>this.Ln(e,b,V,!0)));y.push(...this.createRange(I,O,M))}return y}Ln(e,t,r,a){const l=new Za(e,fe.empty(),t,r);return a?l:l.En()}kn(e,t,r,a){const l=new Za(e,fe.empty(),t,r);return a?l.En():l}Mn(e,t){const r=new VS(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let u=null;for(const f of l)r.pn(f)&&(!u||f.fields.length>u.fields.length)&&(u=f);return u}))}getIndexType(e,t){let r=2;const a=this.Fn(t);return G.forEach(a,(l=>this.Mn(e,l).next((u=>{u?r!==0&&u.fields.length<(function(m){let g=new st(_t.comparator),y=!1;for(const v of m.filters)for(const b of v.getFlattenedFilters())b.field.isKeyField()||(b.op==="array-contains"||b.op==="array-contains-any"?y=!0:g=g.add(b.field));for(const v of m.orderBy)v.field.isKeyField()||(g=g.add(v.field));return g.size+(y?1:0)})(l)&&(r=1):r=0})))).next((()=>(function(u){return u.limit!==null})(t)&&a.length>1&&r===2?1:r))}qn(e,t){const r=new Ac;for(const a of $a(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const u=r.hn(a.kind);Ja.Ut.bt(l,u)}return r.an()}Bn(e){const t=new Ac;return Ja.Ut.bt(e,t.hn(0)),t.an()}Qn(e,t){const r=new Ac;return Ja.Ut.bt(lo(this.databaseId,t),r.hn((function(l){const u=$a(l);return u.length===0?0:u[u.length-1].kind})(e))),r.an()}On(e,t,r){if(r===null)return[];let a=[];a.push(new Ac);let l=0;for(const u of $a(e)){const f=r[l++];for(const m of a)if(this.$n(t,u.fieldPath)&&ih(f))a=this.Un(a,u,f);else{const g=m.hn(u.kind);Ja.Ut.bt(f,g)}}return this.Kn(a)}xn(e,t,r){return this.On(e,t,r.position)}Kn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].an();return t}Un(e,t,r){const a=[...e],l=[];for(const u of r.arrayValue.values||[])for(const f of a){const m=new Ac;m.seed(f.an()),Ja.Ut.bt(u,m.hn(t.kind)),l.push(m)}return l}$n(e,t){return!!e.filters.find((r=>r instanceof Fe&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Ic(e),a=El(e);return(t?r.j(ky,IDBKeyRange.bound(t,t)):r.j()).next((l=>{const u=[];return G.forEach(l,(f=>a.get([f.indexId,this.uid]).next((m=>{u.push((function(y,v){const b=v?new Ll(v.sequenceNumber,new ei(mo(v.readTime),new fe(Gi(v.documentKey)),v.largestBatchId)):Ll.empty(),I=y.fields.map((([O,M])=>new no(_t.fromServerFormat(O),M)));return new kl(y.indexId,y.collectionGroup,I,b)})(f,m))})))).next((()=>u))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Ae(r.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const a=Ic(e),l=El(e);return this.Wn(e).next((u=>a.j(ky,IDBKeyRange.bound(t,t)).next((f=>G.forEach(f,(m=>l.put(IS(m.indexId,this.uid,u,r))))))))}updateIndexEntries(e,t){const r=new Map;return G.forEach(t,((a,l)=>{const u=r.get(a.collectionGroup);return(u?G.resolve(u):this.getFieldIndexes(e,a.collectionGroup)).next((f=>(r.set(a.collectionGroup,f),G.forEach(f,(m=>this.Gn(e,a,m).next((g=>{const y=this.zn(l,m);return g.isEqual(y)?G.resolve():this.jn(e,l,m,g,y)})))))))}))}Jn(e,t,r,a){return vl(e).put(a.An(this.uid,this.Qn(r,t.key),t.key))}Hn(e,t,r,a){return vl(e).delete(a.Rn(this.uid,this.Qn(r,t.key),t.key))}Gn(e,t,r){const a=vl(e);let l=new st(ks);return a.X({index:iI,range:IDBKeyRange.only([r.indexId,this.uid,Vd(this.Qn(r,t))])},((u,f)=>{l=l.add(new Za(r.indexId,t,NS(f.arrayValue),NS(f.directionalValue)))})).next((()=>l))}zn(e,t){let r=new st(ks);const a=this.qn(t,e);if(a==null)return r;const l=Py(t);if(l!=null){const u=e.data.field(l.fieldPath);if(ih(u))for(const f of u.arrayValue.values||[])r=r.add(new Za(t.indexId,e.key,this.Bn(f),a))}else r=r.add(new Za(t.indexId,e.key,dd,a));return r}jn(e,t,r,a,l){oe(PS,"Updating index entries for document '%s'",t.key);const u=[];return(function(m,g,y,v,b){const I=m.getIterator(),O=g.getIterator();let M=yl(I),V=yl(O);for(;M||V;){let $=!1,H=!1;if(M&&V){const Q=y(M,V);Q<0?H=!0:Q>0&&($=!0)}else M!=null?H=!0:$=!0;$?(v(V),V=yl(O)):H?(b(M),M=yl(I)):(M=yl(I),V=yl(O))}})(a,l,ks,(f=>{u.push(this.Jn(e,t,r,f))}),(f=>{u.push(this.Hn(e,t,r,f))})),G.waitFor(u)}Wn(e){let t=1;return El(e).X({index:nI,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((u,f)=>ks(u,f))).filter(((u,f,m)=>!f||ks(u,m[f-1])!==0));const a=[];a.push(e);for(const u of r){const f=ks(u,e),m=ks(u,t);if(f===0)a[0]=e.En();else if(f>0&&m<0)a.push(u),a.push(u.En());else if(m>0)break}a.push(t);const l=[];for(let u=0;u<a.length;u+=2){if(this.Yn(a[u],a[u+1]))return[];const f=a[u].Rn(this.uid,dd,fe.empty()),m=a[u+1].Rn(this.uid,dd,fe.empty());l.push(IDBKeyRange.bound(f,m))}return l}Yn(e,t){return ks(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(kS)}getMinOffset(e,t){return G.mapArray(this.Fn(t),(r=>this.Mn(e,r).next((a=>a||ge(44426))))).next(kS)}}function MS(i){return Xt(i,Zc)}function vl(i){return Xt(i,Bc)}function Ic(i){return Xt(i,D_)}function El(i){return Xt(i,zc)}function kS(i){Ee(i.length!==0,28825);let e=i[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<i.length;r++){const a=i[r].indexState.offset;R_(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new ei(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cR=41943040;class En{static withCacheSize(e){return new En(e,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(i,e,t){const r=i.store(wi),a=i.store(Ul),l=[],u=IDBKeyRange.only(t.batchId);let f=0;const m=r.X({range:u},((y,v,b)=>(f++,b.delete())));l.push(m.next((()=>{Ee(f===1,47070,{batchId:t.batchId})})));const g=[];for(const y of t.mutations){const v=ZA(e,y.key.path,t.batchId);l.push(a.delete(v)),g.push(y.key)}return G.waitFor(l).next((()=>g))}function Zd(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw ge(14731);e=i.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */En.DEFAULT_COLLECTION_PERCENTILE=10,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,En.DEFAULT=new En(cR,En.DEFAULT_COLLECTION_PERCENTILE,En.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),En.DISABLED=new En(-1,0,0);class Cm{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Zn={}}static yt(e,t,r,a){Ee(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new Cm(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ls(e).X({index:to,range:r},((a,l,u)=>{t=!1,u.done()})).next((()=>t))}addMutationBatch(e,t,r,a){const l=Al(e),u=Ls(e);return u.add({}).next((f=>{Ee(typeof f=="number",49019);const m=new B_(f,t,r,a),g=(function(I,O,M){const V=M.baseMutations.map((H=>ah(I.gt,H))),$=M.mutations.map((H=>ah(I.gt,H)));return{userId:O,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:V,mutations:$}})(this.serializer,this.userId,m),y=[];let v=new st(((b,I)=>Ae(b.canonicalString(),I.canonicalString())));for(const b of a){const I=ZA(this.userId,b.key.path,f);v=v.add(b.key.path.popLast()),y.push(u.put(g)),y.push(l.put(I,EP))}return v.forEach((b=>{y.push(this.indexManager.addToCollectionParentIndex(e,b))})),e.addOnCommittedListener((()=>{this.Zn[f]=m.keys()})),G.waitFor(y).next((()=>m))}))}lookupMutationBatch(e,t){return Ls(e).get(t).next((r=>r?(Ee(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),Wa(this.serializer,r)):null))}Xn(e,t){return this.Zn[t]?G.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const a=r.keys();return this.Zn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return Ls(e).X({index:to,range:a},((u,f,m)=>{f.userId===this.userId&&(Ee(f.batchId>=r,47524,{er:r}),l=Wa(this.serializer,f)),m.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=Ws;return Ls(e).X({index:to,range:t,reverse:!0},((a,l,u)=>{r=l.batchId,u.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Ws],[this.userId,Number.POSITIVE_INFINITY]);return Ls(e).j(to,t).next((r=>r.map((a=>Wa(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Ad(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return Al(e).X({range:a},((u,f,m)=>{const[g,y,v]=u,b=Gi(y);if(g===this.userId&&t.path.isEqual(b))return Ls(e).get(v).next((I=>{if(!I)throw ge(61480,{tr:u,batchId:v});Ee(I.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:I.userId,batchId:v}),l.push(Wa(this.serializer,I))}));m.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new st(Ae);const a=[];return t.forEach((l=>{const u=Ad(this.userId,l.path),f=IDBKeyRange.lowerBound(u),m=Al(e).X({range:f},((g,y,v)=>{const[b,I,O]=g,M=Gi(I);b===this.userId&&l.path.isEqual(M)?r=r.add(O):v.done()}));a.push(m)})),G.waitFor(a).next((()=>this.nr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=Ad(this.userId,r),u=IDBKeyRange.lowerBound(l);let f=new st(Ae);return Al(e).X({range:u},((m,g,y)=>{const[v,b,I]=m,O=Gi(b);v===this.userId&&r.isPrefixOf(O)?O.length===a&&(f=f.add(I)):y.done()})).next((()=>this.nr(e,f)))}nr(e,t){const r=[],a=[];return t.forEach((l=>{a.push(Ls(e).get(l).next((u=>{if(u===null)throw ge(35274,{batchId:l});Ee(u.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:u.userId,batchId:l}),r.push(Wa(this.serializer,u))})))})),G.waitFor(a).next((()=>r))}removeMutationBatch(e,t){return hR(e.ce,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.rr(t.batchId)})),G.forEach(r,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}rr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return G.resolve();const r=IDBKeyRange.lowerBound((function(u){return[u]})(this.userId)),a=[];return Al(e).X({range:r},((l,u,f)=>{if(l[0]===this.userId){const m=Gi(l[1]);a.push(m)}else f.done()})).next((()=>{Ee(a.length===0,56720,{ir:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return fR(e,this.userId,t)}sr(e){return dR(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Ws,lastStreamToken:""}))}}function fR(i,e,t){const r=Ad(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let u=!1;return Al(i).X({range:l,Z:!0},((f,m,g)=>{const[y,v,b]=f;y===e&&v===a&&(u=!0),g.done()})).next((()=>u))}function Ls(i){return Xt(i,wi)}function Al(i){return Xt(i,Ul)}function dR(i){return Xt(i,Wc)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new po(0)}static ur(){return new po(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BM{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.cr(e).next((t=>{const r=new po(t.highestTargetId);return t.highestTargetId=r.next(),this.lr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.cr(e).next((t=>be.fromTimestamp(new et(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.cr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.cr(e).next((a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.lr(e,a))))}addTargetData(e,t){return this.hr(e,t).next((()=>this.cr(e).next((r=>(r.targetCount+=1,this.Pr(t,r),this.lr(e,r))))))}updateTargetData(e,t){return this.hr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Tl(e).delete(t.targetId))).next((()=>this.cr(e))).next((r=>(Ee(r.targetCount>0,8065),r.targetCount-=1,this.lr(e,r))))}removeTargets(e,t,r){let a=0;const l=[];return Tl(e).X(((u,f)=>{const m=Pc(f);m.sequenceNumber<=t&&r.get(m.targetId)===null&&(a++,l.push(this.removeTargetData(e,m)))})).next((()=>G.waitFor(l))).next((()=>a))}forEachTarget(e,t){return Tl(e).X(((r,a)=>{const l=Pc(a);t(l)}))}cr(e){return US(e).get(Kd).next((t=>(Ee(t!==null,2888),t)))}lr(e,t){return US(e).put(Kd,t)}hr(e,t){return Tl(e).put(oR(this.serializer,t))}Pr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.cr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=uo(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Tl(e).X({range:a,index:tI},((u,f,m)=>{const g=Pc(f);Eh(t,g.target)&&(l=g,m.done())})).next((()=>l))}addMatchingKeys(e,t,r){const a=[],l=Hs(e);return t.forEach((u=>{const f=Tn(u.path);a.push(l.put({targetId:r,path:f})),a.push(this.referenceDelegate.addReference(e,r,u))})),G.waitFor(a)}removeMatchingKeys(e,t,r){const a=Hs(e);return G.forEach(t,(l=>{const u=Tn(l.path);return G.waitFor([a.delete([r,u]),this.referenceDelegate.removeReference(e,r,l)])}))}removeMatchingKeysForTargetId(e,t){const r=Hs(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=Hs(e);let l=De();return a.X({range:r,Z:!0},((u,f,m)=>{const g=Gi(u[1]),y=new fe(g);l=l.add(y)})).next((()=>l))}containsKey(e,t){const r=Tn(t.path),a=IDBKeyRange.bound([r],[qA(r)],!1,!0);let l=0;return Hs(e).X({index:C_,Z:!0,range:a},(([u,f],m,g)=>{u!==0&&(l++,g.done())})).next((()=>l>0))}Et(e,t){return Tl(e).get(t).next((r=>r?Pc(r):null))}}function Tl(i){return Xt(i,zl)}function US(i){return Xt(i,io)}function Hs(i){return Xt(i,Bl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zS="LruGarbageCollector",mR=1048576;function BS([i,e],[t,r]){const a=Ae(i,t);return a===0?Ae(e,r):a}class jM{constructor(e){this.Tr=e,this.buffer=new st(BS),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();BS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class pR{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){oe(zS,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ua(t)?oe(zS,"Ignoring IndexedDB error during garbage collection: ",t):await la(t)}await this.Rr(3e5)}))}}class FM{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return G.resolve(zn.ue);const r=new jM(t);return this.Vr.forEachTarget(e,(a=>r.Er(a.sequenceNumber))).next((()=>this.Vr.gr(e,(a=>r.Er(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(LS)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),LS):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,a,l,u,f,m,g;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((v=>(v>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${v}`),a=this.params.maximumSequenceNumbersToCollect):a=v,u=Date.now(),this.nthSequenceNumber(e,a)))).next((v=>(r=v,f=Date.now(),this.removeTargets(e,r,t)))).next((v=>(l=v,m=Date.now(),this.removeOrphanedDocuments(e,r)))).next((v=>(g=Date.now(),bl()<=je.DEBUG&&oe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${a} in `+(f-u)+`ms
	Removed ${l} targets in `+(m-f)+`ms
	Removed ${v} documents in `+(g-m)+`ms
Total Duration: ${g-y}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:v}))))}}function gR(i,e){return new FM(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e,t){this.db=e,this.garbageCollector=gR(this,t)}mr(e){const t=this.yr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}yr(e){let t=0;return this.gr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}gr(e,t){return this.wr(e,((r,a)=>t(a)))}addReference(e,t,r){return md(e,r)}removeReference(e,t,r){return md(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return md(e,t)}Sr(e,t){return(function(a,l){let u=!1;return dR(a).ee((f=>fR(a,f,l).next((m=>(m&&(u=!0),G.resolve(!m)))))).next((()=>u))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.wr(e,((u,f)=>{if(f<=t){const m=this.Sr(e,u).next((g=>{if(!g)return l++,r.getEntry(e,u).next((()=>(r.removeEntry(u,be.min()),Hs(e).delete((function(v){return[0,Tn(v.path)]})(u)))))}));a.push(m)}})).next((()=>G.waitFor(a))).next((()=>r.apply(e))).next((()=>l))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return md(e,t)}wr(e,t){const r=Hs(e);let a,l=zn.ue;return r.X({index:C_},(([u,f],{path:m,sequenceNumber:g})=>{u===0?(l!==zn.ue&&t(new fe(Gi(a)),l),l=g,a=m):l=zn.ue})).next((()=>{l!==zn.ue&&t(new fe(Gi(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function md(i,e){return Hs(i).put((function(r,a){return{targetId:0,path:Tn(r.path),sequenceNumber:a}})(e,i.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(){this.changes=new qr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,yt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?G.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HM{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ka(e).put(r)}removeEntry(e,t,r){return Ka(e).delete((function(l,u){const f=l.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],Wd(u),f[f.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.br(e,r))))}getEntry(e,t){let r=yt.newInvalidDocument(t);return Ka(e).X({index:Id,range:IDBKeyRange.only(Rc(t))},((a,l)=>{r=this.Dr(t,l)})).next((()=>r))}vr(e,t){let r={size:0,document:yt.newInvalidDocument(t)};return Ka(e).X({index:Id,range:IDBKeyRange.only(Rc(t))},((a,l)=>{r={document:this.Dr(t,l),size:Zd(l)}})).next((()=>r))}getEntries(e,t){let r=jn();return this.Cr(e,t,((a,l)=>{const u=this.Dr(a,l);r=r.insert(a,u)})).next((()=>r))}Fr(e,t){let r=jn(),a=new dt(fe.comparator);return this.Cr(e,t,((l,u)=>{const f=this.Dr(l,u);r=r.insert(l,f),a=a.insert(l,Zd(u))})).next((()=>({documents:r,Mr:a})))}Cr(e,t,r){if(t.isEmpty())return G.resolve();let a=new st(qS);t.forEach((m=>a=a.add(m)));const l=IDBKeyRange.bound(Rc(a.first()),Rc(a.last())),u=a.getIterator();let f=u.getNext();return Ka(e).X({index:Id,range:l},((m,g,y)=>{const v=fe.fromSegments([...g.prefixPath,g.collectionGroup,g.documentId]);for(;f&&qS(f,v)<0;)r(f,null),f=u.getNext();f&&f.isEqual(v)&&(r(f,g),f=u.hasNext()?u.getNext():null),f?y.G(Rc(f)):y.done()})).next((()=>{for(;f;)r(f,null),f=u.hasNext()?u.getNext():null}))}getDocumentsMatchingQuery(e,t,r,a,l){const u=t.path,f=[u.popLast().toArray(),u.lastSegment(),Wd(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],m=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ka(e).j(IDBKeyRange.bound(f,m,!0)).next((g=>{l==null||l.incrementDocumentReadCount(g.length);let y=jn();for(const v of g){const b=this.Dr(fe.fromSegments(v.prefixPath.concat(v.collectionGroup,v.documentId)),v);b.isFoundDocument()&&(bh(t,b)||a.has(b.key))&&(y=y.insert(b.key,b))}return y}))}getAllFromCollectionGroup(e,t,r,a){let l=jn();const u=FS(t,r),f=FS(t,ei.max());return Ka(e).X({index:eI,range:IDBKeyRange.bound(u,f,!0)},((m,g,y)=>{const v=this.Dr(fe.fromSegments(g.prefixPath.concat(g.collectionGroup,g.documentId)),g);l=l.insert(v.key,v),l.size===a&&y.done()})).next((()=>l))}newChangeBuffer(e){return new GM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return jS(e).get(My).next((t=>(Ee(!!t,20021),t)))}br(e,t){return jS(e).put(My,t)}Dr(e,t){if(t){const r=DM(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(be.min())))return r}return yt.newInvalidDocument(e)}}function _R(i){return new HM(i)}class GM extends yR{constructor(e,t){super(),this.Or=e,this.trackRemovals=t,this.Nr=new qr((r=>r.toString()),((r,a)=>r.isEqual(a)))}applyChanges(e){const t=[];let r=0,a=new st(((l,u)=>Ae(l.canonicalString(),u.canonicalString())));return this.changes.forEach(((l,u)=>{const f=this.Nr.get(l);if(t.push(this.Or.removeEntry(e,l,f.readTime)),u.isValidDocument()){const m=wS(this.Or.serializer,u);a=a.add(l.path.popLast());const g=Zd(m);r+=g-f.size,t.push(this.Or.addEntry(e,l,m))}else if(r-=f.size,this.trackRemovals){const m=wS(this.Or.serializer,u.convertToNoDocument(be.min()));t.push(this.Or.addEntry(e,l,m))}})),a.forEach((l=>{t.push(this.Or.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Or.updateMetadata(e,r)),G.waitFor(t)}getFromCache(e,t){return this.Or.vr(e,t).next((r=>(this.Nr.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Or.Fr(e,t).next((({documents:r,Mr:a})=>(a.forEach(((l,u)=>{this.Nr.set(l,{size:u,readTime:r.get(l).readTime})})),r)))}}function jS(i){return Xt(i,Jc)}function Ka(i){return Xt(i,Gd)}function Rc(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function FS(i,e){const t=e.documentKey.path.toArray();return[i,Wd(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function qS(i,e){const t=i.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=Ae(t[l],r[l]),a)return a;return a=Ae(t.length,r.length),a||(a=Ae(t[t.length-2],r[r.length-2]),a||Ae(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&qc(r.mutation,a,Bn.empty(),et.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,De()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=De()){const a=Ki();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let u=Vc();return l.forEach(((f,m)=>{u=u.insert(f,m.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=Ki();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,De())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,f)=>{t.set(u,f)}))}))}computeViews(e,t,r,a){let l=jn();const u=Fc(),f=(function(){return Fc()})();return t.forEach(((m,g)=>{const y=r.get(g.key);a.has(g.key)&&(y===void 0||y.mutation instanceof Hr)?l=l.insert(g.key,g):y!==void 0?(u.set(g.key,y.mutation.getFieldMask()),qc(y.mutation,g,y.mutation.getFieldMask(),et.now())):u.set(g.key,Bn.empty())})),this.recalculateAndSaveOverlays(e,l).next((m=>(m.forEach(((g,y)=>u.set(g,y))),t.forEach(((g,y)=>{var v;return f.set(g,new KM(y,(v=u.get(g))!==null&&v!==void 0?v:null))})),f)))}recalculateAndSaveOverlays(e,t){const r=Fc();let a=new dt(((u,f)=>u-f)),l=De();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const f of u)f.keys().forEach((m=>{const g=t.get(m);if(g===null)return;let y=r.get(m)||Bn.empty();y=f.applyToLocalView(g,y),r.set(m,y);const v=(a.get(f.batchId)||De()).add(m);a=a.insert(f.batchId,v)}))})).next((()=>{const u=[],f=a.getReverseIterator();for(;f.hasNext();){const m=f.getNext(),g=m.key,y=m.value,v=MI();y.forEach((b=>{if(!l.has(b)){const I=FI(t.get(b),r.get(b));I!==null&&v.set(b,I),l=l.add(b)}})),u.push(this.documentOverlayCache.saveOverlays(e,g,v))}return G.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return(function(u){return fe.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):k_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):G.resolve(Ki());let f=Ml,m=l;return u.next((g=>G.forEach(g,((y,v)=>(f<v.largestBatchId&&(f=v.largestBatchId),l.get(y)?G.resolve():this.remoteDocumentCache.getEntry(e,y).next((b=>{m=m.insert(y,b)}))))).next((()=>this.populateOverlays(e,g,l))).next((()=>this.computeViews(e,m,g,De()))).next((y=>({batchId:f,changes:PI(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new fe(t)).next((r=>{let a=Vc();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let u=Vc();return this.indexManager.getCollectionParents(e,l).next((f=>G.forEach(f,(m=>{const g=(function(v,b){return new Fr(b,null,v.explicitOrderBy.slice(),v.filters.slice(),v.limit,v.limitType,v.startAt,v.endAt)})(t,m.child(l));return this.getDocumentsMatchingCollectionQuery(e,g,r,a).next((y=>{y.forEach(((v,b)=>{u=u.insert(v,b)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((u=>{l.forEach(((m,g)=>{const y=g.getKey();u.get(y)===null&&(u=u.insert(y,yt.newInvalidDocument(y)))}));let f=Vc();return u.forEach(((m,g)=>{const y=l.get(m);y!==void 0&&qc(y.mutation,g,Bn.empty(),et.now()),bh(t,g)&&(f=f.insert(m,g))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return G.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:kt(a.createTime)}})(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(a){return{name:a.name,query:Rm(a.bundledQuery),readTime:kt(a.readTime)}})(t)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(){this.overlays=new dt(fe.comparator),this.kr=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Ki();return G.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.wt(e,t,l)})),G.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.kr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(r)),G.resolve()}getOverlaysForCollection(e,t,r){const a=Ki(),l=t.length+1,u=new fe(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const m=f.getNext().value,g=m.getKey();if(!t.isPrefixOf(g.path))break;g.path.length===l&&m.largestBatchId>r&&a.set(m.getKey(),m)}return G.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new dt(((g,y)=>g-y));const u=this.overlays.getIterator();for(;u.hasNext();){const g=u.getNext().value;if(g.getKey().getCollectionGroup()===t&&g.largestBatchId>r){let y=l.get(g.largestBatchId);y===null&&(y=Ki(),l=l.insert(g.largestBatchId,y)),y.set(g.getKey(),g)}}const f=Ki(),m=l.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,y)=>f.set(g,y))),!(f.size()>=a)););return G.resolve(f)}wt(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const u=this.kr.get(a.largestBatchId).delete(r.key);this.kr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new F_(t,r));let l=this.kr.get(t);l===void 0&&(l=De(),this.kr.set(t,l)),this.kr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(){this.sessionToken=It.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q_{constructor(){this.qr=new st(tn.Qr),this.$r=new st(tn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new tn(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new tn(e,t))}Gr(e,t){e.forEach((r=>this.removeReference(r,t)))}zr(e){const t=new fe(new Me([])),r=new tn(t,e),a=new tn(t,e+1),l=[];return this.$r.forEachInRange([r,a],(u=>{this.Wr(u),l.push(u.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new fe(new Me([])),r=new tn(t,e),a=new tn(t,e+1);let l=De();return this.$r.forEachInRange([r,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new tn(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class tn{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return fe.comparator(e.key,t.key)||Ae(e.Hr,t.Hr)}static Ur(e,t){return Ae(e.Hr,t.Hr)||fe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new st(tn.Qr)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new B_(l,t,r,a);this.mutationQueue.push(u);for(const f of a)this.Yr=this.Yr.add(new tn(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return G.resolve(u)}lookupMutationBatch(e,t){return G.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Xr(r),l=a<0?0:a;return G.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?Ws:this.er-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new tn(t,0),a=new tn(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([r,a],(u=>{const f=this.Zr(u.Hr);l.push(f)})),G.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new st(Ae);return t.forEach((a=>{const l=new tn(a,0),u=new tn(a,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,u],(f=>{r=r.add(f.Hr)}))})),G.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;fe.isDocumentKey(l)||(l=l.child(""));const u=new tn(new fe(l),0);let f=new st(Ae);return this.Yr.forEachWhile((m=>{const g=m.key.path;return!!r.isPrefixOf(g)&&(g.length===a&&(f=f.add(m.Hr)),!0)}),u),G.resolve(this.ei(f))}ei(e){const t=[];return e.forEach((r=>{const a=this.Zr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Ee(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return G.forEach(t.mutations,(a=>{const l=new tn(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Yr=r}))}rr(e){}containsKey(e,t){const r=new tn(t,0),a=this.Yr.firstAfterOrEqual(r);return G.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e){this.ni=e,this.docs=(function(){return new dt(fe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,u=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return G.resolve(r?r.document.mutableCopy():yt.newInvalidDocument(t))}getEntries(e,t){let r=jn();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():yt.newInvalidDocument(a))})),G.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=jn();const u=t.path,f=new fe(u.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(f);for(;m.hasNext();){const{key:g,value:{document:y}}=m.getNext();if(!u.isPrefixOf(g.path))break;g.path.length>u.length+1||R_($A(y),r)<=0||(a.has(y.key)||bh(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return G.resolve(l)}getAllFromCollectionGroup(e,t,r,a){ge(9500)}ri(e,t){return G.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new JM(this)}getSize(e){return G.resolve(this.size)}}class JM extends yR{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Or.addEntry(e,a)):this.Or.removeEntry(r)})),G.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM{constructor(e){this.persistence=e,this.ii=new qr((t=>uo(t)),Eh),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.si=0,this.oi=new Q_,this.targetCount=0,this._i=po.ar()}forEachTarget(e,t){return this.ii.forEach(((r,a)=>t(a))),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),G.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new po(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.hr(t),G.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.ii.forEach(((u,f)=>{f.sequenceNumber<=t&&r.get(f.targetId)===null&&(this.ii.delete(u),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),G.waitFor(l).next((()=>a))}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return G.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),G.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),G.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),G.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return G.resolve(r)}containsKey(e,t){return G.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,t){this.ai={},this.overlays={},this.ui=new zn(0),this.ci=!1,this.ci=!0,this.li=new XM,this.referenceDelegate=e(this),this.hi=new ZM(this),this.indexManager=new UM,this.remoteDocumentCache=(function(a){return new WM(a)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new aR(t),this.Ti=new QM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $M,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new YM(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){oe("MemoryPersistence","Starting transaction:",e);const a=new e4(this.ui.next());return this.referenceDelegate.Ii(),r(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return G.or(Object.values(this.ai).map((r=>()=>r.containsKey(e,t))))}}class e4 extends YA{constructor(e){super(),this.currentSequenceNumber=e}}class Dm{constructor(e){this.persistence=e,this.Ai=new Q_,this.Ri=null}static Vi(e){return new Dm(e)}get mi(){if(this.Ri)return this.Ri;throw ge(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),G.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),G.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((a=>this.mi.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.mi.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.mi,(r=>{const a=fe.fromPath(r);return this.fi(e,a).next((l=>{l||t.removeEntry(a,be.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return G.or([()=>G.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class em{constructor(e,t){this.persistence=e,this.gi=new qr((r=>Tn(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=gR(this,t)}static Vi(e,t){return new em(e,t)}Ii(){}di(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}yr(e){let t=0;return this.gr(e,(r=>{t++})).next((()=>t))}gr(e,t){return G.forEach(this.gi,((r,a)=>this.Sr(e,r,a).next((l=>l?G.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ri(e,(u=>this.Sr(e,u,t).next((f=>{f||(r++,l.removeEntry(u,be.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),G.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),G.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=xd(e.data.value)),t}Sr(e,t,r){return G.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.gi.get(t);return G.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{constructor(e){this.serializer=e}q(e,t,r,a){const l=new gm("createOrUpgrade",t);r<1&&a>=1&&((function(m){m.createObjectStore(vh)})(e),(function(m){m.createObjectStore(Wc,{keyPath:vP}),m.createObjectStore(wi,{keyPath:eS,autoIncrement:!0}).createIndex(to,tS,{unique:!0}),m.createObjectStore(Ul)})(e),HS(e),(function(m){m.createObjectStore(Xa)})(e));let u=G.resolve();return r<3&&a>=3&&(r!==0&&((function(m){m.deleteObjectStore(Bl),m.deleteObjectStore(zl),m.deleteObjectStore(io)})(e),HS(e)),u=u.next((()=>(function(m){const g=m.store(io),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:be.min().toTimestamp(),targetCount:0};return g.put(Kd,y)})(l)))),r<4&&a>=4&&(r!==0&&(u=u.next((()=>(function(m,g){return g.store(wi).j().next((v=>{m.deleteObjectStore(wi),m.createObjectStore(wi,{keyPath:eS,autoIncrement:!0}).createIndex(to,tS,{unique:!0});const b=g.store(wi),I=v.map((O=>b.put(O)));return G.waitFor(I)}))})(e,l)))),u=u.next((()=>{(function(m){m.createObjectStore(jl,{keyPath:xP})})(e)}))),r<5&&a>=5&&(u=u.next((()=>this.pi(l)))),r<6&&a>=6&&(u=u.next((()=>((function(m){m.createObjectStore(Jc)})(e),this.yi(l))))),r<7&&a>=7&&(u=u.next((()=>this.wi(l)))),r<8&&a>=8&&(u=u.next((()=>this.Si(e,l)))),r<9&&a>=9&&(u=u.next((()=>{(function(m){m.objectStoreNames.contains("remoteDocumentChanges")&&m.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&a>=10&&(u=u.next((()=>this.bi(l)))),r<11&&a>=11&&(u=u.next((()=>{(function(m){m.createObjectStore(ym,{keyPath:CP})})(e),(function(m){m.createObjectStore(_m,{keyPath:DP})})(e)}))),r<12&&a>=12&&(u=u.next((()=>{(function(m){const g=m.createObjectStore(vm,{keyPath:LP});g.createIndex(Ly,UP,{unique:!1}),g.createIndex(rI,zP,{unique:!1})})(e)}))),r<13&&a>=13&&(u=u.next((()=>(function(m){const g=m.createObjectStore(Gd,{keyPath:TP});g.createIndex(Id,bP),g.createIndex(eI,SP)})(e))).next((()=>this.Di(e,l))).next((()=>e.deleteObjectStore(Xa)))),r<14&&a>=14&&(u=u.next((()=>this.Ci(e,l)))),r<15&&a>=15&&(u=u.next((()=>(function(m){m.createObjectStore(D_,{keyPath:NP,autoIncrement:!0}).createIndex(ky,VP,{unique:!1}),m.createObjectStore(zc,{keyPath:OP}).createIndex(nI,PP,{unique:!1}),m.createObjectStore(Bc,{keyPath:MP}).createIndex(iI,kP,{unique:!1})})(e)))),r<16&&a>=16&&(u=u.next((()=>{t.objectStore(zc).clear()})).next((()=>{t.objectStore(Bc).clear()}))),r<17&&a>=17&&(u=u.next((()=>{(function(m){m.createObjectStore(N_,{keyPath:BP})})(e)}))),r<18&&a>=18&&Kw()&&(u=u.next((()=>{t.objectStore(zc).clear()})).next((()=>{t.objectStore(Bc).clear()}))),u}yi(e){let t=0;return e.store(Xa).X(((r,a)=>{t+=Zd(a)})).next((()=>{const r={byteSize:t};return e.store(Jc).put(My,r)}))}pi(e){const t=e.store(Wc),r=e.store(wi);return t.j().next((a=>G.forEach(a,(l=>{const u=IDBKeyRange.bound([l.userId,Ws],[l.userId,l.lastAcknowledgedBatchId]);return r.j(to,u).next((f=>G.forEach(f,(m=>{Ee(m.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:m.batchId});const g=Wa(this.serializer,m);return hR(e,l.userId,g).next((()=>{}))}))))}))))}wi(e){const t=e.store(Bl),r=e.store(Xa);return e.store(io).get(Kd).next((a=>{const l=[];return r.X(((u,f)=>{const m=new Me(u),g=(function(v){return[0,Tn(v)]})(m);l.push(t.get(g).next((y=>y?G.resolve():(v=>t.put({targetId:0,path:Tn(v),sequenceNumber:a.highestListenSequenceNumber}))(m))))})).next((()=>G.waitFor(l)))}))}Si(e,t){e.createObjectStore(Zc,{keyPath:RP});const r=t.store(Zc),a=new K_,l=u=>{if(a.add(u)){const f=u.lastSegment(),m=u.popLast();return r.put({collectionId:f,parent:Tn(m)})}};return t.store(Xa).X({Z:!0},((u,f)=>{const m=new Me(u);return l(m.popLast())})).next((()=>t.store(Ul).X({Z:!0},(([u,f,m],g)=>{const y=Gi(f);return l(y.popLast())}))))}bi(e){const t=e.store(zl);return t.X(((r,a)=>{const l=Pc(a),u=oR(this.serializer,l);return t.put(u)}))}Di(e,t){const r=t.store(Xa),a=[];return r.X(((l,u)=>{const f=t.store(Gd),m=(function(v){return v.document?new fe(Me.fromString(v.document.name).popFirst(5)):v.noDocument?fe.fromSegments(v.noDocument.path):v.unknownDocument?fe.fromSegments(v.unknownDocument.path):ge(36783)})(u).path.toArray(),g={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};a.push(f.put(g))})).next((()=>G.waitFor(a)))}Ci(e,t){const r=t.store(wi),a=_R(this.serializer),l=new $_(Dm.Vi,this.serializer.gt);return r.j().next((u=>{const f=new Map;return u.forEach((m=>{var g;let y=(g=f.get(m.userId))!==null&&g!==void 0?g:De();Wa(this.serializer,m).keys().forEach((v=>y=y.add(v))),f.set(m.userId,y)})),G.forEach(f,((m,g)=>{const y=new nn(g),v=xm.yt(this.serializer,y),b=l.getIndexManager(y),I=Cm.yt(y,this.serializer,b,l.referenceDelegate);return new vR(a,I,v,b).recalculateAndSaveOverlaysForDocumentKeys(new Uy(t,zn.ue),m).next()}))}))}}function HS(i){i.createObjectStore(Bl,{keyPath:AP}).createIndex(C_,IP,{unique:!0}),i.createObjectStore(zl,{keyPath:"targetId"}).createIndex(tI,wP,{unique:!0}),i.createObjectStore(io)}const Us="IndexedDbPersistence",ly=18e5,uy=5e3,cy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ER="main";class X_{constructor(e,t,r,a,l,u,f,m,g,y,v=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Fi=l,this.window=u,this.document=f,this.Mi=g,this.xi=y,this.Oi=v,this.ui=null,this.ci=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ni=null,this.inForeground=!1,this.Bi=null,this.Li=null,this.ki=Number.NEGATIVE_INFINITY,this.qi=b=>Promise.resolve(),!X_.C())throw new se(W.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new qM(this,a),this.Qi=t+ER,this.serializer=new aR(m),this.$i=new Xi(this.Qi,this.Oi,new t4(this.serializer)),this.li=new VM,this.hi=new BM(this.referenceDelegate,this.serializer),this.remoteDocumentCache=_R(this.serializer),this.Ti=new NM,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,y===!1&&Mt(Us,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ki().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new se(W.FAILED_PRECONDITION,cy);return this.Wi(),this.Gi(),this.zi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.hi.getHighestSequenceNumber(e)))})).then((e=>{this.ui=new zn(e,this.Mi)})).then((()=>{this.ci=!0})).catch((e=>(this.$i&&this.$i.close(),Promise.reject(e))))}ji(e){return this.qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.$i.setDatabaseDeletedListener(e)}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Fi.enqueueAndForget((async()=>{this.started&&await this.Ki()})))}Ki(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>pd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Ji(e).next((t=>{t||(this.isPrimary=!1,this.Fi.enqueueRetryable((()=>this.qi(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Yi(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(ua(e))return oe(Us,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return oe(Us,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Fi.enqueueRetryable((()=>this.qi(e))),this.isPrimary=e}))}Ji(e){return xc(e).get(gl).next((t=>G.resolve(this.Xi(t))))}es(e){return pd(e).delete(this.clientId)}async ts(){if(this.isPrimary&&!this.ns(this.ki,ly)){this.ki=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=Xt(t,jl);return r.j().next((a=>{const l=this.rs(a,ly),u=a.filter((f=>l.indexOf(f)===-1));return G.forEach(u,(f=>r.delete(f.clientId))).next((()=>u))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.ss(t.clientId))}}zi(){this.Li=this.Fi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ki().then((()=>this.ts())).then((()=>this.zi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.xi?G.resolve(!0):xc(e).get(gl).next((t=>{if(t!==null&&this.ns(t.leaseTimestampMs,uy)&&!this._s(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new se(W.FAILED_PRECONDITION,cy);return!1}}return!(!this.networkEnabled||!this.inForeground)||pd(e).j().next((r=>this.rs(r,uy).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,u=!this.inForeground&&a.inForeground,f=this.networkEnabled===a.networkEnabled;if(l||u&&f)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&oe(Us,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ci=!1,this.us(),this.Li&&(this.Li.cancel(),this.Li=null),this.cs(),this.ls(),await this.$i.runTransaction("shutdown","readwrite",[vh,jl],(e=>{const t=new Uy(e,zn.ue);return this.Yi(t).next((()=>this.es(t)))})),this.$i.close(),this.hs()}rs(e,t){return e.filter((r=>this.ns(r.updateTimeMs,t)&&!this._s(r.clientId)))}Ps(){return this.runTransaction("getActiveClients","readonly",(e=>pd(e).j().next((t=>this.rs(t,ly).map((r=>r.clientId))))))}get started(){return this.ci}getGlobalsCache(){return this.li}getMutationQueue(e,t){return Cm.yt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new zM(e,this.serializer.gt.databaseId)}getDocumentOverlayCache(e){return xm.yt(this.serializer,e)}getBundleCache(){return this.Ti}runTransaction(e,t,r){oe(Us,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(m){return m===18?qP:m===17?lI:m===16?FP:m===15?V_:m===14?oI:m===13?aI:m===12?jP:m===11?sI:void ge(60245)})(this.Oi);let u;return this.$i.runTransaction(e,a,l,(f=>(u=new Uy(f,this.ui?this.ui.next():zn.ue),t==="readwrite-primary"?this.Ji(u).next((m=>!!m||this.Hi(u))).next((m=>{if(!m)throw Mt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Fi.enqueueRetryable((()=>this.qi(!1))),new se(W.FAILED_PRECONDITION,XA);return r(u)})).next((m=>this.Zi(u).next((()=>m)))):this.Ts(u).next((()=>r(u)))))).then((f=>(u.raiseOnCommittedEvent(),f)))}Ts(e){return xc(e).get(gl).next((t=>{if(t!==null&&this.ns(t.leaseTimestampMs,uy)&&!this._s(t.ownerId)&&!this.Xi(t)&&!(this.xi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new se(W.FAILED_PRECONDITION,cy)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xc(e).put(gl,t)}static C(){return Xi.C()}Yi(e){const t=xc(e);return t.get(gl).next((r=>this.Xi(r)?(oe(Us,"Releasing primary lease."),t.delete(gl)):G.resolve()))}ns(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(Mt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Bi=()=>{this.Fi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Ki())))},this.document.addEventListener("visibilitychange",this.Bi),this.inForeground=this.document.visibilityState==="visible")}cs(){this.Bi&&(this.document.removeEventListener("visibilitychange",this.Bi),this.Bi=null)}Gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ni=()=>{this.us();const t=/(?:Version|Mobile)\/1[456]/;Gw()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Fi.enterRestrictedMode(!0),this.Fi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Ni))}ls(){this.Ni&&(this.window.removeEventListener("pagehide",this.Ni),this.Ni=null)}_s(e){var t;try{const r=((t=this.Ui)===null||t===void 0?void 0:t.getItem(this.ss(e)))!==null;return oe(Us,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Mt(Us,"Failed to get zombied client id.",r),!1}}us(){if(this.Ui)try{this.Ui.setItem(this.ss(this.clientId),String(Date.now()))}catch(e){Mt("Failed to set zombie client id.",e)}}hs(){if(this.Ui)try{this.Ui.removeItem(this.ss(this.clientId))}catch{}}ss(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function xc(i){return Xt(i,vh)}function pd(i){return Xt(i,jl)}function Y_(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=a}static Es(e,t){let r=De(),a=De();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new W_(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return Gw()?8:WA(Qt())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.ps(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ys(e,t,a,r).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new n4;return this.ws(e,t,u).next((f=>{if(l.result=f,this.Rs)return this.Ss(e,t,u,f.size)}))})).next((()=>l.result))}Ss(e,t,r,a){return r.documentReadCount<this.Vs?(bl()<=je.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",Sl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),G.resolve()):(bl()<=je.DEBUG&&oe("QueryEngine","Query:",Sl(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.fs*a?(bl()<=je.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",Sl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bn(t))):G.resolve())}ps(e,t){if(mS(t))return G.resolve(null);let r=bn(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=Xd(t,null,"F"),r=bn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const u=De(...l);return this.gs.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,r).next((m=>{const g=this.bs(t,f);return this.Ds(t,g,u,m.readTime)?this.ps(e,Xd(t,null,"F")):this.vs(e,g,t,m)}))))})))))}ys(e,t,r,a){return mS(t)||a.isEqual(be.min())?G.resolve(null):this.gs.getDocuments(e,r).next((l=>{const u=this.bs(t,l);return this.Ds(t,u,r,a)?G.resolve(null):(bl()<=je.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),Sl(t)),this.vs(e,u,t,QA(a,Ml)).next((f=>f)))}))}bs(e,t){let r=new st(VI(e));return t.forEach(((a,l)=>{bh(e,l)&&(r=r.add(l))})),r}Ds(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ws(e,t,r){return bl()<=je.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",Sl(t)),this.gs.getDocumentsMatchingQuery(e,t,ei.min(),r)}vs(e,t,r,a){return this.gs.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="LocalStore",i4=3e8;class r4{constructor(e,t,r,a){this.persistence=e,this.Cs=t,this.serializer=a,this.Fs=new dt(Ae),this.Ms=new qr((l=>uo(l)),Eh),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new vR(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function bR(i,e,t,r){return new r4(i,e,t,r)}async function SR(i,e){const t=de(i);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const u=[],f=[];let m=De();for(const g of a){u.push(g.batchId);for(const y of g.mutations)m=m.add(y.key)}for(const g of l){f.push(g.batchId);for(const y of g.mutations)m=m.add(y.key)}return t.localDocuments.getDocuments(r,m).next((g=>({Bs:g,removedBatchIds:u,addedBatchIds:f})))}))}))}function s4(i,e){const t=de(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(f,m,g,y){const v=g.batch,b=v.keys();let I=G.resolve();return b.forEach((O=>{I=I.next((()=>y.getEntry(m,O))).next((M=>{const V=g.docVersions.get(O);Ee(V!==null,48541),M.version.compareTo(V)<0&&(v.applyToRemoteDocument(M,g),M.isValidDocument()&&(M.setReadTime(g.commitVersion),y.addEntry(M)))}))})),I.next((()=>f.mutationQueue.removeMutationBatch(m,v)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(f){let m=De();for(let g=0;g<f.mutationResults.length;++g)f.mutationResults[g].transformResults.length>0&&(m=m.add(f.batch.mutations[g].key));return m})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function wR(i){const e=de(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function a4(i,e){const t=de(i),r=e.snapshotVersion;let a=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Os.newChangeBuffer({trackRemovals:!0});a=t.Fs;const f=[];e.targetChanges.forEach(((y,v)=>{const b=a.get(v);if(!b)return;f.push(t.hi.removeMatchingKeys(l,y.removedDocuments,v).next((()=>t.hi.addMatchingKeys(l,y.addedDocuments,v))));let I=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(v)!==null?I=I.withResumeToken(It.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):y.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(y.resumeToken,r)),a=a.insert(v,I),(function(M,V,$){return M.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=i4?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(b,I,y)&&f.push(t.hi.updateTargetData(l,I))}));let m=jn(),g=De();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))})),f.push(AR(l,u,e.documentUpdates).next((y=>{m=y.Ls,g=y.ks}))),!r.isEqual(be.min())){const y=t.hi.getLastRemoteSnapshotVersion(l).next((v=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,r)));f.push(y)}return G.waitFor(f).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,m,g))).next((()=>m))})).then((l=>(t.Fs=a,l)))}function AR(i,e,t){let r=De(),a=De();return t.forEach((l=>r=r.add(l))),e.getEntries(i,r).next((l=>{let u=jn();return t.forEach(((f,m)=>{const g=l.get(f);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(f)),m.isNoDocument()&&m.version.isEqual(be.min())?(e.removeEntry(f,m.readTime),u=u.insert(f,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),u=u.insert(f,m)):oe(J_,"Ignoring outdated watch update for ",f,". Current version:",g.version," Watch version:",m.version)})),{Ls:u,ks:a}}))}function o4(i,e){const t=de(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=Ws),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function $l(i,e){const t=de(i);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.hi.getTargetData(r,e).next((l=>l?(a=l,G.resolve(a)):t.hi.allocateTargetId(r).next((u=>(a=new xr(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.Fs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r}))}async function Xl(i,e,t){const r=de(i),a=r.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(u=>r.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!ua(u))throw u;oe(J_,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(a.target)}function tm(i,e,t){const r=de(i);let a=be.min(),l=De();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(m,g,y){const v=de(m),b=v.Ms.get(y);return b!==void 0?G.resolve(v.Fs.get(b)):v.hi.getTargetData(g,y)})(r,u,bn(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(u,f.targetId).next((m=>{l=m}))})).next((()=>r.Cs.getDocumentsMatchingQuery(u,e,t?a:be.min(),t?l:De()))).next((f=>(xR(r,NI(e),f),{documents:f,qs:l})))))}function IR(i,e){const t=de(i),r=de(t.hi),a=t.Fs.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(l=>r.Et(l,e).next((u=>u?u.target:null))))}function RR(i,e){const t=de(i),r=t.xs.get(e)||be.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.Os.getAllFromCollectionGroup(a,e,QA(r,Ml),Number.MAX_SAFE_INTEGER))).then((a=>(xR(t,e,a),a)))}function xR(i,e,t){let r=i.xs.get(e)||be.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),i.xs.set(e,r)}async function l4(i,e,t,r){const a=de(i);let l=De(),u=jn();for(const g of t){const y=e.Qs(g.metadata.name);g.document&&(l=l.add(y));const v=e.$s(g);v.setReadTime(e.Us(g.metadata.readTime)),u=u.insert(y,v)}const f=a.Os.newChangeBuffer({trackRemovals:!0}),m=await $l(a,(function(y){return bn(uu(Me.fromString(`__bundle__/docs/${y}`)))})(r));return a.persistence.runTransaction("Apply bundle documents","readwrite",(g=>AR(g,f,u).next((y=>(f.apply(g),y))).next((y=>a.hi.removeMatchingKeysForTargetId(g,m.targetId).next((()=>a.hi.addMatchingKeys(g,l,m.targetId))).next((()=>a.localDocuments.getLocalViewOfDocuments(g,y.Ls,y.ks))).next((()=>y.Ls))))))}async function u4(i,e,t=De()){const r=await $l(i,bn(Rm(e.bundledQuery))),a=de(i);return a.persistence.runTransaction("Save named query","readwrite",(l=>{const u=kt(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return a.Ti.saveNamedQuery(l,e);const f=r.withResumeToken(It.EMPTY_BYTE_STRING,u);return a.Fs=a.Fs.insert(f.targetId,f),a.hi.updateTargetData(l,f).next((()=>a.hi.removeMatchingKeysForTargetId(l,r.targetId))).next((()=>a.hi.addMatchingKeys(l,t,r.targetId))).next((()=>a.Ti.saveNamedQuery(l,e)))}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CR="firestore_clients";function GS(i,e){return`${CR}_${i}_${e}`}const DR="firestore_mutations";function KS(i,e,t){let r=`${DR}_${i}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const NR="firestore_targets";function hy(i,e){return`${NR}_${i}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hi="SharedClientState";class nm{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static Ks(e,t,r){const a=JSON.parse(r);let l,u=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return u&&a.error&&(u=typeof a.error.message=="string"&&typeof a.error.code=="string",u&&(l=new se(a.error.code,a.error.message))),u?new nm(e,t,a.state,l):(Mt(Hi,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Hc{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ks(e,t){const r=JSON.parse(t);let a,l=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(a=new se(r.error.code,r.error.message))),l?new Hc(e,r.state,a):(Mt(Hi,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class im{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ks(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,l=L_();for(let u=0;a&&u<r.activeTargetIds.length;++u)a=JA(r.activeTargetIds[u]),l=l.add(r.activeTargetIds[u]);return a?new im(e,l):(Mt(Hi,`Failed to parse client data for instance '${e}': ${t}`),null)}}class Z_{constructor(e,t){this.clientId=e,this.onlineState=t}static Ks(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new Z_(t.clientId,t.onlineState):(Mt(Hi,`Failed to parse online state: ${e}`),null)}}class Jy{constructor(){this.activeTargetIds=L_()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class fy{constructor(e,t,r,a,l){this.window=e,this.Fi=t,this.persistenceKey=r,this.js=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Js=this.Hs.bind(this),this.Ys=new dt(Ae),this.started=!1,this.Zs=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Xs=GS(this.persistenceKey,this.js),this.eo=(function(m){return`firestore_sequence_number_${m}`})(this.persistenceKey),this.Ys=this.Ys.insert(this.js,new Jy),this.no=new RegExp(`^${CR}_${u}_([^_]*)$`),this.ro=new RegExp(`^${DR}_${u}_(\\d+)(?:_(.*))?$`),this.io=new RegExp(`^${NR}_${u}_(\\d+)$`),this.so=(function(m){return`firestore_online_state_${m}`})(this.persistenceKey),this.oo=(function(m){return`firestore_bundle_loaded_v2_${m}`})(this.persistenceKey),this.window.addEventListener("storage",this.Js)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ps();for(const r of e){if(r===this.js)continue;const a=this.getItem(GS(this.persistenceKey,r));if(a){const l=im.Ks(r,a);l&&(this.Ys=this.Ys.insert(l.clientId,l))}}this._o();const t=this.storage.getItem(this.so);if(t){const r=this.ao(t);r&&this.uo(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.eo,JSON.stringify(e))}getAllActiveQueryTargets(){return this.co(this.Ys)}isActiveQueryTarget(e){let t=!1;return this.Ys.forEach(((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.lo(e,"pending")}updateMutationState(e,t,r){this.lo(e,t,r),this.ho(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(hy(this.persistenceKey,e));if(a){const l=Hc.Ks(e,a);l&&(r=l.state)}}return t&&this.Po.Gs(e),this._o(),r}removeLocalQueryTarget(e){this.Po.zs(e),this._o()}isLocalQueryTarget(e){return this.Po.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(hy(this.persistenceKey,e))}updateQueryState(e,t,r){this.To(e,t,r)}handleUserChange(e,t,r){t.forEach((a=>{this.ho(a)})),this.currentUser=e,r.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.Io(e)}notifyBundleLoaded(e){this.Eo(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return oe(Hi,"READ",e,t),t}setItem(e,t){oe(Hi,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){oe(Hi,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(oe(Hi,"EVENT",t.key,t.newValue),t.key===this.Xs)return void Mt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.no.test(t.key)){if(t.newValue==null){const r=this.Ao(t.key);return this.Ro(r,null)}{const r=this.Vo(t.key,t.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const r=this.mo(t.key,t.newValue);if(r)return this.fo(r)}}else if(this.io.test(t.key)){if(t.newValue!==null){const r=this.po(t.key,t.newValue);if(r)return this.yo(r)}}else if(t.key===this.so){if(t.newValue!==null){const r=this.ao(t.newValue);if(r)return this.uo(r)}}else if(t.key===this.eo){const r=(function(l){let u=zn.ue;if(l!=null)try{const f=JSON.parse(l);Ee(typeof f=="number",30636,{wo:l}),u=f}catch(f){Mt(Hi,"Failed to read sequence number from WebStorage",f)}return u})(t.newValue);r!==zn.ue&&this.sequenceNumberHandler(r)}else if(t.key===this.oo){const r=this.So(t.newValue);await Promise.all(r.map((a=>this.syncEngine.bo(a))))}}}else this.Zs.push(t)}))}}get Po(){return this.Ys.get(this.js)}_o(){this.setItem(this.Xs,this.Po.Ws())}lo(e,t,r){const a=new nm(this.currentUser,e,t,r),l=KS(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Ws())}ho(e){const t=KS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Io(e){const t={clientId:this.js,onlineState:e};this.storage.setItem(this.so,JSON.stringify(t))}To(e,t,r){const a=hy(this.persistenceKey,e),l=new Hc(e,t,r);this.setItem(a,l.Ws())}Eo(e){const t=JSON.stringify(Array.from(e));this.setItem(this.oo,t)}Ao(e){const t=this.no.exec(e);return t?t[1]:null}Vo(e,t){const r=this.Ao(e);return im.Ks(r,t)}mo(e,t){const r=this.ro.exec(e),a=Number(r[1]),l=r[2]!==void 0?r[2]:null;return nm.Ks(new nn(l),a,t)}po(e,t){const r=this.io.exec(e),a=Number(r[1]);return Hc.Ks(a,t)}ao(e){return Z_.Ks(e)}So(e){return JSON.parse(e)}async fo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Do(e.batchId,e.state,e.error);oe(Hi,`Ignoring mutation for non-active user ${e.user.uid}`)}yo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Ro(e,t){const r=t?this.Ys.insert(e,t):this.Ys.remove(e),a=this.co(this.Ys),l=this.co(r),u=[],f=[];return l.forEach((m=>{a.has(m)||u.push(m)})),a.forEach((m=>{l.has(m)||f.push(m)})),this.syncEngine.Co(u,f).then((()=>{this.Ys=r}))}uo(e){this.Ys.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}co(e){let t=L_();return e.forEach(((r,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class VR{constructor(){this.Fo=new Jy,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Jy,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS="ConnectivityMonitor";class $S{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){oe(QS,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){oe(QS,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gd=null;function Zy(){return gd===null?gd=(function(){return 268435456+Math.round(2147483648*Math.random())})():gd++,"0x"+gd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dy="RestConnection",h4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class f4{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${a}`,this.Ko=this.databaseId.database===th?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Wo(e,t,r,a,l){const u=Zy(),f=this.Go(e,t.toUriEncodedString());oe(dy,`Sending RPC '${e}' ${u}:`,f,r);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(m,a,l);const{host:g}=new URL(f),y=vo(g);return this.jo(e,f,m,r,y).then((v=>(oe(dy,`Received RPC '${e}' ${u}: `,v),v)),(v=>{throw Sn(dy,`RPC '${e}' ${u} failed with error: `,v,"url: ",f,"request:",r),v}))}Jo(e,t,r,a,l,u){return this.Wo(e,t,r,a,l)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+lu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}Go(e,t){const r=h4[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vn="WebChannelConnection";class m4 extends f4{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,a,l){const u=Zy();return new Promise(((f,m)=>{const g=new MA;g.setWithCredentials(!0),g.listenOnce(kA.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case wd.NO_ERROR:const v=g.getResponseJson();oe(vn,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(v)),f(v);break;case wd.TIMEOUT:oe(vn,`RPC '${e}' ${u} timed out`),m(new se(W.DEADLINE_EXCEEDED,"Request time out"));break;case wd.HTTP_ERROR:const b=g.getStatus();if(oe(vn,`RPC '${e}' ${u} failed with status:`,b,"response text:",g.getResponseText()),b>0){let I=g.getResponseJson();Array.isArray(I)&&(I=I[0]);const O=I==null?void 0:I.error;if(O&&O.status&&O.message){const M=(function($){const H=$.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf(H)>=0?H:W.UNKNOWN})(O.status);m(new se(M,O.message))}else m(new se(W.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new se(W.UNAVAILABLE,"Connection failed."));break;default:ge(9055,{c_:e,streamId:u,l_:g.getLastErrorCode(),h_:g.getLastError()})}}finally{oe(vn,`RPC '${e}' ${u} completed.`)}}));const y=JSON.stringify(a);oe(vn,`RPC '${e}' ${u} sending request:`,a),g.send(t,"POST",y,r,15)}))}P_(e,t,r){const a=Zy(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=zA(),f=UA(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.zo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const y=l.join("");oe(vn,`Creating RPC '${e}' stream ${a}: ${y}`,m);const v=u.createWebChannel(y,m);this.T_(v);let b=!1,I=!1;const O=new d4({Ho:V=>{I?oe(vn,`Not sending because RPC '${e}' stream ${a} is closed:`,V):(b||(oe(vn,`Opening RPC '${e}' stream ${a} transport.`),v.open(),b=!0),oe(vn,`RPC '${e}' stream ${a} sending:`,V),v.send(V))},Yo:()=>v.close()}),M=(V,$,H)=>{V.listen($,(Q=>{try{H(Q)}catch(ue){setTimeout((()=>{throw ue}),0)}}))};return M(v,Nc.EventType.OPEN,(()=>{I||(oe(vn,`RPC '${e}' stream ${a} transport opened.`),O.s_())})),M(v,Nc.EventType.CLOSE,(()=>{I||(I=!0,oe(vn,`RPC '${e}' stream ${a} transport closed`),O.__(),this.I_(v))})),M(v,Nc.EventType.ERROR,(V=>{I||(I=!0,Sn(vn,`RPC '${e}' stream ${a} transport errored. Name:`,V.name,"Message:",V.message),O.__(new se(W.UNAVAILABLE,"The operation could not be completed")))})),M(v,Nc.EventType.MESSAGE,(V=>{var $;if(!I){const H=V.data[0];Ee(!!H,16349);const Q=H,ue=(Q==null?void 0:Q.error)||(($=Q[0])===null||$===void 0?void 0:$.error);if(ue){oe(vn,`RPC '${e}' stream ${a} received error:`,ue);const ye=ue.status;let pe=(function(D){const U=Ft[D];if(U!==void 0)return KI(U)})(ye),x=ue.message;pe===void 0&&(pe=W.INTERNAL,x="Unknown error status: "+ye+" with message "+ue.message),I=!0,O.__(new se(pe,x)),v.close()}else oe(vn,`RPC '${e}' stream ${a} received:`,H),O.a_(H)}})),M(f,LA.STAT_EVENT,(V=>{V.stat===Dy.PROXY?oe(vn,`RPC '${e}' stream ${a} detected buffering proxy`):V.stat===Dy.NOPROXY&&oe(vn,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{O.o_()}),0),O}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(){return typeof window<"u"?window:null}function Od(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bo(i){return new EM(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=a,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),a=Math.max(0,t-r);a>0&&oe("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS="PersistentStream";class PR{constructor(e,t,r,a,l,u,f,m){this.Fi=e,this.w_=r,this.S_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=m,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new ev(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(Mt(t.toString()),Mt("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.b_===t&&this.W_(r,a)}),(r=>{e((()=>{const a=new se(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(a)}))}))}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((a=>{r((()=>this.G_(a)))})),this.stream.onMessage((a=>{r((()=>++this.C_==1?this.j_(a):this.onNext(a)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return oe(XS,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(oe(XS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class p4 extends PR{constructor(e,t,r,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,u),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=SM(this.serializer,e),r=(function(l){if(!("targetChange"in l))return be.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?be.min():u.readTime?kt(u.readTime):be.min()})(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=Qy(this.serializer),t.addTarget=(function(l,u){let f;const m=u.target;if(f=Qd(m)?{documents:eR(l,m)}:{query:Im(l,m).Vt},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=XI(l,u.resumeToken);const g=Gy(l,u.expectedCount);g!==null&&(f.expectedCount=g)}else if(u.snapshotVersion.compareTo(be.min())>0){f.readTime=Ql(l,u.snapshotVersion.toTimestamp());const g=Gy(l,u.expectedCount);g!==null&&(f.expectedCount=g)}return f})(this.serializer,e);const r=AM(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=Qy(this.serializer),t.removeTarget=e,this.k_(t)}}class g4 extends PR{constructor(e,t,r,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,u),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Ee(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Ee(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=wM(e.writeResults,e.commitTime),r=kt(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=Qy(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>ah(this.serializer,r)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{}class _4 extends y4{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ra=!1}ia(){if(this.ra)throw new se(W.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Wo(e,Ky(t,r),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new se(W.UNKNOWN,l.toString())}))}Jo(e,t,r,a,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Jo(e,Ky(t,r),a,u,f,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new se(W.UNKNOWN,u.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class v4{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(Mt(t),this._a=!1):oe("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go="RemoteStore";class E4{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((u=>{r.enqueueAndForget((async()=>{ha(this)&&(oe(go,"Restarting streams for network reachability change."),await(async function(m){const g=de(m);g.Ia.add(4),await fu(g),g.Aa.set("Unknown"),g.Ia.delete(4),await Ih(g)})(this))}))})),this.Aa=new v4(r,a)}}async function Ih(i){if(ha(i))for(const e of i.da)await e(!0)}async function fu(i){for(const e of i.da)await e(!1)}function Nm(i,e){const t=de(i);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),iv(t)?nv(t):mu(t).x_()&&tv(t,e))}function Yl(i,e){const t=de(i),r=mu(t);t.Ta.delete(e),r.x_()&&MR(t,e),t.Ta.size===0&&(r.x_()?r.B_():ha(t)&&t.Aa.set("Unknown"))}function tv(i,e){if(i.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}mu(i).H_(e)}function MR(i,e){i.Ra.$e(e),mu(i).Y_(e)}function nv(i){i.Ra=new gM({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.Ta.get(e)||null,lt:()=>i.datastore.serializer.databaseId}),mu(i).start(),i.Aa.aa()}function iv(i){return ha(i)&&!mu(i).M_()&&i.Ta.size>0}function ha(i){return de(i).Ia.size===0}function kR(i){i.Ra=void 0}async function T4(i){i.Aa.set("Online")}async function b4(i){i.Ta.forEach(((e,t)=>{tv(i,e)}))}async function S4(i,e){kR(i),iv(i)?(i.Aa.la(e),nv(i)):i.Aa.set("Unknown")}async function w4(i,e,t){if(i.Aa.set("Online"),e instanceof $I&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const f of l.targetIds)a.Ta.has(f)&&(await a.remoteSyncer.rejectListen(f,u),a.Ta.delete(f),a.Ra.removeTarget(f))})(i,e)}catch(r){oe(go,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await rm(i,r)}else if(e instanceof Nd?i.Ra.Ye(e):e instanceof QI?i.Ra.it(e):i.Ra.et(e),!t.isEqual(be.min()))try{const r=await wR(i.localStore);t.compareTo(r)>=0&&await(function(l,u){const f=l.Ra.Pt(u);return f.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const y=l.Ta.get(g);y&&l.Ta.set(g,y.withResumeToken(m.resumeToken,u))}})),f.targetMismatches.forEach(((m,g)=>{const y=l.Ta.get(m);if(!y)return;l.Ta.set(m,y.withResumeToken(It.EMPTY_BYTE_STRING,y.snapshotVersion)),MR(l,m);const v=new xr(y.target,m,g,y.sequenceNumber);tv(l,v)})),l.remoteSyncer.applyRemoteEvent(f)})(i,t)}catch(r){oe(go,"Failed to raise snapshot:",r),await rm(i,r)}}async function rm(i,e,t){if(!ua(e))throw e;i.Ia.add(1),await fu(i),i.Aa.set("Offline"),t||(t=()=>wR(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{oe(go,"Retrying IndexedDB access"),await t(),i.Ia.delete(1),await Ih(i)}))}function LR(i,e){return e().catch((t=>rm(i,t,e)))}async function du(i){const e=de(i),t=ia(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:Ws;for(;A4(e);)try{const a=await o4(e.localStore,r);if(a===null){e.Pa.length===0&&t.B_();break}r=a.batchId,I4(e,a)}catch(a){await rm(e,a)}UR(e)&&zR(e)}function A4(i){return ha(i)&&i.Pa.length<10}function I4(i,e){i.Pa.push(e);const t=ia(i);t.x_()&&t.Z_&&t.X_(e.mutations)}function UR(i){return ha(i)&&!ia(i).M_()&&i.Pa.length>0}function zR(i){ia(i).start()}async function R4(i){ia(i).na()}async function x4(i){const e=ia(i);for(const t of i.Pa)e.X_(t.mutations)}async function C4(i,e,t){const r=i.Pa.shift(),a=j_.from(r,e,t);await LR(i,(()=>i.remoteSyncer.applySuccessfulWrite(a))),await du(i)}async function D4(i,e){e&&ia(i).Z_&&await(async function(r,a){if((function(u){return GI(u)&&u!==W.ABORTED})(a.code)){const l=r.Pa.shift();ia(r).N_(),await LR(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await du(r)}})(i,e),UR(i)&&zR(i)}async function YS(i,e){const t=de(i);t.asyncQueue.verifyOperationInProgress(),oe(go,"RemoteStore received new credentials");const r=ha(t);t.Ia.add(3),await fu(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Ih(t)}async function e_(i,e){const t=de(i);e?(t.Ia.delete(2),await Ih(t)):e||(t.Ia.add(2),await fu(t),t.Aa.set("Unknown"))}function mu(i){return i.Va||(i.Va=(function(t,r,a){const l=de(t);return l.ia(),new p4(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(i.datastore,i.asyncQueue,{Zo:T4.bind(null,i),e_:b4.bind(null,i),n_:S4.bind(null,i),J_:w4.bind(null,i)}),i.da.push((async e=>{e?(i.Va.N_(),iv(i)?nv(i):i.Aa.set("Unknown")):(await i.Va.stop(),kR(i))}))),i.Va}function ia(i){return i.ma||(i.ma=(function(t,r,a){const l=de(t);return l.ia(),new g4(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),e_:R4.bind(null,i),n_:D4.bind(null,i),ea:x4.bind(null,i),ta:C4.bind(null,i)}),i.da.push((async e=>{e?(i.ma.N_(),await du(i)):(await i.ma.stop(),i.Pa.length>0&&(oe(go,`Stopping write stream with ${i.Pa.length} pending writes`),i.Pa=[]))}))),i.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new rn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const u=Date.now()+r,f=new rv(e,t,u,a,l);return f.start(r),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new se(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function pu(i,e){if(Mt("AsyncQueue",`${e}: ${i}`),ua(i))return new se(W.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{static emptySet(e){return new ro(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||fe.comparator(t.key,r.key):(t,r)=>fe.comparator(t.key,r.key),this.keyedMap=Vc(),this.sortedSet=new dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ro)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new ro;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(){this.fa=new dt(fe.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):ge(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,r)=>{e.push(r)})),e}}class yo{constructor(e,t,r,a,l,u,f,m,g){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,t,r,a,l){const u=[];return t.forEach((f=>{u.push({type:0,doc:f})})),new yo(e,t,ro.emptySet(t),u,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Th(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class V4{constructor(){this.queries=JS(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const a=de(t),l=a.queries;a.queries=JS(),l.forEach(((u,f)=>{for(const m of f.wa)m.onError(r)}))})(this,new se(W.ABORTED,"Firestore shutting down"))}}function JS(){return new qr((i=>DI(i)),Th)}async function sv(i,e){const t=de(i);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.ba()&&(r=2):(l=new N4,r=e.ba()?0:1);try{switch(r){case 0:l.ya=await t.onListen(a,!0);break;case 1:l.ya=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const f=pu(u,`Initialization of query '${Sl(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&ov(t)}async function av(i,e){const t=de(i),r=e.query;let a=3;const l=t.queries.get(r);if(l){const u=l.wa.indexOf(e);u>=0&&(l.wa.splice(u,1),l.wa.length===0?a=e.ba()?0:1:!l.Sa()&&e.ba()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function O4(i,e){const t=de(i);let r=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const f of u.wa)f.Ca(a)&&(r=!0);u.ya=a}}r&&ov(t)}function P4(i,e,t){const r=de(i),a=r.queries.get(e);if(a)for(const l of a.wa)l.onError(t);r.queries.delete(e)}function ov(i){i.Da.forEach((e=>{e.next()}))}var t_,ZS;(ZS=t_||(t_={})).Fa="default",ZS.Cache="cache";class lv{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new yo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=yo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==t_.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e,t){this.qa=e,this.byteLength=t}Qa(){return"metadata"in this.qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e){this.serializer=e}Qs(e){return Yi(this.serializer,e)}$s(e){return e.metadata.exists?Am(this.serializer,e.document,!1):yt.newNoDocument(this.Qs(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return kt(e)}}class uv{constructor(e,t){this.$a=e,this.serializer=t,this.Ua=[],this.Ka=[],this.collectionGroups=new Set,this.progress=jR(e)}get queries(){return this.Ua}get documents(){return this.Ka}Wa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Ua.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Ka.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++t;const r=Me.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.qa.document&&(this.Ka[this.Ka.length-1].document=e.qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ga(e){const t=new Map,r=new ew(this.serializer);for(const a of e)if(a.metadata.queries){const l=r.Qs(a.metadata.name);for(const u of a.metadata.queries){const f=(t.get(u)||De()).add(l);t.set(u,f)}}return t}async za(e){const t=await l4(e,new ew(this.serializer),this.Ka,this.$a.id),r=this.Ga(this.documents);for(const a of this.Ua)await u4(e,a,r.get(a.name));return this.progress.taskState="Success",{progress:this.progress,ja:this.collectionGroups,Ja:t}}}function jR(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e){this.key=e}}class qR{constructor(e){this.key=e}}class HR{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=De(),this.mutatedKeys=De(),this.Xa=VI(e),this.eu=new ro(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new WS,a=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,f=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((y,v)=>{const b=a.get(y),I=bh(this.query,v)?v:null,O=!!b&&this.mutatedKeys.has(b.key),M=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let V=!1;b&&I?b.data.isEqual(I.data)?O!==M&&(r.track({type:3,doc:I}),V=!0):this.iu(b,I)||(r.track({type:2,doc:I}),V=!0,(m&&this.Xa(I,m)>0||g&&this.Xa(I,g)<0)&&(f=!0)):!b&&I?(r.track({type:0,doc:I}),V=!0):b&&!I&&(r.track({type:1,doc:b}),V=!0,(m||g)&&(f=!0)),V&&(I?(u=u.add(I),l=M?l.add(y):l.delete(y)):(u=u.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),l=l.delete(y.key),r.track({type:1,doc:y})}return{eu:u,ru:r,Ds:f,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort(((y,v)=>(function(I,O){const M=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ge(20277,{At:V})}};return M(I)-M(O)})(y.type,v.type)||this.Xa(y.doc,v.doc))),this.su(r),a=a!=null&&a;const f=t&&!a?this.ou():[],m=this.Za.size===0&&this.current&&!a?1:0,g=m!==this.Ya;return this.Ya=m,u.length!==0||g?{snapshot:new yo(this.query,e.eu,l,u,e.mutatedKeys,m===0,g,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:f}:{_u:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new WS,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=De(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const t=[];return e.forEach((r=>{this.Za.has(r)||t.push(new qR(r))})),this.Za.forEach((r=>{e.has(r)||t.push(new FR(r))})),t}uu(e){this.Ha=e.qs,this.Za=De();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return yo.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const fa="SyncEngine";class M4{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class k4{constructor(e){this.key=e,this.lu=!1}}class L4{constructor(e,t,r,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new qr((f=>DI(f)),Th),this.Tu=new Map,this.Iu=new Set,this.du=new dt(fe.comparator),this.Eu=new Map,this.Au=new Q_,this.Ru={},this.Vu=new Map,this.mu=po.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function U4(i,e,t=!0){const r=Vm(i);let a;const l=r.Pu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.cu()):a=await GR(r,e,t,!0),a}async function z4(i,e){const t=Vm(i);await GR(t,e,!0,!1)}async function GR(i,e,t,r){const a=await $l(i.localStore,bn(e)),l=a.targetId,u=i.sharedClientState.addLocalQueryTarget(l,t);let f;return r&&(f=await cv(i,e,l,u==="current",a.resumeToken)),i.isPrimaryClient&&t&&Nm(i.remoteStore,a),f}async function cv(i,e,t,r,a){i.gu=(v,b,I)=>(async function(M,V,$,H){let Q=V.view.nu($);Q.Ds&&(Q=await tm(M.localStore,V.query,!1).then((({documents:x})=>V.view.nu(x,Q))));const ue=H&&H.targetChanges.get(V.targetId),ye=H&&H.targetMismatches.get(V.targetId)!=null,pe=V.view.applyChanges(Q,M.isPrimaryClient,ue,ye);return n_(M,V.targetId,pe._u),pe.snapshot})(i,v,b,I);const l=await tm(i.localStore,e,!0),u=new HR(e,l.qs),f=u.nu(l.documents),m=Ah.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",a),g=u.applyChanges(f,i.isPrimaryClient,m);n_(i,t,g._u);const y=new M4(e,t,u);return i.Pu.set(e,y),i.Tu.has(t)?i.Tu.get(t).push(e):i.Tu.set(t,[e]),g.snapshot}async function B4(i,e,t){const r=de(i),a=r.Pu.get(e),l=r.Tu.get(a.targetId);if(l.length>1)return r.Tu.set(a.targetId,l.filter((u=>!Th(u,e)))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Xl(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&Yl(r.remoteStore,a.targetId),Wl(r,a.targetId)})).catch(la)):(Wl(r,a.targetId),await Xl(r.localStore,a.targetId,!0))}async function j4(i,e){const t=de(i),r=t.Pu.get(e),a=t.Tu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Yl(t.remoteStore,r.targetId))}async function F4(i,e,t){const r=mv(i);try{const a=await(function(u,f){const m=de(u),g=et.now(),y=f.reduce(((I,O)=>I.add(O.key)),De());let v,b;return m.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let O=jn(),M=De();return m.Os.getEntries(I,y).next((V=>{O=V,O.forEach((($,H)=>{H.isValidDocument()||(M=M.add($))}))})).next((()=>m.localDocuments.getOverlayedDocuments(I,O))).next((V=>{v=V;const $=[];for(const H of f){const Q=dM(H,v.get(H.key).overlayedDocument);Q!=null&&$.push(new Hr(H.key,Q,vI(Q.value.mapValue),Tt.exists(!0)))}return m.mutationQueue.addMutationBatch(I,g,$,f)})).next((V=>{b=V;const $=V.applyToLocalDocumentSet(v,M);return m.documentOverlayCache.saveOverlays(I,V.batchId,$)}))})).then((()=>({batchId:b.batchId,changes:PI(v)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(u,f,m){let g=u.Ru[u.currentUser.toKey()];g||(g=new dt(Ae)),g=g.insert(f,m),u.Ru[u.currentUser.toKey()]=g})(r,a.batchId,t),await Gr(r,a.changes),await du(r.remoteStore)}catch(a){const l=pu(a,"Failed to persist write");t.reject(l)}}async function KR(i,e){const t=de(i);try{const r=await a4(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=t.Eu.get(l);u&&(Ee(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.lu=!0:a.modifiedDocuments.size>0?Ee(u.lu,14607):a.removedDocuments.size>0&&(Ee(u.lu,42227),u.lu=!1))})),await Gr(t,r,e)}catch(r){await la(r)}}function tw(i,e,t){const r=de(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Pu.forEach(((l,u)=>{const f=u.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(u,f){const m=de(u);m.onlineState=f;let g=!1;m.queries.forEach(((y,v)=>{for(const b of v.wa)b.va(f)&&(g=!0)})),g&&ov(m)})(r.eventManager,e),a.length&&r.hu.J_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function q4(i,e,t){const r=de(i);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Eu.get(e),l=a&&a.key;if(l){let u=new dt(fe.comparator);u=u.insert(l,yt.newNoDocument(l,be.min()));const f=De().add(l),m=new wh(be.min(),new Map,new dt(Ae),u,f);await KR(r,m),r.du=r.du.remove(l),r.Eu.delete(e),dv(r)}else await Xl(r.localStore,e,!1).then((()=>Wl(r,e,t))).catch(la)}async function H4(i,e){const t=de(i),r=e.batch.batchId;try{const a=await s4(t.localStore,e);fv(t,r,null),hv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Gr(t,a)}catch(a){await la(a)}}async function G4(i,e,t){const r=de(i);try{const a=await(function(u,f){const m=de(u);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let y;return m.mutationQueue.lookupMutationBatch(g,f).next((v=>(Ee(v!==null,37113),y=v.keys(),m.mutationQueue.removeMutationBatch(g,v)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,y,f))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,y))).next((()=>m.localDocuments.getDocuments(g,y)))}))})(r.localStore,e);fv(r,e,t),hv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Gr(r,a)}catch(a){await la(a)}}async function K4(i,e){const t=de(i);ha(t.remoteStore)||oe(fa,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(u){const f=de(u);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(m=>f.mutationQueue.getHighestUnacknowledgedBatchId(m)))})(t.localStore);if(r===Ws)return void e.resolve();const a=t.Vu.get(r)||[];a.push(e),t.Vu.set(r,a)}catch(r){const a=pu(r,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}function hv(i,e){(i.Vu.get(e)||[]).forEach((t=>{t.resolve()})),i.Vu.delete(e)}function fv(i,e,t){const r=de(i);let a=r.Ru[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.Ru[r.currentUser.toKey()]=a}}function Wl(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Tu.get(e))i.Pu.delete(r),t&&i.hu.pu(r,t);i.Tu.delete(e),i.isPrimaryClient&&i.Au.zr(e).forEach((r=>{i.Au.containsKey(r)||QR(i,r)}))}function QR(i,e){i.Iu.delete(e.path.canonicalString());const t=i.du.get(e);t!==null&&(Yl(i.remoteStore,t),i.du=i.du.remove(e),i.Eu.delete(t),dv(i))}function n_(i,e,t){for(const r of t)r instanceof FR?(i.Au.addReference(r.key,e),Q4(i,r)):r instanceof qR?(oe(fa,"Document no longer in limbo: "+r.key),i.Au.removeReference(r.key,e),i.Au.containsKey(r.key)||QR(i,r.key)):ge(19791,{yu:r})}function Q4(i,e){const t=e.key,r=t.path.canonicalString();i.du.get(t)||i.Iu.has(r)||(oe(fa,"New document in limbo: "+t),i.Iu.add(r),dv(i))}function dv(i){for(;i.Iu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Iu.values().next().value;i.Iu.delete(e);const t=new fe(Me.fromString(e)),r=i.mu.next();i.Eu.set(r,new k4(t)),i.du=i.du.insert(t,r),Nm(i.remoteStore,new xr(bn(uu(t.path)),r,"TargetPurposeLimboResolution",zn.ue))}}async function Gr(i,e,t){const r=de(i),a=[],l=[],u=[];r.Pu.isEmpty()||(r.Pu.forEach(((f,m)=>{u.push(r.gu(m,e,t).then((g=>{var y;if((g||t)&&r.isPrimaryClient){const v=g?!g.fromCache:(y=t==null?void 0:t.targetChanges.get(m.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(m.targetId,v?"current":"not-current")}if(g){a.push(g);const v=W_.Es(m.targetId,g);l.push(v)}})))})),await Promise.all(u),r.hu.J_(a),await(async function(m,g){const y=de(m);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(v=>G.forEach(g,(b=>G.forEach(b.Is,(I=>y.persistence.referenceDelegate.addReference(v,b.targetId,I))).next((()=>G.forEach(b.ds,(I=>y.persistence.referenceDelegate.removeReference(v,b.targetId,I)))))))))}catch(v){if(!ua(v))throw v;oe(J_,"Failed to update sequence numbers: "+v)}for(const v of g){const b=v.targetId;if(!v.fromCache){const I=y.Fs.get(b),O=I.snapshotVersion,M=I.withLastLimboFreeSnapshotVersion(O);y.Fs=y.Fs.insert(b,M)}}})(r.localStore,l))}async function $4(i,e){const t=de(i);if(!t.currentUser.isEqual(e)){oe(fa,"User change. New user:",e.toKey());const r=await SR(t.localStore,e);t.currentUser=e,(function(l,u){l.Vu.forEach((f=>{f.forEach((m=>{m.reject(new se(W.CANCELLED,u))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Gr(t,r.Bs)}}function X4(i,e){const t=de(i),r=t.Eu.get(e);if(r&&r.lu)return De().add(r.key);{let a=De();const l=t.Tu.get(e);if(!l)return a;for(const u of l){const f=t.Pu.get(u);a=a.unionWith(f.view.tu)}return a}}async function Y4(i,e){const t=de(i),r=await tm(t.localStore,e.query,!0),a=e.view.uu(r);return t.isPrimaryClient&&n_(t,e.targetId,a._u),a}async function W4(i,e){const t=de(i);return RR(t.localStore,e).then((r=>Gr(t,r)))}async function J4(i,e,t,r){const a=de(i),l=await(function(f,m){const g=de(f),y=de(g.mutationQueue);return g.persistence.runTransaction("Lookup mutation documents","readonly",(v=>y.Xn(v,m).next((b=>b?g.localDocuments.getDocuments(v,b):G.resolve(null)))))})(a.localStore,e);l!==null?(t==="pending"?await du(a.remoteStore):t==="acknowledged"||t==="rejected"?(fv(a,e,r||null),hv(a,e),(function(f,m){de(de(f).mutationQueue).rr(m)})(a.localStore,e)):ge(6720,"Unknown batchState",{wu:t}),await Gr(a,l)):oe(fa,"Cannot apply mutation batch with id: "+e)}async function Z4(i,e){const t=de(i);if(Vm(t),mv(t),e===!0&&t.fu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await nw(t,r.toArray());t.fu=!0,await e_(t.remoteStore,!0);for(const l of a)Nm(t.remoteStore,l)}else if(e===!1&&t.fu!==!1){const r=[];let a=Promise.resolve();t.Tu.forEach(((l,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):a=a.then((()=>(Wl(t,u),Xl(t.localStore,u,!0)))),Yl(t.remoteStore,u)})),await a,await nw(t,r),(function(u){const f=de(u);f.Eu.forEach(((m,g)=>{Yl(f.remoteStore,g)})),f.Au.jr(),f.Eu=new Map,f.du=new dt(fe.comparator)})(t),t.fu=!1,await e_(t.remoteStore,!1)}}async function nw(i,e,t){const r=de(i),a=[],l=[];for(const u of e){let f;const m=r.Tu.get(u);if(m&&m.length!==0){f=await $l(r.localStore,bn(m[0]));for(const g of m){const y=r.Pu.get(g),v=await Y4(r,y);v.snapshot&&l.push(v.snapshot)}}else{const g=await IR(r.localStore,u);f=await $l(r.localStore,g),await cv(r,$R(g),u,!1,f.resumeToken)}a.push(f)}return r.hu.J_(l),a}function $R(i){return RI(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function ek(i){return(function(t){return de(de(t).persistence).Ps()})(de(i).localStore)}async function tk(i,e,t,r){const a=de(i);if(a.fu)return void oe(fa,"Ignoring unexpected query state notification.");const l=a.Tu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const u=await RR(a.localStore,NI(l[0])),f=wh.createSynthesizedRemoteEventForCurrentChange(e,t==="current",It.EMPTY_BYTE_STRING);await Gr(a,u,f);break}case"rejected":await Xl(a.localStore,e,!0),Wl(a,e,r);break;default:ge(64155,t)}}async function nk(i,e,t){const r=Vm(i);if(r.fu){for(const a of e){if(r.Tu.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){oe(fa,"Adding an already active target "+a);continue}const l=await IR(r.localStore,a),u=await $l(r.localStore,l);await cv(r,$R(l),u.targetId,!1,u.resumeToken),Nm(r.remoteStore,u)}for(const a of t)r.Tu.has(a)&&await Xl(r.localStore,a,!1).then((()=>{Yl(r.remoteStore,a),Wl(r,a)})).catch(la)}}function Vm(i){const e=de(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=KR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=X4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=q4.bind(null,e),e.hu.J_=O4.bind(null,e.eventManager),e.hu.pu=P4.bind(null,e.eventManager),e}function mv(i){const e=de(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=H4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=G4.bind(null,e),e}function ik(i,e,t){const r=de(i);(async function(l,u,f){try{const m=await u.getMetadata();if(await(function(I,O){const M=de(I),V=kt(O.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",($=>M.Ti.getBundleMetadata($,O.id))).then(($=>!!$&&$.createTime.compareTo(V)>=0))})(l.localStore,m))return await u.close(),f._completeWith((function(I){return{taskState:"Success",documentsLoaded:I.totalDocuments,bytesLoaded:I.totalBytes,totalDocuments:I.totalDocuments,totalBytes:I.totalBytes}})(m)),Promise.resolve(new Set);f._updateProgress(jR(m));const g=new uv(m,u.serializer);let y=await u.Su();for(;y;){const b=await g.Wa(y);b&&f._updateProgress(b),y=await u.Su()}const v=await g.za(l.localStore);return await Gr(l,v.Ja,void 0),await(function(I,O){const M=de(I);return M.persistence.runTransaction("Save bundle","readwrite",(V=>M.Ti.saveBundleMetadata(V,O)))})(l.localStore,m),f._completeWith(v.progress),Promise.resolve(v.ja)}catch(m){return Sn(fa,`Loading bundle failed with ${m}`),f._failWith(m),Promise.resolve(new Set)}})(r,e,t).then((a=>{r.sharedClientState.notifyBundleLoaded(a)}))}class Jl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=bo(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return bR(this.persistence,new TR,e.initialUser,this.serializer)}Du(e){return new $_(Dm.Vi,this.serializer)}bu(e){return new VR}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jl.provider={build:()=>new Jl};class pv extends Jl{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Ee(this.persistence.referenceDelegate instanceof em,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new pR(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new $_((r=>em.Vi(r,t)),this.serializer)}}class gv extends Jl{constructor(e,t,r){super(),this.Mu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Mu.initialize(this,e),await mv(this.Mu.syncEngine),await du(this.Mu.remoteStore),await this.persistence.ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return bR(this.persistence,new TR,e.initialUser,this.serializer)}Cu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new pR(r,e.asyncQueue,t)}Fu(e,t){const r=new yP(t,this.persistence);return new gP(e.asyncQueue,r)}Du(e){const t=Y_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?En.withCacheSize(this.cacheSizeBytes):En.DEFAULT;return new X_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,OR(),Od(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new VR}}class XR extends gv{constructor(e,t){super(e,t,!1),this.Mu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Mu.syncEngine;this.sharedClientState instanceof fy&&(this.sharedClientState.syncEngine={Do:J4.bind(null,t),vo:tk.bind(null,t),Co:nk.bind(null,t),Ps:ek.bind(null,t),bo:W4.bind(null,t)},await this.sharedClientState.start()),await this.persistence.ji((async r=>{await Z4(this.Mu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}bu(e){const t=OR();if(!fy.C(t))throw new se(W.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Y_(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new fy(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class ra{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>tw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=$4.bind(null,this.syncEngine),await e_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new V4})()}createDatastore(e){const t=bo(e.databaseInfo.databaseId),r=(function(l){return new m4(l)})(e.databaseInfo);return(function(l,u,f,m){return new _4(l,u,f,m)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,u,f){return new E4(r,a,l,u,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>tw(this.syncEngine,t,0)),(function(){return $S.C()?new $S:new c4})())}createSyncEngine(e,t){return(function(a,l,u,f,m,g,y){const v=new L4(a,l,u,f,m,g);return y&&(v.fu=!0),v})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=de(a);oe(go,"RemoteStore shutting down."),l.Ia.add(5),await fu(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}ra.provider={build:()=>new ra};function iw(i,e=10240){let t=0;return{async read(){if(t<i.byteLength){const r={value:i.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):Mt("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e,t){this.Nu=e,this.serializer=t,this.metadata=new rn,this.buffer=new Uint8Array,this.Bu=(function(){return new TextDecoder("utf-8")})(),this.Lu().then((r=>{r&&r.Qa()?this.metadata.resolve(r.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Nu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.Lu()}async Lu(){const e=await this.ku();if(e===null)return null;const t=this.Bu.decode(e),r=Number(t);isNaN(r)&&this.qu(`length string (${t}) is not valid number`);const a=await this.Qu(r);return new BR(JSON.parse(a),e.length+r)}$u(){return this.buffer.findIndex((e=>e===123))}async ku(){for(;this.$u()<0&&!await this.Uu(););if(this.buffer.length===0)return null;const e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Qu(e){for(;this.buffer.length<e;)await this.Uu()&&this.qu("Reached the end of bundle when more is expected.");const t=this.Bu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}qu(e){throw this.Nu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Uu(){const e=await this.Nu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sk{constructor(e,t){this.bundleData=e,this.serializer=t,this.cursor=0,this.elements=[];let r=this.Su();if(!r||!r.Qa())throw new Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(r==null?void 0:r.qa)}`);this.metadata=r;do r=this.Su(),r!==null&&this.elements.push(r);while(r!==null)}getMetadata(){return this.metadata}Ku(){return this.elements}Su(){if(this.cursor===this.bundleData.length)return null;const e=this.ku(),t=this.Qu(e);return new BR(JSON.parse(t),e)}Qu(e){if(this.cursor+e>this.bundleData.length)throw new se(W.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}ku(){const e=this.cursor;let t=this.cursor;for(;t<this.bundleData.length;){if(this.bundleData[t]==="{"){if(t===e)throw new Error("First character is a bracket and not a number");return this.cursor=t,Number(this.bundleData.slice(e,t))}t++}throw new Error("Reached the end of bundle when more is expected.")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new se(W.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(a,l){const u=de(a),f={documents:l.map((v=>sh(u.serializer,v)))},m=await u.Jo("BatchGetDocuments",u.serializer.databaseId,Me.emptyPath(),f,l.length),g=new Map;m.forEach((v=>{const b=bM(u.serializer,v);g.set(b.key.toString(),b)}));const y=[];return l.forEach((v=>{const b=g.get(v.toString());Ee(!!b,55234,{key:v}),y.push(b)})),y})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new hu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const a=fe.fromPath(r);this.mutations.push(new z_(a,this.precondition(a)))})),await(async function(r,a){const l=de(r),u={writes:a.map((f=>ah(l.serializer,f)))};await l.Wo("Commit",l.serializer.databaseId,Me.emptyPath(),u)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ge(50498,{Wu:e.constructor.name});t=be.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new se(W.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(be.min())?Tt.exists(!1):Tt.updateTime(t):Tt.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(be.min()))throw new se(W.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Tt.updateTime(t)}return Tt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e,t,r,a,l){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=a,this.deferred=l,this.Gu=r.maxAttempts,this.F_=new ev(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_((async()=>{const e=new ak(this.datastore),t=this.Ju(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((a=>{this.Hu(a)}))))})).catch((r=>{this.Hu(r)}))}))}Ju(e){try{const t=this.updateFunction(e);return!_h(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget((()=>(this.ju(),Promise.resolve())))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!GI(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa="FirestoreClient";class lk{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=nn.UNAUTHENTICATED,this.clientId=mm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async u=>{oe(sa,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(oe(sa,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=pu(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function my(i,e){i.asyncQueue.verifyOperationInProgress(),oe(sa,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener((async a=>{r.isEqual(a)||(await SR(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>{Sn("Terminating Firestore due to IndexedDb database deletion"),i.terminate().then((()=>{oe("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((a=>{Sn("Terminating Firestore due to IndexedDb database deletion failed",a)}))})),i._offlineComponents=e}async function rw(i,e){i.asyncQueue.verifyOperationInProgress();const t=await yv(i);oe(sa,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((r=>YS(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,a)=>YS(e.remoteStore,a))),i._onlineComponents=e}async function yv(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){oe(sa,"Using user provided OfflineComponentProvider");try{await my(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===W.FAILED_PRECONDITION||a.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;Sn("Error using user provided cache. Falling back to memory cache: "+t),await my(i,new Jl)}}else oe(sa,"Using default OfflineComponentProvider"),await my(i,new pv(void 0));return i._offlineComponents}async function Pm(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(oe(sa,"Using user provided OnlineComponentProvider"),await rw(i,i._uninitializedComponentsProvider._online)):(oe(sa,"Using default OnlineComponentProvider"),await rw(i,new ra))),i._onlineComponents}function YR(i){return yv(i).then((e=>e.persistence))}function gu(i){return yv(i).then((e=>e.localStore))}function WR(i){return Pm(i).then((e=>e.remoteStore))}function _v(i){return Pm(i).then((e=>e.syncEngine))}function JR(i){return Pm(i).then((e=>e.datastore))}async function Zl(i){const e=await Pm(i),t=e.eventManager;return t.onListen=U4.bind(null,e.syncEngine),t.onUnlisten=B4.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=z4.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=j4.bind(null,e.syncEngine),t}function uk(i){return i.asyncQueue.enqueue((async()=>{const e=await YR(i),t=await WR(i);return e.setNetworkEnabled(!0),(function(a){const l=de(a);return l.Ia.delete(0),Ih(l)})(t)}))}function ck(i){return i.asyncQueue.enqueue((async()=>{const e=await YR(i),t=await WR(i);return e.setNetworkEnabled(!1),(async function(a){const l=de(a);l.Ia.add(0),await fu(l),l.Aa.set("Offline")})(t)}))}function hk(i,e){const t=new rn;return i.asyncQueue.enqueueAndForget((async()=>(async function(a,l,u){try{const f=await(function(g,y){const v=de(g);return v.persistence.runTransaction("read document","readonly",(b=>v.localDocuments.getDocument(b,y)))})(a,l);f.isFoundDocument()?u.resolve(f):f.isNoDocument()?u.resolve(null):u.reject(new se(W.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const m=pu(f,`Failed to get document '${l} from cache`);u.reject(m)}})(await gu(i),e,t))),t.promise}function ZR(i,e,t={}){const r=new rn;return i.asyncQueue.enqueueAndForget((async()=>(function(l,u,f,m,g){const y=new Om({next:b=>{y.Ou(),u.enqueueAndForget((()=>av(l,v)));const I=b.docs.has(f);!I&&b.fromCache?g.reject(new se(W.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&b.fromCache&&m&&m.source==="server"?g.reject(new se(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(b)},error:b=>g.reject(b)}),v=new lv(uu(f.path),y,{includeMetadataChanges:!0,ka:!0});return sv(l,v)})(await Zl(i),i.asyncQueue,e,t,r))),r.promise}function fk(i,e){const t=new rn;return i.asyncQueue.enqueueAndForget((async()=>(async function(a,l,u){try{const f=await tm(a,l,!0),m=new HR(l,f.qs),g=m.nu(f.documents),y=m.applyChanges(g,!1);u.resolve(y.snapshot)}catch(f){const m=pu(f,`Failed to execute query '${l} against cache`);u.reject(m)}})(await gu(i),e,t))),t.promise}function e1(i,e,t={}){const r=new rn;return i.asyncQueue.enqueueAndForget((async()=>(function(l,u,f,m,g){const y=new Om({next:b=>{y.Ou(),u.enqueueAndForget((()=>av(l,v))),b.fromCache&&m.source==="server"?g.reject(new se(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(b)},error:b=>g.reject(b)}),v=new lv(f,y,{includeMetadataChanges:!0,ka:!0});return sv(l,v)})(await Zl(i),i.asyncQueue,e,t,r))),r.promise}function dk(i,e,t){const r=new rn;return i.asyncQueue.enqueueAndForget((async()=>{try{const a=await JR(i);r.resolve((async function(u,f,m){var g;const y=de(u),{request:v,ft:b,parent:I}=tR(y.serializer,xI(f),m);y.connection.Qo||delete v.parent;const O=(await y.Jo("RunAggregationQuery",y.serializer.databaseId,I,v,1)).filter((V=>!!V.result));Ee(O.length===1,64727);const M=(g=O[0].result)===null||g===void 0?void 0:g.aggregateFields;return Object.keys(M).reduce(((V,$)=>(V[b[$]]=M[$],V)),{})})(a,e,t))}catch(a){r.reject(a)}})),r.promise}function mk(i,e){const t=new Om(e);return i.asyncQueue.enqueueAndForget((async()=>(function(a,l){de(a).Da.add(l),l.next()})(await Zl(i),t))),()=>{t.Ou(),i.asyncQueue.enqueueAndForget((async()=>(function(a,l){de(a).Da.delete(l)})(await Zl(i),t)))}}function pk(i,e,t,r){const a=(function(u,f){let m;return m=typeof u=="string"?A_().encode(u):u,(function(y,v){return new rk(y,v)})((function(y,v){if(y instanceof Uint8Array)return iw(y,v);if(y instanceof ArrayBuffer)return iw(new Uint8Array(y),v);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(m),f)})(t,bo(e));i.asyncQueue.enqueueAndForget((async()=>{ik(await _v(i),a,r)}))}function gk(i,e){return i.asyncQueue.enqueue((async()=>(function(r,a){const l=de(r);return l.persistence.runTransaction("Get named query","readonly",(u=>l.Ti.getNamedQuery(u,a)))})(await gu(i),e)))}function t1(i,e){return(function(r,a){return new sk(r,a)})(i,e)}function yk(i,e){return i.asyncQueue.enqueue((async()=>(async function(r,a){const l=de(r),u=l.indexManager,f=[];return l.persistence.runTransaction("Configure indexes","readwrite",(m=>u.getFieldIndexes(m).next((g=>(function(v,b,I,O,M){v=[...v],b=[...b],v.sort(I),b.sort(I);const V=v.length,$=b.length;let H=0,Q=0;for(;H<$&&Q<V;){const ue=I(v[Q],b[H]);ue<0?M(v[Q++]):ue>0?O(b[H++]):(H++,Q++)}for(;H<$;)O(b[H++]);for(;Q<V;)M(v[Q++])})(g,a,fP,(y=>{f.push(u.addFieldIndex(m,y))}),(y=>{f.push(u.deleteFieldIndex(m,y))})))).next((()=>G.waitFor(f)))))})(await gu(i),e)))}function _k(i,e){return i.asyncQueue.enqueue((async()=>(function(r,a){de(r).Cs.Rs=a})(await gu(i),e)))}function vk(i){return i.asyncQueue.enqueue((async()=>(function(t){const r=de(t),a=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",(l=>a.deleteAllFieldIndexes(l)))})(await gu(i))))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1="firestore.googleapis.com",aw=!0;class ow{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new se(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=i1,this.ssl=aw}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:aw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=cR;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<mR)throw new se(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}HA("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=n1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new se(W.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new se(W.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new se(W.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rh{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ow({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new se(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new se(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ow(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new FA;switch(r.type){case"firstParty":return new aP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new se(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=sw.get(t);r&&(oe("ComponentProvider","Removing Datastore"),sw.delete(t),r.terminate())})(this),Promise.resolve()}}function r1(i,e,t,r={}){var a;i=ke(i,Rh);const l=vo(e),u=i._getSettings(),f=Object.assign(Object.assign({},u),{emulatorOptions:i._getEmulatorOptions()}),m=`${e}:${t}`;l&&(f_(`https://${m}`),qw("Firestore",!0)),u.host!==i1&&u.host!==m&&Sn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g=Object.assign(Object.assign({},u),{host:m,ssl:l,emulatorOptions:r});if(!xi(g,f)&&(i._setSettings(g),r.mockUserToken)){let y,v;if(typeof r.mockUserToken=="string")y=r.mockUserToken,v=nn.MOCK_USER;else{y=p2(r.mockUserToken,(a=i._app)===null||a===void 0?void 0:a.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new se(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");v=new nn(b)}i._authCredentials=new iP(new jA(y,v))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new $t(this.firestore,e,this._query)}}class rt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ii(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rt(this.firestore,e,this._key)}toJSON(){return{type:rt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(To(t,rt._jsonSchema))return new rt(e,r||null,new fe(Me.fromString(t.referencePath)))}}rt._jsonSchemaVersion="firestore/documentReference/1.0",rt._jsonSchema={type:qt("string",rt._jsonSchemaVersion),referencePath:qt("string")};class Ii extends $t{constructor(e,t,r){super(e,t,uu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rt(this.firestore,null,new fe(e))}withConverter(e){return new Ii(this.firestore,e,this._path)}}function eu(i,e,...t){if(i=ct(i),I_("collection","path",e),i instanceof Rh){const r=Me.fromString(e,...t);return Xb(r),new Ii(i,null,r)}{if(!(i instanceof rt||i instanceof Ii))throw new se(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Me.fromString(e,...t));return Xb(r),new Ii(i.firestore,null,r)}}function Ek(i,e){if(i=ke(i,Rh),I_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new se(W.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new $t(i,null,(function(r){return new Fr(Me.emptyPath(),r)})(e))}function At(i,e,...t){if(i=ct(i),arguments.length===1&&(e=mm.newId()),I_("doc","path",e),i instanceof Rh){const r=Me.fromString(e,...t);return $b(r),new rt(i,null,new fe(r))}{if(!(i instanceof rt||i instanceof Ii))throw new se(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(Me.fromString(e,...t));return $b(r),new rt(i.firestore,i instanceof Ii?i.converter:null,new fe(r))}}function Tk(i,e){return i=ct(i),e=ct(e),(i instanceof rt||i instanceof Ii)&&(e instanceof rt||e instanceof Ii)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function vv(i,e){return i=ct(i),e=ct(e),i instanceof $t&&e instanceof $t&&i.firestore===e.firestore&&Th(i._query,e._query)&&i.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw="AsyncQueue";class uw{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new ev(this,"async_queue_retry"),this.oc=()=>{const r=Od();r&&oe(lw,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=Od();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Od();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new rn;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!ua(e))throw e;oe(lw,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((r=>{throw this.tc=r,this.nc=!1,Mt("INTERNAL UNHANDLED ERROR: ",cw(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const a=rv.createAndSchedule(this,e,t,r,(l=>this.lc(l)));return this.ec.push(a),a}ac(){this.tc&&ge(47125,{hc:cw(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function cw(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(i){return(function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1})(i,["next","error","complete"])}class s1{constructor(){this._progressObserver={},this._taskCompletionResolver=new rn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk=-1;class ht extends Rh{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new uw,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uw(e),this._firestoreClient=void 0,await e}}}function Sk(i,e,t){t||(t=th);const r=dh(i,"firestore");if(r.isInitialized(t)){const a=r.getImmediate({identifier:t}),l=r.getOptions(t);if(xi(l,e))return a;throw new se(W.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new se(W.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<mR)throw new se(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&vo(e.host)&&f_(e.host),r.initialize({options:e,instanceIdentifier:t})}function a1(i,e){const t=typeof i=="object"?i:Ww(),r=typeof i=="string"?i:e||th,a=dh(t,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=d2("firestore");l&&r1(a,...l)}return a}function St(i){if(i._terminated)throw new se(W.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||o1(i),i._firestoreClient}function o1(i){var e,t,r;const a=i._freezeSettings(),l=(function(f,m,g,y){return new KP(f,m,g,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,n1(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,a);i._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(i._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),i._firestoreClient=new lk(i._authCredentials,i._appCheckCredentials,i._queue,l,i._componentsProvider&&(function(f){const m=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(m),_online:m}})(i._componentsProvider))}function wk(i,e){Sn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=i._freezeSettings();return l1(i,ra.provider,{build:r=>new gv(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function Ak(i){Sn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=i._freezeSettings();l1(i,ra.provider,{build:t=>new XR(t,e.cacheSizeBytes)})}function l1(i,e,t){if((i=ke(i,ht))._firestoreClient||i._terminated)throw new se(W.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(i._componentsProvider||i._getSettings().localCache)throw new se(W.FAILED_PRECONDITION,"SDK cache is already specified.");i._componentsProvider={_online:e,_offline:t},o1(i)}function Ik(i){if(i._initialized&&!i._terminated)throw new se(W.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new rn;return i._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!Xi.C())return Promise.resolve();const a=r+ER;await Xi.delete(a)})(Y_(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function Rk(i){return(function(t){const r=new rn;return t.asyncQueue.enqueueAndForget((async()=>K4(await _v(t),r))),r.promise})(St(i=ke(i,ht)))}function xk(i){return uk(St(i=ke(i,ht)))}function Ck(i){return ck(St(i=ke(i,ht)))}function Dk(i){return RN(i.app,"firestore",i._databaseId.database),i._delete()}function i_(i,e){const t=St(i=ke(i,ht)),r=new s1;return pk(t,i._databaseId,e,r),r}function u1(i,e){return gk(St(i=ke(i,ht)),e).then((t=>t?new $t(i,null,t.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class c1{constructor(e,t,r){this._userDataWriter=t,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Un(It.fromBase64String(e))}catch(t){throw new se(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Un(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Un._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(To(e,Un._jsonSchema))return Un.fromBase64String(e.bytes)}}Un._jsonSchemaVersion="firestore/bytes/1.0",Un._jsonSchema={type:qt("string",Un._jsonSchemaVersion),bytes:qt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new se(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function Nk(){return new da(Oy)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new se(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new se(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ri._jsonSchemaVersion}}static fromJSON(e){if(To(e,Ri._jsonSchema))return new Ri(e.latitude,e.longitude)}}Ri._jsonSchemaVersion="firestore/geoPoint/1.0",Ri._jsonSchema={type:qt("string",Ri._jsonSchemaVersion),latitude:qt("number"),longitude:qt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:pi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(To(e,pi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new pi(e.vectorValues);throw new se(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}pi._jsonSchemaVersion="firestore/vectorValue/1.0",pi._jsonSchema={type:qt("string",pi._jsonSchemaVersion),vectorValues:qt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vk=/^__.*__$/;class Ok{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Hr(e,this.data,this.fieldMask,t,this.fieldTransforms):new cu(e,this.data,t,this.fieldTransforms)}}class h1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Hr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function f1(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ge(40011,{Ec:i})}}class Mm{constructor(e,t,r,a,l,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new Mm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Rc({path:r,mc:!1});return a.fc(e),a}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Rc({path:r,mc:!1});return a.Ac(),a}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return sm(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(f1(this.Ec)&&Vk.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class Pk{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||bo(e)}Dc(e,t,r,a=!1){return new Mm({Ec:e,methodName:t,bc:r,path:_t.emptyPath(),mc:!1,Sc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function So(i){const e=i._freezeSettings(),t=bo(i._databaseId);return new Pk(i._databaseId,!!e.ignoreUndefinedProperties,t)}function km(i,e,t,r,a,l={}){const u=i.Dc(l.merge||l.mergeFields?2:0,e,t,a);Iv("Data must be an object, but it was:",u,r);const f=p1(r,u);let m,g;if(l.merge)m=new Bn(u.fieldMask),g=u.fieldTransforms;else if(l.mergeFields){const y=[];for(const v of l.mergeFields){const b=oh(e,v,t);if(!u.contains(b))throw new se(W.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);y1(y,b)||y.push(b)}m=new Bn(y),g=u.fieldTransforms.filter((v=>m.covers(v.field)))}else m=null,g=u.fieldTransforms;return new Ok(new pn(f),m,g)}class xh extends ma{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof xh}}function d1(i,e,t){return new Mm({Ec:3,bc:e.settings.bc,methodName:i._methodName,mc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Ev extends ma{_toFieldTransform(e){return new Sh(e.path,new Gl)}isEqual(e){return e instanceof Ev}}class Tv extends ma{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=d1(this,e,!0),r=this.vc.map((l=>wo(l,t))),a=new co(r);return new Sh(e.path,a)}isEqual(e){return e instanceof Tv&&xi(this.vc,e.vc)}}class bv extends ma{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=d1(this,e,!0),r=this.vc.map((l=>wo(l,t))),a=new ho(r);return new Sh(e.path,a)}isEqual(e){return e instanceof bv&&xi(this.vc,e.vc)}}class Sv extends ma{constructor(e,t){super(e),this.Cc=t}_toFieldTransform(e){const t=new Kl(e.serializer,LI(e.serializer,this.Cc));return new Sh(e.path,t)}isEqual(e){return e instanceof Sv&&this.Cc===e.Cc}}function wv(i,e,t,r){const a=i.Dc(1,e,t);Iv("Data must be an object, but it was:",a,r);const l=[],u=pn.empty();ca(r,((m,g)=>{const y=Lm(e,m,t);g=ct(g);const v=a.gc(y);if(g instanceof xh)l.push(y);else{const b=wo(g,v);b!=null&&(l.push(y),u.set(y,b))}}));const f=new Bn(l);return new h1(u,f,a.fieldTransforms)}function Av(i,e,t,r,a,l){const u=i.Dc(1,e,t),f=[oh(e,r,t)],m=[a];if(l.length%2!=0)throw new se(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)f.push(oh(e,l[b])),m.push(l[b+1]);const g=[],y=pn.empty();for(let b=f.length-1;b>=0;--b)if(!y1(g,f[b])){const I=f[b];let O=m[b];O=ct(O);const M=u.gc(I);if(O instanceof xh)g.push(I);else{const V=wo(O,M);V!=null&&(g.push(I),y.set(I,V))}}const v=new Bn(g);return new h1(y,v,u.fieldTransforms)}function m1(i,e,t,r=!1){return wo(t,i.Dc(r?4:3,e))}function wo(i,e){if(g1(i=ct(i)))return Iv("Unsupported field value:",e,i),p1(i,e);if(i instanceof ma)return(function(r,a){if(!f1(a.Ec))throw a.wc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.wc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,a){const l=[];let u=0;for(const f of r){let m=wo(f,a.yc(u));m==null&&(m={nullValue:"NULL_VALUE"}),l.push(m),u++}return{arrayValue:{values:l}}})(i,e)}return(function(r,a){if((r=ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return LI(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=et.fromDate(r);return{timestampValue:Ql(a.serializer,l)}}if(r instanceof et){const l=new et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ql(a.serializer,l)}}if(r instanceof Ri)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Un)return{bytesValue:XI(a.serializer,r._byteString)};if(r instanceof rt){const l=a.databaseId,u=r.firestore._databaseId;if(!u.isEqual(l))throw a.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:H_(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof pi)return(function(u,f){return{mapValue:{fields:{[O_]:{stringValue:P_},[Fl]:{arrayValue:{values:u.toArray().map((g=>{if(typeof g!="number")throw f.wc("VectorValues must only contain numeric values.");return U_(f.serializer,g)}))}}}}}})(r,a);throw a.wc(`Unsupported field value: ${pm(r)}`)})(i,e)}function p1(i,e){const t={};return cI(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ca(i,((r,a)=>{const l=wo(a,e.Vc(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function g1(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof et||i instanceof Ri||i instanceof Un||i instanceof rt||i instanceof ma||i instanceof pi)}function Iv(i,e,t){if(!g1(t)||!GA(t)){const r=pm(t);throw r==="an object"?e.wc(i+" a custom object"):e.wc(i+" "+r)}}function oh(i,e,t){if((e=ct(e))instanceof da)return e._internalPath;if(typeof e=="string")return Lm(i,e);throw sm("Field path arguments must be of type string or ",i,!1,void 0,t)}const Mk=new RegExp("[~\\*/\\[\\]]");function Lm(i,e,t){if(e.search(Mk)>=0)throw sm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new da(...e.split("."))._internalPath}catch{throw sm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function sm(i,e,t,r,a){const l=r&&!r.isEmpty(),u=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let m="";return(l||u)&&(m+=" (found",l&&(m+=` in field ${r}`),u&&(m+=` in document ${a}`),m+=")"),new se(W.INVALID_ARGUMENT,f+i+m)}function y1(i,e){return i.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new kk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Um("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class kk extends lh{data(){return super.data()}}function Um(i,e){return typeof e=="string"?Lm(i,e):e instanceof da?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new se(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Rv{}class yu extends Rv{}function v1(i,e,...t){let r=[];e instanceof Rv&&r.push(e),r=r.concat(t),(function(l){const u=l.filter((m=>m instanceof Ao)).length,f=l.filter((m=>m instanceof _u)).length;if(u>1||u>0&&f>0)throw new se(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)i=a._apply(i);return i}class _u extends yu{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new _u(e,t,r)}_apply(e){const t=this._parse(e);return b1(e._query,t),new $t(e.firestore,e.converter,Hy(e._query,t))}_parse(e){const t=So(e.firestore);return(function(l,u,f,m,g,y,v){let b;if(g.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new se(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){fw(v,y);const O=[];for(const M of v)O.push(hw(m,l,M));b={arrayValue:{values:O}}}else b=hw(m,l,v)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||fw(v,y),b=m1(f,u,v,y==="in"||y==="not-in");return Fe.create(g,y,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function E1(i,e,t){const r=e,a=Um("where",i);return _u._create(a,r,t)}class Ao extends Rv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ao(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:it.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let u=a;const f=l.getFlattenedFilters();for(const m of f)b1(u,m),u=Hy(u,m)})(e._query,t),new $t(e.firestore,e.converter,Hy(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Lk(...i){return i.forEach((e=>S1("or",e))),Ao._create("or",i)}function Uk(...i){return i.forEach((e=>S1("and",e))),Ao._create("and",i)}class zm extends yu{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new zm(e,t)}_apply(e){const t=(function(a,l,u){if(a.startAt!==null)throw new se(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new se(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new rh(l,u)})(e._query,this._field,this._direction);return new $t(e.firestore,e.converter,(function(a,l){const u=a.explicitOrderBy.concat([l]);return new Fr(a.path,a.collectionGroup,u,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function zk(i,e="asc"){const t=e,r=Um("orderBy",i);return zm._create(r,t)}class Ch extends yu{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Ch(e,t,r)}_apply(e){return new $t(e.firestore,e.converter,Xd(e._query,this._limit,this._limitType))}}function Bk(i){return KA("limit",i),Ch._create("limit",i,"F")}function jk(i){return KA("limitToLast",i),Ch._create("limitToLast",i,"L")}class Dh extends yu{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Dh(e,t,r)}_apply(e){const t=T1(e,this.type,this._docOrFields,this._inclusive);return new $t(e.firestore,e.converter,(function(a,l){return new Fr(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)})(e._query,t))}}function Fk(...i){return Dh._create("startAt",i,!0)}function qk(...i){return Dh._create("startAfter",i,!1)}class Nh extends yu{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Nh(e,t,r)}_apply(e){const t=T1(e,this.type,this._docOrFields,this._inclusive);return new $t(e.firestore,e.converter,(function(a,l){return new Fr(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,l)})(e._query,t))}}function Hk(...i){return Nh._create("endBefore",i,!1)}function Gk(...i){return Nh._create("endAt",i,!0)}function T1(i,e,t,r){if(t[0]=ct(t[0]),t[0]instanceof lh)return(function(l,u,f,m,g){if(!m)throw new se(W.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const y=[];for(const v of Dl(l))if(v.field.isKeyField())y.push(lo(u,m.key));else{const b=m.data.field(v.field);if(Em(b))throw new se(W.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+v.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(b===null){const I=v.field.canonicalString();throw new se(W.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${I}' (used as the orderBy) does not exist.`)}y.push(b)}return new na(y,g)})(i._query,i.firestore._databaseId,e,t[0]._document,r);{const a=So(i.firestore);return(function(u,f,m,g,y,v){const b=u.explicitOrderBy;if(y.length>b.length)throw new se(W.INVALID_ARGUMENT,`Too many arguments provided to ${g}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const I=[];for(let O=0;O<y.length;O++){const M=y[O];if(b[O].field.isKeyField()){if(typeof M!="string")throw new se(W.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${g}(), but got a ${typeof M}`);if(!k_(u)&&M.indexOf("/")!==-1)throw new se(W.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${g}() must be a plain document ID, but '${M}' contains a slash.`);const V=u.path.child(Me.fromString(M));if(!fe.isDocumentKey(V))throw new se(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${g}() must result in a valid document path, but '${V}' is not because it contains an odd number of segments.`);const $=new fe(V);I.push(lo(f,$))}else{const V=m1(m,g,M);I.push(V)}}return new na(I,v)})(i._query,i.firestore._databaseId,a,e,t,r)}}function hw(i,e,t){if(typeof(t=ct(t))=="string"){if(t==="")throw new se(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!k_(e)&&t.indexOf("/")!==-1)throw new se(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Me.fromString(t));if(!fe.isDocumentKey(r))throw new se(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return lo(i,new fe(r))}if(t instanceof rt)return lo(i,t._key);throw new se(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pm(t)}.`)}function fw(i,e){if(!Array.isArray(i)||i.length===0)throw new se(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function b1(i,e){const t=(function(a,l){for(const u of a)for(const f of u.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(i.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new se(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new se(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function S1(i,e){if(!(e instanceof _u||e instanceof Ao))throw new se(W.INVALID_ARGUMENT,`Function ${i}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class xv{convertValue(e,t="none"){switch(ea(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ur(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw ge(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return ca(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){var t,r,a;const l=(a=(r=(t=e.fields)===null||t===void 0?void 0:t[Fl].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map((u=>Et(u.doubleValue)));return new pi(l)}convertGeoPoint(e){return new Ri(Et(e.latitude),Et(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Tm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(eh(e));default:return null}}convertTimestamp(e){const t=Lr(e);return new et(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Me.fromString(e);Ee(sR(r),9688,{name:e});const a=new Zs(r.get(1),r.get(3)),l=new fe(r.popFirst(5));return a.isEqual(t)||Mt(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bm(i,e,t){let r;return r=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,r}class Cv extends xv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Un(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rt(this.firestore,null,t)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(i){return new tu("sum",oh("sum",i))}function Qk(i){return new tu("avg",oh("average",i))}function w1(){return new tu("count")}function $k(i,e){var t,r;return i instanceof tu&&e instanceof tu&&i.aggregateType===e.aggregateType&&((t=i._internalFieldPath)===null||t===void 0?void 0:t.canonicalString())===((r=e._internalFieldPath)===null||r===void 0?void 0:r.canonicalString())}function Xk(i,e){return vv(i.query,e.query)&&xi(i.data(),e.data())}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1="NOT SUPPORTED";class Cr{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fn extends lh{constructor(e,t,r,a,l,u){super(e,t,r,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Gc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Um("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new se(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Fn._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}function Yk(i,e,t){if(To(e,Fn._jsonSchema)){if(e.bundle===A1)throw new se(W.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=bo(i._databaseId),a=t1(e.bundle,r),l=a.Ku(),u=new uv(a.getMetadata(),r);for(const y of l)u.Wa(y);const f=u.documents;if(f.length!==1)throw new se(W.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${f.length} documents.`);const m=Am(r,f[0].document),g=new fe(Me.fromString(e.bundleName));return new Fn(i,new Cv(i),g,m,new Cr(!1,!1),t||null)}}Fn._jsonSchemaVersion="firestore/documentSnapshot/1.0",Fn._jsonSchema={type:qt("string",Fn._jsonSchemaVersion),bundleSource:qt("string","DocumentSnapshot"),bundleName:qt("string"),bundle:qt("string")};class Gc extends Fn{data(e={}){return super.data(e)}}class qn{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Cr(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Gc(this._firestore,this._userDataWriter,r.key,r,new Cr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new se(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((f=>{const m=new Gc(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Cr(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:m,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const m=new Gc(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Cr(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,y=-1;return f.type!==0&&(g=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),y=u.indexOf(f.doc.key)),{type:Jk(f.type),doc:m,oldIndex:g,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new se(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=qn._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=mm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Wk(i,e,t){if(To(e,qn._jsonSchema)){if(e.bundle===A1)throw new se(W.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=bo(i._databaseId),a=t1(e.bundle,r),l=a.Ku(),u=new uv(a.getMetadata(),r);for(const b of l)u.Wa(b);if(u.queries.length!==1)throw new se(W.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${u.queries.length} queries.`);const f=Rm(u.queries[0].bundledQuery),m=u.documents;let g=new ro;m.map((b=>{const I=Am(r,b.document);g=g.add(I)}));const y=yo.fromInitialDocuments(f,g,De(),!1,!1),v=new $t(i,t||null,f);return new qn(i,new Cv(i),v,y)}}function Jk(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ge(61501,{type:i})}}function Zk(i,e){return i instanceof Fn&&e instanceof Fn?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(i._document===null?e._document===null:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof qn&&e instanceof qn&&i._firestore===e._firestore&&vv(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e3(i){i=ke(i,rt);const e=ke(i.firestore,ht);return ZR(St(e),i._key).then((t=>Vv(e,i,t)))}qn._jsonSchemaVersion="firestore/querySnapshot/1.0",qn._jsonSchema={type:qt("string",qn._jsonSchemaVersion),bundleSource:qt("string","QuerySnapshot"),bundleName:qt("string"),bundle:qt("string")};class pa extends xv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Un(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rt(this.firestore,null,t)}}function t3(i){i=ke(i,rt);const e=ke(i.firestore,ht),t=St(e),r=new pa(e);return hk(t,i._key).then((a=>new Fn(e,r,i._key,a,new Cr(a!==null&&a.hasLocalMutations,!0),i.converter)))}function n3(i){i=ke(i,rt);const e=ke(i.firestore,ht);return ZR(St(e),i._key,{source:"server"}).then((t=>Vv(e,i,t)))}function Dv(i){i=ke(i,$t);const e=ke(i.firestore,ht),t=St(e),r=new pa(e);return _1(i._query),e1(t,i._query).then((a=>new qn(e,r,i,a)))}function i3(i){i=ke(i,$t);const e=ke(i.firestore,ht),t=St(e),r=new pa(e);return fk(t,i._query).then((a=>new qn(e,r,i,a)))}function r3(i){i=ke(i,$t);const e=ke(i.firestore,ht),t=St(e),r=new pa(e);return e1(t,i._query,{source:"server"}).then((a=>new qn(e,r,i,a)))}function I1(i,e,t){i=ke(i,rt);const r=ke(i.firestore,ht),a=Bm(i.converter,e,t);return vu(r,[km(So(r),"setDoc",i._key,a,i.converter!==null,t).toMutation(i._key,Tt.none())])}function Kt(i,e,t,...r){i=ke(i,rt);const a=ke(i.firestore,ht),l=So(a);let u;return u=typeof(e=ct(e))=="string"||e instanceof da?Av(l,"updateDoc",i._key,e,t,r):wv(l,"updateDoc",i._key,e),vu(a,[u.toMutation(i._key,Tt.exists(!0))])}function R1(i){return vu(ke(i.firestore,ht),[new hu(i._key,Tt.none())])}function Nv(i,e){const t=ke(i.firestore,ht),r=At(i),a=Bm(i.converter,e);return vu(t,[km(So(i.firestore),"addDoc",r._key,a,i.converter!==null,{}).toMutation(r._key,Tt.exists(!1))]).then((()=>r))}function nu(i,...e){var t,r,a;i=ct(i);let l={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||Nl(e[u])||(l=e[u++]);const f={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(Nl(e[u])){const v=e[u];e[u]=(t=v.next)===null||t===void 0?void 0:t.bind(v),e[u+1]=(r=v.error)===null||r===void 0?void 0:r.bind(v),e[u+2]=(a=v.complete)===null||a===void 0?void 0:a.bind(v)}let m,g,y;if(i instanceof rt)g=ke(i.firestore,ht),y=uu(i._key.path),m={next:v=>{e[u]&&e[u](Vv(g,i,v))},error:e[u+1],complete:e[u+2]};else{const v=ke(i,$t);g=ke(v.firestore,ht),y=v._query;const b=new pa(g);m={next:I=>{e[u]&&e[u](new qn(g,b,v,I))},error:e[u+1],complete:e[u+2]},_1(i._query)}return(function(b,I,O,M){const V=new Om(M),$=new lv(I,V,O);return b.asyncQueue.enqueueAndForget((async()=>sv(await Zl(b),$))),()=>{V.Ou(),b.asyncQueue.enqueueAndForget((async()=>av(await Zl(b),$)))}})(St(g),y,f,m)}function s3(i,e,...t){const r=ct(i),a=(function(m){const g={bundle:"",bundleName:"",bundleSource:""},y=["bundle","bundleName","bundleSource"];for(const v of y){if(!(v in m)){g.error=`snapshotJson missing required field: ${v}`;break}const b=m[v];if(typeof b!="string"){g.error=`snapshotJson field '${v}' must be a string.`;break}if(b.length===0){g.error=`snapshotJson field '${v}' cannot be an empty string.`;break}v==="bundle"?g.bundle=b:v==="bundleName"?g.bundleName=b:v==="bundleSource"&&(g.bundleSource=b)}return g})(e);if(a.error)throw new se(W.INVALID_ARGUMENT,a.error);let l,u=0;if(typeof t[u]!="object"||Nl(t[u])||(l=t[u++]),a.bundleSource==="QuerySnapshot"){let f=null;if(typeof t[u]=="object"&&Nl(t[u])){const m=t[u++];f={next:m.next,error:m.error,complete:m.complete}}else f={next:t[u++],error:t[u++],complete:t[u++]};return(function(g,y,v,b,I){let O,M=!1;return i_(g,y.bundle).then((()=>u1(g,y.bundleName))).then(($=>{$&&!M&&(I&&$.withConverter(I),O=nu($,v||{},b))})).catch(($=>(b.error&&b.error($),()=>{}))),()=>{M||(M=!0,O&&O())}})(r,a,l,f,t[u])}if(a.bundleSource==="DocumentSnapshot"){let f=null;if(typeof t[u]=="object"&&Nl(t[u])){const m=t[u++];f={next:m.next,error:m.error,complete:m.complete}}else f={next:t[u++],error:t[u++],complete:t[u++]};return(function(g,y,v,b,I){let O,M=!1;return i_(g,y.bundle).then((()=>{if(!M){const $=new rt(g,I||null,fe.fromPath(y.bundleName));O=nu($,v||{},b)}})).catch(($=>(b.error&&b.error($),()=>{}))),()=>{M||(M=!0,O&&O())}})(r,a,l,f,t[u])}throw new se(W.INVALID_ARGUMENT,`unsupported bundle source: ${a.bundleSource}`)}function a3(i,e){return mk(St(i=ke(i,ht)),Nl(e)?e:{next:e})}function vu(i,e){return(function(r,a){const l=new rn;return r.asyncQueue.enqueueAndForget((async()=>F4(await _v(r),a,l))),l.promise})(St(i),e)}function Vv(i,e,t){const r=t.docs.get(e._key),a=new pa(i);return new Fn(i,a,e._key,r,new Cr(t.hasPendingWrites,t.fromCache),e.converter)}function o3(i){return x1(i,{count:w1()})}function x1(i,e){const t=ke(i.firestore,ht),r=St(t),a=uI(e,((l,u)=>new HI(u,l.aggregateType,l._internalFieldPath)));return dk(r,i._query,a).then((l=>(function(f,m,g){const y=new pa(f);return new c1(m,y,g)})(t,i,l)))}class l3{constructor(e){this.kind="memory",this._onlineComponentProvider=ra.provider,e!=null&&e.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider={build:()=>new pv(void 0)}}toJSON(){return{kind:this.kind}}}class u3{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=C1(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class c3{constructor(){this.kind="memoryEager",this._offlineComponentProvider=Jl.provider}toJSON(){return{kind:this.kind}}}class h3{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new pv(e)}}toJSON(){return{kind:this.kind}}}function f3(){return new c3}function d3(i){return new h3(i==null?void 0:i.cacheSizeBytes)}function m3(i){return new l3(i)}function p3(i){return new u3(i)}class g3{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ra.provider,this._offlineComponentProvider={build:t=>new gv(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class y3{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ra.provider,this._offlineComponentProvider={build:t=>new XR(t,e==null?void 0:e.cacheSizeBytes)}}}function C1(i){return new g3(i==null?void 0:i.forceOwnership)}function _3(){return new y3}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v3={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=So(e)}set(e,t,r){this._verifyNotCommitted();const a=Ks(e,this._firestore),l=Bm(a.converter,t,r),u=km(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(u.toMutation(a._key,Tt.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const l=Ks(e,this._firestore);let u;return u=typeof(t=ct(t))=="string"||t instanceof da?Av(this._dataReader,"WriteBatch.update",l._key,t,r,a):wv(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(u.toMutation(l._key,Tt.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ks(e,this._firestore);return this._mutations=this._mutations.concat(new hu(t._key,Tt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new se(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ks(i,e){if((i=ct(i)).firestore!==e)throw new se(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E3{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=So(e)}get(e){const t=Ks(e,this._firestore),r=new Cv(this._firestore);return this._transaction.lookup([t._key]).then((a=>{if(!a||a.length!==1)return ge(24041);const l=a[0];if(l.isFoundDocument())return new lh(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new lh(this._firestore,r,t._key,null,t.converter);throw ge(18433,{doc:l})}))}set(e,t,r){const a=Ks(e,this._firestore),l=Bm(a.converter,t,r),u=km(this._dataReader,"Transaction.set",a._key,l,a.converter!==null,r);return this._transaction.set(a._key,u),this}update(e,t,r,...a){const l=Ks(e,this._firestore);let u;return u=typeof(t=ct(t))=="string"||t instanceof da?Av(this._dataReader,"Transaction.update",l._key,t,r,a):wv(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,u),this}delete(e){const t=Ks(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1 extends E3{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ks(e,this._firestore),r=new pa(this._firestore);return super.get(e).then((a=>new Fn(this._firestore,r,t._key,a._document,new Cr(!1,!1),t.converter)))}}function V1(i,e,t){i=ke(i,ht);const r=Object.assign(Object.assign({},v3),t);return(function(l){if(l.maxAttempts<1)throw new se(W.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(l,u,f){const m=new rn;return l.asyncQueue.enqueueAndForget((async()=>{const g=await JR(l);new ok(l.asyncQueue,g,f,u,m).zu()})),m.promise})(St(i),(a=>e(new N1(i,a))),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(){return new xh("deleteField")}function T3(){return new Ev("serverTimestamp")}function P1(...i){return new Tv("arrayUnion",i)}function M1(...i){return new bv("arrayRemove",i)}function b3(i){return new Sv("increment",i)}function S3(i){return new pi(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(i){return St(i=ke(i,ht)),new D1(i,(e=>vu(i,e)))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w3(i,e){const t=St(i=ke(i,ht));if(!t._uninitializedComponentsProvider||t._uninitializedComponentsProvider._offline.kind==="memory")return Sn("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=(function(l){const u=typeof l=="string"?(function(g){try{return JSON.parse(g)}catch(y){throw new se(W.INVALID_ARGUMENT,"Failed to parse JSON: "+(y==null?void 0:y.message))}})(l):l,f=[];if(Array.isArray(u.indexes))for(const m of u.indexes){const g=dw(m,"collectionGroup"),y=[];if(Array.isArray(m.fields))for(const v of m.fields){const b=Lm("setIndexConfiguration",dw(v,"fieldPath"));v.arrayConfig==="CONTAINS"?y.push(new no(b,2)):v.order==="ASCENDING"?y.push(new no(b,0)):v.order==="DESCENDING"&&y.push(new no(b,1))}f.push(new kl(kl.UNKNOWN_ID,g,y,Ll.empty()))}return f})(e);return yk(t,r)}function dw(i,e){if(typeof i[e]!="string")throw new se(W.INVALID_ARGUMENT,"Missing string value for: "+e);return i[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function A3(i){var e;i=ke(i,ht);const t=mw.get(i);if(t)return t;if(((e=St(i)._uninitializedComponentsProvider)===null||e===void 0?void 0:e._offline.kind)!=="persistent")return null;const r=new L1(i);return mw.set(i,r),r}function I3(i){U1(i,!0)}function R3(i){U1(i,!1)}function x3(i){vk(St(i._firestore)).then((e=>oe("deleting all persistent cache indexes succeeded"))).catch((e=>Sn("deleting all persistent cache indexes failed",e)))}function U1(i,e){_k(St(i._firestore),e).then((t=>oe(`setting persistent cache index auto creation isEnabled=${e} succeeded`))).catch((t=>Sn(`setting persistent cache index auto creation isEnabled=${e} failed`,t)))}const mw=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C3(i){var e;const t=(e=St(ke(i.firestore,ht))._onlineComponents)===null||e===void 0?void 0:e.datastore.serializer;return t===void 0?null:Im(t,bn(i._query)).Vt}function D3(i,e){var t;const r=uI(e,((l,u)=>new HI(u,l.aggregateType,l._internalFieldPath))),a=(t=St(ke(i.firestore,ht))._onlineComponents)===null||t===void 0?void 0:t.datastore.serializer;return a===void 0?null:tR(a,xI(i._query),r,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return Ov.instance.onExistenceFilterMismatch(e)}}class Ov{constructor(){this.Fc=new Map}static get instance(){return yd||(yd=new Ov,(function(t){if(Yd)throw new Error("a TestingHooksSpi instance is already set");Yd=t})(yd)),yd}ct(e){this.Fc.forEach((t=>t(e)))}onExistenceFilterMismatch(e){const t=Symbol(),r=this.Fc;return r.set(t,e),()=>r.delete(t)}}let yd=null;(function(e,t=!0){(function(a){lu=a})(au),Ol(new so("firestore",((r,{instanceIdentifier:a,options:l})=>{const u=r.getProvider("app").getImmediate(),f=new ht(new rP(r.getProvider("auth-internal")),new oP(u,r.getProvider("app-check-internal")),(function(g,y){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new se(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zs(g.options.projectId,y)})(u,a),u);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Xs(Gb,Kb,e),Xs(Gb,Kb,"esm2017")})();const V3=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:xv,AggregateField:tu,AggregateQuerySnapshot:c1,Bytes:Un,CACHE_SIZE_UNLIMITED:bk,CollectionReference:Ii,DocumentReference:rt,DocumentSnapshot:Fn,FieldPath:da,FieldValue:ma,Firestore:ht,FirestoreError:se,GeoPoint:Ri,LoadBundleTask:s1,PersistentCacheIndexManager:L1,Query:$t,QueryCompositeFilterConstraint:Ao,QueryConstraint:yu,QueryDocumentSnapshot:Gc,QueryEndAtConstraint:Nh,QueryFieldFilterConstraint:_u,QueryLimitConstraint:Ch,QueryOrderByConstraint:zm,QuerySnapshot:qn,QueryStartAtConstraint:Dh,SnapshotMetadata:Cr,Timestamp:et,Transaction:N1,VectorValue:pi,WriteBatch:D1,_AutoId:mm,_ByteString:It,_DatabaseId:Zs,_DocumentKey:fe,_EmptyAppCheckTokenProvider:lP,_EmptyAuthCredentialsProvider:FA,_FieldPath:_t,_TestingHooks:N3,_cast:ke,_debugAssert:nP,_internalAggregationQueryToProtoRunAggregationQueryRequest:D3,_internalQueryToProtoQueryTarget:C3,_isBase64Available:HP,_logWarn:Sn,_validateIsNotUsedTogether:HA,addDoc:Nv,aggregateFieldEqual:$k,aggregateQuerySnapshotEqual:Xk,and:Uk,arrayRemove:M1,arrayUnion:P1,average:Qk,clearIndexedDbPersistence:Ik,collection:eu,collectionGroup:Ek,connectFirestoreEmulator:r1,count:w1,deleteAllPersistentCacheIndexes:x3,deleteDoc:R1,deleteField:O1,disableNetwork:Ck,disablePersistentCacheIndexAutoCreation:R3,doc:At,documentId:Nk,documentSnapshotFromJSON:Yk,enableIndexedDbPersistence:wk,enableMultiTabIndexedDbPersistence:Ak,enableNetwork:xk,enablePersistentCacheIndexAutoCreation:I3,endAt:Gk,endBefore:Hk,ensureFirestoreConfigured:St,executeWrite:vu,getAggregateFromServer:x1,getCountFromServer:o3,getDoc:e3,getDocFromCache:t3,getDocFromServer:n3,getDocs:Dv,getDocsFromCache:i3,getDocsFromServer:r3,getFirestore:a1,getPersistentCacheIndexManager:A3,increment:b3,initializeFirestore:Sk,limit:Bk,limitToLast:jk,loadBundle:i_,memoryEagerGarbageCollector:f3,memoryLocalCache:m3,memoryLruGarbageCollector:d3,namedQuery:u1,onSnapshot:nu,onSnapshotResume:s3,onSnapshotsInSync:a3,or:Lk,orderBy:zk,persistentLocalCache:p3,persistentMultipleTabManager:_3,persistentSingleTabManager:C1,query:v1,queryEqual:vv,querySnapshotFromJSON:Wk,refEqual:Tk,runTransaction:V1,serverTimestamp:T3,setDoc:I1,setIndexConfiguration:w3,setLogLevel:tP,snapshotEqual:Zk,startAfter:qk,startAt:Fk,sum:Kk,terminate:Dk,updateDoc:Kt,vector:S3,waitForPendingWrites:Rk,where:E1,writeBatch:k1},Symbol.toStringTag,{value:"Module"}));var O3="firebase",P3="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Xs(O3,P3,"app");const M3={apiKey:"AIzaSyBzcgOL0zca1DdWy8FvO8oteY3Y4Q3JpjM",authDomain:"habbi0.firebaseapp.com",projectId:"habbi0",storageBucket:"habbi0.firebasestorage.app",messagingSenderId:"1004937043158",appId:"1:1004937043158:web:32fc24b06b58927052bd77"},z1=Yw(M3),jm=ZO(z1),ut=a1(z1),B1=j.createContext(null);function k3({children:i}){const[e,t]=j.useState(null),[r,a]=j.useState(null),[l,u]=j.useState(!0);return j.useEffect(()=>jV(jm,m=>{t(m),m||(a(null),u(!1))}),[]),j.useEffect(()=>e?nu(At(ut,"users",e.uid),m=>{a(m.exists()?{id:m.id,...m.data()}:null),u(!1)}):void 0,[e]),A.jsx(B1.Provider,{value:{user:e,profile:r,loading:l},children:i})}const Kr=()=>j.useContext(B1),dn=[];for(let i=0;i<256;++i)dn.push((i+256).toString(16).slice(1));function L3(i,e=0){return(dn[i[e+0]]+dn[i[e+1]]+dn[i[e+2]]+dn[i[e+3]]+"-"+dn[i[e+4]]+dn[i[e+5]]+"-"+dn[i[e+6]]+dn[i[e+7]]+"-"+dn[i[e+8]]+dn[i[e+9]]+"-"+dn[i[e+10]]+dn[i[e+11]]+dn[i[e+12]]+dn[i[e+13]]+dn[i[e+14]]+dn[i[e+15]]).toLowerCase()}let py;const U3=new Uint8Array(16);function z3(){if(!py){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");py=crypto.getRandomValues.bind(crypto)}return py(U3)}const B3=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),pw={randomUUID:B3};function j3(i,e,t){var a;if(pw.randomUUID&&!i)return pw.randomUUID();i=i||{};const r=i.random??((a=i.rng)==null?void 0:a.call(i))??z3();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,L3(r)}const F3=[[3,0,"#39ff14"],[4,0,"#39ff14"],[2,1,"#39ff14"],[3,1,"#2bcc0e"],[4,1,"#2bcc0e"],[5,1,"#39ff14"],[1,2,"#39ff14"],[2,2,"#2bcc0e"],[3,2,"#006600"],[4,2,"#006600"],[5,2,"#2bcc0e"],[6,2,"#39ff14"],[1,3,"#39ff14"],[2,3,"#2bcc0e"],[3,3,"#ffffff"],[4,3,"#2bcc0e"],[5,3,"#ffffff"],[6,3,"#39ff14"],[1,4,"#39ff14"],[2,4,"#2bcc0e"],[3,4,"#2bcc0e"],[4,4,"#2bcc0e"],[5,4,"#2bcc0e"],[6,4,"#39ff14"],[1,5,"#2bcc0e"],[2,5,"#006600"],[3,5,"#2bcc0e"],[4,5,"#2bcc0e"],[5,5,"#006600"],[6,5,"#2bcc0e"],[0,6,"#39ff14"],[1,6,"#2bcc0e"],[2,6,"#2bcc0e"],[3,6,"#2bcc0e"],[4,6,"#2bcc0e"],[5,6,"#2bcc0e"],[6,6,"#2bcc0e"],[7,6,"#39ff14"],[0,7,"#006600"],[1,7,"#006600"],[2,7,"#006600"],[3,7,"#006600"],[4,7,"#006600"],[5,7,"#006600"],[6,7,"#006600"],[7,7,"#006600"]],q3=[[3,0,"#f5f5dc"],[4,0,"#f5f5dc"],[2,1,"#f5f5dc"],[3,1,"#d4a574"],[4,1,"#d4a574"],[5,1,"#f5f5dc"],[2,2,"#8b0000"],[3,2,"#ffffff"],[4,2,"#ffffff"],[5,2,"#8b0000"],[3,3,"#d4a574"],[4,3,"#d4a574"],[2,4,"#f5f5dc"],[3,4,"#f5f5dc"],[4,4,"#f5f5dc"],[5,4,"#f5f5dc"],[1,5,"#d4a574"],[2,5,"#f5f5dc"],[3,5,"#8b0000"],[4,5,"#8b0000"],[5,5,"#f5f5dc"],[6,5,"#d4a574"],[2,6,"#f5f5dc"],[3,6,"#f5f5dc"],[4,6,"#f5f5dc"],[5,6,"#f5f5dc"],[2,7,"#d4a574"],[3,7,"#d4a574"],[4,7,"#d4a574"],[5,7,"#d4a574"],[1,8,"#f5f5dc"],[2,8,"#f5f5dc"],[5,8,"#f5f5dc"],[6,8,"#f5f5dc"]],H3=[[3,0,"#4a4a8a"],[4,0,"#4a4a8a"],[2,1,"#2d1b69"],[3,1,"#333366"],[4,1,"#333366"],[5,1,"#2d1b69"],[2,2,"#ff4444"],[3,2,"#2d1b69"],[4,2,"#2d1b69"],[5,2,"#ff4444"],[2,3,"#2d1b69"],[3,3,"#1a0a3e"],[4,3,"#1a0a3e"],[5,3,"#2d1b69"],[1,4,"#4a4a8a"],[2,4,"#2d1b69"],[3,4,"#2d1b69"],[4,4,"#2d1b69"],[5,4,"#2d1b69"],[6,4,"#4a4a8a"],[0,5,"#888888"],[1,5,"#2d1b69"],[2,5,"#333366"],[3,5,"#ff4444"],[4,5,"#ff4444"],[5,5,"#333366"],[6,5,"#2d1b69"],[7,5,"#888888"],[2,6,"#1a0a3e"],[3,6,"#2d1b69"],[4,6,"#2d1b69"],[5,6,"#1a0a3e"],[2,7,"#2d1b69"],[3,7,"#2d1b69"],[4,7,"#2d1b69"],[5,7,"#2d1b69"],[1,8,"#1a0a3e"],[2,8,"#1a0a3e"],[5,8,"#1a0a3e"],[6,8,"#1a0a3e"]],G3=[[1,0,"#ff6600"],[6,0,"#ff6600"],[1,1,"#cc3300"],[2,1,"#ff6600"],[5,1,"#ff6600"],[6,1,"#cc3300"],[2,2,"#ff6600"],[3,2,"#ffcc00"],[4,2,"#ffcc00"],[5,2,"#ff6600"],[1,3,"#cc3300"],[2,3,"#ffcc00"],[3,3,"#ffffff"],[4,3,"#ffffff"],[5,3,"#ffcc00"],[6,3,"#cc3300"],[2,4,"#ff6600"],[3,4,"#cc3300"],[4,4,"#cc3300"],[5,4,"#ff6600"],[0,5,"#cc3300"],[1,5,"#ff6600"],[2,5,"#ff6600"],[3,5,"#ffcc00"],[4,5,"#ffcc00"],[5,5,"#ff6600"],[6,5,"#ff6600"],[7,5,"#cc3300"],[1,6,"#cc3300"],[2,6,"#ff6600"],[3,6,"#ff6600"],[4,6,"#ff6600"],[5,6,"#ff6600"],[6,6,"#cc3300"],[2,7,"#cc3300"],[3,7,"#ff6600"],[4,7,"#ff6600"],[5,7,"#cc3300"],[1,8,"#cc3300"],[2,8,"#993300"],[5,8,"#993300"],[6,8,"#cc3300"]],K3=[[3,0,"#9900ff"],[4,0,"#9900ff"],[2,1,"#4a0080"],[3,1,"#9900ff"],[4,1,"#9900ff"],[5,1,"#4a0080"],[2,2,"#00ffcc"],[3,2,"#4a0080"],[4,2,"#4a0080"],[5,2,"#00ffcc"],[2,3,"#4a0080"],[3,3,"#9900ff"],[4,3,"#9900ff"],[5,3,"#4a0080"],[1,4,"#9900ff"],[2,4,"#4a0080"],[3,4,"#00ffcc"],[4,4,"#00ffcc"],[5,4,"#4a0080"],[6,4,"#9900ff"],[0,5,"#4a0080"],[1,5,"#9900ff"],[2,5,"#9900ff"],[3,5,"#4a0080"],[4,5,"#4a0080"],[5,5,"#9900ff"],[6,5,"#9900ff"],[7,5,"#4a0080"],[1,6,"#4a0080"],[2,6,"#9900ff"],[3,6,"#9900ff"],[4,6,"#9900ff"],[5,6,"#9900ff"],[6,6,"#4a0080"],[2,7,"#4a0080"],[3,7,"#4a0080"],[4,7,"#4a0080"],[5,7,"#4a0080"],[1,8,"#9900ff"],[2,8,"#4a0080"],[5,8,"#4a0080"],[6,8,"#9900ff"]],Q3=[[2,0,"#0a0a2e"],[3,0,"#ff00ff"],[4,0,"#ff00ff"],[5,0,"#0a0a2e"],[1,1,"#0a0a2e"],[2,1,"#000033"],[3,1,"#0a0a2e"],[4,1,"#0a0a2e"],[5,1,"#000033"],[6,1,"#0a0a2e"],[1,2,"#ff00ff"],[2,2,"#ffffff"],[3,2,"#000033"],[4,2,"#000033"],[5,2,"#ffffff"],[6,2,"#ff00ff"],[1,3,"#0a0a2e"],[2,3,"#000033"],[3,3,"#0a0a2e"],[4,3,"#0a0a2e"],[5,3,"#000033"],[6,3,"#0a0a2e"],[0,4,"#000033"],[1,4,"#0a0a2e"],[2,4,"#0a0a2e"],[3,4,"#ff00ff"],[4,4,"#ff00ff"],[5,4,"#0a0a2e"],[6,4,"#0a0a2e"],[7,4,"#000033"],[0,5,"#0a0a2e"],[1,5,"#000033"],[2,5,"#0a0a2e"],[3,5,"#000033"],[4,5,"#000033"],[5,5,"#0a0a2e"],[6,5,"#000033"],[7,5,"#0a0a2e"],[1,6,"#0a0a2e"],[2,6,"#000033"],[3,6,"#0a0a2e"],[4,6,"#0a0a2e"],[5,6,"#000033"],[6,6,"#0a0a2e"],[1,7,"#000033"],[2,7,"#0a0a2e"],[5,7,"#0a0a2e"],[6,7,"#000033"],[0,8,"#ff00ff"],[1,8,"#0a0a2e"],[6,8,"#0a0a2e"],[7,8,"#ff00ff"]],$3=[[1,0,"#ffff00"],[3,0,"#ff0000"],[4,0,"#ff0000"],[6,0,"#ffff00"],[0,1,"#ff0000"],[1,1,"#ffff00"],[2,1,"#ff0000"],[3,1,"#000000"],[4,1,"#000000"],[5,1,"#ff0000"],[6,1,"#ffff00"],[7,1,"#ff0000"],[1,2,"#ff0000"],[2,2,"#ffffff"],[3,2,"#ff0000"],[4,2,"#ff0000"],[5,2,"#ffffff"],[6,2,"#ff0000"],[1,3,"#000000"],[2,3,"#ff0000"],[3,3,"#ffff00"],[4,3,"#ffff00"],[5,3,"#ff0000"],[6,3,"#000000"],[0,4,"#ff0000"],[1,4,"#ff0000"],[2,4,"#000000"],[3,4,"#ff0000"],[4,4,"#ff0000"],[5,4,"#000000"],[6,4,"#ff0000"],[7,4,"#ff0000"],[0,5,"#ffff00"],[1,5,"#000000"],[2,5,"#ff0000"],[3,5,"#000000"],[4,5,"#000000"],[5,5,"#ff0000"],[6,5,"#000000"],[7,5,"#ffff00"],[1,6,"#ff0000"],[2,6,"#ff0000"],[3,6,"#ff0000"],[4,6,"#ff0000"],[5,6,"#ff0000"],[6,6,"#ff0000"],[1,7,"#000000"],[2,7,"#ff0000"],[3,7,"#000000"],[4,7,"#000000"],[5,7,"#ff0000"],[6,7,"#000000"],[0,8,"#ffff00"],[1,8,"#ff0000"],[2,8,"#000000"],[5,8,"#000000"],[6,8,"#ff0000"],[7,8,"#ffff00"]],Dr={slime_king:{key:"slime_king",name:"Slime King",level:1,maxHp:100,attackPower:5,rewards:{xp:30,gold:15},emoji:"",description:"A wobbling mass of green ooze.",pixels:F3,glowColor:"#39ff14"},skeleton_lord:{key:"skeleton_lord",name:"Skeleton Lord",level:2,maxHp:200,attackPower:8,rewards:{xp:60,gold:30},emoji:"",description:"Bones rattle with each step.",pixels:q3,glowColor:"#f5f5dc"},shadow_knight:{key:"shadow_knight",name:"Shadow Knight",level:3,maxHp:350,attackPower:12,rewards:{xp:100,gold:50},emoji:"",description:"Dark armor gleams with malice.",pixels:H3,glowColor:"#ff4444"},fire_wyrm:{key:"fire_wyrm",name:"Fire Wyrm",level:4,maxHp:500,attackPower:16,rewards:{xp:150,gold:75},emoji:"",description:"Scales burn with eternal flame.",pixels:G3,glowColor:"#ff6600"},lich_emperor:{key:"lich_emperor",name:"Lich Emperor",level:5,maxHp:750,attackPower:20,rewards:{xp:200,gold:100},emoji:"",description:"Undead sorcerer of immense power.",pixels:K3,glowColor:"#9900ff"},void_titan:{key:"void_titan",name:"Void Titan",level:6,maxHp:1e3,attackPower:25,rewards:{xp:300,gold:150},emoji:"",description:"Reality warps around its form.",pixels:Q3,glowColor:"#ff00ff"},chaos_god:{key:"chaos_god",name:"Chaos God",level:7,maxHp:1500,attackPower:30,rewards:{xp:500,gold:250},emoji:"",description:"The final challenge. All creation trembles.",pixels:$3,glowColor:"#ffff00"}},am=["slime_king","skeleton_lord","shadow_knight","fire_wyrm","lich_emperor","void_titan","chaos_god"];function X3(){return j3().replace(/-/g,"").substring(0,8).toUpperCase()}function Y3(i){const[e,t]=j.useState(null),[r,a]=j.useState(!0);return j.useEffect(()=>{if(!i){t(null),a(!1);return}return nu(At(ut,"parties",i),y=>{t(y.exists()?{id:y.id,...y.data()}:null),a(!1)})},[i]),{party:e,loading:r,createParty:async(g,y,v,b,I,O)=>{const M=X3(),V=await Nv(eu(ut,"parties"),{name:v,inviteCode:M,leaderId:g,memberIds:[g],members:{[g]:{displayName:y,level:b,hp:I,maxHp:O}},activeBoss:null,bossLevel:0,damageFeed:[],createdAt:new Date().toISOString()});return await Kt(At(ut,"users",g),{partyId:V.id}),V.id},joinParty:async(g,y,v,b,I,O)=>{const M=v1(eu(ut,"parties"),E1("inviteCode","==",O.toUpperCase())),V=await Dv(M);if(V.empty)throw new Error("Invalid invite code");const $=V.docs[0];if($.data().memberIds.includes(g))throw new Error("Already in this party");return await Kt($.ref,{memberIds:P1(g),[`members.${g}`]:{displayName:y,level:v,hp:b,maxHp:I}}),await Kt(At(ut,"users",g),{partyId:$.id}),$.id},leaveParty:async g=>{if(!e)return;const y=At(ut,"parties",e.id);await Kt(y,{memberIds:M1(g),[`members.${g}`]:O1()}),await Kt(At(ut,"users",g),{partyId:null})},startBoss:async()=>{if(!e)return;const g=Math.min(e.bossLevel,am.length-1),y=am[g],v=Dr[y],b=At(ut,"parties",e.id);await Kt(b,{activeBoss:{bossKey:v.key,name:v.name,currentHp:v.maxHp,maxHp:v.maxHp,attackPower:v.attackPower,level:v.level,rewards:v.rewards},damageFeed:[]})}}}const j1=j.createContext(null);function W3({children:i}){const{profile:e}=Kr(),t=Y3(e==null?void 0:e.partyId);return A.jsx(j1.Provider,{value:t,children:i})}const Vh=()=>j.useContext(j1),k={bgDarkest:"#0a0a1a",bgDark:"#1a1a2e",bgMedium:"#16213e",bgLight:"#0f3460",neonGreen:"#39ff14",neonCyan:"#00ffcc",neonBlue:"#00bfff",fireOrange:"#ff6600",fireRed:"#ff4444",gold:"#ffd700",textPrimary:"#e0e0e0",textSecondary:"#888888",textMuted:"#555555",border:"#333366",borderLight:"#4a4a8a"},le={pixel:'"Press Start 2P", cursive'},P={fontXs:8,fontSm:10,fontMd:12,fontLg:16,fontXl:20,fontTitle:24,spacing:8,borderWidth:3},Io={border:`${P.borderWidth}px solid ${k.border}`,boxShadow:`inset -${P.borderWidth}px -${P.borderWidth}px 0 0 ${k.bgDarkest}, inset ${P.borderWidth}px ${P.borderWidth}px 0 0 ${k.borderLight}`},J3={backgroundColor:k.bgDark,padding:P.spacing*2,...Io},Z3={fontFamily:le.pixel,fontSize:P.fontSm,padding:`${P.spacing}px ${P.spacing*2}px`,backgroundColor:k.bgMedium,color:k.neonGreen,cursor:"pointer",border:`${P.borderWidth}px solid ${k.border}`,boxShadow:`inset -${P.borderWidth}px -${P.borderWidth}px 0 0 ${k.bgDarkest}, inset ${P.borderWidth}px ${P.borderWidth}px 0 0 ${k.borderLight}`,transition:"background-color 0.1s"},e6={fontFamily:le.pixel,fontSize:P.fontSm,padding:`${P.spacing}px ${P.spacing*1.5}px`,backgroundColor:k.bgDarkest,color:k.textPrimary,border:`${P.borderWidth}px solid ${k.border}`,boxShadow:`inset ${P.borderWidth}px ${P.borderWidth}px 0 0 ${k.bgDarkest}`,outline:"none",width:"100%"},t6=[{path:"/dashboard",label:"QUESTS",icon:""},{path:"/boss",label:"BOSS",icon:""},{path:"/party",label:"PARTY",icon:""}];function n6(){const i=Br(),e=su();return A.jsx("nav",{style:{position:"fixed",bottom:0,left:0,right:0,backgroundColor:k.bgDark,display:"flex",zIndex:50,...Io,borderLeft:"none",borderRight:"none",borderBottom:"none"},children:t6.map(t=>{const r=i.pathname===t.path;return A.jsxs("button",{onClick:()=>e(t.path),style:{flex:1,padding:`${P.spacing}px 0`,background:r?k.bgMedium:"transparent",border:"none",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[A.jsx("span",{style:{fontSize:20},children:t.icon}),A.jsx("span",{style:{fontFamily:le.pixel,fontSize:7,color:r?k.neonGreen:k.textMuted,letterSpacing:1},children:t.label})]},t.path)})})}function i6(){return A.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:9999,background:`repeating-linear-gradient(
        0deg,
        rgba(0, 0, 0, 0.12) 0px,
        rgba(0, 0, 0, 0.12) 1px,
        transparent 1px,
        transparent 3px
      )`,boxShadow:"inset 0 0 120px rgba(0,0,0,0.4)"}})}function F1({current:i,max:e,height:t=16,showLabel:r=!0,label:a="HP"}){const u=Math.max(0,i/e),f=Math.ceil(u*20),m=u>.5?k.neonGreen:u>.25?k.gold:k.fireRed;return A.jsxs("div",{children:[r&&A.jsxs("div",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.textSecondary,marginBottom:2,display:"flex",justifyContent:"space-between"},children:[A.jsx("span",{children:a}),A.jsxs("span",{style:{color:m},children:[i,"/",e]})]}),A.jsx("div",{style:{display:"flex",gap:1},children:Array.from({length:20}).map((g,y)=>A.jsx("div",{style:{flex:1,height:t,backgroundColor:y<f?m:"#222",border:"1px solid #111",transition:"background-color 0.3s"}},y))})]})}function r6({label:i,value:e,max:t,icon:r,color:a=k.neonCyan}){const l=t?Math.min(100,e/t*100):0;return A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:P.spacing},children:[r&&A.jsx("span",{style:{fontSize:P.fontLg},children:r}),A.jsxs("div",{style:{flex:1},children:[A.jsxs("div",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.textSecondary,marginBottom:2,display:"flex",justifyContent:"space-between"},children:[A.jsx("span",{children:i}),A.jsxs("span",{style:{color:a},children:[e,t?`/${t}`:""]})]}),t&&A.jsx("div",{style:{height:8,backgroundColor:"#222",border:"1px solid #111"},children:A.jsx("div",{style:{height:"100%",width:`${l}%`,backgroundColor:a,transition:"width 0.3s"}})})]})]})}function gy({children:i}){const{profile:e}=Kr();return A.jsxs("div",{style:{minHeight:"100vh",backgroundColor:k.bgDarkest,paddingBottom:70},children:[A.jsx(i6,{}),e&&A.jsxs("div",{style:{backgroundColor:k.bgDark,padding:`${P.spacing}px ${P.spacing*2}px`,borderBottom:`${P.borderWidth}px solid ${k.border}`,display:"flex",alignItems:"center",gap:P.spacing*2},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:P.spacing},children:[A.jsx("div",{style:{width:36,height:36,backgroundColor:k.bgMedium,border:`2px solid ${k.neonGreen}`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:18},children:""}),A.jsxs("div",{children:[A.jsxs("div",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.neonGreen},children:["LV.",e.level]}),A.jsx("div",{style:{fontFamily:le.pixel,fontSize:P.fontSm,color:k.textPrimary},children:e.displayName})]})]}),A.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:4},children:[A.jsx(F1,{current:e.hp,max:e.maxHp,height:10,showLabel:!1}),A.jsx(r6,{label:"",value:e.xp,max:100*e.level,color:k.gold})]}),A.jsxs("div",{style:{fontFamily:le.pixel,fontSize:P.fontSm,color:k.gold,display:"flex",alignItems:"center",gap:4},children:[A.jsx("span",{children:""}),e.gold]})]}),i,A.jsx(n6,{})]})}function Dn({children:i,onClick:e,variant:t="default",disabled:r,style:a}){const[l,u]=j.useState(!1),f={default:{color:k.neonGreen,bg:k.bgMedium,hoverBg:k.bgLight},danger:{color:k.fireRed,bg:k.bgMedium,hoverBg:"#3d1111"},gold:{color:k.bgDarkest,bg:k.gold,hoverBg:"#ffed4a"},ghost:{color:k.textSecondary,bg:"transparent",hoverBg:k.bgDark}},m=f[t]||f.default;return A.jsx("button",{onClick:e,disabled:r,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),style:{...Z3,color:m.color,backgroundColor:l&&!r?m.hoverBg:m.bg,opacity:r?.4:1,cursor:r?"not-allowed":"pointer",...a},children:i})}function Or({value:i,onChange:e,placeholder:t,type:r="text",style:a}){const[l,u]=j.useState(!1);return A.jsx("input",{type:r,value:i,onChange:e,placeholder:t,onFocus:()=>u(!0),onBlur:()=>u(!1),style:{...e6,borderColor:l?k.neonGreen:k.border,...a}})}function zr({children:i,style:e}){return A.jsx("div",{style:{...J3,...e},children:i})}function s6(){const[i,e]=j.useState(""),[t,r]=j.useState(""),[a,l]=j.useState(""),[u,f]=j.useState(!1),m=su(),g=async y=>{y.preventDefault(),l(""),f(!0);try{await UV(jm,i,t),m("/dashboard")}catch(v){l(v.code==="auth/invalid-credential"?"Wrong email or password":"Login failed. Try again.")}f(!1)};return A.jsxs("div",{style:{minHeight:"100vh",backgroundColor:k.bgDarkest,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:P.spacing*2},children:[A.jsx("div",{style:{fontSize:48,marginBottom:P.spacing*2},children:""}),A.jsx("h1",{style:{fontFamily:le.pixel,fontSize:P.fontXl,color:k.gold,marginBottom:P.spacing,textAlign:"center"},children:"QUEST HABITS"}),A.jsx("p",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.textMuted,marginBottom:P.spacing*4,letterSpacing:2},children:"SLAY YOUR HABITS"}),A.jsxs(zr,{style:{maxWidth:380,width:"100%"},children:[A.jsxs("form",{onSubmit:g,style:{display:"flex",flexDirection:"column",gap:P.spacing*2},children:[A.jsxs("div",{children:[A.jsx("label",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.textSecondary,display:"block",marginBottom:4},children:"EMAIL"}),A.jsx(Or,{type:"email",value:i,onChange:y=>e(y.target.value),placeholder:"hero@quest.com"})]}),A.jsxs("div",{children:[A.jsx("label",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.textSecondary,display:"block",marginBottom:4},children:"PASSWORD"}),A.jsx(Or,{type:"password",value:t,onChange:y=>r(y.target.value),placeholder:"********"})]}),a&&A.jsx("div",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.fireRed,textAlign:"center"},children:a}),A.jsx(Dn,{variant:"gold",disabled:u,style:{width:"100%",padding:`${P.spacing*1.5}px 0`},children:u?"ENTERING...":"ENTER DUNGEON"})]}),A.jsxs("div",{style:{marginTop:P.spacing*2,textAlign:"center",fontFamily:le.pixel,fontSize:P.fontXs},children:[A.jsx("span",{style:{color:k.textMuted},children:"New hero? "}),A.jsx(um,{to:"/register",style:{color:k.neonCyan,textDecoration:"none"},children:"CREATE CHARACTER"})]})]})]})}function a6(){const[i,e]=j.useState(""),[t,r]=j.useState(""),[a,l]=j.useState(""),[u,f]=j.useState(""),[m,g]=j.useState(!1),y=su(),v=async b=>{if(b.preventDefault(),f(""),i.trim().length<2){f("Name must be 2+ characters");return}if(a.length<6){f("Password must be 6+ characters");return}g(!0);try{const I=await LV(jm,t,a);await I1(At(ut,"users",I.user.uid),{displayName:i.trim(),email:t,hp:50,maxHp:50,xp:0,level:1,gold:0,partyId:null,lastCron:new Date().toISOString(),createdAt:new Date().toISOString()}),y("/dashboard")}catch(I){I.code==="auth/email-already-in-use"?f("Email already in use"):I.code==="auth/weak-password"?f("Password too weak"):f("Registration failed")}g(!1)};return A.jsxs("div",{style:{minHeight:"100vh",backgroundColor:k.bgDarkest,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:P.spacing*2},children:[A.jsx("div",{style:{fontSize:48,marginBottom:P.spacing*2},children:""}),A.jsx("h1",{style:{fontFamily:le.pixel,fontSize:P.fontLg,color:k.gold,marginBottom:P.spacing,textAlign:"center"},children:"CREATE CHARACTER"}),A.jsx("p",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.textMuted,marginBottom:P.spacing*4,letterSpacing:2},children:"BEGIN YOUR QUEST"}),A.jsxs(zr,{style:{maxWidth:380,width:"100%"},children:[A.jsxs("form",{onSubmit:v,style:{display:"flex",flexDirection:"column",gap:P.spacing*2},children:[A.jsxs("div",{children:[A.jsx("label",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.textSecondary,display:"block",marginBottom:4},children:"HERO NAME"}),A.jsx(Or,{value:i,onChange:b=>e(b.target.value),placeholder:"DragonSlayer"})]}),A.jsxs("div",{children:[A.jsx("label",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.textSecondary,display:"block",marginBottom:4},children:"EMAIL"}),A.jsx(Or,{type:"email",value:t,onChange:b=>r(b.target.value),placeholder:"hero@quest.com"})]}),A.jsxs("div",{children:[A.jsx("label",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.textSecondary,display:"block",marginBottom:4},children:"PASSWORD"}),A.jsx(Or,{type:"password",value:a,onChange:b=>l(b.target.value),placeholder:"6+ characters"})]}),u&&A.jsx("div",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.fireRed,textAlign:"center"},children:u}),A.jsx(Dn,{variant:"gold",disabled:m,style:{width:"100%",padding:`${P.spacing*1.5}px 0`},children:m?"FORGING...":"FORGE CHARACTER"})]}),A.jsxs("div",{style:{marginTop:P.spacing*2,textAlign:"center",fontFamily:le.pixel,fontSize:P.fontXs},children:[A.jsx("span",{style:{color:k.textMuted},children:"Veteran? "}),A.jsx(um,{to:"/login",style:{color:k.neonCyan,textDecoration:"none"},children:"LOG IN"})]})]})]})}const q1={trivial:.5,easy:1,medium:1.5,hard:2},Vl={trivial:"#94a3b8",easy:"#39ff14",medium:"#ffd700",hard:"#ff4444"},o6={habit:2,daily:3,todo:4},l6=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function yy(i,e){const t=o6[i.type]||2,r=q1[i.difficulty]||1;let a=1;i.type==="daily"&&i.streak&&(a=Math.min(1+i.streak*.05,2));const l=1+e*.02,u=t*r*a*l;return Math.round(u*10)/10}function u6(i,e){return Math.round(i*e*.5*10)/10}function _y(i,e){const t=q1[i.difficulty]||1,r=Math.round(5*t*(1+e*.01)),a=Math.round(2*t);return{xp:r,gold:a}}function vy(i,e){const t=100*e;return i>=t?{levelsGained:1,remainingXp:i-t,newMaxHp:50+e*5}:null}function c6(){const{user:i,profile:e}=Kr(),[t,r]=j.useState({habits:[],dailies:[],todos:[]}),[a,l]=j.useState(!0);j.useEffect(()=>{if(!i)return;const b=eu(ut,"users",i.uid,"tasks");return nu(b,O=>{const M=[],V=[],$=[];O.forEach(H=>{const Q={id:H.id,...H.data()};Q.type==="habit"?M.push(Q):Q.type==="daily"?V.push(Q):Q.type==="todo"&&$.push(Q)}),r({habits:M,dailies:V,todos:$}),l(!1)})},[i]);const u=async b=>{if(!i)return;const I=eu(ut,"users",i.uid,"tasks");await Nv(I,{...b,createdAt:new Date().toISOString()})},f=async(b,I)=>{if(!i)return;const O=At(ut,"users",i.uid,"tasks",b);await Kt(O,I)};return{tasks:t,loading:a,addTask:u,updateTask:f,deleteTask:async b=>{if(!i)return;const I=At(ut,"users",i.uid,"tasks",b);await R1(I)},scoreHabit:async(b,I)=>{if(!i||!e)return null;const O={};if(I==="up"?O.counterUp=(b.counterUp||0)+1:O.counterDown=(b.counterDown||0)+1,await f(b.id,O),I==="up"){const M=yy(b,e.level),{xp:V,gold:$}=_y(b,e.level),H=At(ut,"users",i.uid),Q=e.xp+V,ue=vy(Q,e.level);return ue?await Kt(H,{xp:ue.remainingXp,gold:e.gold+$,level:e.level+1,maxHp:ue.newMaxHp,hp:ue.newMaxHp}):await Kt(H,{xp:Q,gold:e.gold+$}),{damage:M,xp:V,gold:$,levelUp:!!ue}}return null},completeDaily:async b=>{if(!i||!e||b.completed)return null;const I=(b.streak||0)+1;await f(b.id,{completed:!0,streak:I});const O=yy({...b,streak:I},e.level),{xp:M,gold:V}=_y(b,e.level),$=At(ut,"users",i.uid),H=e.xp+M,Q=vy(H,e.level);return Q?await Kt($,{xp:Q.remainingXp,gold:e.gold+V,level:e.level+1,maxHp:Q.newMaxHp,hp:Q.newMaxHp}):await Kt($,{xp:H,gold:e.gold+V}),{damage:O,xp:M,gold:V,levelUp:!!Q}},completeTodo:async b=>{if(!i||!e||b.completed)return null;await f(b.id,{completed:!0});const I=yy(b,e.level),{xp:O,gold:M}=_y(b,e.level),V=At(ut,"users",i.uid),$=e.xp+O,H=vy($,e.level);return H?await Kt(V,{xp:H.remainingXp,gold:e.gold+M,level:e.level+1,maxHp:H.newMaxHp,hp:H.newMaxHp}):await Kt(V,{xp:$,gold:e.gold+M}),{damage:I,xp:O,gold:M,levelUp:!!H}}}}function H1(i){const e=async(a,l,u,f)=>{if(!(i!=null&&i.activeBoss)||!(i!=null&&i.id))return;const m=At(ut,"parties",i.id),g=Math.max(0,i.activeBoss.currentHp-a),y={userId:u,displayName:f,damage:a,taskTitle:l.title,timestamp:new Date().toISOString(),type:"dealt"},v=[...i.damageFeed||[],y].slice(-20);return await Kt(m,{"activeBoss.currentHp":g,damageFeed:v}),g<=0&&await t(i.id),a},t=async a=>{const l=At(ut,"parties",a);await V1(ut,async u=>{const m=(await u.get(l)).data();if(!m.activeBoss||m.activeBoss.currentHp>0)return;const g=m.activeBoss.rewards;for(const y of m.memberIds){const v=At(ut,"users",y),b=await u.get(v);if(!b.exists())continue;const I=b.data();u.update(v,{xp:I.xp+g.xp,gold:I.gold+g.gold})}u.update(l,{activeBoss:null,bossLevel:m.bossLevel+1})})};return{dealDamage:e,defeatBoss:t,startNextBoss:async()=>{if(!(i!=null&&i.id))return;const a=Math.min(i.bossLevel,am.length-1),l=am[a],u=Dr[l],f=At(ut,"parties",i.id);await Kt(f,{activeBoss:{bossKey:u.key,name:u.name,currentHp:u.maxHp,maxHp:u.maxHp,attackPower:u.attackPower,level:u.level,rewards:u.rewards},damageFeed:[]})}}}const h6=[{key:"habits",label:"HABITS",icon:""},{key:"dailies",label:"DAILIES",icon:""},{key:"todos",label:"TO-DOS",icon:""}];function f6({activeTab:i,onTabChange:e}){return A.jsx("div",{style:{display:"flex",gap:2,marginBottom:P.spacing*2},children:h6.map(t=>A.jsxs("button",{onClick:()=>e(t.key),style:{flex:1,padding:`${P.spacing}px 0`,fontFamily:le.pixel,fontSize:P.fontXs,border:`${P.borderWidth}px solid ${i===t.key?k.neonGreen:k.border}`,backgroundColor:i===t.key?"rgba(57, 255, 20, 0.1)":k.bgDark,color:i===t.key?k.neonGreen:k.textMuted,cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[A.jsx("span",{style:{fontSize:16},children:t.icon}),t.label]},t.key))})}function d6({task:i,onScore:e,onEdit:t}){const[r,a]=j.useState(null),l=async u=>{a(u),await e(i,u),setTimeout(()=>a(null),300)};return A.jsxs("div",{style:{...Io,backgroundColor:k.bgDark,padding:P.spacing,display:"flex",alignItems:"center",gap:P.spacing,animation:r?"taskComplete 0.3s ease":void 0},children:[i.positive!==!1&&A.jsx("button",{onClick:()=>l("up"),style:{width:36,height:36,backgroundColor:"rgba(57, 255, 20, 0.15)",border:`2px solid ${k.neonGreen}`,color:k.neonGreen,fontFamily:le.pixel,fontSize:P.fontLg,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"}),A.jsxs("div",{style:{flex:1,cursor:"pointer"},onClick:()=>t(i),children:[A.jsx("div",{style:{fontFamily:le.pixel,fontSize:P.fontSm,color:k.textPrimary,marginBottom:2},children:i.title}),A.jsxs("div",{style:{display:"flex",gap:P.spacing,alignItems:"center"},children:[A.jsx("span",{style:{fontFamily:le.pixel,fontSize:7,color:Vl[i.difficulty],textTransform:"uppercase"},children:i.difficulty}),(i.counterUp>0||i.counterDown>0)&&A.jsxs("span",{style:{fontFamily:le.pixel,fontSize:7,color:k.textMuted},children:["+",i.counterUp||0," / -",i.counterDown||0]})]})]}),i.negative!==!1&&A.jsx("button",{onClick:()=>l("down"),style:{width:36,height:36,backgroundColor:"rgba(255, 68, 68, 0.15)",border:`2px solid ${k.fireRed}`,color:k.fireRed,fontFamily:le.pixel,fontSize:P.fontLg,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"-"})]})}function m6({task:i,onComplete:e,onEdit:t}){const[r,a]=j.useState(!1),l=async()=>{i.completed||(a(!0),await e(i),setTimeout(()=>a(!1),300))};return A.jsxs("div",{style:{...Io,backgroundColor:i.completed?"rgba(57, 255, 20, 0.05)":k.bgDark,padding:P.spacing,display:"flex",alignItems:"center",gap:P.spacing,opacity:i.completed?.6:1,animation:r?"taskComplete 0.3s ease":void 0},children:[A.jsx("button",{onClick:l,style:{width:28,height:28,backgroundColor:i.completed?k.neonGreen:"transparent",border:`2px solid ${i.completed?k.neonGreen:k.border}`,color:i.completed?k.bgDarkest:"transparent",fontFamily:le.pixel,fontSize:P.fontSm,cursor:i.completed?"default":"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:i.completed?"":""}),A.jsxs("div",{style:{flex:1,cursor:"pointer"},onClick:()=>t(i),children:[A.jsx("div",{style:{fontFamily:le.pixel,fontSize:P.fontSm,color:k.textPrimary,textDecoration:i.completed?"line-through":"none",marginBottom:2},children:i.title}),A.jsx("div",{style:{display:"flex",gap:P.spacing,alignItems:"center"},children:A.jsx("span",{style:{fontFamily:le.pixel,fontSize:7,color:Vl[i.difficulty],textTransform:"uppercase"},children:i.difficulty})})]}),i.streak>0&&A.jsxs("div",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.fireOrange,display:"flex",alignItems:"center",gap:2},children:[" ",i.streak]})]})}function p6({task:i,onComplete:e,onDelete:t,onEdit:r}){const[a,l]=j.useState(!1),u=async()=>{i.completed||(l(!0),await e(i),setTimeout(()=>l(!1),300))};return A.jsxs("div",{style:{...Io,backgroundColor:i.completed?"rgba(57, 255, 20, 0.05)":k.bgDark,padding:P.spacing,display:"flex",alignItems:"center",gap:P.spacing,opacity:i.completed?.6:1,animation:a?"taskComplete 0.3s ease":void 0},children:[A.jsx("button",{onClick:u,style:{width:28,height:28,backgroundColor:i.completed?k.neonGreen:"transparent",border:`2px solid ${i.completed?k.neonGreen:k.border}`,color:i.completed?k.bgDarkest:"transparent",fontFamily:le.pixel,fontSize:P.fontSm,cursor:i.completed?"default":"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:i.completed?"":""}),A.jsxs("div",{style:{flex:1,cursor:"pointer"},onClick:()=>r(i),children:[A.jsx("div",{style:{fontFamily:le.pixel,fontSize:P.fontSm,color:k.textPrimary,textDecoration:i.completed?"line-through":"none",marginBottom:2},children:i.title}),A.jsxs("div",{style:{display:"flex",gap:P.spacing,alignItems:"center"},children:[A.jsx("span",{style:{fontFamily:le.pixel,fontSize:7,color:Vl[i.difficulty],textTransform:"uppercase"},children:i.difficulty}),i.dueDate&&A.jsxs("span",{style:{fontFamily:le.pixel,fontSize:7,color:k.textMuted},children:["Due: ",new Date(i.dueDate).toLocaleDateString()]})]})]}),i.completed&&A.jsx("button",{onClick:()=>t(i.id),style:{background:"none",border:"none",color:k.fireRed,cursor:"pointer",fontSize:14,padding:4},children:""})]})}function g6({tasks:i,type:e,onScore:t,onComplete:r,onDelete:a,onEdit:l}){return i.length===0?A.jsxs("div",{style:{textAlign:"center",padding:P.spacing*4,fontFamily:le.pixel,fontSize:P.fontXs,color:k.textMuted},children:["No ",e," yet. Create one!"]}):A.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4},children:i.map(u=>e==="habits"?A.jsx(d6,{task:u,onScore:t,onEdit:l},u.id):e==="dailies"?A.jsx(m6,{task:u,onComplete:r,onEdit:l},u.id):A.jsx(p6,{task:u,onComplete:r,onDelete:a,onEdit:l},u.id))})}function G1({children:i,onClose:e,title:t}){return A.jsx("div",{onClick:e,style:{position:"fixed",inset:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:100,padding:P.spacing*2,animation:"fadeIn 0.2s ease"},children:A.jsxs("div",{onClick:r=>r.stopPropagation(),style:{backgroundColor:k.bgDark,padding:P.spacing*3,maxWidth:440,width:"100%",maxHeight:"80vh",overflowY:"auto",...Io},children:[t&&A.jsx("div",{style:{fontFamily:le.pixel,fontSize:P.fontLg,color:k.gold,marginBottom:P.spacing*2,textAlign:"center"},children:t}),i]})})}function y6({task:i,taskType:e,onSave:t,onDelete:r,onClose:a}){const l=!!i,[u,f]=j.useState(""),[m,g]=j.useState(""),[y,v]=j.useState("easy"),[b,I]=j.useState(!0),[O,M]=j.useState(!0),[V,$]=j.useState("daily"),[H,Q]=j.useState([0,1,2,3,4,5,6]);j.useEffect(()=>{i&&(f(i.title||""),g(i.notes||""),v(i.difficulty||"easy"),I(i.positive!==!1),M(i.negative!==!1),$(i.frequency||"daily"),Q(i.daysOfWeek||[0,1,2,3,4,5,6]))},[i]);const ue=(i==null?void 0:i.type)||e,ye=()=>{if(!u.trim())return;const x={type:ue,title:u.trim(),notes:m.trim(),difficulty:y};ue==="habit"&&(x.positive=b,x.negative=O,l||(x.counterUp=0,x.counterDown=0)),ue==="daily"&&(x.frequency=V,x.daysOfWeek=V==="weekly"?H:[0,1,2,3,4,5,6],l||(x.streak=0,x.completed=!1)),ue==="todo"&&(l||(x.completed=!1)),t(x,i==null?void 0:i.id)},pe=x=>{Q(R=>R.includes(x)?R.filter(D=>D!==x):[...R,x])};return A.jsx(G1,{onClose:a,title:l?"EDIT QUEST":"NEW QUEST",children:A.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:P.spacing*2},children:[A.jsxs("div",{children:[A.jsx("label",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.textSecondary,display:"block",marginBottom:4},children:"TITLE"}),A.jsx(Or,{value:u,onChange:x=>f(x.target.value),placeholder:"Enter quest name..."})]}),A.jsxs("div",{children:[A.jsx("label",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.textSecondary,display:"block",marginBottom:4},children:"NOTES"}),A.jsx(Or,{value:m,onChange:x=>g(x.target.value),placeholder:"Optional details..."})]}),A.jsxs("div",{children:[A.jsx("label",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.textSecondary,display:"block",marginBottom:4},children:"DIFFICULTY"}),A.jsx("div",{style:{display:"flex",gap:4},children:["trivial","easy","medium","hard"].map(x=>A.jsx("button",{onClick:()=>v(x),style:{flex:1,padding:`${P.spacing}px 4px`,fontFamily:le.pixel,fontSize:7,backgroundColor:y===x?`${Vl[x]}20`:k.bgDarkest,color:y===x?Vl[x]:k.textMuted,border:`2px solid ${y===x?Vl[x]:k.border}`,cursor:"pointer",textTransform:"uppercase"},children:x},x))})]}),ue==="habit"&&A.jsxs("div",{children:[A.jsx("label",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.textSecondary,display:"block",marginBottom:4},children:"DIRECTIONS"}),A.jsxs("div",{style:{display:"flex",gap:P.spacing},children:[A.jsx("button",{onClick:()=>I(!b),style:{flex:1,padding:P.spacing,fontFamily:le.pixel,fontSize:P.fontXs,backgroundColor:b?"rgba(57, 255, 20, 0.15)":k.bgDarkest,color:b?k.neonGreen:k.textMuted,border:`2px solid ${b?k.neonGreen:k.border}`,cursor:"pointer"},children:"+ POSITIVE"}),A.jsx("button",{onClick:()=>M(!O),style:{flex:1,padding:P.spacing,fontFamily:le.pixel,fontSize:P.fontXs,backgroundColor:O?"rgba(255, 68, 68, 0.15)":k.bgDarkest,color:O?k.fireRed:k.textMuted,border:`2px solid ${O?k.fireRed:k.border}`,cursor:"pointer"},children:"- NEGATIVE"})]})]}),ue==="daily"&&A.jsxs(A.Fragment,{children:[A.jsxs("div",{children:[A.jsx("label",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.textSecondary,display:"block",marginBottom:4},children:"FREQUENCY"}),A.jsx("div",{style:{display:"flex",gap:4},children:["daily","weekly"].map(x=>A.jsx("button",{onClick:()=>$(x),style:{flex:1,padding:P.spacing,fontFamily:le.pixel,fontSize:P.fontXs,backgroundColor:V===x?"rgba(0, 191, 255, 0.15)":k.bgDarkest,color:V===x?k.neonBlue:k.textMuted,border:`2px solid ${V===x?k.neonBlue:k.border}`,cursor:"pointer",textTransform:"uppercase"},children:x},x))})]}),V==="weekly"&&A.jsxs("div",{children:[A.jsx("label",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.textSecondary,display:"block",marginBottom:4},children:"ACTIVE DAYS"}),A.jsx("div",{style:{display:"flex",gap:3},children:l6.map((x,R)=>A.jsx("button",{onClick:()=>pe(R),style:{flex:1,padding:`${P.spacing}px 2px`,fontFamily:le.pixel,fontSize:7,backgroundColor:H.includes(R)?"rgba(0, 255, 204, 0.15)":k.bgDarkest,color:H.includes(R)?k.neonCyan:k.textMuted,border:`2px solid ${H.includes(R)?k.neonCyan:k.border}`,cursor:"pointer"},children:x},R))})]})]}),A.jsxs("div",{style:{display:"flex",gap:P.spacing,marginTop:P.spacing},children:[l&&r&&A.jsx(Dn,{variant:"danger",onClick:()=>r(i.id),style:{flex:1},children:"DELETE"}),A.jsx(Dn,{variant:"ghost",onClick:a,style:{flex:1},children:"CANCEL"}),A.jsx(Dn,{variant:"gold",onClick:ye,style:{flex:2},children:l?"SAVE":"CREATE"})]})]})})}function _6({boss:i}){const e=su(),t=Dr[i==null?void 0:i.bossKey];if(!i)return null;const r=Math.max(0,i.currentHp/i.maxHp),a=r>.5?k.neonGreen:r>.25?k.gold:k.fireRed;return A.jsxs("div",{onClick:()=>e("/boss"),style:{...Io,backgroundColor:k.bgDark,padding:P.spacing,marginBottom:P.spacing*2,cursor:"pointer",display:"flex",alignItems:"center",gap:P.spacing},children:[A.jsx("div",{style:{width:40,height:40,backgroundColor:k.bgDarkest,border:`2px solid ${(t==null?void 0:t.glowColor)||k.border}`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:22,flexShrink:0,boxShadow:`0 0 8px ${(t==null?void 0:t.glowColor)||k.border}44`},children:(t==null?void 0:t.emoji)||""}),A.jsxs("div",{style:{flex:1},children:[A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[A.jsx("span",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.textPrimary},children:i.name}),A.jsxs("span",{style:{fontFamily:le.pixel,fontSize:7,color:a},children:[i.currentHp,"/",i.maxHp]})]}),A.jsx("div",{style:{height:8,backgroundColor:"#111",border:"1px solid #222"},children:A.jsx("div",{style:{height:"100%",width:`${r*100}%`,backgroundColor:a,transition:"width 0.5s",boxShadow:`0 0 4px ${a}`}})})]}),A.jsx("span",{style:{fontFamily:le.pixel,fontSize:P.fontSm,color:k.textMuted},children:">"})]})}function v6(){const{user:i,profile:e}=Kr(),{tasks:t,loading:r,addTask:a,updateTask:l,deleteTask:u,scoreHabit:f,completeDaily:m,completeTodo:g}=c6(),{party:y}=Vh(),{dealDamage:v}=H1(y),[b,I]=j.useState("habits"),[O,M]=j.useState(!1),[V,$]=j.useState(null),[H,Q]=j.useState(null),ue=j.useCallback(C=>{C&&(Q(C),setTimeout(()=>Q(null),1500))},[]),ye=j.useCallback(async(C,Ke)=>{const Nt=await f(C,Ke);Nt&&(y!=null&&y.activeBoss)&&Ke==="up"&&await v(Nt.damage,C,i.uid,e.displayName),ue(Nt)},[f,v,y,i,e,ue]),pe=j.useCallback(async C=>{const Ke=await m(C);Ke&&(y!=null&&y.activeBoss)&&await v(Ke.damage,C,i.uid,e.displayName),ue(Ke)},[m,v,y,i,e,ue]),x=j.useCallback(async C=>{const Ke=await g(C);Ke&&(y!=null&&y.activeBoss)&&await v(Ke.damage,C,i.uid,e.displayName),ue(Ke)},[g,v,y,i,e,ue]),R=async(C,Ke)=>{Ke?await l(Ke,C):await a(C),M(!1),$(null)},D=C=>{$(C),M(!0)},U=async C=>{await u(C),M(!1),$(null)},B=b==="habits"?t.habits:b==="dailies"?t.dailies:t.todos,q=b==="habits"?"habit":b==="dailies"?"daily":"todo";return r?A.jsx("div",{style:{padding:P.spacing*4,textAlign:"center",fontFamily:le.pixel,fontSize:P.fontSm,color:k.textMuted},children:"LOADING QUESTS..."}):A.jsxs("div",{style:{padding:P.spacing*2,position:"relative"},children:[H&&A.jsxs("div",{style:{position:"fixed",top:"30%",left:"50%",transform:"translateX(-50%)",zIndex:200,textAlign:"center",animation:"damageFloat 1.5s ease-out forwards",pointerEvents:"none"},children:[H.damage>0&&A.jsxs("div",{style:{fontFamily:le.pixel,fontSize:P.fontXl,color:k.neonGreen,textShadow:`0 0 10px ${k.neonGreen}`},children:[" -",H.damage]}),A.jsxs("div",{style:{fontFamily:le.pixel,fontSize:P.fontSm,color:k.gold,marginTop:4},children:["+",H.xp," XP  +",H.gold," "]}),H.levelUp&&A.jsx("div",{style:{fontFamily:le.pixel,fontSize:P.fontLg,color:k.gold,textShadow:`0 0 15px ${k.gold}`,marginTop:4},children:"LEVEL UP!"})]}),(y==null?void 0:y.activeBoss)&&A.jsx(_6,{boss:y.activeBoss}),A.jsx(f6,{activeTab:b,onTabChange:I}),A.jsx("div",{style:{marginBottom:P.spacing*2},children:A.jsxs(Dn,{variant:"gold",onClick:()=>{$(null),M(!0)},style:{width:"100%",padding:`${P.spacing*1.5}px 0`},children:["+ NEW ",q.toUpperCase()]})}),A.jsx(g6,{tasks:B,type:b,onScore:ye,onComplete:b==="dailies"?pe:x,onDelete:U,onEdit:D}),O&&A.jsx(y6,{task:V,taskType:q,onSave:R,onDelete:U,onClose:()=>{M(!1),$(null)}})]})}function E6(i,e){return!i||i.length===0?"none":i.map(([t,r,a])=>`${t*e}px ${r*e}px 0 0 ${a}`).join(", ")}function T6({bossKey:i,scale:e=6,animate:t=!0,hit:r=!1}){const a=Dr[i],l=j.useMemo(()=>a!=null&&a.pixels?E6(a.pixels,e):"none",[a,e]);if(!a)return A.jsx("div",{style:{fontSize:64,textAlign:"center"},children:""});const u=Math.max(...a.pixels.map(([y])=>y)),f=Math.max(...a.pixels.map(([,y])=>y)),m=(u+1)*e,g=(f+1)*e;return A.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:e*2},children:A.jsxs("div",{style:{width:m,height:g,position:"relative"},children:[A.jsx("div",{style:{width:e,height:e,boxShadow:l,animation:r?"bossHit 0.3s ease":t?"bossBob 1.5s ease-in-out infinite":"none",filter:r?"brightness(2)":"none",transition:"filter 0.1s"}}),A.jsx("div",{style:{position:"absolute",bottom:-e,left:"50%",transform:"translateX(-50%)",width:m*.8,height:e*2,background:`radial-gradient(ellipse, ${a.glowColor}33 0%, transparent 70%)`,borderRadius:"50%"}})]})})}function b6({currentHp:i,maxHp:e}){const r=Math.max(0,i/e),a=Math.ceil(r*20),l=r>.5?k.neonGreen:r>.25?k.gold:k.fireRed;return A.jsxs("div",{children:[A.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4,fontFamily:le.pixel,fontSize:P.fontXs},children:[A.jsx("span",{style:{color:k.textSecondary},children:"BOSS HP"}),A.jsxs("span",{style:{color:l},children:[i," / ",e]})]}),A.jsx("div",{style:{display:"flex",gap:2,padding:3,backgroundColor:"#111",border:`2px solid ${k.border}`},children:Array.from({length:20}).map((u,f)=>A.jsx("div",{style:{flex:1,height:20,backgroundColor:f<a?l:"#1a1a1a",border:"1px solid #0a0a0a",transition:"background-color 0.3s",boxShadow:f<a?`0 0 4px ${l}44`:"none"}},f))})]})}function S6({amount:i,type:e="dealt",id:t}){const[r,a]=j.useState(!0);if(j.useEffect(()=>{const m=setTimeout(()=>a(!1),1500);return()=>clearTimeout(m)},[]),!r)return null;const l=e==="dealt"?k.neonGreen:k.fireRed,u=e==="dealt"?"-":"+",f=Math.random()*60-30;return A.jsxs("div",{style:{position:"absolute",top:"40%",left:`calc(50% + ${f}px)`,transform:"translateX(-50%)",fontFamily:le.pixel,fontSize:P.fontXl,color:l,textShadow:`0 0 10px ${l}, 0 0 20px ${l}`,animation:"damageFloat 1.5s ease-out forwards",pointerEvents:"none",zIndex:10},children:[u,i]})}function w6({feed:i}){return!i||i.length===0?A.jsx("div",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.textMuted,textAlign:"center",padding:P.spacing*2},children:"No damage dealt yet..."}):A.jsx("div",{style:{maxHeight:200,overflowY:"auto",display:"flex",flexDirection:"column",gap:2},children:[...i].reverse().map((e,t)=>{const r=e.type==="dealt";return A.jsx("div",{style:{padding:`4px ${P.spacing}px`,backgroundColor:r?"rgba(57, 255, 20, 0.05)":"rgba(255, 68, 68, 0.05)",borderLeft:`3px solid ${r?k.neonGreen:k.fireRed}`,fontFamily:le.pixel,fontSize:7,color:k.textSecondary,display:"flex",justifyContent:"space-between",alignItems:"center"},children:A.jsxs("span",{children:[A.jsx("span",{style:{color:k.textPrimary},children:e.displayName}),r?" dealt ":" took ",A.jsx("span",{style:{color:r?k.neonGreen:k.fireRed},children:e.damage})," dmg",e.taskTitle&&A.jsxs("span",{style:{color:k.textMuted},children:[" (",e.taskTitle,")"]})]})},t)})})}function gw({bossKey:i,onStartNext:e,onClose:t}){const r=Dr[i];return r?A.jsx(G1,{onClose:t,title:"VICTORY!",children:A.jsxs("div",{style:{textAlign:"center"},children:[A.jsx("div",{style:{fontSize:64,marginBottom:P.spacing*2,opacity:.5,filter:"grayscale(0.5)"},children:r.emoji}),A.jsxs("div",{style:{fontFamily:le.pixel,fontSize:P.fontMd,color:k.textPrimary,marginBottom:P.spacing},children:[r.name," has been slain!"]}),A.jsxs("div",{style:{backgroundColor:k.bgDarkest,border:`2px solid ${k.gold}`,padding:P.spacing*2,marginBottom:P.spacing*2},children:[A.jsx("div",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.gold,marginBottom:P.spacing},children:"REWARDS FOR ALL PARTY MEMBERS"}),A.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:P.spacing*3},children:[A.jsxs("div",{children:[A.jsxs("div",{style:{fontFamily:le.pixel,fontSize:P.fontLg,color:k.neonCyan},children:["+",r.rewards.xp]}),A.jsx("div",{style:{fontFamily:le.pixel,fontSize:7,color:k.textMuted},children:"XP"})]}),A.jsxs("div",{children:[A.jsxs("div",{style:{fontFamily:le.pixel,fontSize:P.fontLg,color:k.gold},children:["+",r.rewards.gold]}),A.jsx("div",{style:{fontFamily:le.pixel,fontSize:7,color:k.textMuted},children:"GOLD"})]})]})]}),A.jsx(Dn,{variant:"gold",onClick:e,style:{width:"100%",padding:`${P.spacing*1.5}px 0`},children:"SUMMON NEXT BOSS"}),A.jsx("div",{style:{marginTop:P.spacing},children:A.jsx(Dn,{variant:"ghost",onClick:t,style:{width:"100%"},children:"LATER"})})]})}):null}function K1({members:i,leaderId:e}){const t=Object.entries(i||{});return t.length===0?A.jsx("div",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.textMuted,textAlign:"center",padding:P.spacing*2},children:"No members yet"}):A.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4},children:t.map(([r,a])=>A.jsx(zr,{style:{padding:P.spacing},children:A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:P.spacing},children:[A.jsx("div",{style:{width:32,height:32,backgroundColor:k.bgMedium,border:`2px solid ${r===e?k.gold:k.border}`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:16,flexShrink:0},children:""}),A.jsxs("div",{style:{flex:1},children:[A.jsxs("div",{style:{display:"flex",alignItems:"center",gap:P.spacing},children:[A.jsx("span",{style:{fontFamily:le.pixel,fontSize:P.fontSm,color:k.textPrimary},children:a.displayName}),r===e&&A.jsx("span",{style:{fontFamily:le.pixel,fontSize:7,color:k.gold},children:" LEADER"})]}),A.jsxs("div",{style:{fontFamily:le.pixel,fontSize:7,color:k.textMuted,marginBottom:4},children:["LV.",a.level]}),A.jsx(F1,{current:a.hp,max:a.maxHp,height:6,showLabel:!1})]})]})},r))})}function A6(){var M;const{party:i,loading:e,startBoss:t}=Vh(),{startNextBoss:r}=H1(i),[a,l]=j.useState(!1),[u,f]=j.useState([]),[m,g]=j.useState(!1),[y,v]=j.useState(null),b=j.useRef(null);j.useEffect(()=>{if(!(i!=null&&i.activeBoss))return;const V=i.activeBoss.currentHp;if(b.current!==null&&V<b.current){const $=b.current-V;l(!0),setTimeout(()=>l(!1),300),f(H=>[...H.slice(-5),{id:Date.now(),amount:$,type:"dealt"}])}b.current=V},[(M=i==null?void 0:i.activeBoss)==null?void 0:M.currentHp]),j.useEffect(()=>{if(!(i!=null&&i.activeBoss)&&b.current!==null&&b.current>0){const V=i==null?void 0:i.damageFeed;if(V&&V.length>0){const $=Math.min((i.bossLevel||1)-1,6),H=Object.keys(Dr);v(H[$]||"slime_king"),g(!0)}b.current=null}},[i==null?void 0:i.activeBoss,i==null?void 0:i.bossLevel]);const I=async()=>{await r(),g(!1),v(null)};if(e)return A.jsx("div",{style:{padding:P.spacing*4,textAlign:"center",fontFamily:le.pixel,fontSize:P.fontSm,color:k.textMuted},children:"LOADING..."});if(!i)return A.jsxs("div",{style:{padding:P.spacing*4,textAlign:"center"},children:[A.jsx("div",{style:{fontSize:48,marginBottom:P.spacing*2},children:""}),A.jsx("div",{style:{fontFamily:le.pixel,fontSize:P.fontMd,color:k.textSecondary,marginBottom:P.spacing},children:"NO PARTY"}),A.jsx("div",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.textMuted},children:"Join or create a party to fight bosses together!"})]});if(!i.activeBoss){const V=Math.min(i.bossLevel||0,6),$=Object.keys(Dr)[V],H=Dr[$];return A.jsxs("div",{style:{padding:P.spacing*2,textAlign:"center"},children:[A.jsx("div",{style:{fontFamily:le.pixel,fontSize:P.fontLg,color:k.gold,marginBottom:P.spacing*2},children:"BOSS ARENA"}),A.jsxs(zr,{style:{marginBottom:P.spacing*2},children:[A.jsx("div",{style:{fontSize:64,marginBottom:P.spacing},children:(H==null?void 0:H.emoji)||""}),A.jsx("div",{style:{fontFamily:le.pixel,fontSize:P.fontMd,color:k.textPrimary,marginBottom:4},children:(H==null?void 0:H.name)||"Unknown Boss"}),A.jsx("div",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.textMuted,marginBottom:P.spacing},children:H==null?void 0:H.description}),A.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:P.spacing*3,marginBottom:P.spacing*2},children:[A.jsx("div",{children:A.jsxs("div",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.fireRed},children:[H==null?void 0:H.maxHp," HP"]})}),A.jsx("div",{children:A.jsxs("div",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.fireOrange},children:[H==null?void 0:H.attackPower," ATK"]})}),A.jsx("div",{children:A.jsxs("div",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.neonCyan},children:["LV.",H==null?void 0:H.level]})})]})]}),A.jsx(Dn,{variant:"gold",onClick:t,style:{width:"100%",padding:`${P.spacing*2}px 0`,fontSize:P.fontMd},children:" SUMMON BOSS"}),m&&y&&A.jsx(gw,{bossKey:y,onStartNext:I,onClose:()=>g(!1)})]})}const O=Dr[i.activeBoss.bossKey];return A.jsxs("div",{style:{padding:P.spacing*2},children:[A.jsxs("div",{style:{textAlign:"center",marginBottom:P.spacing},children:[A.jsx("div",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.textMuted,letterSpacing:2},children:"BOSS ARENA"}),A.jsx("div",{style:{fontFamily:le.pixel,fontSize:P.fontLg,color:(O==null?void 0:O.glowColor)||k.fireRed,textShadow:`0 0 10px ${(O==null?void 0:O.glowColor)||k.fireRed}44`},children:i.activeBoss.name}),A.jsxs("div",{style:{fontFamily:le.pixel,fontSize:7,color:k.textMuted},children:["LV.",i.activeBoss.level,"  ATK ",i.activeBoss.attackPower]})]}),A.jsxs("div",{style:{position:"relative",backgroundColor:k.bgDarkest,border:`${P.borderWidth}px solid ${k.border}`,padding:`${P.spacing*3}px 0`,marginBottom:P.spacing*2,minHeight:120,overflow:"hidden",backgroundImage:`radial-gradient(circle at 50% 100%, ${(O==null?void 0:O.glowColor)||"#ff000022"} 0%, transparent 60%)`},children:[A.jsx(T6,{bossKey:i.activeBoss.bossKey,scale:7,hit:a}),u.map(V=>A.jsx(S6,{amount:V.amount,type:V.type,id:V.id},V.id))]}),A.jsx("div",{style:{marginBottom:P.spacing*2},children:A.jsx(b6,{currentHp:i.activeBoss.currentHp,maxHp:i.activeBoss.maxHp})}),A.jsx("div",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.textMuted,textAlign:"center",marginBottom:P.spacing*2,padding:`0 ${P.spacing}px`},children:"Complete your habits, dailies, and to-dos to deal damage!"}),A.jsxs(zr,{style:{marginBottom:P.spacing*2},children:[A.jsx("div",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.textSecondary,marginBottom:P.spacing},children:"BATTLE LOG"}),A.jsx(w6,{feed:i.damageFeed})]}),A.jsx("div",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.textSecondary,marginBottom:P.spacing},children:"PARTY STATUS"}),A.jsx(K1,{members:i.members,leaderId:i.leaderId}),m&&y&&A.jsx(gw,{bossKey:y,onStartNext:I,onClose:()=>g(!1)})]})}function I6(){const{user:i,profile:e}=Kr(),{createParty:t}=Vh(),[r,a]=j.useState(""),[l,u]=j.useState(!1),[f,m]=j.useState(""),g=async y=>{if(y.preventDefault(),!!r.trim()){u(!0),m("");try{await t(i.uid,e.displayName,r.trim(),e.level,e.hp,e.maxHp)}catch{m("Failed to create party")}u(!1)}};return A.jsxs(zr,{children:[A.jsx("div",{style:{fontFamily:le.pixel,fontSize:P.fontMd,color:k.gold,marginBottom:P.spacing*2,textAlign:"center"},children:" CREATE PARTY"}),A.jsxs("form",{onSubmit:g,style:{display:"flex",flexDirection:"column",gap:P.spacing*2},children:[A.jsxs("div",{children:[A.jsx("label",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.textSecondary,display:"block",marginBottom:4},children:"PARTY NAME"}),A.jsx(Or,{value:r,onChange:y=>a(y.target.value),placeholder:"Dragon Slayers"})]}),f&&A.jsx("div",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.fireRed,textAlign:"center"},children:f}),A.jsx(Dn,{variant:"gold",disabled:l,style:{width:"100%"},children:l?"FORGING...":"CREATE PARTY"})]})]})}function R6(){const{user:i,profile:e}=Kr(),{joinParty:t}=Vh(),[r,a]=j.useState(""),[l,u]=j.useState(!1),[f,m]=j.useState(""),g=async y=>{if(y.preventDefault(),!!r.trim()){u(!0),m("");try{await t(i.uid,e.displayName,e.level,e.hp,e.maxHp,r.trim())}catch(v){m(v.message||"Failed to join party")}u(!1)}};return A.jsxs(zr,{children:[A.jsx("div",{style:{fontFamily:le.pixel,fontSize:P.fontMd,color:k.neonCyan,marginBottom:P.spacing*2,textAlign:"center"},children:" JOIN PARTY"}),A.jsxs("form",{onSubmit:g,style:{display:"flex",flexDirection:"column",gap:P.spacing*2},children:[A.jsxs("div",{children:[A.jsx("label",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.textSecondary,display:"block",marginBottom:4},children:"INVITE CODE"}),A.jsx(Or,{value:r,onChange:y=>a(y.target.value.toUpperCase()),placeholder:"ENTER CODE",style:{textAlign:"center",letterSpacing:4,fontSize:P.fontLg}})]}),f&&A.jsx("div",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.fireRed,textAlign:"center"},children:f}),A.jsx(Dn,{disabled:l,style:{width:"100%"},children:l?"JOINING...":"JOIN PARTY"})]})]})}function x6({code:i}){const[e,t]=j.useState(!1),r=async()=>{try{await navigator.clipboard.writeText(i),t(!0),setTimeout(()=>t(!1),2e3)}catch{const a=document.createElement("textarea");a.value=i,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),t(!0),setTimeout(()=>t(!1),2e3)}};return A.jsxs(zr,{style:{textAlign:"center"},children:[A.jsx("div",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.textSecondary,marginBottom:P.spacing},children:"INVITE CODE"}),A.jsx("div",{onClick:r,style:{fontFamily:le.pixel,fontSize:P.fontTitle,color:k.neonCyan,letterSpacing:8,padding:P.spacing*2,backgroundColor:k.bgDarkest,border:`2px solid ${k.neonCyan}`,cursor:"pointer",marginBottom:P.spacing,textShadow:`0 0 10px ${k.neonCyan}`},children:i}),A.jsx("div",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:e?k.neonGreen:k.textMuted},children:e?"COPIED!":"CLICK TO COPY"})]})}function C6(){const{user:i,profile:e}=Kr(),{party:t,loading:r,leaveParty:a,startBoss:l}=Vh(),u=async()=>{i&&await a(i.uid)},f=async()=>{await FV(jm)};return r?A.jsx("div",{style:{padding:P.spacing*4,textAlign:"center",fontFamily:le.pixel,fontSize:P.fontSm,color:k.textMuted},children:"LOADING..."}):t?A.jsxs("div",{style:{padding:P.spacing*2,display:"flex",flexDirection:"column",gap:P.spacing*2},children:[A.jsxs(zr,{style:{textAlign:"center"},children:[A.jsxs("div",{style:{fontFamily:le.pixel,fontSize:P.fontLg,color:k.gold,marginBottom:4},children:[" ",t.name]}),A.jsxs("div",{style:{fontFamily:le.pixel,fontSize:P.fontXs,color:k.textMuted},children:[t.memberIds.length," member",t.memberIds.length!==1?"s":""," Boss Level ",t.bossLevel]})]}),A.jsx(x6,{code:t.inviteCode}),!t.activeBoss&&A.jsx(Dn,{variant:"gold",onClick:l,style:{width:"100%",padding:`${P.spacing*2}px 0`,fontSize:P.fontMd},children:" SUMMON BOSS"}),A.jsx("div",{style:{fontFamily:le.pixel,fontSize:P.fontSm,color:k.textSecondary,marginTop:P.spacing},children:"PARTY MEMBERS"}),A.jsx(K1,{members:t.members,leaderId:t.leaderId}),A.jsx("div",{style:{marginTop:P.spacing*2},children:A.jsx(Dn,{variant:"danger",onClick:u,style:{width:"100%"},children:"LEAVE PARTY"})}),A.jsx("div",{style:{marginTop:P.spacing,textAlign:"center"},children:A.jsx(Dn,{variant:"ghost",onClick:f,children:"LOGOUT"})})]}):A.jsxs("div",{style:{padding:P.spacing*2,display:"flex",flexDirection:"column",gap:P.spacing*2},children:[A.jsx("div",{style:{textAlign:"center",fontFamily:le.pixel,fontSize:P.fontLg,color:k.gold,marginBottom:P.spacing},children:" PARTY"}),A.jsx("div",{style:{textAlign:"center",fontFamily:le.pixel,fontSize:P.fontXs,color:k.textSecondary,marginBottom:P.spacing*2},children:"Join forces to slay bosses together!"}),A.jsx(I6,{}),A.jsx("div",{style:{textAlign:"center",fontFamily:le.pixel,fontSize:P.fontXs,color:k.textMuted,padding:`${P.spacing}px 0`},children:" OR "}),A.jsx(R6,{}),A.jsx("div",{style:{marginTop:P.spacing*4,textAlign:"center"},children:A.jsx(Dn,{variant:"ghost",onClick:f,children:"LOGOUT"})})]})}const D6="modulepreload",N6=function(i){return"/quest-habits/"+i},yw={},V6=function(e,t,r){let a=Promise.resolve();if(t&&t.length>0){let u=function(g){return Promise.all(g.map(y=>Promise.resolve(y).then(v=>({status:"fulfilled",value:v}),v=>({status:"rejected",reason:v}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),m=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));a=u(t.map(g=>{if(g=N6(g),g in yw)return;yw[g]=!0;const y=g.endsWith(".css"),v=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${v}`))return;const b=document.createElement("link");if(b.rel=y?"stylesheet":D6,y||(b.as="script"),b.crossOrigin="",b.href=g,m&&b.setAttribute("nonce",m),document.head.appendChild(b),y)return new Promise((I,O)=>{b.addEventListener("load",I),b.addEventListener("error",()=>O(new Error(`Unable to preload CSS for ${g}`)))})}))}function l(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return a.then(u=>{for(const f of u||[])f.status==="rejected"&&l(f.reason);return e().catch(l)})};function O6(i){if(!i)return!0;const e=new Date(i),t=new Date,r=new Date(t.getFullYear(),t.getMonth(),t.getDate());return e<r}function P6(i){if(!i||i.type!=="daily")return!1;const e=new Date().getDay();return i.frequency==="weekly"?(i.daysOfWeek||[]).includes(e):!0}function M6(){const{user:i,profile:e}=Kr(),t=j.useRef(!1);j.useEffect(()=>{!i||!e||t.current||O6(e.lastCron)&&(t.current=!0,k6(i.uid,e))},[i,e])}async function k6(i,e){try{const t=eu(ut,"users",i,"tasks"),r=await Dv(t),a=[];r.forEach(m=>{const g={id:m.id,...m.data()};g.type==="daily"&&a.push(g)});let l=0;const u=k1(ut);for(const m of a){const g=P6(m),y=At(ut,"users",i,"tasks",m.id);m.completed?u.update(y,{completed:!1}):g&&(l++,u.update(y,{completed:!1,streak:0}))}await u.commit(),l>0&&e.partyId&&await L6(i,e,l);const f=At(ut,"users",i);await Kt(f,{lastCron:new Date().toISOString()})}catch(t){console.error("Daily reset failed:",t)}}async function L6(i,e,t){try{const r=At(ut,"parties",e.partyId),{getDoc:a}=await V6(async()=>{const{getDoc:v}=await Promise.resolve().then(()=>V3);return{getDoc:v}},[]),l=await a(r);if(!l.exists())return;const u=l.data();if(!u.activeBoss)return;const f=u6(t,u.activeBoss.attackPower),m={};for(const v of u.memberIds){const b=u.members[v];if(!b)continue;const I=Math.max(0,b.hp-f);m[`members.${v}.hp`]=I;const O=At(ut,"users",v),M=await a(O);if(M.exists()){const V=M.data();let $=Math.max(0,V.hp-f);const H={hp:$};if($<=0){const Q=Math.max(1,V.level-1),ue=50+(Q-1)*5;H.hp=ue,H.level=Q,H.maxHp=ue,H.gold=Math.max(0,V.gold-10),m[`members.${v}.hp`]=ue,m[`members.${v}.level`]=Q,m[`members.${v}.maxHp`]=ue}await Kt(O,H)}}const g={userId:i,displayName:e.displayName,damage:f,taskTitle:`${t} missed daily${t>1?"s":""}`,timestamp:new Date().toISOString(),type:"received"},y=[...u.damageFeed||[],g].slice(-20);m.damageFeed=y,await Kt(r,m)}catch(r){console.error("Boss attack failed:",r)}}function U6(){return M6(),A.jsx(W3,{children:A.jsxs(Nw,{children:[A.jsx(eo,{path:"/dashboard",element:A.jsx(gy,{children:A.jsx(v6,{})})}),A.jsx(eo,{path:"/boss",element:A.jsx(gy,{children:A.jsx(A6,{})})}),A.jsx(eo,{path:"/party",element:A.jsx(gy,{children:A.jsx(C6,{})})}),A.jsx(eo,{path:"*",element:A.jsx(AD,{to:"/dashboard",replace:!0})})]})})}function z6(){const{user:i,loading:e}=Kr();return e?A.jsx("div",{style:{minHeight:"100vh",backgroundColor:k.bgDarkest,display:"flex",alignItems:"center",justifyContent:"center",fontFamily:le.pixel,color:k.neonGreen,fontSize:12},children:"LOADING..."}):i?A.jsx(U6,{}):A.jsxs(Nw,{children:[A.jsx(eo,{path:"/register",element:A.jsx(a6,{})}),A.jsx(eo,{path:"*",element:A.jsx(s6,{})})]})}CC.createRoot(document.getElementById("root")).render(A.jsx(j.StrictMode,{children:A.jsx(YD,{children:A.jsx(k3,{children:A.jsx(z6,{})})})}));
