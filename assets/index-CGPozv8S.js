(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=t(a);fetch(a.href,l)}})();var ey={exports:{}},Ac={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hb;function VC(){if(hb)return Ac;hb=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,a,l){var u=null;if(l!==void 0&&(u=""+l),a.key!==void 0&&(u=""+a.key),"key"in a){l={};for(var f in a)f!=="key"&&(l[f]=a[f])}else l=a;return a=l.ref,{$$typeof:i,type:r,key:u,ref:a!==void 0?a:null,props:l}}return Ac.Fragment=e,Ac.jsx=t,Ac.jsxs=t,Ac}var fb;function MC(){return fb||(fb=1,ey.exports=VC()),ey.exports}var S=MC(),ty={exports:{}},De={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var db;function kC(){if(db)return De;db=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),b=Symbol.iterator;function A(k){return k===null||typeof k!="object"?null:(k=b&&k[b]||k["@@iterator"],typeof k=="function"?k:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,P={};function q(k,re,ue){this.props=k,this.context=re,this.refs=P,this.updater=ue||N}q.prototype.isReactComponent={},q.prototype.setState=function(k,re){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,re,"setState")},q.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function $(){}$.prototype=q.prototype;function B(k,re,ue){this.props=k,this.context=re,this.refs=P,this.updater=ue||N}var J=B.prototype=new $;J.constructor=B,M(J,q.prototype),J.isPureReactComponent=!0;var fe=Array.isArray;function de(){}var R={H:null,A:null,T:null,S:null},C=Object.prototype.hasOwnProperty;function V(k,re,ue){var ve=ue.ref;return{$$typeof:i,type:k,key:re,ref:ve!==void 0?ve:null,props:ue}}function j(k,re){return V(k.type,re,k.props)}function F(k){return typeof k=="object"&&k!==null&&k.$$typeof===i}function G(k){var re={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(ue){return re[ue]})}var O=/\/+/g;function dt(k,re){return typeof k=="object"&&k!==null&&k.key!=null?G(""+k.key):re.toString(36)}function Rt(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(de,de):(k.status="pending",k.then(function(re){k.status==="pending"&&(k.status="fulfilled",k.value=re)},function(re){k.status==="pending"&&(k.status="rejected",k.reason=re)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function ie(k,re,ue,ve,Ie){var Ce=typeof k;(Ce==="undefined"||Ce==="boolean")&&(k=null);var je=!1;if(k===null)je=!0;else switch(Ce){case"bigint":case"string":case"number":je=!0;break;case"object":switch(k.$$typeof){case i:case e:je=!0;break;case y:return je=k._init,ie(je(k._payload),re,ue,ve,Ie)}}if(je)return Ie=Ie(k),je=ve===""?"."+dt(k,0):ve,fe(Ie)?(ue="",je!=null&&(ue=je.replace(O,"$&/")+"/"),ie(Ie,re,ue,"",function(Oi){return Oi})):Ie!=null&&(F(Ie)&&(Ie=j(Ie,ue+(Ie.key==null||k&&k.key===Ie.key?"":(""+Ie.key).replace(O,"$&/")+"/")+je)),re.push(Ie)),1;je=0;var an=ve===""?".":ve+":";if(fe(k))for(var It=0;It<k.length;It++)ve=k[It],Ce=an+dt(ve,It),je+=ie(ve,re,ue,Ce,Ie);else if(It=A(k),typeof It=="function")for(k=It.call(k),It=0;!(ve=k.next()).done;)ve=ve.value,Ce=an+dt(ve,It++),je+=ie(ve,re,ue,Ce,Ie);else if(Ce==="object"){if(typeof k.then=="function")return ie(Rt(k),re,ue,ve,Ie);throw re=String(k),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return je}function he(k,re,ue){if(k==null)return k;var ve=[],Ie=0;return ie(k,ve,"","",function(Ce){return re.call(ue,Ce,Ie++)}),ve}function ye(k){if(k._status===-1){var re=k._result;re=re(),re.then(function(ue){(k._status===0||k._status===-1)&&(k._status=1,k._result=ue)},function(ue){(k._status===0||k._status===-1)&&(k._status=2,k._result=ue)}),k._status===-1&&(k._status=0,k._result=re)}if(k._status===1)return k._result.default;throw k._result}var Ve=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},$e={map:he,forEach:function(k,re,ue){he(k,function(){re.apply(this,arguments)},ue)},count:function(k){var re=0;return he(k,function(){re++}),re},toArray:function(k){return he(k,function(re){return re})||[]},only:function(k){if(!F(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return De.Activity=_,De.Children=$e,De.Component=q,De.Fragment=t,De.Profiler=a,De.PureComponent=B,De.StrictMode=r,De.Suspense=d,De.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,De.__COMPILER_RUNTIME={__proto__:null,c:function(k){return R.H.useMemoCache(k)}},De.cache=function(k){return function(){return k.apply(null,arguments)}},De.cacheSignal=function(){return null},De.cloneElement=function(k,re,ue){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var ve=M({},k.props),Ie=k.key;if(re!=null)for(Ce in re.key!==void 0&&(Ie=""+re.key),re)!C.call(re,Ce)||Ce==="key"||Ce==="__self"||Ce==="__source"||Ce==="ref"&&re.ref===void 0||(ve[Ce]=re[Ce]);var Ce=arguments.length-2;if(Ce===1)ve.children=ue;else if(1<Ce){for(var je=Array(Ce),an=0;an<Ce;an++)je[an]=arguments[an+2];ve.children=je}return V(k.type,Ie,ve)},De.createContext=function(k){return k={$$typeof:u,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:l,_context:k},k},De.createElement=function(k,re,ue){var ve,Ie={},Ce=null;if(re!=null)for(ve in re.key!==void 0&&(Ce=""+re.key),re)C.call(re,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(Ie[ve]=re[ve]);var je=arguments.length-2;if(je===1)Ie.children=ue;else if(1<je){for(var an=Array(je),It=0;It<je;It++)an[It]=arguments[It+2];Ie.children=an}if(k&&k.defaultProps)for(ve in je=k.defaultProps,je)Ie[ve]===void 0&&(Ie[ve]=je[ve]);return V(k,Ce,Ie)},De.createRef=function(){return{current:null}},De.forwardRef=function(k){return{$$typeof:f,render:k}},De.isValidElement=F,De.lazy=function(k){return{$$typeof:y,_payload:{_status:-1,_result:k},_init:ye}},De.memo=function(k,re){return{$$typeof:p,type:k,compare:re===void 0?null:re}},De.startTransition=function(k){var re=R.T,ue={};R.T=ue;try{var ve=k(),Ie=R.S;Ie!==null&&Ie(ue,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(de,Ve)}catch(Ce){Ve(Ce)}finally{re!==null&&ue.types!==null&&(re.types=ue.types),R.T=re}},De.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},De.use=function(k){return R.H.use(k)},De.useActionState=function(k,re,ue){return R.H.useActionState(k,re,ue)},De.useCallback=function(k,re){return R.H.useCallback(k,re)},De.useContext=function(k){return R.H.useContext(k)},De.useDebugValue=function(){},De.useDeferredValue=function(k,re){return R.H.useDeferredValue(k,re)},De.useEffect=function(k,re){return R.H.useEffect(k,re)},De.useEffectEvent=function(k){return R.H.useEffectEvent(k)},De.useId=function(){return R.H.useId()},De.useImperativeHandle=function(k,re,ue){return R.H.useImperativeHandle(k,re,ue)},De.useInsertionEffect=function(k,re){return R.H.useInsertionEffect(k,re)},De.useLayoutEffect=function(k,re){return R.H.useLayoutEffect(k,re)},De.useMemo=function(k,re){return R.H.useMemo(k,re)},De.useOptimistic=function(k,re){return R.H.useOptimistic(k,re)},De.useReducer=function(k,re,ue){return R.H.useReducer(k,re,ue)},De.useRef=function(k){return R.H.useRef(k)},De.useState=function(k){return R.H.useState(k)},De.useSyncExternalStore=function(k,re,ue){return R.H.useSyncExternalStore(k,re,ue)},De.useTransition=function(){return R.H.useTransition()},De.version="19.2.4",De}var mb;function y_(){return mb||(mb=1,ty.exports=kC()),ty.exports}var z=y_(),ny={exports:{}},Ic={},iy={exports:{}},ry={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pb;function LC(){return pb||(pb=1,(function(i){function e(ie,he){var ye=ie.length;ie.push(he);e:for(;0<ye;){var Ve=ye-1>>>1,$e=ie[Ve];if(0<a($e,he))ie[Ve]=he,ie[ye]=$e,ye=Ve;else break e}}function t(ie){return ie.length===0?null:ie[0]}function r(ie){if(ie.length===0)return null;var he=ie[0],ye=ie.pop();if(ye!==he){ie[0]=ye;e:for(var Ve=0,$e=ie.length,k=$e>>>1;Ve<k;){var re=2*(Ve+1)-1,ue=ie[re],ve=re+1,Ie=ie[ve];if(0>a(ue,ye))ve<$e&&0>a(Ie,ue)?(ie[Ve]=Ie,ie[ve]=ye,Ve=ve):(ie[Ve]=ue,ie[re]=ye,Ve=re);else if(ve<$e&&0>a(Ie,ye))ie[Ve]=Ie,ie[ve]=ye,Ve=ve;else break e}}return he}function a(ie,he){var ye=ie.sortIndex-he.sortIndex;return ye!==0?ye:ie.id-he.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;i.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();i.unstable_now=function(){return u.now()-f}}var d=[],p=[],y=1,_=null,b=3,A=!1,N=!1,M=!1,P=!1,q=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function J(ie){for(var he=t(p);he!==null;){if(he.callback===null)r(p);else if(he.startTime<=ie)r(p),he.sortIndex=he.expirationTime,e(d,he);else break;he=t(p)}}function fe(ie){if(M=!1,J(ie),!N)if(t(d)!==null)N=!0,de||(de=!0,G());else{var he=t(p);he!==null&&Rt(fe,he.startTime-ie)}}var de=!1,R=-1,C=5,V=-1;function j(){return P?!0:!(i.unstable_now()-V<C)}function F(){if(P=!1,de){var ie=i.unstable_now();V=ie;var he=!0;try{e:{N=!1,M&&(M=!1,$(R),R=-1),A=!0;var ye=b;try{t:{for(J(ie),_=t(d);_!==null&&!(_.expirationTime>ie&&j());){var Ve=_.callback;if(typeof Ve=="function"){_.callback=null,b=_.priorityLevel;var $e=Ve(_.expirationTime<=ie);if(ie=i.unstable_now(),typeof $e=="function"){_.callback=$e,J(ie),he=!0;break t}_===t(d)&&r(d),J(ie)}else r(d);_=t(d)}if(_!==null)he=!0;else{var k=t(p);k!==null&&Rt(fe,k.startTime-ie),he=!1}}break e}finally{_=null,b=ye,A=!1}he=void 0}}finally{he?G():de=!1}}}var G;if(typeof B=="function")G=function(){B(F)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,dt=O.port2;O.port1.onmessage=F,G=function(){dt.postMessage(null)}}else G=function(){q(F,0)};function Rt(ie,he){R=q(function(){ie(i.unstable_now())},he)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ie){ie.callback=null},i.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<ie?Math.floor(1e3/ie):5},i.unstable_getCurrentPriorityLevel=function(){return b},i.unstable_next=function(ie){switch(b){case 1:case 2:case 3:var he=3;break;default:he=b}var ye=b;b=he;try{return ie()}finally{b=ye}},i.unstable_requestPaint=function(){P=!0},i.unstable_runWithPriority=function(ie,he){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var ye=b;b=ie;try{return he()}finally{b=ye}},i.unstable_scheduleCallback=function(ie,he,ye){var Ve=i.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Ve+ye:Ve):ye=Ve,ie){case 1:var $e=-1;break;case 2:$e=250;break;case 5:$e=1073741823;break;case 4:$e=1e4;break;default:$e=5e3}return $e=ye+$e,ie={id:y++,callback:he,priorityLevel:ie,startTime:ye,expirationTime:$e,sortIndex:-1},ye>Ve?(ie.sortIndex=ye,e(p,ie),t(d)===null&&ie===t(p)&&(M?($(R),R=-1):M=!0,Rt(fe,ye-Ve))):(ie.sortIndex=$e,e(d,ie),N||A||(N=!0,de||(de=!0,G()))),ie},i.unstable_shouldYield=j,i.unstable_wrapCallback=function(ie){var he=b;return function(){var ye=b;b=he;try{return ie.apply(this,arguments)}finally{b=ye}}}})(ry)),ry}var gb;function jC(){return gb||(gb=1,iy.exports=LC()),iy.exports}var sy={exports:{}},vn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yb;function UC(){if(yb)return vn;yb=1;var i=y_();function e(d){var p="https://react.dev/errors/"+d;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)p+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},a=Symbol.for("react.portal");function l(d,p,y){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:_==null?null:""+_,children:d,containerInfo:p,implementation:y}}var u=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(d,p){if(d==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,vn.createPortal=function(d,p){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return l(d,p,null,y)},vn.flushSync=function(d){var p=u.T,y=r.p;try{if(u.T=null,r.p=2,d)return d()}finally{u.T=p,r.p=y,r.d.f()}},vn.preconnect=function(d,p){typeof d=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,r.d.C(d,p))},vn.prefetchDNS=function(d){typeof d=="string"&&r.d.D(d)},vn.preinit=function(d,p){if(typeof d=="string"&&p&&typeof p.as=="string"){var y=p.as,_=f(y,p.crossOrigin),b=typeof p.integrity=="string"?p.integrity:void 0,A=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;y==="style"?r.d.S(d,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:_,integrity:b,fetchPriority:A}):y==="script"&&r.d.X(d,{crossOrigin:_,integrity:b,fetchPriority:A,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},vn.preinitModule=function(d,p){if(typeof d=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var y=f(p.as,p.crossOrigin);r.d.M(d,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&r.d.M(d)},vn.preload=function(d,p){if(typeof d=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var y=p.as,_=f(y,p.crossOrigin);r.d.L(d,y,{crossOrigin:_,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},vn.preloadModule=function(d,p){if(typeof d=="string")if(p){var y=f(p.as,p.crossOrigin);r.d.m(d,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else r.d.m(d)},vn.requestFormReset=function(d){r.d.r(d)},vn.unstable_batchedUpdates=function(d,p){return d(p)},vn.useFormState=function(d,p,y){return u.H.useFormState(d,p,y)},vn.useFormStatus=function(){return u.H.useHostTransitionStatus()},vn.version="19.2.4",vn}var _b;function zC(){if(_b)return sy.exports;_b=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),sy.exports=UC(),sy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vb;function BC(){if(vb)return Ic;vb=1;var i=jC(),e=y_(),t=zC();function r(n){var s="https://react.dev/errors/"+n;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)s+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+n+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function l(n){var s=n,o=n;if(n.alternate)for(;s.return;)s=s.return;else{n=s;do s=n,(s.flags&4098)!==0&&(o=s.return),n=s.return;while(n)}return s.tag===3?o:null}function u(n){if(n.tag===13){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function f(n){if(n.tag===31){var s=n.memoizedState;if(s===null&&(n=n.alternate,n!==null&&(s=n.memoizedState)),s!==null)return s.dehydrated}return null}function d(n){if(l(n)!==n)throw Error(r(188))}function p(n){var s=n.alternate;if(!s){if(s=l(n),s===null)throw Error(r(188));return s!==n?null:n}for(var o=n,c=s;;){var m=o.return;if(m===null)break;var g=m.alternate;if(g===null){if(c=m.return,c!==null){o=c;continue}break}if(m.child===g.child){for(g=m.child;g;){if(g===o)return d(m),n;if(g===c)return d(m),s;g=g.sibling}throw Error(r(188))}if(o.return!==c.return)o=m,c=g;else{for(var E=!1,w=m.child;w;){if(w===o){E=!0,o=m,c=g;break}if(w===c){E=!0,c=m,o=g;break}w=w.sibling}if(!E){for(w=g.child;w;){if(w===o){E=!0,o=g,c=m;break}if(w===c){E=!0,c=g,o=m;break}w=w.sibling}if(!E)throw Error(r(189))}}if(o.alternate!==c)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?n:s}function y(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n;for(n=n.child;n!==null;){if(s=y(n),s!==null)return s;n=n.sibling}return null}var _=Object.assign,b=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),B=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),fe=Symbol.for("react.suspense"),de=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),C=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),j=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function G(n){return n===null||typeof n!="object"?null:(n=F&&n[F]||n["@@iterator"],typeof n=="function"?n:null)}var O=Symbol.for("react.client.reference");function dt(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===O?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case M:return"Fragment";case q:return"Profiler";case P:return"StrictMode";case fe:return"Suspense";case de:return"SuspenseList";case V:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case N:return"Portal";case B:return n.displayName||"Context";case $:return(n._context.displayName||"Context")+".Consumer";case J:var s=n.render;return n=n.displayName,n||(n=s.displayName||s.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case R:return s=n.displayName||null,s!==null?s:dt(n.type)||"Memo";case C:s=n._payload,n=n._init;try{return dt(n(s))}catch{}}return null}var Rt=Array.isArray,ie=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ye={pending:!1,data:null,method:null,action:null},Ve=[],$e=-1;function k(n){return{current:n}}function re(n){0>$e||(n.current=Ve[$e],Ve[$e]=null,$e--)}function ue(n,s){$e++,Ve[$e]=n.current,n.current=s}var ve=k(null),Ie=k(null),Ce=k(null),je=k(null);function an(n,s){switch(ue(Ce,s),ue(Ie,n),ue(ve,null),s.nodeType){case 9:case 11:n=(n=s.documentElement)&&(n=n.namespaceURI)?VT(n):0;break;default:if(n=s.tagName,s=s.namespaceURI)s=VT(s),n=MT(s,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}re(ve),ue(ve,n)}function It(){re(ve),re(Ie),re(Ce)}function Oi(n){n.memoizedState!==null&&ue(je,n);var s=ve.current,o=MT(s,n.type);s!==o&&(ue(Ie,n),ue(ve,o))}function rr(n){Ie.current===n&&(re(ve),re(Ie)),je.current===n&&(re(je),Tc._currentValue=ye)}var Ea,No;function vi(n){if(Ea===void 0)try{throw Error()}catch(o){var s=o.stack.trim().match(/\n( *(at )?)/);Ea=s&&s[1]||"",No=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ea+n+No}var Ta=!1;function Oo(n,s){if(!n||Ta)return"";Ta=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(s){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(te){var Z=te}Reflect.construct(n,[],le)}else{try{le.call()}catch(te){Z=te}n.call(le.prototype)}}else{try{throw Error()}catch(te){Z=te}(le=n())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(te){if(te&&Z&&typeof te.stack=="string")return[te.stack,Z.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),E=g[0],w=g[1];if(E&&w){var L=E.split(`
`),Y=w.split(`
`);for(m=c=0;c<L.length&&!L[c].includes("DetermineComponentFrameRoot");)c++;for(;m<Y.length&&!Y[m].includes("DetermineComponentFrameRoot");)m++;if(c===L.length||m===Y.length)for(c=L.length-1,m=Y.length-1;1<=c&&0<=m&&L[c]!==Y[m];)m--;for(;1<=c&&0<=m;c--,m--)if(L[c]!==Y[m]){if(c!==1||m!==1)do if(c--,m--,0>m||L[c]!==Y[m]){var se=`
`+L[c].replace(" at new "," at ");return n.displayName&&se.includes("<anonymous>")&&(se=se.replace("<anonymous>",n.displayName)),se}while(1<=c&&0<=m);break}}}finally{Ta=!1,Error.prepareStackTrace=o}return(o=n?n.displayName||n.name:"")?vi(o):""}function Wm(n,s){switch(n.tag){case 26:case 27:case 5:return vi(n.type);case 16:return vi("Lazy");case 13:return n.child!==s&&s!==null?vi("Suspense Fallback"):vi("Suspense");case 19:return vi("SuspenseList");case 0:case 15:return Oo(n.type,!1);case 11:return Oo(n.type.render,!1);case 1:return Oo(n.type,!0);case 31:return vi("Activity");default:return""}}function zh(n){try{var s="",o=null;do s+=Wm(n,o),o=n,n=n.return;while(n);return s}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Po=Object.prototype.hasOwnProperty,ba=i.unstable_scheduleCallback,Vo=i.unstable_cancelCallback,Jm=i.unstable_shouldYield,wu=i.unstable_requestPaint,on=i.unstable_now,Bh=i.unstable_getCurrentPriorityLevel,Gt=i.unstable_ImmediatePriority,Yt=i.unstable_UserBlockingPriority,sr=i.unstable_NormalPriority,Fh=i.unstable_LowPriority,Au=i.unstable_IdlePriority,Zm=i.log,Sa=i.unstable_setDisableYieldValue,Xr=null,yn=null;function ri(n){if(typeof Zm=="function"&&Sa(n),yn&&typeof yn.setStrictMode=="function")try{yn.setStrictMode(Xr,n)}catch{}}var An=Math.clz32?Math.clz32:qh,ep=Math.log,Iu=Math.LN2;function qh(n){return n>>>=0,n===0?32:31-(ep(n)/Iu|0)|0}var wa=256,Pi=262144,Yr=4194304;function Ei(n){var s=n&42;if(s!==0)return s;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function si(n,s,o){var c=n.pendingLanes;if(c===0)return 0;var m=0,g=n.suspendedLanes,E=n.pingedLanes;n=n.warmLanes;var w=c&134217727;return w!==0?(c=w&~g,c!==0?m=Ei(c):(E&=w,E!==0?m=Ei(E):o||(o=w&~n,o!==0&&(m=Ei(o))))):(w=c&~g,w!==0?m=Ei(w):E!==0?m=Ei(E):o||(o=c&~n,o!==0&&(m=Ei(o)))),m===0?0:s!==0&&s!==m&&(s&g)===0&&(g=m&-m,o=s&-s,g>=o||g===32&&(o&4194048)!==0)?s:m}function Wr(n,s){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&s)===0}function Mo(n,s){switch(n){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xu(){var n=Yr;return Yr<<=1,(Yr&62914560)===0&&(Yr=4194304),n}function ar(n){for(var s=[],o=0;31>o;o++)s.push(n);return s}function Jr(n,s){n.pendingLanes|=s,s!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function ln(n,s,o,c,m,g){var E=n.pendingLanes;n.pendingLanes=o,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=o,n.entangledLanes&=o,n.errorRecoveryDisabledLanes&=o,n.shellSuspendCounter=0;var w=n.entanglements,L=n.expirationTimes,Y=n.hiddenUpdates;for(o=E&~o;0<o;){var se=31-An(o),le=1<<se;w[se]=0,L[se]=-1;var Z=Y[se];if(Z!==null)for(Y[se]=null,se=0;se<Z.length;se++){var te=Z[se];te!==null&&(te.lane&=-536870913)}o&=~le}c!==0&&Ru(n,c,0),g!==0&&m===0&&n.tag!==0&&(n.suspendedLanes|=g&~(E&~s))}function Ru(n,s,o){n.pendingLanes|=s,n.suspendedLanes&=~s;var c=31-An(s);n.entangledLanes|=s,n.entanglements[c]=n.entanglements[c]|1073741824|o&261930}function Zr(n,s){var o=n.entangledLanes|=s;for(n=n.entanglements;o;){var c=31-An(o),m=1<<c;m&s|n[c]&s&&(n[c]|=s),o&=~m}}function es(n,s){var o=s&-s;return o=(o&42)!==0?1:Cu(o),(o&(n.suspendedLanes|s))!==0?0:o}function Cu(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Du(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function or(){var n=he.p;return n!==0?n:(n=window.event,n===void 0?32:rb(n.type))}function Hh(n,s){var o=he.p;try{return he.p=n,s()}finally{he.p=o}}var Vi=Math.random().toString(36).slice(2),Ct="__reactFiber$"+Vi,un="__reactProps$"+Vi,Mi="__reactContainer$"+Vi,ts="__reactEvents$"+Vi,ki="__reactListeners$"+Vi,Gh="__reactHandles$"+Vi,Nu="__reactResources$"+Vi,lr="__reactMarker$"+Vi;function Aa(n){delete n[Ct],delete n[un],delete n[ts],delete n[ki],delete n[Gh]}function ur(n){var s=n[Ct];if(s)return s;for(var o=n.parentNode;o;){if(s=o[Mi]||o[Ct]){if(o=s.alternate,s.child!==null||o!==null&&o.child!==null)for(n=FT(n);n!==null;){if(o=n[Ct])return o;n=FT(n)}return s}n=o,o=n.parentNode}return null}function cr(n){if(n=n[Ct]||n[Mi]){var s=n.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return n}return null}function Ia(n){var s=n.tag;if(s===5||s===26||s===27||s===6)return n.stateNode;throw Error(r(33))}function Ti(n){var s=n[Nu];return s||(s=n[Nu]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function Pt(n){n[lr]=!0}var ko=new Set,ns={};function In(n,s){Li(n,s),Li(n+"Capture",s)}function Li(n,s){for(ns[n]=s,n=0;n<s.length;n++)ko.add(s[n])}var tp=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ou={},Pu={};function Kh(n){return Po.call(Pu,n)?!0:Po.call(Ou,n)?!1:tp.test(n)?Pu[n]=!0:(Ou[n]=!0,!1)}function is(n,s,o){if(Kh(s))if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":n.removeAttribute(s);return;case"boolean":var c=s.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(s);return}}n.setAttribute(s,""+o)}}function rs(n,s,o){if(o===null)n.removeAttribute(s);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(s);return}n.setAttribute(s,""+o)}}function ai(n,s,o,c){if(c===null)n.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(o);return}n.setAttributeNS(s,o,""+c)}}function xn(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function $h(n){var s=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function np(n,s,o){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,s);if(!n.hasOwnProperty(s)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var m=c.get,g=c.set;return Object.defineProperty(n,s,{configurable:!0,get:function(){return m.call(this)},set:function(E){o=""+E,g.call(this,E)}}),Object.defineProperty(n,s,{enumerable:c.enumerable}),{getValue:function(){return o},setValue:function(E){o=""+E},stopTracking:function(){n._valueTracker=null,delete n[s]}}}}function Lo(n){if(!n._valueTracker){var s=$h(n)?"checked":"value";n._valueTracker=np(n,s,""+n[s])}}function Vu(n){if(!n)return!1;var s=n._valueTracker;if(!s)return!0;var o=s.getValue(),c="";return n&&(c=$h(n)?n.checked?"true":"false":n.value),n=c,n!==o?(s.setValue(n),!0):!1}function jo(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var hr=/[\n"\\]/g;function Dt(n){return n.replace(hr,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function ss(n,s,o,c,m,g,E,w){n.name="",E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"?n.type=E:n.removeAttribute("type"),s!=null?E==="number"?(s===0&&n.value===""||n.value!=s)&&(n.value=""+xn(s)):n.value!==""+xn(s)&&(n.value=""+xn(s)):E!=="submit"&&E!=="reset"||n.removeAttribute("value"),s!=null?Uo(n,E,xn(s)):o!=null?Uo(n,E,xn(o)):c!=null&&n.removeAttribute("value"),m==null&&g!=null&&(n.defaultChecked=!!g),m!=null&&(n.checked=m&&typeof m!="function"&&typeof m!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?n.name=""+xn(w):n.removeAttribute("name")}function xa(n,s,o,c,m,g,E,w){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),s!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||s!=null)){Lo(n);return}o=o!=null?""+xn(o):"",s=s!=null?""+xn(s):o,w||s===n.value||(n.value=s),n.defaultValue=s}c=c??m,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=w?n.checked:!!c,n.defaultChecked=!!c,E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(n.name=E),Lo(n)}function Uo(n,s,o){s==="number"&&jo(n.ownerDocument)===n||n.defaultValue===""+o||(n.defaultValue=""+o)}function Xe(n,s,o,c){if(n=n.options,s){s={};for(var m=0;m<o.length;m++)s["$"+o[m]]=!0;for(o=0;o<n.length;o++)m=s.hasOwnProperty("$"+n[o].value),n[o].selected!==m&&(n[o].selected=m),m&&c&&(n[o].defaultSelected=!0)}else{for(o=""+xn(o),s=null,m=0;m<n.length;m++){if(n[m].value===o){n[m].selected=!0,c&&(n[m].defaultSelected=!0);return}s!==null||n[m].disabled||(s=n[m])}s!==null&&(s.selected=!0)}}function Ra(n,s,o){if(s!=null&&(s=""+xn(s),s!==n.value&&(n.value=s),o==null)){n.defaultValue!==s&&(n.defaultValue=s);return}n.defaultValue=o!=null?""+xn(o):""}function as(n,s,o,c){if(s==null){if(c!=null){if(o!=null)throw Error(r(92));if(Rt(c)){if(1<c.length)throw Error(r(93));c=c[0]}o=c}o==null&&(o=""),s=o}o=xn(s),n.defaultValue=o,c=n.textContent,c===o&&c!==""&&c!==null&&(n.value=c),Lo(n)}function oi(n,s){if(s){var o=n.firstChild;if(o&&o===n.lastChild&&o.nodeType===3){o.nodeValue=s;return}}n.textContent=s}var ip=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Mu(n,s,o){var c=s.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?n.setProperty(s,""):s==="float"?n.cssFloat="":n[s]="":c?n.setProperty(s,o):typeof o!="number"||o===0||ip.has(s)?s==="float"?n.cssFloat=o:n[s]=(""+o).trim():n[s]=o+"px"}function Qh(n,s,o){if(s!=null&&typeof s!="object")throw Error(r(62));if(n=n.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||s!=null&&s.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var m in s)c=s[m],s.hasOwnProperty(m)&&o[m]!==c&&Mu(n,m,c)}else for(var g in s)s.hasOwnProperty(g)&&Mu(n,g,s[g])}function ku(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),sp=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ji(n){return sp.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function Wt(){}var zo=null;function Bo(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var fr=null,Gn=null;function Xh(n){var s=cr(n);if(s&&(n=s.stateNode)){var o=n[un]||null;e:switch(n=s.stateNode,s.type){case"input":if(ss(n,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),s=o.name,o.type==="radio"&&s!=null){for(o=n;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+Dt(""+s)+'"][type="radio"]'),s=0;s<o.length;s++){var c=o[s];if(c!==n&&c.form===n.form){var m=c[un]||null;if(!m)throw Error(r(90));ss(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(s=0;s<o.length;s++)c=o[s],c.form===n.form&&Vu(c)}break e;case"textarea":Ra(n,o.value,o.defaultValue);break e;case"select":s=o.value,s!=null&&Xe(n,!!o.multiple,s,!1)}}}var Lu=!1;function Yh(n,s,o){if(Lu)return n(s,o);Lu=!0;try{var c=n(s);return c}finally{if(Lu=!1,(fr!==null||Gn!==null)&&($f(),fr&&(s=fr,n=Gn,Gn=fr=null,Xh(s),n)))for(s=0;s<n.length;s++)Xh(n[s])}}function Nn(n,s){var o=n.stateNode;if(o===null)return null;var c=o[un]||null;if(c===null)return null;o=c[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(o&&typeof o!="function")throw Error(r(231,s,typeof o));return o}var bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ju=!1;if(bi)try{var Ui={};Object.defineProperty(Ui,"passive",{get:function(){ju=!0}}),window.addEventListener("test",Ui,Ui),window.removeEventListener("test",Ui,Ui)}catch{ju=!1}var Kn=null,Fo=null,zi=null;function os(){if(zi)return zi;var n,s=Fo,o=s.length,c,m="value"in Kn?Kn.value:Kn.textContent,g=m.length;for(n=0;n<o&&s[n]===m[n];n++);var E=o-n;for(c=1;c<=E&&s[o-c]===m[g-c];c++);return zi=m.slice(n,1<c?1-c:void 0)}function Ca(n){var s=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&s===13&&(n=13)):n=s,n===10&&(n=13),32<=n||n===13?n:0}function ls(){return!0}function gt(){return!1}function _n(n){function s(o,c,m,g,E){this._reactName=o,this._targetInst=m,this.type=c,this.nativeEvent=g,this.target=E,this.currentTarget=null;for(var w in n)n.hasOwnProperty(w)&&(o=n[w],this[w]=o?o(g):g[w]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?ls:gt,this.isPropagationStopped=gt,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=ls)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=ls)},persist:function(){},isPersistent:ls}),s}var dr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Da=_n(dr),us=_({},dr,{view:0,detail:0}),Wh=_n(us),cs,qo,Rn,Na=_({},us,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:fs,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Rn&&(Rn&&n.type==="mousemove"?(cs=n.screenX-Rn.screenX,qo=n.screenY-Rn.screenY):qo=cs=0,Rn=n),cs)},movementY:function(n){return"movementY"in n?n.movementY:qo}}),Jh=_n(Na),Oa=_({},Na,{dataTransfer:0}),Zh=_n(Oa),Uu=_({},us,{relatedTarget:0}),hs=_n(Uu),ef=_({},dr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ho=_n(ef),ap=_({},dr,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),tf=_n(ap),Pa=_({},dr,{data:0}),zu=_n(Pa),nf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rf(n){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(n):(n=Fu[n])?!!s[n]:!1}function fs(){return rf}var sf=_({},us,{key:function(n){if(n.key){var s=nf[n.key]||n.key;if(s!=="Unidentified")return s}return n.type==="keypress"?(n=Ca(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Bu[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:fs,charCode:function(n){return n.type==="keypress"?Ca(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Ca(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),af=_n(sf),mr=_({},Na,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qu=_n(mr),of=_({},us,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:fs}),lf=_n(of),uf=_({},dr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Go=_n(uf),Cn=_({},Na,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),cf=_n(Cn),hf=_({},dr,{newState:0,oldState:0}),ds=_n(hf),h=[9,13,27,32],v=bi&&"CompositionEvent"in window,T=null;bi&&"documentMode"in document&&(T=document.documentMode);var I=bi&&"TextEvent"in window&&!T,Q=bi&&(!v||T&&8<T&&11>=T),ne=" ",me=!1;function Ze(n,s){switch(n){case"keyup":return h.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jt(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Me=!1;function Jt(n,s){switch(n){case"compositionend":return jt(s);case"keypress":return s.which!==32?null:(me=!0,ne);case"textInput":return n=s.data,n===ne&&me?null:n;default:return null}}function Zt(n,s){if(Me)return n==="compositionend"||!v&&Ze(n,s)?(n=os(),zi=Fo=Kn=null,Me=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return Q&&s.locale!=="ko"?null:s.data;default:return null}}var ms={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function On(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s==="input"?!!ms[n.type]:s==="textarea"}function Va(n,s,o,c){fr?Gn?Gn.push(c):Gn=[c]:fr=c,s=ed(s,"onChange"),0<s.length&&(o=new Da("onChange","change",null,o,c),n.push({event:o,listeners:s}))}var pr=null,Hu=null;function oR(n){RT(n,0)}function ff(n){var s=Ia(n);if(Vu(s))return n}function $v(n,s){if(n==="change")return s}var Qv=!1;if(bi){var op;if(bi){var lp="oninput"in document;if(!lp){var Xv=document.createElement("div");Xv.setAttribute("oninput","return;"),lp=typeof Xv.oninput=="function"}op=lp}else op=!1;Qv=op&&(!document.documentMode||9<document.documentMode)}function Yv(){pr&&(pr.detachEvent("onpropertychange",Wv),Hu=pr=null)}function Wv(n){if(n.propertyName==="value"&&ff(Hu)){var s=[];Va(s,Hu,n,Bo(n)),Yh(oR,s)}}function lR(n,s,o){n==="focusin"?(Yv(),pr=s,Hu=o,pr.attachEvent("onpropertychange",Wv)):n==="focusout"&&Yv()}function uR(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ff(Hu)}function cR(n,s){if(n==="click")return ff(s)}function hR(n,s){if(n==="input"||n==="change")return ff(s)}function fR(n,s){return n===s&&(n!==0||1/n===1/s)||n!==n&&s!==s}var $n=typeof Object.is=="function"?Object.is:fR;function Gu(n,s){if($n(n,s))return!0;if(typeof n!="object"||n===null||typeof s!="object"||s===null)return!1;var o=Object.keys(n),c=Object.keys(s);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var m=o[c];if(!Po.call(s,m)||!$n(n[m],s[m]))return!1}return!0}function Jv(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Zv(n,s){var o=Jv(n);n=0;for(var c;o;){if(o.nodeType===3){if(c=n+o.textContent.length,n<=s&&c>=s)return{node:o,offset:s-n};n=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Jv(o)}}function e0(n,s){return n&&s?n===s?!0:n&&n.nodeType===3?!1:s&&s.nodeType===3?e0(n,s.parentNode):"contains"in n?n.contains(s):n.compareDocumentPosition?!!(n.compareDocumentPosition(s)&16):!1:!1}function t0(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var s=jo(n.document);s instanceof n.HTMLIFrameElement;){try{var o=typeof s.contentWindow.location.href=="string"}catch{o=!1}if(o)n=s.contentWindow;else break;s=jo(n.document)}return s}function up(n){var s=n&&n.nodeName&&n.nodeName.toLowerCase();return s&&(s==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||s==="textarea"||n.contentEditable==="true")}var dR=bi&&"documentMode"in document&&11>=document.documentMode,Ko=null,cp=null,Ku=null,hp=!1;function n0(n,s,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;hp||Ko==null||Ko!==jo(c)||(c=Ko,"selectionStart"in c&&up(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ku&&Gu(Ku,c)||(Ku=c,c=ed(cp,"onSelect"),0<c.length&&(s=new Da("onSelect","select",null,s,o),n.push({event:s,listeners:c}),s.target=Ko)))}function Ma(n,s){var o={};return o[n.toLowerCase()]=s.toLowerCase(),o["Webkit"+n]="webkit"+s,o["Moz"+n]="moz"+s,o}var $o={animationend:Ma("Animation","AnimationEnd"),animationiteration:Ma("Animation","AnimationIteration"),animationstart:Ma("Animation","AnimationStart"),transitionrun:Ma("Transition","TransitionRun"),transitionstart:Ma("Transition","TransitionStart"),transitioncancel:Ma("Transition","TransitionCancel"),transitionend:Ma("Transition","TransitionEnd")},fp={},i0={};bi&&(i0=document.createElement("div").style,"AnimationEvent"in window||(delete $o.animationend.animation,delete $o.animationiteration.animation,delete $o.animationstart.animation),"TransitionEvent"in window||delete $o.transitionend.transition);function ka(n){if(fp[n])return fp[n];if(!$o[n])return n;var s=$o[n],o;for(o in s)if(s.hasOwnProperty(o)&&o in i0)return fp[n]=s[o];return n}var r0=ka("animationend"),s0=ka("animationiteration"),a0=ka("animationstart"),mR=ka("transitionrun"),pR=ka("transitionstart"),gR=ka("transitioncancel"),o0=ka("transitionend"),l0=new Map,dp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");dp.push("scrollEnd");function Si(n,s){l0.set(n,s),In(s,[n])}var df=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},li=[],Qo=0,mp=0;function mf(){for(var n=Qo,s=mp=Qo=0;s<n;){var o=li[s];li[s++]=null;var c=li[s];li[s++]=null;var m=li[s];li[s++]=null;var g=li[s];if(li[s++]=null,c!==null&&m!==null){var E=c.pending;E===null?m.next=m:(m.next=E.next,E.next=m),c.pending=m}g!==0&&u0(o,m,g)}}function pf(n,s,o,c){li[Qo++]=n,li[Qo++]=s,li[Qo++]=o,li[Qo++]=c,mp|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function pp(n,s,o,c){return pf(n,s,o,c),gf(n)}function La(n,s){return pf(n,null,null,s),gf(n)}function u0(n,s,o){n.lanes|=o;var c=n.alternate;c!==null&&(c.lanes|=o);for(var m=!1,g=n.return;g!==null;)g.childLanes|=o,c=g.alternate,c!==null&&(c.childLanes|=o),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(m=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,m&&s!==null&&(m=31-An(o),n=g.hiddenUpdates,c=n[m],c===null?n[m]=[s]:c.push(s),s.lane=o|536870912),g):null}function gf(n){if(50<mc)throw mc=0,wg=null,Error(r(185));for(var s=n.return;s!==null;)n=s,s=n.return;return n.tag===3?n.stateNode:null}var Xo={};function yR(n,s,o,c){this.tag=n,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(n,s,o,c){return new yR(n,s,o,c)}function gp(n){return n=n.prototype,!(!n||!n.isReactComponent)}function gr(n,s){var o=n.alternate;return o===null?(o=Qn(n.tag,s,n.key,n.mode),o.elementType=n.elementType,o.type=n.type,o.stateNode=n.stateNode,o.alternate=n,n.alternate=o):(o.pendingProps=s,o.type=n.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=n.flags&65011712,o.childLanes=n.childLanes,o.lanes=n.lanes,o.child=n.child,o.memoizedProps=n.memoizedProps,o.memoizedState=n.memoizedState,o.updateQueue=n.updateQueue,s=n.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},o.sibling=n.sibling,o.index=n.index,o.ref=n.ref,o.refCleanup=n.refCleanup,o}function c0(n,s){n.flags&=65011714;var o=n.alternate;return o===null?(n.childLanes=0,n.lanes=s,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,s=o.dependencies,n.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n}function yf(n,s,o,c,m,g){var E=0;if(c=n,typeof n=="function")gp(n)&&(E=1);else if(typeof n=="string")E=bC(n,o,ve.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case V:return n=Qn(31,o,s,m),n.elementType=V,n.lanes=g,n;case M:return ja(o.children,m,g,s);case P:E=8,m|=24;break;case q:return n=Qn(12,o,s,m|2),n.elementType=q,n.lanes=g,n;case fe:return n=Qn(13,o,s,m),n.elementType=fe,n.lanes=g,n;case de:return n=Qn(19,o,s,m),n.elementType=de,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case B:E=10;break e;case $:E=9;break e;case J:E=11;break e;case R:E=14;break e;case C:E=16,c=null;break e}E=29,o=Error(r(130,n===null?"null":typeof n,"")),c=null}return s=Qn(E,o,s,m),s.elementType=n,s.type=c,s.lanes=g,s}function ja(n,s,o,c){return n=Qn(7,n,c,s),n.lanes=o,n}function yp(n,s,o){return n=Qn(6,n,null,s),n.lanes=o,n}function h0(n){var s=Qn(18,null,null,0);return s.stateNode=n,s}function _p(n,s,o){return s=Qn(4,n.children!==null?n.children:[],n.key,s),s.lanes=o,s.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},s}var f0=new WeakMap;function ui(n,s){if(typeof n=="object"&&n!==null){var o=f0.get(n);return o!==void 0?o:(s={value:n,source:s,stack:zh(s)},f0.set(n,s),s)}return{value:n,source:s,stack:zh(s)}}var Yo=[],Wo=0,_f=null,$u=0,ci=[],hi=0,ps=null,Bi=1,Fi="";function yr(n,s){Yo[Wo++]=$u,Yo[Wo++]=_f,_f=n,$u=s}function d0(n,s,o){ci[hi++]=Bi,ci[hi++]=Fi,ci[hi++]=ps,ps=n;var c=Bi;n=Fi;var m=32-An(c)-1;c&=~(1<<m),o+=1;var g=32-An(s)+m;if(30<g){var E=m-m%5;g=(c&(1<<E)-1).toString(32),c>>=E,m-=E,Bi=1<<32-An(s)+m|o<<m|c,Fi=g+n}else Bi=1<<g|o<<m|c,Fi=n}function vp(n){n.return!==null&&(yr(n,1),d0(n,1,0))}function Ep(n){for(;n===_f;)_f=Yo[--Wo],Yo[Wo]=null,$u=Yo[--Wo],Yo[Wo]=null;for(;n===ps;)ps=ci[--hi],ci[hi]=null,Fi=ci[--hi],ci[hi]=null,Bi=ci[--hi],ci[hi]=null}function m0(n,s){ci[hi++]=Bi,ci[hi++]=Fi,ci[hi++]=ps,Bi=s.id,Fi=s.overflow,ps=n}var cn=null,yt=null,Ge=!1,gs=null,fi=!1,Tp=Error(r(519));function ys(n){var s=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Qu(ui(s,n)),Tp}function p0(n){var s=n.stateNode,o=n.type,c=n.memoizedProps;switch(s[Ct]=n,s[un]=c,o){case"dialog":ze("cancel",s),ze("close",s);break;case"iframe":case"object":case"embed":ze("load",s);break;case"video":case"audio":for(o=0;o<gc.length;o++)ze(gc[o],s);break;case"source":ze("error",s);break;case"img":case"image":case"link":ze("error",s),ze("load",s);break;case"details":ze("toggle",s);break;case"input":ze("invalid",s),xa(s,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":ze("invalid",s);break;case"textarea":ze("invalid",s),as(s,c.value,c.defaultValue,c.children)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||s.textContent===""+o||c.suppressHydrationWarning===!0||OT(s.textContent,o)?(c.popover!=null&&(ze("beforetoggle",s),ze("toggle",s)),c.onScroll!=null&&ze("scroll",s),c.onScrollEnd!=null&&ze("scrollend",s),c.onClick!=null&&(s.onclick=Wt),s=!0):s=!1,s||ys(n,!0)}function g0(n){for(cn=n.return;cn;)switch(cn.tag){case 5:case 31:case 13:fi=!1;return;case 27:case 3:fi=!0;return;default:cn=cn.return}}function Jo(n){if(n!==cn)return!1;if(!Ge)return g0(n),Ge=!0,!1;var s=n.tag,o;if((o=s!==3&&s!==27)&&((o=s===5)&&(o=n.type,o=!(o!=="form"&&o!=="button")||Ug(n.type,n.memoizedProps)),o=!o),o&&yt&&ys(n),g0(n),s===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));yt=BT(n)}else if(s===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(317));yt=BT(n)}else s===27?(s=yt,Ns(n.type)?(n=Hg,Hg=null,yt=n):yt=s):yt=cn?mi(n.stateNode.nextSibling):null;return!0}function Ua(){yt=cn=null,Ge=!1}function bp(){var n=gs;return n!==null&&(kn===null?kn=n:kn.push.apply(kn,n),gs=null),n}function Qu(n){gs===null?gs=[n]:gs.push(n)}var Sp=k(null),za=null,_r=null;function _s(n,s,o){ue(Sp,s._currentValue),s._currentValue=o}function vr(n){n._currentValue=Sp.current,re(Sp)}function wp(n,s,o){for(;n!==null;){var c=n.alternate;if((n.childLanes&s)!==s?(n.childLanes|=s,c!==null&&(c.childLanes|=s)):c!==null&&(c.childLanes&s)!==s&&(c.childLanes|=s),n===o)break;n=n.return}}function Ap(n,s,o,c){var m=n.child;for(m!==null&&(m.return=n);m!==null;){var g=m.dependencies;if(g!==null){var E=m.child;g=g.firstContext;e:for(;g!==null;){var w=g;g=m;for(var L=0;L<s.length;L++)if(w.context===s[L]){g.lanes|=o,w=g.alternate,w!==null&&(w.lanes|=o),wp(g.return,o,n),c||(E=null);break e}g=w.next}}else if(m.tag===18){if(E=m.return,E===null)throw Error(r(341));E.lanes|=o,g=E.alternate,g!==null&&(g.lanes|=o),wp(E,o,n),E=null}else E=m.child;if(E!==null)E.return=m;else for(E=m;E!==null;){if(E===n){E=null;break}if(m=E.sibling,m!==null){m.return=E.return,E=m;break}E=E.return}m=E}}function Zo(n,s,o,c){n=null;for(var m=s,g=!1;m!==null;){if(!g){if((m.flags&524288)!==0)g=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var E=m.alternate;if(E===null)throw Error(r(387));if(E=E.memoizedProps,E!==null){var w=m.type;$n(m.pendingProps.value,E.value)||(n!==null?n.push(w):n=[w])}}else if(m===je.current){if(E=m.alternate,E===null)throw Error(r(387));E.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(n!==null?n.push(Tc):n=[Tc])}m=m.return}n!==null&&Ap(s,n,o,c),s.flags|=262144}function vf(n){for(n=n.firstContext;n!==null;){if(!$n(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function Ba(n){za=n,_r=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function hn(n){return y0(za,n)}function Ef(n,s){return za===null&&Ba(n),y0(n,s)}function y0(n,s){var o=s._currentValue;if(s={context:s,memoizedValue:o,next:null},_r===null){if(n===null)throw Error(r(308));_r=s,n.dependencies={lanes:0,firstContext:s},n.flags|=524288}else _r=_r.next=s;return o}var _R=typeof AbortController<"u"?AbortController:function(){var n=[],s=this.signal={aborted:!1,addEventListener:function(o,c){n.push(c)}};this.abort=function(){s.aborted=!0,n.forEach(function(o){return o()})}},vR=i.unstable_scheduleCallback,ER=i.unstable_NormalPriority,Ut={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ip(){return{controller:new _R,data:new Map,refCount:0}}function Xu(n){n.refCount--,n.refCount===0&&vR(ER,function(){n.controller.abort()})}var Yu=null,xp=0,el=0,tl=null;function TR(n,s){if(Yu===null){var o=Yu=[];xp=0,el=Dg(),tl={status:"pending",value:void 0,then:function(c){o.push(c)}}}return xp++,s.then(_0,_0),s}function _0(){if(--xp===0&&Yu!==null){tl!==null&&(tl.status="fulfilled");var n=Yu;Yu=null,el=0,tl=null;for(var s=0;s<n.length;s++)(0,n[s])()}}function bR(n,s){var o=[],c={status:"pending",value:null,reason:null,then:function(m){o.push(m)}};return n.then(function(){c.status="fulfilled",c.value=s;for(var m=0;m<o.length;m++)(0,o[m])(s)},function(m){for(c.status="rejected",c.reason=m,m=0;m<o.length;m++)(0,o[m])(void 0)}),c}var v0=ie.S;ie.S=function(n,s){nT=on(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&TR(n,s),v0!==null&&v0(n,s)};var Fa=k(null);function Rp(){var n=Fa.current;return n!==null?n:mt.pooledCache}function Tf(n,s){s===null?ue(Fa,Fa.current):ue(Fa,s.pool)}function E0(){var n=Rp();return n===null?null:{parent:Ut._currentValue,pool:n}}var nl=Error(r(460)),Cp=Error(r(474)),bf=Error(r(542)),Sf={then:function(){}};function T0(n){return n=n.status,n==="fulfilled"||n==="rejected"}function b0(n,s,o){switch(o=n[o],o===void 0?n.push(s):o!==s&&(s.then(Wt,Wt),s=o),s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,w0(n),n;default:if(typeof s.status=="string")s.then(Wt,Wt);else{if(n=mt,n!==null&&100<n.shellSuspendCounter)throw Error(r(482));n=s,n.status="pending",n.then(function(c){if(s.status==="pending"){var m=s;m.status="fulfilled",m.value=c}},function(c){if(s.status==="pending"){var m=s;m.status="rejected",m.reason=c}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw n=s.reason,w0(n),n}throw Ha=s,nl}}function qa(n){try{var s=n._init;return s(n._payload)}catch(o){throw o!==null&&typeof o=="object"&&typeof o.then=="function"?(Ha=o,nl):o}}var Ha=null;function S0(){if(Ha===null)throw Error(r(459));var n=Ha;return Ha=null,n}function w0(n){if(n===nl||n===bf)throw Error(r(483))}var il=null,Wu=0;function wf(n){var s=Wu;return Wu+=1,il===null&&(il=[]),b0(il,n,s)}function Ju(n,s){s=s.props.ref,n.ref=s!==void 0?s:null}function Af(n,s){throw s.$$typeof===b?Error(r(525)):(n=Object.prototype.toString.call(s),Error(r(31,n==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":n)))}function A0(n){function s(H,U){if(n){var X=H.deletions;X===null?(H.deletions=[U],H.flags|=16):X.push(U)}}function o(H,U){if(!n)return null;for(;U!==null;)s(H,U),U=U.sibling;return null}function c(H){for(var U=new Map;H!==null;)H.key!==null?U.set(H.key,H):U.set(H.index,H),H=H.sibling;return U}function m(H,U){return H=gr(H,U),H.index=0,H.sibling=null,H}function g(H,U,X){return H.index=X,n?(X=H.alternate,X!==null?(X=X.index,X<U?(H.flags|=67108866,U):X):(H.flags|=67108866,U)):(H.flags|=1048576,U)}function E(H){return n&&H.alternate===null&&(H.flags|=67108866),H}function w(H,U,X,ae){return U===null||U.tag!==6?(U=yp(X,H.mode,ae),U.return=H,U):(U=m(U,X),U.return=H,U)}function L(H,U,X,ae){var we=X.type;return we===M?se(H,U,X.props.children,ae,X.key):U!==null&&(U.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===C&&qa(we)===U.type)?(U=m(U,X.props),Ju(U,X),U.return=H,U):(U=yf(X.type,X.key,X.props,null,H.mode,ae),Ju(U,X),U.return=H,U)}function Y(H,U,X,ae){return U===null||U.tag!==4||U.stateNode.containerInfo!==X.containerInfo||U.stateNode.implementation!==X.implementation?(U=_p(X,H.mode,ae),U.return=H,U):(U=m(U,X.children||[]),U.return=H,U)}function se(H,U,X,ae,we){return U===null||U.tag!==7?(U=ja(X,H.mode,ae,we),U.return=H,U):(U=m(U,X),U.return=H,U)}function le(H,U,X){if(typeof U=="string"&&U!==""||typeof U=="number"||typeof U=="bigint")return U=yp(""+U,H.mode,X),U.return=H,U;if(typeof U=="object"&&U!==null){switch(U.$$typeof){case A:return X=yf(U.type,U.key,U.props,null,H.mode,X),Ju(X,U),X.return=H,X;case N:return U=_p(U,H.mode,X),U.return=H,U;case C:return U=qa(U),le(H,U,X)}if(Rt(U)||G(U))return U=ja(U,H.mode,X,null),U.return=H,U;if(typeof U.then=="function")return le(H,wf(U),X);if(U.$$typeof===B)return le(H,Ef(H,U),X);Af(H,U)}return null}function Z(H,U,X,ae){var we=U!==null?U.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return we!==null?null:w(H,U,""+X,ae);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case A:return X.key===we?L(H,U,X,ae):null;case N:return X.key===we?Y(H,U,X,ae):null;case C:return X=qa(X),Z(H,U,X,ae)}if(Rt(X)||G(X))return we!==null?null:se(H,U,X,ae,null);if(typeof X.then=="function")return Z(H,U,wf(X),ae);if(X.$$typeof===B)return Z(H,U,Ef(H,X),ae);Af(H,X)}return null}function te(H,U,X,ae,we){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return H=H.get(X)||null,w(U,H,""+ae,we);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case A:return H=H.get(ae.key===null?X:ae.key)||null,L(U,H,ae,we);case N:return H=H.get(ae.key===null?X:ae.key)||null,Y(U,H,ae,we);case C:return ae=qa(ae),te(H,U,X,ae,we)}if(Rt(ae)||G(ae))return H=H.get(X)||null,se(U,H,ae,we,null);if(typeof ae.then=="function")return te(H,U,X,wf(ae),we);if(ae.$$typeof===B)return te(H,U,X,Ef(U,ae),we);Af(U,ae)}return null}function Ee(H,U,X,ae){for(var we=null,Ye=null,be=U,Pe=U=0,Fe=null;be!==null&&Pe<X.length;Pe++){be.index>Pe?(Fe=be,be=null):Fe=be.sibling;var We=Z(H,be,X[Pe],ae);if(We===null){be===null&&(be=Fe);break}n&&be&&We.alternate===null&&s(H,be),U=g(We,U,Pe),Ye===null?we=We:Ye.sibling=We,Ye=We,be=Fe}if(Pe===X.length)return o(H,be),Ge&&yr(H,Pe),we;if(be===null){for(;Pe<X.length;Pe++)be=le(H,X[Pe],ae),be!==null&&(U=g(be,U,Pe),Ye===null?we=be:Ye.sibling=be,Ye=be);return Ge&&yr(H,Pe),we}for(be=c(be);Pe<X.length;Pe++)Fe=te(be,H,Pe,X[Pe],ae),Fe!==null&&(n&&Fe.alternate!==null&&be.delete(Fe.key===null?Pe:Fe.key),U=g(Fe,U,Pe),Ye===null?we=Fe:Ye.sibling=Fe,Ye=Fe);return n&&be.forEach(function(ks){return s(H,ks)}),Ge&&yr(H,Pe),we}function xe(H,U,X,ae){if(X==null)throw Error(r(151));for(var we=null,Ye=null,be=U,Pe=U=0,Fe=null,We=X.next();be!==null&&!We.done;Pe++,We=X.next()){be.index>Pe?(Fe=be,be=null):Fe=be.sibling;var ks=Z(H,be,We.value,ae);if(ks===null){be===null&&(be=Fe);break}n&&be&&ks.alternate===null&&s(H,be),U=g(ks,U,Pe),Ye===null?we=ks:Ye.sibling=ks,Ye=ks,be=Fe}if(We.done)return o(H,be),Ge&&yr(H,Pe),we;if(be===null){for(;!We.done;Pe++,We=X.next())We=le(H,We.value,ae),We!==null&&(U=g(We,U,Pe),Ye===null?we=We:Ye.sibling=We,Ye=We);return Ge&&yr(H,Pe),we}for(be=c(be);!We.done;Pe++,We=X.next())We=te(be,H,Pe,We.value,ae),We!==null&&(n&&We.alternate!==null&&be.delete(We.key===null?Pe:We.key),U=g(We,U,Pe),Ye===null?we=We:Ye.sibling=We,Ye=We);return n&&be.forEach(function(PC){return s(H,PC)}),Ge&&yr(H,Pe),we}function lt(H,U,X,ae){if(typeof X=="object"&&X!==null&&X.type===M&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case A:e:{for(var we=X.key;U!==null;){if(U.key===we){if(we=X.type,we===M){if(U.tag===7){o(H,U.sibling),ae=m(U,X.props.children),ae.return=H,H=ae;break e}}else if(U.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===C&&qa(we)===U.type){o(H,U.sibling),ae=m(U,X.props),Ju(ae,X),ae.return=H,H=ae;break e}o(H,U);break}else s(H,U);U=U.sibling}X.type===M?(ae=ja(X.props.children,H.mode,ae,X.key),ae.return=H,H=ae):(ae=yf(X.type,X.key,X.props,null,H.mode,ae),Ju(ae,X),ae.return=H,H=ae)}return E(H);case N:e:{for(we=X.key;U!==null;){if(U.key===we)if(U.tag===4&&U.stateNode.containerInfo===X.containerInfo&&U.stateNode.implementation===X.implementation){o(H,U.sibling),ae=m(U,X.children||[]),ae.return=H,H=ae;break e}else{o(H,U);break}else s(H,U);U=U.sibling}ae=_p(X,H.mode,ae),ae.return=H,H=ae}return E(H);case C:return X=qa(X),lt(H,U,X,ae)}if(Rt(X))return Ee(H,U,X,ae);if(G(X)){if(we=G(X),typeof we!="function")throw Error(r(150));return X=we.call(X),xe(H,U,X,ae)}if(typeof X.then=="function")return lt(H,U,wf(X),ae);if(X.$$typeof===B)return lt(H,U,Ef(H,X),ae);Af(H,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,U!==null&&U.tag===6?(o(H,U.sibling),ae=m(U,X),ae.return=H,H=ae):(o(H,U),ae=yp(X,H.mode,ae),ae.return=H,H=ae),E(H)):o(H,U)}return function(H,U,X,ae){try{Wu=0;var we=lt(H,U,X,ae);return il=null,we}catch(be){if(be===nl||be===bf)throw be;var Ye=Qn(29,be,null,H.mode);return Ye.lanes=ae,Ye.return=H,Ye}finally{}}}var Ga=A0(!0),I0=A0(!1),vs=!1;function Dp(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Np(n,s){n=n.updateQueue,s.updateQueue===n&&(s.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function Es(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function Ts(n,s,o){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Je&2)!==0){var m=c.pending;return m===null?s.next=s:(s.next=m.next,m.next=s),c.pending=s,s=gf(n),u0(n,null,o),s}return pf(n,c,s,o),gf(n)}function Zu(n,s,o){if(s=s.updateQueue,s!==null&&(s=s.shared,(o&4194048)!==0)){var c=s.lanes;c&=n.pendingLanes,o|=c,s.lanes=o,Zr(n,o)}}function Op(n,s){var o=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var m=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var E={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?m=g=E:g=g.next=E,o=o.next}while(o!==null);g===null?m=g=s:g=g.next=s}else m=g=s;o={baseState:c.baseState,firstBaseUpdate:m,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},n.updateQueue=o;return}n=o.lastBaseUpdate,n===null?o.firstBaseUpdate=s:n.next=s,o.lastBaseUpdate=s}var Pp=!1;function ec(){if(Pp){var n=tl;if(n!==null)throw n}}function tc(n,s,o,c){Pp=!1;var m=n.updateQueue;vs=!1;var g=m.firstBaseUpdate,E=m.lastBaseUpdate,w=m.shared.pending;if(w!==null){m.shared.pending=null;var L=w,Y=L.next;L.next=null,E===null?g=Y:E.next=Y,E=L;var se=n.alternate;se!==null&&(se=se.updateQueue,w=se.lastBaseUpdate,w!==E&&(w===null?se.firstBaseUpdate=Y:w.next=Y,se.lastBaseUpdate=L))}if(g!==null){var le=m.baseState;E=0,se=Y=L=null,w=g;do{var Z=w.lane&-536870913,te=Z!==w.lane;if(te?(Be&Z)===Z:(c&Z)===Z){Z!==0&&Z===el&&(Pp=!0),se!==null&&(se=se.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var Ee=n,xe=w;Z=s;var lt=o;switch(xe.tag){case 1:if(Ee=xe.payload,typeof Ee=="function"){le=Ee.call(lt,le,Z);break e}le=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=xe.payload,Z=typeof Ee=="function"?Ee.call(lt,le,Z):Ee,Z==null)break e;le=_({},le,Z);break e;case 2:vs=!0}}Z=w.callback,Z!==null&&(n.flags|=64,te&&(n.flags|=8192),te=m.callbacks,te===null?m.callbacks=[Z]:te.push(Z))}else te={lane:Z,tag:w.tag,payload:w.payload,callback:w.callback,next:null},se===null?(Y=se=te,L=le):se=se.next=te,E|=Z;if(w=w.next,w===null){if(w=m.shared.pending,w===null)break;te=w,w=te.next,te.next=null,m.lastBaseUpdate=te,m.shared.pending=null}}while(!0);se===null&&(L=le),m.baseState=L,m.firstBaseUpdate=Y,m.lastBaseUpdate=se,g===null&&(m.shared.lanes=0),Is|=E,n.lanes=E,n.memoizedState=le}}function x0(n,s){if(typeof n!="function")throw Error(r(191,n));n.call(s)}function R0(n,s){var o=n.callbacks;if(o!==null)for(n.callbacks=null,n=0;n<o.length;n++)x0(o[n],s)}var rl=k(null),If=k(0);function C0(n,s){n=Rr,ue(If,n),ue(rl,s),Rr=n|s.baseLanes}function Vp(){ue(If,Rr),ue(rl,rl.current)}function Mp(){Rr=If.current,re(rl),re(If)}var Xn=k(null),di=null;function bs(n){var s=n.alternate;ue(Vt,Vt.current&1),ue(Xn,n),di===null&&(s===null||rl.current!==null||s.memoizedState!==null)&&(di=n)}function kp(n){ue(Vt,Vt.current),ue(Xn,n),di===null&&(di=n)}function D0(n){n.tag===22?(ue(Vt,Vt.current),ue(Xn,n),di===null&&(di=n)):Ss()}function Ss(){ue(Vt,Vt.current),ue(Xn,Xn.current)}function Yn(n){re(Xn),di===n&&(di=null),re(Vt)}var Vt=k(0);function xf(n){for(var s=n;s!==null;){if(s.tag===13){var o=s.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||Fg(o)||qg(o)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Er=0,Oe=null,at=null,zt=null,Rf=!1,sl=!1,Ka=!1,Cf=0,nc=0,al=null,SR=0;function Nt(){throw Error(r(321))}function Lp(n,s){if(s===null)return!1;for(var o=0;o<s.length&&o<n.length;o++)if(!$n(n[o],s[o]))return!1;return!0}function jp(n,s,o,c,m,g){return Er=g,Oe=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ie.H=n===null||n.memoizedState===null?dE:Zp,Ka=!1,g=o(c,m),Ka=!1,sl&&(g=O0(s,o,c,m)),N0(n),g}function N0(n){ie.H=sc;var s=at!==null&&at.next!==null;if(Er=0,zt=at=Oe=null,Rf=!1,nc=0,al=null,s)throw Error(r(300));n===null||Bt||(n=n.dependencies,n!==null&&vf(n)&&(Bt=!0))}function O0(n,s,o,c){Oe=n;var m=0;do{if(sl&&(al=null),nc=0,sl=!1,25<=m)throw Error(r(301));if(m+=1,zt=at=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}ie.H=mE,g=s(o,c)}while(sl);return g}function wR(){var n=ie.H,s=n.useState()[0];return s=typeof s.then=="function"?ic(s):s,n=n.useState()[0],(at!==null?at.memoizedState:null)!==n&&(Oe.flags|=1024),s}function Up(){var n=Cf!==0;return Cf=0,n}function zp(n,s,o){s.updateQueue=n.updateQueue,s.flags&=-2053,n.lanes&=~o}function Bp(n){if(Rf){for(n=n.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Rf=!1}Er=0,zt=at=Oe=null,sl=!1,nc=Cf=0,al=null}function Dn(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?Oe.memoizedState=zt=n:zt=zt.next=n,zt}function Mt(){if(at===null){var n=Oe.alternate;n=n!==null?n.memoizedState:null}else n=at.next;var s=zt===null?Oe.memoizedState:zt.next;if(s!==null)zt=s,at=n;else{if(n===null)throw Oe.alternate===null?Error(r(467)):Error(r(310));at=n,n={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},zt===null?Oe.memoizedState=zt=n:zt=zt.next=n}return zt}function Df(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ic(n){var s=nc;return nc+=1,al===null&&(al=[]),n=b0(al,n,s),s=Oe,(zt===null?s.memoizedState:zt.next)===null&&(s=s.alternate,ie.H=s===null||s.memoizedState===null?dE:Zp),n}function Nf(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return ic(n);if(n.$$typeof===B)return hn(n)}throw Error(r(438,String(n)))}function Fp(n){var s=null,o=Oe.updateQueue;if(o!==null&&(s=o.memoCache),s==null){var c=Oe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(s={data:c.data.map(function(m){return m.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),o===null&&(o=Df(),Oe.updateQueue=o),o.memoCache=s,o=s.data[s.index],o===void 0)for(o=s.data[s.index]=Array(n),c=0;c<n;c++)o[c]=j;return s.index++,o}function Tr(n,s){return typeof s=="function"?s(n):s}function Of(n){var s=Mt();return qp(s,at,n)}function qp(n,s,o){var c=n.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=o;var m=n.baseQueue,g=c.pending;if(g!==null){if(m!==null){var E=m.next;m.next=g.next,g.next=E}s.baseQueue=m=g,c.pending=null}if(g=n.baseState,m===null)n.memoizedState=g;else{s=m.next;var w=E=null,L=null,Y=s,se=!1;do{var le=Y.lane&-536870913;if(le!==Y.lane?(Be&le)===le:(Er&le)===le){var Z=Y.revertLane;if(Z===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),le===el&&(se=!0);else if((Er&Z)===Z){Y=Y.next,Z===el&&(se=!0);continue}else le={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},L===null?(w=L=le,E=g):L=L.next=le,Oe.lanes|=Z,Is|=Z;le=Y.action,Ka&&o(g,le),g=Y.hasEagerState?Y.eagerState:o(g,le)}else Z={lane:le,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},L===null?(w=L=Z,E=g):L=L.next=Z,Oe.lanes|=le,Is|=le;Y=Y.next}while(Y!==null&&Y!==s);if(L===null?E=g:L.next=w,!$n(g,n.memoizedState)&&(Bt=!0,se&&(o=tl,o!==null)))throw o;n.memoizedState=g,n.baseState=E,n.baseQueue=L,c.lastRenderedState=g}return m===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function Hp(n){var s=Mt(),o=s.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=n;var c=o.dispatch,m=o.pending,g=s.memoizedState;if(m!==null){o.pending=null;var E=m=m.next;do g=n(g,E.action),E=E.next;while(E!==m);$n(g,s.memoizedState)||(Bt=!0),s.memoizedState=g,s.baseQueue===null&&(s.baseState=g),o.lastRenderedState=g}return[g,c]}function P0(n,s,o){var c=Oe,m=Mt(),g=Ge;if(g){if(o===void 0)throw Error(r(407));o=o()}else o=s();var E=!$n((at||m).memoizedState,o);if(E&&(m.memoizedState=o,Bt=!0),m=m.queue,$p(k0.bind(null,c,m,n),[n]),m.getSnapshot!==s||E||zt!==null&&zt.memoizedState.tag&1){if(c.flags|=2048,ol(9,{destroy:void 0},M0.bind(null,c,m,o,s),null),mt===null)throw Error(r(349));g||(Er&127)!==0||V0(c,s,o)}return o}function V0(n,s,o){n.flags|=16384,n={getSnapshot:s,value:o},s=Oe.updateQueue,s===null?(s=Df(),Oe.updateQueue=s,s.stores=[n]):(o=s.stores,o===null?s.stores=[n]:o.push(n))}function M0(n,s,o,c){s.value=o,s.getSnapshot=c,L0(s)&&j0(n)}function k0(n,s,o){return o(function(){L0(s)&&j0(n)})}function L0(n){var s=n.getSnapshot;n=n.value;try{var o=s();return!$n(n,o)}catch{return!0}}function j0(n){var s=La(n,2);s!==null&&Ln(s,n,2)}function Gp(n){var s=Dn();if(typeof n=="function"){var o=n;if(n=o(),Ka){ri(!0);try{o()}finally{ri(!1)}}}return s.memoizedState=s.baseState=n,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tr,lastRenderedState:n},s}function U0(n,s,o,c){return n.baseState=o,qp(n,at,typeof c=="function"?c:Tr)}function AR(n,s,o,c,m){if(Mf(n))throw Error(r(485));if(n=s.action,n!==null){var g={payload:m,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(E){g.listeners.push(E)}};ie.T!==null?o(!0):g.isTransition=!1,c(g),o=s.pending,o===null?(g.next=s.pending=g,z0(s,g)):(g.next=o.next,s.pending=o.next=g)}}function z0(n,s){var o=s.action,c=s.payload,m=n.state;if(s.isTransition){var g=ie.T,E={};ie.T=E;try{var w=o(m,c),L=ie.S;L!==null&&L(E,w),B0(n,s,w)}catch(Y){Kp(n,s,Y)}finally{g!==null&&E.types!==null&&(g.types=E.types),ie.T=g}}else try{g=o(m,c),B0(n,s,g)}catch(Y){Kp(n,s,Y)}}function B0(n,s,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){F0(n,s,c)},function(c){return Kp(n,s,c)}):F0(n,s,o)}function F0(n,s,o){s.status="fulfilled",s.value=o,q0(s),n.state=o,s=n.pending,s!==null&&(o=s.next,o===s?n.pending=null:(o=o.next,s.next=o,z0(n,o)))}function Kp(n,s,o){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do s.status="rejected",s.reason=o,q0(s),s=s.next;while(s!==c)}n.action=null}function q0(n){n=n.listeners;for(var s=0;s<n.length;s++)(0,n[s])()}function H0(n,s){return s}function G0(n,s){if(Ge){var o=mt.formState;if(o!==null){e:{var c=Oe;if(Ge){if(yt){t:{for(var m=yt,g=fi;m.nodeType!==8;){if(!g){m=null;break t}if(m=mi(m.nextSibling),m===null){m=null;break t}}g=m.data,m=g==="F!"||g==="F"?m:null}if(m){yt=mi(m.nextSibling),c=m.data==="F!";break e}}ys(c)}c=!1}c&&(s=o[0])}}return o=Dn(),o.memoizedState=o.baseState=s,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:H0,lastRenderedState:s},o.queue=c,o=cE.bind(null,Oe,c),c.dispatch=o,c=Gp(!1),g=Jp.bind(null,Oe,!1,c.queue),c=Dn(),m={state:s,dispatch:null,action:n,pending:null},c.queue=m,o=AR.bind(null,Oe,m,g,o),m.dispatch=o,c.memoizedState=n,[s,o,!1]}function K0(n){var s=Mt();return $0(s,at,n)}function $0(n,s,o){if(s=qp(n,s,H0)[0],n=Of(Tr)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var c=ic(s)}catch(E){throw E===nl?bf:E}else c=s;s=Mt();var m=s.queue,g=m.dispatch;return o!==s.memoizedState&&(Oe.flags|=2048,ol(9,{destroy:void 0},IR.bind(null,m,o),null)),[c,g,n]}function IR(n,s){n.action=s}function Q0(n){var s=Mt(),o=at;if(o!==null)return $0(s,o,n);Mt(),s=s.memoizedState,o=Mt();var c=o.queue.dispatch;return o.memoizedState=n,[s,c,!1]}function ol(n,s,o,c){return n={tag:n,create:o,deps:c,inst:s,next:null},s=Oe.updateQueue,s===null&&(s=Df(),Oe.updateQueue=s),o=s.lastEffect,o===null?s.lastEffect=n.next=n:(c=o.next,o.next=n,n.next=c,s.lastEffect=n),n}function X0(){return Mt().memoizedState}function Pf(n,s,o,c){var m=Dn();Oe.flags|=n,m.memoizedState=ol(1|s,{destroy:void 0},o,c===void 0?null:c)}function Vf(n,s,o,c){var m=Mt();c=c===void 0?null:c;var g=m.memoizedState.inst;at!==null&&c!==null&&Lp(c,at.memoizedState.deps)?m.memoizedState=ol(s,g,o,c):(Oe.flags|=n,m.memoizedState=ol(1|s,g,o,c))}function Y0(n,s){Pf(8390656,8,n,s)}function $p(n,s){Vf(2048,8,n,s)}function xR(n){Oe.flags|=4;var s=Oe.updateQueue;if(s===null)s=Df(),Oe.updateQueue=s,s.events=[n];else{var o=s.events;o===null?s.events=[n]:o.push(n)}}function W0(n){var s=Mt().memoizedState;return xR({ref:s,nextImpl:n}),function(){if((Je&2)!==0)throw Error(r(440));return s.impl.apply(void 0,arguments)}}function J0(n,s){return Vf(4,2,n,s)}function Z0(n,s){return Vf(4,4,n,s)}function eE(n,s){if(typeof s=="function"){n=n();var o=s(n);return function(){typeof o=="function"?o():s(null)}}if(s!=null)return n=n(),s.current=n,function(){s.current=null}}function tE(n,s,o){o=o!=null?o.concat([n]):null,Vf(4,4,eE.bind(null,s,n),o)}function Qp(){}function nE(n,s){var o=Mt();s=s===void 0?null:s;var c=o.memoizedState;return s!==null&&Lp(s,c[1])?c[0]:(o.memoizedState=[n,s],n)}function iE(n,s){var o=Mt();s=s===void 0?null:s;var c=o.memoizedState;if(s!==null&&Lp(s,c[1]))return c[0];if(c=n(),Ka){ri(!0);try{n()}finally{ri(!1)}}return o.memoizedState=[c,s],c}function Xp(n,s,o){return o===void 0||(Er&1073741824)!==0&&(Be&261930)===0?n.memoizedState=s:(n.memoizedState=o,n=rT(),Oe.lanes|=n,Is|=n,o)}function rE(n,s,o,c){return $n(o,s)?o:rl.current!==null?(n=Xp(n,o,c),$n(n,s)||(Bt=!0),n):(Er&42)===0||(Er&1073741824)!==0&&(Be&261930)===0?(Bt=!0,n.memoizedState=o):(n=rT(),Oe.lanes|=n,Is|=n,s)}function sE(n,s,o,c,m){var g=he.p;he.p=g!==0&&8>g?g:8;var E=ie.T,w={};ie.T=w,Jp(n,!1,s,o);try{var L=m(),Y=ie.S;if(Y!==null&&Y(w,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var se=bR(L,c);rc(n,s,se,Zn(n))}else rc(n,s,c,Zn(n))}catch(le){rc(n,s,{then:function(){},status:"rejected",reason:le},Zn())}finally{he.p=g,E!==null&&w.types!==null&&(E.types=w.types),ie.T=E}}function RR(){}function Yp(n,s,o,c){if(n.tag!==5)throw Error(r(476));var m=aE(n).queue;sE(n,m,s,ye,o===null?RR:function(){return oE(n),o(c)})}function aE(n){var s=n.memoizedState;if(s!==null)return s;s={memoizedState:ye,baseState:ye,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tr,lastRenderedState:ye},next:null};var o={};return s.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tr,lastRenderedState:o},next:null},n.memoizedState=s,n=n.alternate,n!==null&&(n.memoizedState=s),s}function oE(n){var s=aE(n);s.next===null&&(s=n.alternate.memoizedState),rc(n,s.next.queue,{},Zn())}function Wp(){return hn(Tc)}function lE(){return Mt().memoizedState}function uE(){return Mt().memoizedState}function CR(n){for(var s=n.return;s!==null;){switch(s.tag){case 24:case 3:var o=Zn();n=Es(o);var c=Ts(s,n,o);c!==null&&(Ln(c,s,o),Zu(c,s,o)),s={cache:Ip()},n.payload=s;return}s=s.return}}function DR(n,s,o){var c=Zn();o={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Mf(n)?hE(s,o):(o=pp(n,s,o,c),o!==null&&(Ln(o,n,c),fE(o,s,c)))}function cE(n,s,o){var c=Zn();rc(n,s,o,c)}function rc(n,s,o,c){var m={lane:c,revertLane:0,gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null};if(Mf(n))hE(s,m);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=s.lastRenderedReducer,g!==null))try{var E=s.lastRenderedState,w=g(E,o);if(m.hasEagerState=!0,m.eagerState=w,$n(w,E))return pf(n,s,m,0),mt===null&&mf(),!1}catch{}finally{}if(o=pp(n,s,m,c),o!==null)return Ln(o,n,c),fE(o,s,c),!0}return!1}function Jp(n,s,o,c){if(c={lane:2,revertLane:Dg(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Mf(n)){if(s)throw Error(r(479))}else s=pp(n,o,c,2),s!==null&&Ln(s,n,2)}function Mf(n){var s=n.alternate;return n===Oe||s!==null&&s===Oe}function hE(n,s){sl=Rf=!0;var o=n.pending;o===null?s.next=s:(s.next=o.next,o.next=s),n.pending=s}function fE(n,s,o){if((o&4194048)!==0){var c=s.lanes;c&=n.pendingLanes,o|=c,s.lanes=o,Zr(n,o)}}var sc={readContext:hn,use:Nf,useCallback:Nt,useContext:Nt,useEffect:Nt,useImperativeHandle:Nt,useLayoutEffect:Nt,useInsertionEffect:Nt,useMemo:Nt,useReducer:Nt,useRef:Nt,useState:Nt,useDebugValue:Nt,useDeferredValue:Nt,useTransition:Nt,useSyncExternalStore:Nt,useId:Nt,useHostTransitionStatus:Nt,useFormState:Nt,useActionState:Nt,useOptimistic:Nt,useMemoCache:Nt,useCacheRefresh:Nt};sc.useEffectEvent=Nt;var dE={readContext:hn,use:Nf,useCallback:function(n,s){return Dn().memoizedState=[n,s===void 0?null:s],n},useContext:hn,useEffect:Y0,useImperativeHandle:function(n,s,o){o=o!=null?o.concat([n]):null,Pf(4194308,4,eE.bind(null,s,n),o)},useLayoutEffect:function(n,s){return Pf(4194308,4,n,s)},useInsertionEffect:function(n,s){Pf(4,2,n,s)},useMemo:function(n,s){var o=Dn();s=s===void 0?null:s;var c=n();if(Ka){ri(!0);try{n()}finally{ri(!1)}}return o.memoizedState=[c,s],c},useReducer:function(n,s,o){var c=Dn();if(o!==void 0){var m=o(s);if(Ka){ri(!0);try{o(s)}finally{ri(!1)}}}else m=s;return c.memoizedState=c.baseState=m,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:m},c.queue=n,n=n.dispatch=DR.bind(null,Oe,n),[c.memoizedState,n]},useRef:function(n){var s=Dn();return n={current:n},s.memoizedState=n},useState:function(n){n=Gp(n);var s=n.queue,o=cE.bind(null,Oe,s);return s.dispatch=o,[n.memoizedState,o]},useDebugValue:Qp,useDeferredValue:function(n,s){var o=Dn();return Xp(o,n,s)},useTransition:function(){var n=Gp(!1);return n=sE.bind(null,Oe,n.queue,!0,!1),Dn().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,s,o){var c=Oe,m=Dn();if(Ge){if(o===void 0)throw Error(r(407));o=o()}else{if(o=s(),mt===null)throw Error(r(349));(Be&127)!==0||V0(c,s,o)}m.memoizedState=o;var g={value:o,getSnapshot:s};return m.queue=g,Y0(k0.bind(null,c,g,n),[n]),c.flags|=2048,ol(9,{destroy:void 0},M0.bind(null,c,g,o,s),null),o},useId:function(){var n=Dn(),s=mt.identifierPrefix;if(Ge){var o=Fi,c=Bi;o=(c&~(1<<32-An(c)-1)).toString(32)+o,s="_"+s+"R_"+o,o=Cf++,0<o&&(s+="H"+o.toString(32)),s+="_"}else o=SR++,s="_"+s+"r_"+o.toString(32)+"_";return n.memoizedState=s},useHostTransitionStatus:Wp,useFormState:G0,useActionState:G0,useOptimistic:function(n){var s=Dn();s.memoizedState=s.baseState=n;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=o,s=Jp.bind(null,Oe,!0,o),o.dispatch=s,[n,s]},useMemoCache:Fp,useCacheRefresh:function(){return Dn().memoizedState=CR.bind(null,Oe)},useEffectEvent:function(n){var s=Dn(),o={impl:n};return s.memoizedState=o,function(){if((Je&2)!==0)throw Error(r(440));return o.impl.apply(void 0,arguments)}}},Zp={readContext:hn,use:Nf,useCallback:nE,useContext:hn,useEffect:$p,useImperativeHandle:tE,useInsertionEffect:J0,useLayoutEffect:Z0,useMemo:iE,useReducer:Of,useRef:X0,useState:function(){return Of(Tr)},useDebugValue:Qp,useDeferredValue:function(n,s){var o=Mt();return rE(o,at.memoizedState,n,s)},useTransition:function(){var n=Of(Tr)[0],s=Mt().memoizedState;return[typeof n=="boolean"?n:ic(n),s]},useSyncExternalStore:P0,useId:lE,useHostTransitionStatus:Wp,useFormState:K0,useActionState:K0,useOptimistic:function(n,s){var o=Mt();return U0(o,at,n,s)},useMemoCache:Fp,useCacheRefresh:uE};Zp.useEffectEvent=W0;var mE={readContext:hn,use:Nf,useCallback:nE,useContext:hn,useEffect:$p,useImperativeHandle:tE,useInsertionEffect:J0,useLayoutEffect:Z0,useMemo:iE,useReducer:Hp,useRef:X0,useState:function(){return Hp(Tr)},useDebugValue:Qp,useDeferredValue:function(n,s){var o=Mt();return at===null?Xp(o,n,s):rE(o,at.memoizedState,n,s)},useTransition:function(){var n=Hp(Tr)[0],s=Mt().memoizedState;return[typeof n=="boolean"?n:ic(n),s]},useSyncExternalStore:P0,useId:lE,useHostTransitionStatus:Wp,useFormState:Q0,useActionState:Q0,useOptimistic:function(n,s){var o=Mt();return at!==null?U0(o,at,n,s):(o.baseState=n,[n,o.queue.dispatch])},useMemoCache:Fp,useCacheRefresh:uE};mE.useEffectEvent=W0;function eg(n,s,o,c){s=n.memoizedState,o=o(c,s),o=o==null?s:_({},s,o),n.memoizedState=o,n.lanes===0&&(n.updateQueue.baseState=o)}var tg={enqueueSetState:function(n,s,o){n=n._reactInternals;var c=Zn(),m=Es(c);m.payload=s,o!=null&&(m.callback=o),s=Ts(n,m,c),s!==null&&(Ln(s,n,c),Zu(s,n,c))},enqueueReplaceState:function(n,s,o){n=n._reactInternals;var c=Zn(),m=Es(c);m.tag=1,m.payload=s,o!=null&&(m.callback=o),s=Ts(n,m,c),s!==null&&(Ln(s,n,c),Zu(s,n,c))},enqueueForceUpdate:function(n,s){n=n._reactInternals;var o=Zn(),c=Es(o);c.tag=2,s!=null&&(c.callback=s),s=Ts(n,c,o),s!==null&&(Ln(s,n,o),Zu(s,n,o))}};function pE(n,s,o,c,m,g,E){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,E):s.prototype&&s.prototype.isPureReactComponent?!Gu(o,c)||!Gu(m,g):!0}function gE(n,s,o,c){n=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(o,c),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(o,c),s.state!==n&&tg.enqueueReplaceState(s,s.state,null)}function $a(n,s){var o=s;if("ref"in s){o={};for(var c in s)c!=="ref"&&(o[c]=s[c])}if(n=n.defaultProps){o===s&&(o=_({},o));for(var m in n)o[m]===void 0&&(o[m]=n[m])}return o}function yE(n){df(n)}function _E(n){console.error(n)}function vE(n){df(n)}function kf(n,s){try{var o=n.onUncaughtError;o(s.value,{componentStack:s.stack})}catch(c){setTimeout(function(){throw c})}}function EE(n,s,o){try{var c=n.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function ng(n,s,o){return o=Es(o),o.tag=3,o.payload={element:null},o.callback=function(){kf(n,s)},o}function TE(n){return n=Es(n),n.tag=3,n}function bE(n,s,o,c){var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var g=c.value;n.payload=function(){return m(g)},n.callback=function(){EE(s,o,c)}}var E=o.stateNode;E!==null&&typeof E.componentDidCatch=="function"&&(n.callback=function(){EE(s,o,c),typeof m!="function"&&(xs===null?xs=new Set([this]):xs.add(this));var w=c.stack;this.componentDidCatch(c.value,{componentStack:w!==null?w:""})})}function NR(n,s,o,c,m){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(s=o.alternate,s!==null&&Zo(s,o,m,!0),o=Xn.current,o!==null){switch(o.tag){case 31:case 13:return di===null?Qf():o.alternate===null&&Ot===0&&(Ot=3),o.flags&=-257,o.flags|=65536,o.lanes=m,c===Sf?o.flags|=16384:(s=o.updateQueue,s===null?o.updateQueue=new Set([c]):s.add(c),xg(n,c,m)),!1;case 22:return o.flags|=65536,c===Sf?o.flags|=16384:(s=o.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=s):(o=s.retryQueue,o===null?s.retryQueue=new Set([c]):o.add(c)),xg(n,c,m)),!1}throw Error(r(435,o.tag))}return xg(n,c,m),Qf(),!1}if(Ge)return s=Xn.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=m,c!==Tp&&(n=Error(r(422),{cause:c}),Qu(ui(n,o)))):(c!==Tp&&(s=Error(r(423),{cause:c}),Qu(ui(s,o))),n=n.current.alternate,n.flags|=65536,m&=-m,n.lanes|=m,c=ui(c,o),m=ng(n.stateNode,c,m),Op(n,m),Ot!==4&&(Ot=2)),!1;var g=Error(r(520),{cause:c});if(g=ui(g,o),dc===null?dc=[g]:dc.push(g),Ot!==4&&(Ot=2),s===null)return!0;c=ui(c,o),o=s;do{switch(o.tag){case 3:return o.flags|=65536,n=m&-m,o.lanes|=n,n=ng(o.stateNode,c,n),Op(o,n),!1;case 1:if(s=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(xs===null||!xs.has(g))))return o.flags|=65536,m&=-m,o.lanes|=m,m=TE(m),bE(m,n,o,c),Op(o,m),!1}o=o.return}while(o!==null);return!1}var ig=Error(r(461)),Bt=!1;function fn(n,s,o,c){s.child=n===null?I0(s,null,o,c):Ga(s,n.child,o,c)}function SE(n,s,o,c,m){o=o.render;var g=s.ref;if("ref"in c){var E={};for(var w in c)w!=="ref"&&(E[w]=c[w])}else E=c;return Ba(s),c=jp(n,s,o,E,g,m),w=Up(),n!==null&&!Bt?(zp(n,s,m),br(n,s,m)):(Ge&&w&&vp(s),s.flags|=1,fn(n,s,c,m),s.child)}function wE(n,s,o,c,m){if(n===null){var g=o.type;return typeof g=="function"&&!gp(g)&&g.defaultProps===void 0&&o.compare===null?(s.tag=15,s.type=g,AE(n,s,g,c,m)):(n=yf(o.type,null,c,s,s.mode,m),n.ref=s.ref,n.return=s,s.child=n)}if(g=n.child,!hg(n,m)){var E=g.memoizedProps;if(o=o.compare,o=o!==null?o:Gu,o(E,c)&&n.ref===s.ref)return br(n,s,m)}return s.flags|=1,n=gr(g,c),n.ref=s.ref,n.return=s,s.child=n}function AE(n,s,o,c,m){if(n!==null){var g=n.memoizedProps;if(Gu(g,c)&&n.ref===s.ref)if(Bt=!1,s.pendingProps=c=g,hg(n,m))(n.flags&131072)!==0&&(Bt=!0);else return s.lanes=n.lanes,br(n,s,m)}return rg(n,s,o,c,m)}function IE(n,s,o,c){var m=c.children,g=n!==null?n.memoizedState:null;if(n===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((s.flags&128)!==0){if(g=g!==null?g.baseLanes|o:o,n!==null){for(c=s.child=n.child,m=0;c!==null;)m=m|c.lanes|c.childLanes,c=c.sibling;c=m&~g}else c=0,s.child=null;return xE(n,s,g,o,c)}if((o&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},n!==null&&Tf(s,g!==null?g.cachePool:null),g!==null?C0(s,g):Vp(),D0(s);else return c=s.lanes=536870912,xE(n,s,g!==null?g.baseLanes|o:o,o,c)}else g!==null?(Tf(s,g.cachePool),C0(s,g),Ss(),s.memoizedState=null):(n!==null&&Tf(s,null),Vp(),Ss());return fn(n,s,m,o),s.child}function ac(n,s){return n!==null&&n.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function xE(n,s,o,c,m){var g=Rp();return g=g===null?null:{parent:Ut._currentValue,pool:g},s.memoizedState={baseLanes:o,cachePool:g},n!==null&&Tf(s,null),Vp(),D0(s),n!==null&&Zo(n,s,c,!0),s.childLanes=m,null}function Lf(n,s){return s=Uf({mode:s.mode,children:s.children},n.mode),s.ref=n.ref,n.child=s,s.return=n,s}function RE(n,s,o){return Ga(s,n.child,null,o),n=Lf(s,s.pendingProps),n.flags|=2,Yn(s),s.memoizedState=null,n}function OR(n,s,o){var c=s.pendingProps,m=(s.flags&128)!==0;if(s.flags&=-129,n===null){if(Ge){if(c.mode==="hidden")return n=Lf(s,c),s.lanes=536870912,ac(null,n);if(kp(s),(n=yt)?(n=zT(n,fi),n=n!==null&&n.data==="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ps!==null?{id:Bi,overflow:Fi}:null,retryLane:536870912,hydrationErrors:null},o=h0(n),o.return=s,s.child=o,cn=s,yt=null)):n=null,n===null)throw ys(s);return s.lanes=536870912,null}return Lf(s,c)}var g=n.memoizedState;if(g!==null){var E=g.dehydrated;if(kp(s),m)if(s.flags&256)s.flags&=-257,s=RE(n,s,o);else if(s.memoizedState!==null)s.child=n.child,s.flags|=128,s=null;else throw Error(r(558));else if(Bt||Zo(n,s,o,!1),m=(o&n.childLanes)!==0,Bt||m){if(c=mt,c!==null&&(E=es(c,o),E!==0&&E!==g.retryLane))throw g.retryLane=E,La(n,E),Ln(c,n,E),ig;Qf(),s=RE(n,s,o)}else n=g.treeContext,yt=mi(E.nextSibling),cn=s,Ge=!0,gs=null,fi=!1,n!==null&&m0(s,n),s=Lf(s,c),s.flags|=4096;return s}return n=gr(n.child,{mode:c.mode,children:c.children}),n.ref=s.ref,s.child=n,n.return=s,n}function jf(n,s){var o=s.ref;if(o===null)n!==null&&n.ref!==null&&(s.flags|=4194816);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(n===null||n.ref!==o)&&(s.flags|=4194816)}}function rg(n,s,o,c,m){return Ba(s),o=jp(n,s,o,c,void 0,m),c=Up(),n!==null&&!Bt?(zp(n,s,m),br(n,s,m)):(Ge&&c&&vp(s),s.flags|=1,fn(n,s,o,m),s.child)}function CE(n,s,o,c,m,g){return Ba(s),s.updateQueue=null,o=O0(s,c,o,m),N0(n),c=Up(),n!==null&&!Bt?(zp(n,s,g),br(n,s,g)):(Ge&&c&&vp(s),s.flags|=1,fn(n,s,o,g),s.child)}function DE(n,s,o,c,m){if(Ba(s),s.stateNode===null){var g=Xo,E=o.contextType;typeof E=="object"&&E!==null&&(g=hn(E)),g=new o(c,g),s.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=tg,s.stateNode=g,g._reactInternals=s,g=s.stateNode,g.props=c,g.state=s.memoizedState,g.refs={},Dp(s),E=o.contextType,g.context=typeof E=="object"&&E!==null?hn(E):Xo,g.state=s.memoizedState,E=o.getDerivedStateFromProps,typeof E=="function"&&(eg(s,o,E,c),g.state=s.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(E=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),E!==g.state&&tg.enqueueReplaceState(g,g.state,null),tc(s,c,g,m),ec(),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!0}else if(n===null){g=s.stateNode;var w=s.memoizedProps,L=$a(o,w);g.props=L;var Y=g.context,se=o.contextType;E=Xo,typeof se=="object"&&se!==null&&(E=hn(se));var le=o.getDerivedStateFromProps;se=typeof le=="function"||typeof g.getSnapshotBeforeUpdate=="function",w=s.pendingProps!==w,se||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w||Y!==E)&&gE(s,g,c,E),vs=!1;var Z=s.memoizedState;g.state=Z,tc(s,c,g,m),ec(),Y=s.memoizedState,w||Z!==Y||vs?(typeof le=="function"&&(eg(s,o,le,c),Y=s.memoizedState),(L=vs||pE(s,o,L,c,Z,Y,E))?(se||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(s.flags|=4194308)):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=c,s.memoizedState=Y),g.props=c,g.state=Y,g.context=E,c=L):(typeof g.componentDidMount=="function"&&(s.flags|=4194308),c=!1)}else{g=s.stateNode,Np(n,s),E=s.memoizedProps,se=$a(o,E),g.props=se,le=s.pendingProps,Z=g.context,Y=o.contextType,L=Xo,typeof Y=="object"&&Y!==null&&(L=hn(Y)),w=o.getDerivedStateFromProps,(Y=typeof w=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(E!==le||Z!==L)&&gE(s,g,c,L),vs=!1,Z=s.memoizedState,g.state=Z,tc(s,c,g,m),ec();var te=s.memoizedState;E!==le||Z!==te||vs||n!==null&&n.dependencies!==null&&vf(n.dependencies)?(typeof w=="function"&&(eg(s,o,w,c),te=s.memoizedState),(se=vs||pE(s,o,se,c,Z,te,L)||n!==null&&n.dependencies!==null&&vf(n.dependencies))?(Y||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,te,L),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,te,L)),typeof g.componentDidUpdate=="function"&&(s.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof g.componentDidUpdate!="function"||E===n.memoizedProps&&Z===n.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&Z===n.memoizedState||(s.flags|=1024),s.memoizedProps=c,s.memoizedState=te),g.props=c,g.state=te,g.context=L,c=se):(typeof g.componentDidUpdate!="function"||E===n.memoizedProps&&Z===n.memoizedState||(s.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||E===n.memoizedProps&&Z===n.memoizedState||(s.flags|=1024),c=!1)}return g=c,jf(n,s),c=(s.flags&128)!==0,g||c?(g=s.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:g.render(),s.flags|=1,n!==null&&c?(s.child=Ga(s,n.child,null,m),s.child=Ga(s,null,o,m)):fn(n,s,o,m),s.memoizedState=g.state,n=s.child):n=br(n,s,m),n}function NE(n,s,o,c){return Ua(),s.flags|=256,fn(n,s,o,c),s.child}var sg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ag(n){return{baseLanes:n,cachePool:E0()}}function og(n,s,o){return n=n!==null?n.childLanes&~o:0,s&&(n|=Jn),n}function OE(n,s,o){var c=s.pendingProps,m=!1,g=(s.flags&128)!==0,E;if((E=g)||(E=n!==null&&n.memoizedState===null?!1:(Vt.current&2)!==0),E&&(m=!0,s.flags&=-129),E=(s.flags&32)!==0,s.flags&=-33,n===null){if(Ge){if(m?bs(s):Ss(),(n=yt)?(n=zT(n,fi),n=n!==null&&n.data!=="&"?n:null,n!==null&&(s.memoizedState={dehydrated:n,treeContext:ps!==null?{id:Bi,overflow:Fi}:null,retryLane:536870912,hydrationErrors:null},o=h0(n),o.return=s,s.child=o,cn=s,yt=null)):n=null,n===null)throw ys(s);return qg(n)?s.lanes=32:s.lanes=536870912,null}var w=c.children;return c=c.fallback,m?(Ss(),m=s.mode,w=Uf({mode:"hidden",children:w},m),c=ja(c,m,o,null),w.return=s,c.return=s,w.sibling=c,s.child=w,c=s.child,c.memoizedState=ag(o),c.childLanes=og(n,E,o),s.memoizedState=sg,ac(null,c)):(bs(s),lg(s,w))}var L=n.memoizedState;if(L!==null&&(w=L.dehydrated,w!==null)){if(g)s.flags&256?(bs(s),s.flags&=-257,s=ug(n,s,o)):s.memoizedState!==null?(Ss(),s.child=n.child,s.flags|=128,s=null):(Ss(),w=c.fallback,m=s.mode,c=Uf({mode:"visible",children:c.children},m),w=ja(w,m,o,null),w.flags|=2,c.return=s,w.return=s,c.sibling=w,s.child=c,Ga(s,n.child,null,o),c=s.child,c.memoizedState=ag(o),c.childLanes=og(n,E,o),s.memoizedState=sg,s=ac(null,c));else if(bs(s),qg(w)){if(E=w.nextSibling&&w.nextSibling.dataset,E)var Y=E.dgst;E=Y,c=Error(r(419)),c.stack="",c.digest=E,Qu({value:c,source:null,stack:null}),s=ug(n,s,o)}else if(Bt||Zo(n,s,o,!1),E=(o&n.childLanes)!==0,Bt||E){if(E=mt,E!==null&&(c=es(E,o),c!==0&&c!==L.retryLane))throw L.retryLane=c,La(n,c),Ln(E,n,c),ig;Fg(w)||Qf(),s=ug(n,s,o)}else Fg(w)?(s.flags|=192,s.child=n.child,s=null):(n=L.treeContext,yt=mi(w.nextSibling),cn=s,Ge=!0,gs=null,fi=!1,n!==null&&m0(s,n),s=lg(s,c.children),s.flags|=4096);return s}return m?(Ss(),w=c.fallback,m=s.mode,L=n.child,Y=L.sibling,c=gr(L,{mode:"hidden",children:c.children}),c.subtreeFlags=L.subtreeFlags&65011712,Y!==null?w=gr(Y,w):(w=ja(w,m,o,null),w.flags|=2),w.return=s,c.return=s,c.sibling=w,s.child=c,ac(null,c),c=s.child,w=n.child.memoizedState,w===null?w=ag(o):(m=w.cachePool,m!==null?(L=Ut._currentValue,m=m.parent!==L?{parent:L,pool:L}:m):m=E0(),w={baseLanes:w.baseLanes|o,cachePool:m}),c.memoizedState=w,c.childLanes=og(n,E,o),s.memoizedState=sg,ac(n.child,c)):(bs(s),o=n.child,n=o.sibling,o=gr(o,{mode:"visible",children:c.children}),o.return=s,o.sibling=null,n!==null&&(E=s.deletions,E===null?(s.deletions=[n],s.flags|=16):E.push(n)),s.child=o,s.memoizedState=null,o)}function lg(n,s){return s=Uf({mode:"visible",children:s},n.mode),s.return=n,n.child=s}function Uf(n,s){return n=Qn(22,n,null,s),n.lanes=0,n}function ug(n,s,o){return Ga(s,n.child,null,o),n=lg(s,s.pendingProps.children),n.flags|=2,s.memoizedState=null,n}function PE(n,s,o){n.lanes|=s;var c=n.alternate;c!==null&&(c.lanes|=s),wp(n.return,s,o)}function cg(n,s,o,c,m,g){var E=n.memoizedState;E===null?n.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:m,treeForkCount:g}:(E.isBackwards=s,E.rendering=null,E.renderingStartTime=0,E.last=c,E.tail=o,E.tailMode=m,E.treeForkCount=g)}function VE(n,s,o){var c=s.pendingProps,m=c.revealOrder,g=c.tail;c=c.children;var E=Vt.current,w=(E&2)!==0;if(w?(E=E&1|2,s.flags|=128):E&=1,ue(Vt,E),fn(n,s,c,o),c=Ge?$u:0,!w&&n!==null&&(n.flags&128)!==0)e:for(n=s.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&PE(n,o,s);else if(n.tag===19)PE(n,o,s);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===s)break e;for(;n.sibling===null;){if(n.return===null||n.return===s)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(m){case"forwards":for(o=s.child,m=null;o!==null;)n=o.alternate,n!==null&&xf(n)===null&&(m=o),o=o.sibling;o=m,o===null?(m=s.child,s.child=null):(m=o.sibling,o.sibling=null),cg(s,!1,m,o,g,c);break;case"backwards":case"unstable_legacy-backwards":for(o=null,m=s.child,s.child=null;m!==null;){if(n=m.alternate,n!==null&&xf(n)===null){s.child=m;break}n=m.sibling,m.sibling=o,o=m,m=n}cg(s,!0,o,null,g,c);break;case"together":cg(s,!1,null,null,void 0,c);break;default:s.memoizedState=null}return s.child}function br(n,s,o){if(n!==null&&(s.dependencies=n.dependencies),Is|=s.lanes,(o&s.childLanes)===0)if(n!==null){if(Zo(n,s,o,!1),(o&s.childLanes)===0)return null}else return null;if(n!==null&&s.child!==n.child)throw Error(r(153));if(s.child!==null){for(n=s.child,o=gr(n,n.pendingProps),s.child=o,o.return=s;n.sibling!==null;)n=n.sibling,o=o.sibling=gr(n,n.pendingProps),o.return=s;o.sibling=null}return s.child}function hg(n,s){return(n.lanes&s)!==0?!0:(n=n.dependencies,!!(n!==null&&vf(n)))}function PR(n,s,o){switch(s.tag){case 3:an(s,s.stateNode.containerInfo),_s(s,Ut,n.memoizedState.cache),Ua();break;case 27:case 5:Oi(s);break;case 4:an(s,s.stateNode.containerInfo);break;case 10:_s(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,kp(s),null;break;case 13:var c=s.memoizedState;if(c!==null)return c.dehydrated!==null?(bs(s),s.flags|=128,null):(o&s.child.childLanes)!==0?OE(n,s,o):(bs(s),n=br(n,s,o),n!==null?n.sibling:null);bs(s);break;case 19:var m=(n.flags&128)!==0;if(c=(o&s.childLanes)!==0,c||(Zo(n,s,o,!1),c=(o&s.childLanes)!==0),m){if(c)return VE(n,s,o);s.flags|=128}if(m=s.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ue(Vt,Vt.current),c)break;return null;case 22:return s.lanes=0,IE(n,s,o,s.pendingProps);case 24:_s(s,Ut,n.memoizedState.cache)}return br(n,s,o)}function ME(n,s,o){if(n!==null)if(n.memoizedProps!==s.pendingProps)Bt=!0;else{if(!hg(n,o)&&(s.flags&128)===0)return Bt=!1,PR(n,s,o);Bt=(n.flags&131072)!==0}else Bt=!1,Ge&&(s.flags&1048576)!==0&&d0(s,$u,s.index);switch(s.lanes=0,s.tag){case 16:e:{var c=s.pendingProps;if(n=qa(s.elementType),s.type=n,typeof n=="function")gp(n)?(c=$a(n,c),s.tag=1,s=DE(null,s,n,c,o)):(s.tag=0,s=rg(null,s,n,c,o));else{if(n!=null){var m=n.$$typeof;if(m===J){s.tag=11,s=SE(null,s,n,c,o);break e}else if(m===R){s.tag=14,s=wE(null,s,n,c,o);break e}}throw s=dt(n)||n,Error(r(306,s,""))}}return s;case 0:return rg(n,s,s.type,s.pendingProps,o);case 1:return c=s.type,m=$a(c,s.pendingProps),DE(n,s,c,m,o);case 3:e:{if(an(s,s.stateNode.containerInfo),n===null)throw Error(r(387));c=s.pendingProps;var g=s.memoizedState;m=g.element,Np(n,s),tc(s,c,null,o);var E=s.memoizedState;if(c=E.cache,_s(s,Ut,c),c!==g.cache&&Ap(s,[Ut],o,!0),ec(),c=E.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:E.cache},s.updateQueue.baseState=g,s.memoizedState=g,s.flags&256){s=NE(n,s,c,o);break e}else if(c!==m){m=ui(Error(r(424)),s),Qu(m),s=NE(n,s,c,o);break e}else{switch(n=s.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(yt=mi(n.firstChild),cn=s,Ge=!0,gs=null,fi=!0,o=I0(s,null,c,o),s.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling}else{if(Ua(),c===m){s=br(n,s,o);break e}fn(n,s,c,o)}s=s.child}return s;case 26:return jf(n,s),n===null?(o=KT(s.type,null,s.pendingProps,null))?s.memoizedState=o:Ge||(o=s.type,n=s.pendingProps,c=td(Ce.current).createElement(o),c[Ct]=s,c[un]=n,dn(c,o,n),Pt(c),s.stateNode=c):s.memoizedState=KT(s.type,n.memoizedProps,s.pendingProps,n.memoizedState),null;case 27:return Oi(s),n===null&&Ge&&(c=s.stateNode=qT(s.type,s.pendingProps,Ce.current),cn=s,fi=!0,m=yt,Ns(s.type)?(Hg=m,yt=mi(c.firstChild)):yt=m),fn(n,s,s.pendingProps.children,o),jf(n,s),n===null&&(s.flags|=4194304),s.child;case 5:return n===null&&Ge&&((m=c=yt)&&(c=uC(c,s.type,s.pendingProps,fi),c!==null?(s.stateNode=c,cn=s,yt=mi(c.firstChild),fi=!1,m=!0):m=!1),m||ys(s)),Oi(s),m=s.type,g=s.pendingProps,E=n!==null?n.memoizedProps:null,c=g.children,Ug(m,g)?c=null:E!==null&&Ug(m,E)&&(s.flags|=32),s.memoizedState!==null&&(m=jp(n,s,wR,null,null,o),Tc._currentValue=m),jf(n,s),fn(n,s,c,o),s.child;case 6:return n===null&&Ge&&((n=o=yt)&&(o=cC(o,s.pendingProps,fi),o!==null?(s.stateNode=o,cn=s,yt=null,n=!0):n=!1),n||ys(s)),null;case 13:return OE(n,s,o);case 4:return an(s,s.stateNode.containerInfo),c=s.pendingProps,n===null?s.child=Ga(s,null,c,o):fn(n,s,c,o),s.child;case 11:return SE(n,s,s.type,s.pendingProps,o);case 7:return fn(n,s,s.pendingProps,o),s.child;case 8:return fn(n,s,s.pendingProps.children,o),s.child;case 12:return fn(n,s,s.pendingProps.children,o),s.child;case 10:return c=s.pendingProps,_s(s,s.type,c.value),fn(n,s,c.children,o),s.child;case 9:return m=s.type._context,c=s.pendingProps.children,Ba(s),m=hn(m),c=c(m),s.flags|=1,fn(n,s,c,o),s.child;case 14:return wE(n,s,s.type,s.pendingProps,o);case 15:return AE(n,s,s.type,s.pendingProps,o);case 19:return VE(n,s,o);case 31:return OR(n,s,o);case 22:return IE(n,s,o,s.pendingProps);case 24:return Ba(s),c=hn(Ut),n===null?(m=Rp(),m===null&&(m=mt,g=Ip(),m.pooledCache=g,g.refCount++,g!==null&&(m.pooledCacheLanes|=o),m=g),s.memoizedState={parent:c,cache:m},Dp(s),_s(s,Ut,m)):((n.lanes&o)!==0&&(Np(n,s),tc(s,null,null,o),ec()),m=n.memoizedState,g=s.memoizedState,m.parent!==c?(m={parent:c,cache:c},s.memoizedState=m,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=m),_s(s,Ut,c)):(c=g.cache,_s(s,Ut,c),c!==m.cache&&Ap(s,[Ut],o,!0))),fn(n,s,s.pendingProps.children,o),s.child;case 29:throw s.pendingProps}throw Error(r(156,s.tag))}function Sr(n){n.flags|=4}function fg(n,s,o,c,m){if((s=(n.mode&32)!==0)&&(s=!1),s){if(n.flags|=16777216,(m&335544128)===m)if(n.stateNode.complete)n.flags|=8192;else if(lT())n.flags|=8192;else throw Ha=Sf,Cp}else n.flags&=-16777217}function kE(n,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!WT(s))if(lT())n.flags|=8192;else throw Ha=Sf,Cp}function zf(n,s){s!==null&&(n.flags|=4),n.flags&16384&&(s=n.tag!==22?xu():536870912,n.lanes|=s,hl|=s)}function oc(n,s){if(!Ge)switch(n.tailMode){case"hidden":s=n.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?n.tail=null:o.sibling=null;break;case"collapsed":o=n.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?s||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function _t(n){var s=n.alternate!==null&&n.alternate.child===n.child,o=0,c=0;if(s)for(var m=n.child;m!==null;)o|=m.lanes|m.childLanes,c|=m.subtreeFlags&65011712,c|=m.flags&65011712,m.return=n,m=m.sibling;else for(m=n.child;m!==null;)o|=m.lanes|m.childLanes,c|=m.subtreeFlags,c|=m.flags,m.return=n,m=m.sibling;return n.subtreeFlags|=c,n.childLanes=o,s}function VR(n,s,o){var c=s.pendingProps;switch(Ep(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(s),null;case 1:return _t(s),null;case 3:return o=s.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),s.memoizedState.cache!==c&&(s.flags|=2048),vr(Ut),It(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(n===null||n.child===null)&&(Jo(s)?Sr(s):n===null||n.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,bp())),_t(s),null;case 26:var m=s.type,g=s.memoizedState;return n===null?(Sr(s),g!==null?(_t(s),kE(s,g)):(_t(s),fg(s,m,null,c,o))):g?g!==n.memoizedState?(Sr(s),_t(s),kE(s,g)):(_t(s),s.flags&=-16777217):(n=n.memoizedProps,n!==c&&Sr(s),_t(s),fg(s,m,n,c,o)),null;case 27:if(rr(s),o=Ce.current,m=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&Sr(s);else{if(!c){if(s.stateNode===null)throw Error(r(166));return _t(s),null}n=ve.current,Jo(s)?p0(s):(n=qT(m,c,o),s.stateNode=n,Sr(s))}return _t(s),null;case 5:if(rr(s),m=s.type,n!==null&&s.stateNode!=null)n.memoizedProps!==c&&Sr(s);else{if(!c){if(s.stateNode===null)throw Error(r(166));return _t(s),null}if(g=ve.current,Jo(s))p0(s);else{var E=td(Ce.current);switch(g){case 1:g=E.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:g=E.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":g=E.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":g=E.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":g=E.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof c.is=="string"?E.createElement("select",{is:c.is}):E.createElement("select"),c.multiple?g.multiple=!0:c.size&&(g.size=c.size);break;default:g=typeof c.is=="string"?E.createElement(m,{is:c.is}):E.createElement(m)}}g[Ct]=s,g[un]=c;e:for(E=s.child;E!==null;){if(E.tag===5||E.tag===6)g.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===s)break e;for(;E.sibling===null;){if(E.return===null||E.return===s)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}s.stateNode=g;e:switch(dn(g,m,c),m){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Sr(s)}}return _t(s),fg(s,s.type,n===null?null:n.memoizedProps,s.pendingProps,o),null;case 6:if(n&&s.stateNode!=null)n.memoizedProps!==c&&Sr(s);else{if(typeof c!="string"&&s.stateNode===null)throw Error(r(166));if(n=Ce.current,Jo(s)){if(n=s.stateNode,o=s.memoizedProps,c=null,m=cn,m!==null)switch(m.tag){case 27:case 5:c=m.memoizedProps}n[Ct]=s,n=!!(n.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||OT(n.nodeValue,o)),n||ys(s,!0)}else n=td(n).createTextNode(c),n[Ct]=s,s.stateNode=n}return _t(s),null;case 31:if(o=s.memoizedState,n===null||n.memoizedState!==null){if(c=Jo(s),o!==null){if(n===null){if(!c)throw Error(r(318));if(n=s.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(r(557));n[Ct]=s}else Ua(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;_t(s),n=!1}else o=bp(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=o),n=!0;if(!n)return s.flags&256?(Yn(s),s):(Yn(s),null);if((s.flags&128)!==0)throw Error(r(558))}return _t(s),null;case 13:if(c=s.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(m=Jo(s),c!==null&&c.dehydrated!==null){if(n===null){if(!m)throw Error(r(318));if(m=s.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(r(317));m[Ct]=s}else Ua(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;_t(s),m=!1}else m=bp(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=m),m=!0;if(!m)return s.flags&256?(Yn(s),s):(Yn(s),null)}return Yn(s),(s.flags&128)!==0?(s.lanes=o,s):(o=c!==null,n=n!==null&&n.memoizedState!==null,o&&(c=s.child,m=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(m=c.alternate.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==m&&(c.flags|=2048)),o!==n&&o&&(s.child.flags|=8192),zf(s,s.updateQueue),_t(s),null);case 4:return It(),n===null&&Vg(s.stateNode.containerInfo),_t(s),null;case 10:return vr(s.type),_t(s),null;case 19:if(re(Vt),c=s.memoizedState,c===null)return _t(s),null;if(m=(s.flags&128)!==0,g=c.rendering,g===null)if(m)oc(c,!1);else{if(Ot!==0||n!==null&&(n.flags&128)!==0)for(n=s.child;n!==null;){if(g=xf(n),g!==null){for(s.flags|=128,oc(c,!1),n=g.updateQueue,s.updateQueue=n,zf(s,n),s.subtreeFlags=0,n=o,o=s.child;o!==null;)c0(o,n),o=o.sibling;return ue(Vt,Vt.current&1|2),Ge&&yr(s,c.treeForkCount),s.child}n=n.sibling}c.tail!==null&&on()>Gf&&(s.flags|=128,m=!0,oc(c,!1),s.lanes=4194304)}else{if(!m)if(n=xf(g),n!==null){if(s.flags|=128,m=!0,n=n.updateQueue,s.updateQueue=n,zf(s,n),oc(c,!0),c.tail===null&&c.tailMode==="hidden"&&!g.alternate&&!Ge)return _t(s),null}else 2*on()-c.renderingStartTime>Gf&&o!==536870912&&(s.flags|=128,m=!0,oc(c,!1),s.lanes=4194304);c.isBackwards?(g.sibling=s.child,s.child=g):(n=c.last,n!==null?n.sibling=g:s.child=g,c.last=g)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=on(),n.sibling=null,o=Vt.current,ue(Vt,m?o&1|2:o&1),Ge&&yr(s,c.treeForkCount),n):(_t(s),null);case 22:case 23:return Yn(s),Mp(),c=s.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(s.flags|=8192):c&&(s.flags|=8192),c?(o&536870912)!==0&&(s.flags&128)===0&&(_t(s),s.subtreeFlags&6&&(s.flags|=8192)):_t(s),o=s.updateQueue,o!==null&&zf(s,o.retryQueue),o=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),c=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),c!==o&&(s.flags|=2048),n!==null&&re(Fa),null;case 24:return o=null,n!==null&&(o=n.memoizedState.cache),s.memoizedState.cache!==o&&(s.flags|=2048),vr(Ut),_t(s),null;case 25:return null;case 30:return null}throw Error(r(156,s.tag))}function MR(n,s){switch(Ep(s),s.tag){case 1:return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 3:return vr(Ut),It(),n=s.flags,(n&65536)!==0&&(n&128)===0?(s.flags=n&-65537|128,s):null;case 26:case 27:case 5:return rr(s),null;case 31:if(s.memoizedState!==null){if(Yn(s),s.alternate===null)throw Error(r(340));Ua()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 13:if(Yn(s),n=s.memoizedState,n!==null&&n.dehydrated!==null){if(s.alternate===null)throw Error(r(340));Ua()}return n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 19:return re(Vt),null;case 4:return It(),null;case 10:return vr(s.type),null;case 22:case 23:return Yn(s),Mp(),n!==null&&re(Fa),n=s.flags,n&65536?(s.flags=n&-65537|128,s):null;case 24:return vr(Ut),null;case 25:return null;default:return null}}function LE(n,s){switch(Ep(s),s.tag){case 3:vr(Ut),It();break;case 26:case 27:case 5:rr(s);break;case 4:It();break;case 31:s.memoizedState!==null&&Yn(s);break;case 13:Yn(s);break;case 19:re(Vt);break;case 10:vr(s.type);break;case 22:case 23:Yn(s),Mp(),n!==null&&re(Fa);break;case 24:vr(Ut)}}function lc(n,s){try{var o=s.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var m=c.next;o=m;do{if((o.tag&n)===n){c=void 0;var g=o.create,E=o.inst;c=g(),E.destroy=c}o=o.next}while(o!==m)}}catch(w){nt(s,s.return,w)}}function ws(n,s,o){try{var c=s.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var g=m.next;c=g;do{if((c.tag&n)===n){var E=c.inst,w=E.destroy;if(w!==void 0){E.destroy=void 0,m=s;var L=o,Y=w;try{Y()}catch(se){nt(m,L,se)}}}c=c.next}while(c!==g)}}catch(se){nt(s,s.return,se)}}function jE(n){var s=n.updateQueue;if(s!==null){var o=n.stateNode;try{R0(s,o)}catch(c){nt(n,n.return,c)}}}function UE(n,s,o){o.props=$a(n.type,n.memoizedProps),o.state=n.memoizedState;try{o.componentWillUnmount()}catch(c){nt(n,s,c)}}function uc(n,s){try{var o=n.ref;if(o!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof o=="function"?n.refCleanup=o(c):o.current=c}}catch(m){nt(n,s,m)}}function qi(n,s){var o=n.ref,c=n.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(m){nt(n,s,m)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(m){nt(n,s,m)}else o.current=null}function zE(n){var s=n.type,o=n.memoizedProps,c=n.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(m){nt(n,n.return,m)}}function dg(n,s,o){try{var c=n.stateNode;iC(c,n.type,o,s),c[un]=s}catch(m){nt(n,n.return,m)}}function BE(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Ns(n.type)||n.tag===4}function mg(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||BE(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Ns(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function pg(n,s,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o).insertBefore(n,s):(s=o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,s.appendChild(n),o=o._reactRootContainer,o!=null||s.onclick!==null||(s.onclick=Wt));else if(c!==4&&(c===27&&Ns(n.type)&&(o=n.stateNode,s=null),n=n.child,n!==null))for(pg(n,s,o),n=n.sibling;n!==null;)pg(n,s,o),n=n.sibling}function Bf(n,s,o){var c=n.tag;if(c===5||c===6)n=n.stateNode,s?o.insertBefore(n,s):o.appendChild(n);else if(c!==4&&(c===27&&Ns(n.type)&&(o=n.stateNode),n=n.child,n!==null))for(Bf(n,s,o),n=n.sibling;n!==null;)Bf(n,s,o),n=n.sibling}function FE(n){var s=n.stateNode,o=n.memoizedProps;try{for(var c=n.type,m=s.attributes;m.length;)s.removeAttributeNode(m[0]);dn(s,c,o),s[Ct]=n,s[un]=o}catch(g){nt(n,n.return,g)}}var wr=!1,Ft=!1,gg=!1,qE=typeof WeakSet=="function"?WeakSet:Set,en=null;function kR(n,s){if(n=n.containerInfo,Lg=ld,n=t0(n),up(n)){if("selectionStart"in n)var o={start:n.selectionStart,end:n.selectionEnd};else e:{o=(o=n.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var m=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var E=0,w=-1,L=-1,Y=0,se=0,le=n,Z=null;t:for(;;){for(var te;le!==o||m!==0&&le.nodeType!==3||(w=E+m),le!==g||c!==0&&le.nodeType!==3||(L=E+c),le.nodeType===3&&(E+=le.nodeValue.length),(te=le.firstChild)!==null;)Z=le,le=te;for(;;){if(le===n)break t;if(Z===o&&++Y===m&&(w=E),Z===g&&++se===c&&(L=E),(te=le.nextSibling)!==null)break;le=Z,Z=le.parentNode}le=te}o=w===-1||L===-1?null:{start:w,end:L}}else o=null}o=o||{start:0,end:0}}else o=null;for(jg={focusedElem:n,selectionRange:o},ld=!1,en=s;en!==null;)if(s=en,n=s.child,(s.subtreeFlags&1028)!==0&&n!==null)n.return=s,en=n;else for(;en!==null;){switch(s=en,g=s.alternate,n=s.flags,s.tag){case 0:if((n&4)!==0&&(n=s.updateQueue,n=n!==null?n.events:null,n!==null))for(o=0;o<n.length;o++)m=n[o],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,o=s,m=g.memoizedProps,g=g.memoizedState,c=o.stateNode;try{var Ee=$a(o.type,m);n=c.getSnapshotBeforeUpdate(Ee,g),c.__reactInternalSnapshotBeforeUpdate=n}catch(xe){nt(o,o.return,xe)}}break;case 3:if((n&1024)!==0){if(n=s.stateNode.containerInfo,o=n.nodeType,o===9)Bg(n);else if(o===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Bg(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(r(163))}if(n=s.sibling,n!==null){n.return=s.return,en=n;break}en=s.return}}function HE(n,s,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:Ir(n,o),c&4&&lc(5,o);break;case 1:if(Ir(n,o),c&4)if(n=o.stateNode,s===null)try{n.componentDidMount()}catch(E){nt(o,o.return,E)}else{var m=$a(o.type,s.memoizedProps);s=s.memoizedState;try{n.componentDidUpdate(m,s,n.__reactInternalSnapshotBeforeUpdate)}catch(E){nt(o,o.return,E)}}c&64&&jE(o),c&512&&uc(o,o.return);break;case 3:if(Ir(n,o),c&64&&(n=o.updateQueue,n!==null)){if(s=null,o.child!==null)switch(o.child.tag){case 27:case 5:s=o.child.stateNode;break;case 1:s=o.child.stateNode}try{R0(n,s)}catch(E){nt(o,o.return,E)}}break;case 27:s===null&&c&4&&FE(o);case 26:case 5:Ir(n,o),s===null&&c&4&&zE(o),c&512&&uc(o,o.return);break;case 12:Ir(n,o);break;case 31:Ir(n,o),c&4&&$E(n,o);break;case 13:Ir(n,o),c&4&&QE(n,o),c&64&&(n=o.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(o=GR.bind(null,o),hC(n,o))));break;case 22:if(c=o.memoizedState!==null||wr,!c){s=s!==null&&s.memoizedState!==null||Ft,m=wr;var g=Ft;wr=c,(Ft=s)&&!g?xr(n,o,(o.subtreeFlags&8772)!==0):Ir(n,o),wr=m,Ft=g}break;case 30:break;default:Ir(n,o)}}function GE(n){var s=n.alternate;s!==null&&(n.alternate=null,GE(s)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(s=n.stateNode,s!==null&&Aa(s)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Tt=null,Pn=!1;function Ar(n,s,o){for(o=o.child;o!==null;)KE(n,s,o),o=o.sibling}function KE(n,s,o){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(Xr,o)}catch{}switch(o.tag){case 26:Ft||qi(o,s),Ar(n,s,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:Ft||qi(o,s);var c=Tt,m=Pn;Ns(o.type)&&(Tt=o.stateNode,Pn=!1),Ar(n,s,o),_c(o.stateNode),Tt=c,Pn=m;break;case 5:Ft||qi(o,s);case 6:if(c=Tt,m=Pn,Tt=null,Ar(n,s,o),Tt=c,Pn=m,Tt!==null)if(Pn)try{(Tt.nodeType===9?Tt.body:Tt.nodeName==="HTML"?Tt.ownerDocument.body:Tt).removeChild(o.stateNode)}catch(g){nt(o,s,g)}else try{Tt.removeChild(o.stateNode)}catch(g){nt(o,s,g)}break;case 18:Tt!==null&&(Pn?(n=Tt,jT(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,o.stateNode),vl(n)):jT(Tt,o.stateNode));break;case 4:c=Tt,m=Pn,Tt=o.stateNode.containerInfo,Pn=!0,Ar(n,s,o),Tt=c,Pn=m;break;case 0:case 11:case 14:case 15:ws(2,o,s),Ft||ws(4,o,s),Ar(n,s,o);break;case 1:Ft||(qi(o,s),c=o.stateNode,typeof c.componentWillUnmount=="function"&&UE(o,s,c)),Ar(n,s,o);break;case 21:Ar(n,s,o);break;case 22:Ft=(c=Ft)||o.memoizedState!==null,Ar(n,s,o),Ft=c;break;default:Ar(n,s,o)}}function $E(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{vl(n)}catch(o){nt(s,s.return,o)}}}function QE(n,s){if(s.memoizedState===null&&(n=s.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{vl(n)}catch(o){nt(s,s.return,o)}}function LR(n){switch(n.tag){case 31:case 13:case 19:var s=n.stateNode;return s===null&&(s=n.stateNode=new qE),s;case 22:return n=n.stateNode,s=n._retryCache,s===null&&(s=n._retryCache=new qE),s;default:throw Error(r(435,n.tag))}}function Ff(n,s){var o=LR(n);s.forEach(function(c){if(!o.has(c)){o.add(c);var m=KR.bind(null,n,c);c.then(m,m)}})}function Vn(n,s){var o=s.deletions;if(o!==null)for(var c=0;c<o.length;c++){var m=o[c],g=n,E=s,w=E;e:for(;w!==null;){switch(w.tag){case 27:if(Ns(w.type)){Tt=w.stateNode,Pn=!1;break e}break;case 5:Tt=w.stateNode,Pn=!1;break e;case 3:case 4:Tt=w.stateNode.containerInfo,Pn=!0;break e}w=w.return}if(Tt===null)throw Error(r(160));KE(g,E,m),Tt=null,Pn=!1,g=m.alternate,g!==null&&(g.return=null),m.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)XE(s,n),s=s.sibling}var wi=null;function XE(n,s){var o=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Vn(s,n),Mn(n),c&4&&(ws(3,n,n.return),lc(3,n),ws(5,n,n.return));break;case 1:Vn(s,n),Mn(n),c&512&&(Ft||o===null||qi(o,o.return)),c&64&&wr&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(o=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var m=wi;if(Vn(s,n),Mn(n),c&512&&(Ft||o===null||qi(o,o.return)),c&4){var g=o!==null?o.memoizedState:null;if(c=n.memoizedState,o===null)if(c===null)if(n.stateNode===null){e:{c=n.type,o=n.memoizedProps,m=m.ownerDocument||m;t:switch(c){case"title":g=m.getElementsByTagName("title")[0],(!g||g[lr]||g[Ct]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=m.createElement(c),m.head.insertBefore(g,m.querySelector("head > title"))),dn(g,c,o),g[Ct]=n,Pt(g),c=g;break e;case"link":var E=XT("link","href",m).get(c+(o.href||""));if(E){for(var w=0;w<E.length;w++)if(g=E[w],g.getAttribute("href")===(o.href==null||o.href===""?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){E.splice(w,1);break t}}g=m.createElement(c),dn(g,c,o),m.head.appendChild(g);break;case"meta":if(E=XT("meta","content",m).get(c+(o.content||""))){for(w=0;w<E.length;w++)if(g=E[w],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){E.splice(w,1);break t}}g=m.createElement(c),dn(g,c,o),m.head.appendChild(g);break;default:throw Error(r(468,c))}g[Ct]=n,Pt(g),c=g}n.stateNode=c}else YT(m,n.type,n.stateNode);else n.stateNode=QT(m,c,n.memoizedProps);else g!==c?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,c===null?YT(m,n.type,n.stateNode):QT(m,c,n.memoizedProps)):c===null&&n.stateNode!==null&&dg(n,n.memoizedProps,o.memoizedProps)}break;case 27:Vn(s,n),Mn(n),c&512&&(Ft||o===null||qi(o,o.return)),o!==null&&c&4&&dg(n,n.memoizedProps,o.memoizedProps);break;case 5:if(Vn(s,n),Mn(n),c&512&&(Ft||o===null||qi(o,o.return)),n.flags&32){m=n.stateNode;try{oi(m,"")}catch(Ee){nt(n,n.return,Ee)}}c&4&&n.stateNode!=null&&(m=n.memoizedProps,dg(n,m,o!==null?o.memoizedProps:m)),c&1024&&(gg=!0);break;case 6:if(Vn(s,n),Mn(n),c&4){if(n.stateNode===null)throw Error(r(162));c=n.memoizedProps,o=n.stateNode;try{o.nodeValue=c}catch(Ee){nt(n,n.return,Ee)}}break;case 3:if(rd=null,m=wi,wi=nd(s.containerInfo),Vn(s,n),wi=m,Mn(n),c&4&&o!==null&&o.memoizedState.isDehydrated)try{vl(s.containerInfo)}catch(Ee){nt(n,n.return,Ee)}gg&&(gg=!1,YE(n));break;case 4:c=wi,wi=nd(n.stateNode.containerInfo),Vn(s,n),Mn(n),wi=c;break;case 12:Vn(s,n),Mn(n);break;case 31:Vn(s,n),Mn(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Ff(n,c)));break;case 13:Vn(s,n),Mn(n),n.child.flags&8192&&n.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Hf=on()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Ff(n,c)));break;case 22:m=n.memoizedState!==null;var L=o!==null&&o.memoizedState!==null,Y=wr,se=Ft;if(wr=Y||m,Ft=se||L,Vn(s,n),Ft=se,wr=Y,Mn(n),c&8192)e:for(s=n.stateNode,s._visibility=m?s._visibility&-2:s._visibility|1,m&&(o===null||L||wr||Ft||Qa(n)),o=null,s=n;;){if(s.tag===5||s.tag===26){if(o===null){L=o=s;try{if(g=L.stateNode,m)E=g.style,typeof E.setProperty=="function"?E.setProperty("display","none","important"):E.display="none";else{w=L.stateNode;var le=L.memoizedProps.style,Z=le!=null&&le.hasOwnProperty("display")?le.display:null;w.style.display=Z==null||typeof Z=="boolean"?"":(""+Z).trim()}}catch(Ee){nt(L,L.return,Ee)}}}else if(s.tag===6){if(o===null){L=s;try{L.stateNode.nodeValue=m?"":L.memoizedProps}catch(Ee){nt(L,L.return,Ee)}}}else if(s.tag===18){if(o===null){L=s;try{var te=L.stateNode;m?UT(te,!0):UT(L.stateNode,!1)}catch(Ee){nt(L,L.return,Ee)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===n)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===n)break e;for(;s.sibling===null;){if(s.return===null||s.return===n)break e;o===s&&(o=null),s=s.return}o===s&&(o=null),s.sibling.return=s.return,s=s.sibling}c&4&&(c=n.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,Ff(n,o))));break;case 19:Vn(s,n),Mn(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Ff(n,c)));break;case 30:break;case 21:break;default:Vn(s,n),Mn(n)}}function Mn(n){var s=n.flags;if(s&2){try{for(var o,c=n.return;c!==null;){if(BE(c)){o=c;break}c=c.return}if(o==null)throw Error(r(160));switch(o.tag){case 27:var m=o.stateNode,g=mg(n);Bf(n,g,m);break;case 5:var E=o.stateNode;o.flags&32&&(oi(E,""),o.flags&=-33);var w=mg(n);Bf(n,w,E);break;case 3:case 4:var L=o.stateNode.containerInfo,Y=mg(n);pg(n,Y,L);break;default:throw Error(r(161))}}catch(se){nt(n,n.return,se)}n.flags&=-3}s&4096&&(n.flags&=-4097)}function YE(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var s=n;YE(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),n=n.sibling}}function Ir(n,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)HE(n,s.alternate,s),s=s.sibling}function Qa(n){for(n=n.child;n!==null;){var s=n;switch(s.tag){case 0:case 11:case 14:case 15:ws(4,s,s.return),Qa(s);break;case 1:qi(s,s.return);var o=s.stateNode;typeof o.componentWillUnmount=="function"&&UE(s,s.return,o),Qa(s);break;case 27:_c(s.stateNode);case 26:case 5:qi(s,s.return),Qa(s);break;case 22:s.memoizedState===null&&Qa(s);break;case 30:Qa(s);break;default:Qa(s)}n=n.sibling}}function xr(n,s,o){for(o=o&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var c=s.alternate,m=n,g=s,E=g.flags;switch(g.tag){case 0:case 11:case 15:xr(m,g,o),lc(4,g);break;case 1:if(xr(m,g,o),c=g,m=c.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(Y){nt(c,c.return,Y)}if(c=g,m=c.updateQueue,m!==null){var w=c.stateNode;try{var L=m.shared.hiddenCallbacks;if(L!==null)for(m.shared.hiddenCallbacks=null,m=0;m<L.length;m++)x0(L[m],w)}catch(Y){nt(c,c.return,Y)}}o&&E&64&&jE(g),uc(g,g.return);break;case 27:FE(g);case 26:case 5:xr(m,g,o),o&&c===null&&E&4&&zE(g),uc(g,g.return);break;case 12:xr(m,g,o);break;case 31:xr(m,g,o),o&&E&4&&$E(m,g);break;case 13:xr(m,g,o),o&&E&4&&QE(m,g);break;case 22:g.memoizedState===null&&xr(m,g,o),uc(g,g.return);break;case 30:break;default:xr(m,g,o)}s=s.sibling}}function yg(n,s){var o=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),n=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(n=s.memoizedState.cachePool.pool),n!==o&&(n!=null&&n.refCount++,o!=null&&Xu(o))}function _g(n,s){n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Xu(n))}function Ai(n,s,o,c){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)WE(n,s,o,c),s=s.sibling}function WE(n,s,o,c){var m=s.flags;switch(s.tag){case 0:case 11:case 15:Ai(n,s,o,c),m&2048&&lc(9,s);break;case 1:Ai(n,s,o,c);break;case 3:Ai(n,s,o,c),m&2048&&(n=null,s.alternate!==null&&(n=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==n&&(s.refCount++,n!=null&&Xu(n)));break;case 12:if(m&2048){Ai(n,s,o,c),n=s.stateNode;try{var g=s.memoizedProps,E=g.id,w=g.onPostCommit;typeof w=="function"&&w(E,s.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(L){nt(s,s.return,L)}}else Ai(n,s,o,c);break;case 31:Ai(n,s,o,c);break;case 13:Ai(n,s,o,c);break;case 23:break;case 22:g=s.stateNode,E=s.alternate,s.memoizedState!==null?g._visibility&2?Ai(n,s,o,c):cc(n,s):g._visibility&2?Ai(n,s,o,c):(g._visibility|=2,ll(n,s,o,c,(s.subtreeFlags&10256)!==0||!1)),m&2048&&yg(E,s);break;case 24:Ai(n,s,o,c),m&2048&&_g(s.alternate,s);break;default:Ai(n,s,o,c)}}function ll(n,s,o,c,m){for(m=m&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var g=n,E=s,w=o,L=c,Y=E.flags;switch(E.tag){case 0:case 11:case 15:ll(g,E,w,L,m),lc(8,E);break;case 23:break;case 22:var se=E.stateNode;E.memoizedState!==null?se._visibility&2?ll(g,E,w,L,m):cc(g,E):(se._visibility|=2,ll(g,E,w,L,m)),m&&Y&2048&&yg(E.alternate,E);break;case 24:ll(g,E,w,L,m),m&&Y&2048&&_g(E.alternate,E);break;default:ll(g,E,w,L,m)}s=s.sibling}}function cc(n,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var o=n,c=s,m=c.flags;switch(c.tag){case 22:cc(o,c),m&2048&&yg(c.alternate,c);break;case 24:cc(o,c),m&2048&&_g(c.alternate,c);break;default:cc(o,c)}s=s.sibling}}var hc=8192;function ul(n,s,o){if(n.subtreeFlags&hc)for(n=n.child;n!==null;)JE(n,s,o),n=n.sibling}function JE(n,s,o){switch(n.tag){case 26:ul(n,s,o),n.flags&hc&&n.memoizedState!==null&&SC(o,wi,n.memoizedState,n.memoizedProps);break;case 5:ul(n,s,o);break;case 3:case 4:var c=wi;wi=nd(n.stateNode.containerInfo),ul(n,s,o),wi=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=hc,hc=16777216,ul(n,s,o),hc=c):ul(n,s,o));break;default:ul(n,s,o)}}function ZE(n){var s=n.alternate;if(s!==null&&(n=s.child,n!==null)){s.child=null;do s=n.sibling,n.sibling=null,n=s;while(n!==null)}}function fc(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];en=c,tT(c,n)}ZE(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)eT(n),n=n.sibling}function eT(n){switch(n.tag){case 0:case 11:case 15:fc(n),n.flags&2048&&ws(9,n,n.return);break;case 3:fc(n);break;case 12:fc(n);break;case 22:var s=n.stateNode;n.memoizedState!==null&&s._visibility&2&&(n.return===null||n.return.tag!==13)?(s._visibility&=-3,qf(n)):fc(n);break;default:fc(n)}}function qf(n){var s=n.deletions;if((n.flags&16)!==0){if(s!==null)for(var o=0;o<s.length;o++){var c=s[o];en=c,tT(c,n)}ZE(n)}for(n=n.child;n!==null;){switch(s=n,s.tag){case 0:case 11:case 15:ws(8,s,s.return),qf(s);break;case 22:o=s.stateNode,o._visibility&2&&(o._visibility&=-3,qf(s));break;default:qf(s)}n=n.sibling}}function tT(n,s){for(;en!==null;){var o=en;switch(o.tag){case 0:case 11:case 15:ws(8,o,s);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Xu(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,en=c;else e:for(o=n;en!==null;){c=en;var m=c.sibling,g=c.return;if(GE(c),c===o){en=null;break e}if(m!==null){m.return=g,en=m;break e}en=g}}}var jR={getCacheForType:function(n){var s=hn(Ut),o=s.data.get(n);return o===void 0&&(o=n(),s.data.set(n,o)),o},cacheSignal:function(){return hn(Ut).controller.signal}},UR=typeof WeakMap=="function"?WeakMap:Map,Je=0,mt=null,Ue=null,Be=0,tt=0,Wn=null,As=!1,cl=!1,vg=!1,Rr=0,Ot=0,Is=0,Xa=0,Eg=0,Jn=0,hl=0,dc=null,kn=null,Tg=!1,Hf=0,nT=0,Gf=1/0,Kf=null,xs=null,Kt=0,Rs=null,fl=null,Cr=0,bg=0,Sg=null,iT=null,mc=0,wg=null;function Zn(){return(Je&2)!==0&&Be!==0?Be&-Be:ie.T!==null?Dg():or()}function rT(){if(Jn===0)if((Be&536870912)===0||Ge){var n=Pi;Pi<<=1,(Pi&3932160)===0&&(Pi=262144),Jn=n}else Jn=536870912;return n=Xn.current,n!==null&&(n.flags|=32),Jn}function Ln(n,s,o){(n===mt&&(tt===2||tt===9)||n.cancelPendingCommit!==null)&&(dl(n,0),Cs(n,Be,Jn,!1)),Jr(n,o),((Je&2)===0||n!==mt)&&(n===mt&&((Je&2)===0&&(Xa|=o),Ot===4&&Cs(n,Be,Jn,!1)),Hi(n))}function sT(n,s,o){if((Je&6)!==0)throw Error(r(327));var c=!o&&(s&127)===0&&(s&n.expiredLanes)===0||Wr(n,s),m=c?FR(n,s):Ig(n,s,!0),g=c;do{if(m===0){cl&&!c&&Cs(n,s,0,!1);break}else{if(o=n.current.alternate,g&&!zR(o)){m=Ig(n,s,!1),g=!1;continue}if(m===2){if(g=s,n.errorRecoveryDisabledLanes&g)var E=0;else E=n.pendingLanes&-536870913,E=E!==0?E:E&536870912?536870912:0;if(E!==0){s=E;e:{var w=n;m=dc;var L=w.current.memoizedState.isDehydrated;if(L&&(dl(w,E).flags|=256),E=Ig(w,E,!1),E!==2){if(vg&&!L){w.errorRecoveryDisabledLanes|=g,Xa|=g,m=4;break e}g=kn,kn=m,g!==null&&(kn===null?kn=g:kn.push.apply(kn,g))}m=E}if(g=!1,m!==2)continue}}if(m===1){dl(n,0),Cs(n,s,0,!0);break}e:{switch(c=n,g=m,g){case 0:case 1:throw Error(r(345));case 4:if((s&4194048)!==s)break;case 6:Cs(c,s,Jn,!As);break e;case 2:kn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((s&62914560)===s&&(m=Hf+300-on(),10<m)){if(Cs(c,s,Jn,!As),si(c,0,!0)!==0)break e;Cr=s,c.timeoutHandle=kT(aT.bind(null,c,o,kn,Kf,Tg,s,Jn,Xa,hl,As,g,"Throttled",-0,0),m);break e}aT(c,o,kn,Kf,Tg,s,Jn,Xa,hl,As,g,null,-0,0)}}break}while(!0);Hi(n)}function aT(n,s,o,c,m,g,E,w,L,Y,se,le,Z,te){if(n.timeoutHandle=-1,le=s.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Wt},JE(s,g,le);var Ee=(g&62914560)===g?Hf-on():(g&4194048)===g?nT-on():0;if(Ee=wC(le,Ee),Ee!==null){Cr=g,n.cancelPendingCommit=Ee(mT.bind(null,n,s,g,o,c,m,E,w,L,se,le,null,Z,te)),Cs(n,g,E,!Y);return}}mT(n,s,g,o,c,m,E,w,L)}function zR(n){for(var s=n;;){var o=s.tag;if((o===0||o===11||o===15)&&s.flags&16384&&(o=s.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var m=o[c],g=m.getSnapshot;m=m.value;try{if(!$n(g(),m))return!1}catch{return!1}}if(o=s.child,s.subtreeFlags&16384&&o!==null)o.return=s,s=o;else{if(s===n)break;for(;s.sibling===null;){if(s.return===null||s.return===n)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Cs(n,s,o,c){s&=~Eg,s&=~Xa,n.suspendedLanes|=s,n.pingedLanes&=~s,c&&(n.warmLanes|=s),c=n.expirationTimes;for(var m=s;0<m;){var g=31-An(m),E=1<<g;c[g]=-1,m&=~E}o!==0&&Ru(n,o,s)}function $f(){return(Je&6)===0?(pc(0),!1):!0}function Ag(){if(Ue!==null){if(tt===0)var n=Ue.return;else n=Ue,_r=za=null,Bp(n),il=null,Wu=0,n=Ue;for(;n!==null;)LE(n.alternate,n),n=n.return;Ue=null}}function dl(n,s){var o=n.timeoutHandle;o!==-1&&(n.timeoutHandle=-1,aC(o)),o=n.cancelPendingCommit,o!==null&&(n.cancelPendingCommit=null,o()),Cr=0,Ag(),mt=n,Ue=o=gr(n.current,null),Be=s,tt=0,Wn=null,As=!1,cl=Wr(n,s),vg=!1,hl=Jn=Eg=Xa=Is=Ot=0,kn=dc=null,Tg=!1,(s&8)!==0&&(s|=s&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=s;0<c;){var m=31-An(c),g=1<<m;s|=n[m],c&=~g}return Rr=s,mf(),o}function oT(n,s){Oe=null,ie.H=sc,s===nl||s===bf?(s=S0(),tt=3):s===Cp?(s=S0(),tt=4):tt=s===ig?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Wn=s,Ue===null&&(Ot=1,kf(n,ui(s,n.current)))}function lT(){var n=Xn.current;return n===null?!0:(Be&4194048)===Be?di===null:(Be&62914560)===Be||(Be&536870912)!==0?n===di:!1}function uT(){var n=ie.H;return ie.H=sc,n===null?sc:n}function cT(){var n=ie.A;return ie.A=jR,n}function Qf(){Ot=4,As||(Be&4194048)!==Be&&Xn.current!==null||(cl=!0),(Is&134217727)===0&&(Xa&134217727)===0||mt===null||Cs(mt,Be,Jn,!1)}function Ig(n,s,o){var c=Je;Je|=2;var m=uT(),g=cT();(mt!==n||Be!==s)&&(Kf=null,dl(n,s)),s=!1;var E=Ot;e:do try{if(tt!==0&&Ue!==null){var w=Ue,L=Wn;switch(tt){case 8:Ag(),E=6;break e;case 3:case 2:case 9:case 6:Xn.current===null&&(s=!0);var Y=tt;if(tt=0,Wn=null,ml(n,w,L,Y),o&&cl){E=0;break e}break;default:Y=tt,tt=0,Wn=null,ml(n,w,L,Y)}}BR(),E=Ot;break}catch(se){oT(n,se)}while(!0);return s&&n.shellSuspendCounter++,_r=za=null,Je=c,ie.H=m,ie.A=g,Ue===null&&(mt=null,Be=0,mf()),E}function BR(){for(;Ue!==null;)hT(Ue)}function FR(n,s){var o=Je;Je|=2;var c=uT(),m=cT();mt!==n||Be!==s?(Kf=null,Gf=on()+500,dl(n,s)):cl=Wr(n,s);e:do try{if(tt!==0&&Ue!==null){s=Ue;var g=Wn;t:switch(tt){case 1:tt=0,Wn=null,ml(n,s,g,1);break;case 2:case 9:if(T0(g)){tt=0,Wn=null,fT(s);break}s=function(){tt!==2&&tt!==9||mt!==n||(tt=7),Hi(n)},g.then(s,s);break e;case 3:tt=7;break e;case 4:tt=5;break e;case 7:T0(g)?(tt=0,Wn=null,fT(s)):(tt=0,Wn=null,ml(n,s,g,7));break;case 5:var E=null;switch(Ue.tag){case 26:E=Ue.memoizedState;case 5:case 27:var w=Ue;if(E?WT(E):w.stateNode.complete){tt=0,Wn=null;var L=w.sibling;if(L!==null)Ue=L;else{var Y=w.return;Y!==null?(Ue=Y,Xf(Y)):Ue=null}break t}}tt=0,Wn=null,ml(n,s,g,5);break;case 6:tt=0,Wn=null,ml(n,s,g,6);break;case 8:Ag(),Ot=6;break e;default:throw Error(r(462))}}qR();break}catch(se){oT(n,se)}while(!0);return _r=za=null,ie.H=c,ie.A=m,Je=o,Ue!==null?0:(mt=null,Be=0,mf(),Ot)}function qR(){for(;Ue!==null&&!Jm();)hT(Ue)}function hT(n){var s=ME(n.alternate,n,Rr);n.memoizedProps=n.pendingProps,s===null?Xf(n):Ue=s}function fT(n){var s=n,o=s.alternate;switch(s.tag){case 15:case 0:s=CE(o,s,s.pendingProps,s.type,void 0,Be);break;case 11:s=CE(o,s,s.pendingProps,s.type.render,s.ref,Be);break;case 5:Bp(s);default:LE(o,s),s=Ue=c0(s,Rr),s=ME(o,s,Rr)}n.memoizedProps=n.pendingProps,s===null?Xf(n):Ue=s}function ml(n,s,o,c){_r=za=null,Bp(s),il=null,Wu=0;var m=s.return;try{if(NR(n,m,s,o,Be)){Ot=1,kf(n,ui(o,n.current)),Ue=null;return}}catch(g){if(m!==null)throw Ue=m,g;Ot=1,kf(n,ui(o,n.current)),Ue=null;return}s.flags&32768?(Ge||c===1?n=!0:cl||(Be&536870912)!==0?n=!1:(As=n=!0,(c===2||c===9||c===3||c===6)&&(c=Xn.current,c!==null&&c.tag===13&&(c.flags|=16384))),dT(s,n)):Xf(s)}function Xf(n){var s=n;do{if((s.flags&32768)!==0){dT(s,As);return}n=s.return;var o=VR(s.alternate,s,Rr);if(o!==null){Ue=o;return}if(s=s.sibling,s!==null){Ue=s;return}Ue=s=n}while(s!==null);Ot===0&&(Ot=5)}function dT(n,s){do{var o=MR(n.alternate,n);if(o!==null){o.flags&=32767,Ue=o;return}if(o=n.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!s&&(n=n.sibling,n!==null)){Ue=n;return}Ue=n=o}while(n!==null);Ot=6,Ue=null}function mT(n,s,o,c,m,g,E,w,L){n.cancelPendingCommit=null;do Yf();while(Kt!==0);if((Je&6)!==0)throw Error(r(327));if(s!==null){if(s===n.current)throw Error(r(177));if(g=s.lanes|s.childLanes,g|=mp,ln(n,o,g,E,w,L),n===mt&&(Ue=mt=null,Be=0),fl=s,Rs=n,Cr=o,bg=g,Sg=m,iT=c,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,$R(sr,function(){return vT(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||c){c=ie.T,ie.T=null,m=he.p,he.p=2,E=Je,Je|=4;try{kR(n,s,o)}finally{Je=E,he.p=m,ie.T=c}}Kt=1,pT(),gT(),yT()}}function pT(){if(Kt===1){Kt=0;var n=Rs,s=fl,o=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||o){o=ie.T,ie.T=null;var c=he.p;he.p=2;var m=Je;Je|=4;try{XE(s,n);var g=jg,E=t0(n.containerInfo),w=g.focusedElem,L=g.selectionRange;if(E!==w&&w&&w.ownerDocument&&e0(w.ownerDocument.documentElement,w)){if(L!==null&&up(w)){var Y=L.start,se=L.end;if(se===void 0&&(se=Y),"selectionStart"in w)w.selectionStart=Y,w.selectionEnd=Math.min(se,w.value.length);else{var le=w.ownerDocument||document,Z=le&&le.defaultView||window;if(Z.getSelection){var te=Z.getSelection(),Ee=w.textContent.length,xe=Math.min(L.start,Ee),lt=L.end===void 0?xe:Math.min(L.end,Ee);!te.extend&&xe>lt&&(E=lt,lt=xe,xe=E);var H=Zv(w,xe),U=Zv(w,lt);if(H&&U&&(te.rangeCount!==1||te.anchorNode!==H.node||te.anchorOffset!==H.offset||te.focusNode!==U.node||te.focusOffset!==U.offset)){var X=le.createRange();X.setStart(H.node,H.offset),te.removeAllRanges(),xe>lt?(te.addRange(X),te.extend(U.node,U.offset)):(X.setEnd(U.node,U.offset),te.addRange(X))}}}}for(le=[],te=w;te=te.parentNode;)te.nodeType===1&&le.push({element:te,left:te.scrollLeft,top:te.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<le.length;w++){var ae=le[w];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}ld=!!Lg,jg=Lg=null}finally{Je=m,he.p=c,ie.T=o}}n.current=s,Kt=2}}function gT(){if(Kt===2){Kt=0;var n=Rs,s=fl,o=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||o){o=ie.T,ie.T=null;var c=he.p;he.p=2;var m=Je;Je|=4;try{HE(n,s.alternate,s)}finally{Je=m,he.p=c,ie.T=o}}Kt=3}}function yT(){if(Kt===4||Kt===3){Kt=0,wu();var n=Rs,s=fl,o=Cr,c=iT;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?Kt=5:(Kt=0,fl=Rs=null,_T(n,n.pendingLanes));var m=n.pendingLanes;if(m===0&&(xs=null),Du(o),s=s.stateNode,yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(Xr,s,void 0,(s.current.flags&128)===128)}catch{}if(c!==null){s=ie.T,m=he.p,he.p=2,ie.T=null;try{for(var g=n.onRecoverableError,E=0;E<c.length;E++){var w=c[E];g(w.value,{componentStack:w.stack})}}finally{ie.T=s,he.p=m}}(Cr&3)!==0&&Yf(),Hi(n),m=n.pendingLanes,(o&261930)!==0&&(m&42)!==0?n===wg?mc++:(mc=0,wg=n):mc=0,pc(0)}}function _T(n,s){(n.pooledCacheLanes&=s)===0&&(s=n.pooledCache,s!=null&&(n.pooledCache=null,Xu(s)))}function Yf(){return pT(),gT(),yT(),vT()}function vT(){if(Kt!==5)return!1;var n=Rs,s=bg;bg=0;var o=Du(Cr),c=ie.T,m=he.p;try{he.p=32>o?32:o,ie.T=null,o=Sg,Sg=null;var g=Rs,E=Cr;if(Kt=0,fl=Rs=null,Cr=0,(Je&6)!==0)throw Error(r(331));var w=Je;if(Je|=4,eT(g.current),WE(g,g.current,E,o),Je=w,pc(0,!1),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(Xr,g)}catch{}return!0}finally{he.p=m,ie.T=c,_T(n,s)}}function ET(n,s,o){s=ui(o,s),s=ng(n.stateNode,s,2),n=Ts(n,s,2),n!==null&&(Jr(n,2),Hi(n))}function nt(n,s,o){if(n.tag===3)ET(n,n,o);else for(;s!==null;){if(s.tag===3){ET(s,n,o);break}else if(s.tag===1){var c=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(xs===null||!xs.has(c))){n=ui(o,n),o=TE(2),c=Ts(s,o,2),c!==null&&(bE(o,c,s,n),Jr(c,2),Hi(c));break}}s=s.return}}function xg(n,s,o){var c=n.pingCache;if(c===null){c=n.pingCache=new UR;var m=new Set;c.set(s,m)}else m=c.get(s),m===void 0&&(m=new Set,c.set(s,m));m.has(o)||(vg=!0,m.add(o),n=HR.bind(null,n,s,o),s.then(n,n))}function HR(n,s,o){var c=n.pingCache;c!==null&&c.delete(s),n.pingedLanes|=n.suspendedLanes&o,n.warmLanes&=~o,mt===n&&(Be&o)===o&&(Ot===4||Ot===3&&(Be&62914560)===Be&&300>on()-Hf?(Je&2)===0&&dl(n,0):Eg|=o,hl===Be&&(hl=0)),Hi(n)}function TT(n,s){s===0&&(s=xu()),n=La(n,s),n!==null&&(Jr(n,s),Hi(n))}function GR(n){var s=n.memoizedState,o=0;s!==null&&(o=s.retryLane),TT(n,o)}function KR(n,s){var o=0;switch(n.tag){case 31:case 13:var c=n.stateNode,m=n.memoizedState;m!==null&&(o=m.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(s),TT(n,o)}function $R(n,s){return ba(n,s)}var Wf=null,pl=null,Rg=!1,Jf=!1,Cg=!1,Ds=0;function Hi(n){n!==pl&&n.next===null&&(pl===null?Wf=pl=n:pl=pl.next=n),Jf=!0,Rg||(Rg=!0,XR())}function pc(n,s){if(!Cg&&Jf){Cg=!0;do for(var o=!1,c=Wf;c!==null;){if(n!==0){var m=c.pendingLanes;if(m===0)var g=0;else{var E=c.suspendedLanes,w=c.pingedLanes;g=(1<<31-An(42|n)+1)-1,g&=m&~(E&~w),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(o=!0,AT(c,g))}else g=Be,g=si(c,c===mt?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||Wr(c,g)||(o=!0,AT(c,g));c=c.next}while(o);Cg=!1}}function QR(){bT()}function bT(){Jf=Rg=!1;var n=0;Ds!==0&&sC()&&(n=Ds);for(var s=on(),o=null,c=Wf;c!==null;){var m=c.next,g=ST(c,s);g===0?(c.next=null,o===null?Wf=m:o.next=m,m===null&&(pl=o)):(o=c,(n!==0||(g&3)!==0)&&(Jf=!0)),c=m}Kt!==0&&Kt!==5||pc(n),Ds!==0&&(Ds=0)}function ST(n,s){for(var o=n.suspendedLanes,c=n.pingedLanes,m=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var E=31-An(g),w=1<<E,L=m[E];L===-1?((w&o)===0||(w&c)!==0)&&(m[E]=Mo(w,s)):L<=s&&(n.expiredLanes|=w),g&=~w}if(s=mt,o=Be,o=si(n,n===s?o:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,o===0||n===s&&(tt===2||tt===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Vo(c),n.callbackNode=null,n.callbackPriority=0;if((o&3)===0||Wr(n,o)){if(s=o&-o,s===n.callbackPriority)return s;switch(c!==null&&Vo(c),Du(o)){case 2:case 8:o=Yt;break;case 32:o=sr;break;case 268435456:o=Au;break;default:o=sr}return c=wT.bind(null,n),o=ba(o,c),n.callbackPriority=s,n.callbackNode=o,s}return c!==null&&c!==null&&Vo(c),n.callbackPriority=2,n.callbackNode=null,2}function wT(n,s){if(Kt!==0&&Kt!==5)return n.callbackNode=null,n.callbackPriority=0,null;var o=n.callbackNode;if(Yf()&&n.callbackNode!==o)return null;var c=Be;return c=si(n,n===mt?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(sT(n,c,s),ST(n,on()),n.callbackNode!=null&&n.callbackNode===o?wT.bind(null,n):null)}function AT(n,s){if(Yf())return null;sT(n,s,!0)}function XR(){oC(function(){(Je&6)!==0?ba(Gt,QR):bT()})}function Dg(){if(Ds===0){var n=el;n===0&&(n=wa,wa<<=1,(wa&261888)===0&&(wa=256)),Ds=n}return Ds}function IT(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:ji(""+n)}function xT(n,s){var o=s.ownerDocument.createElement("input");return o.name=s.name,o.value=s.value,n.id&&o.setAttribute("form",n.id),s.parentNode.insertBefore(o,s),n=new FormData(n),o.parentNode.removeChild(o),n}function YR(n,s,o,c,m){if(s==="submit"&&o&&o.stateNode===m){var g=IT((m[un]||null).action),E=c.submitter;E&&(s=(s=E[un]||null)?IT(s.formAction):E.getAttribute("formAction"),s!==null&&(g=s,E=null));var w=new Da("action","action",null,c,m);n.push({event:w,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ds!==0){var L=E?xT(m,E):new FormData(m);Yp(o,{pending:!0,data:L,method:m.method,action:g},null,L)}}else typeof g=="function"&&(w.preventDefault(),L=E?xT(m,E):new FormData(m),Yp(o,{pending:!0,data:L,method:m.method,action:g},g,L))},currentTarget:m}]})}}for(var Ng=0;Ng<dp.length;Ng++){var Og=dp[Ng],WR=Og.toLowerCase(),JR=Og[0].toUpperCase()+Og.slice(1);Si(WR,"on"+JR)}Si(r0,"onAnimationEnd"),Si(s0,"onAnimationIteration"),Si(a0,"onAnimationStart"),Si("dblclick","onDoubleClick"),Si("focusin","onFocus"),Si("focusout","onBlur"),Si(mR,"onTransitionRun"),Si(pR,"onTransitionStart"),Si(gR,"onTransitionCancel"),Si(o0,"onTransitionEnd"),Li("onMouseEnter",["mouseout","mouseover"]),Li("onMouseLeave",["mouseout","mouseover"]),Li("onPointerEnter",["pointerout","pointerover"]),Li("onPointerLeave",["pointerout","pointerover"]),In("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),In("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),In("onBeforeInput",["compositionend","keypress","textInput","paste"]),In("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),In("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),In("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var gc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ZR=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(gc));function RT(n,s){s=(s&4)!==0;for(var o=0;o<n.length;o++){var c=n[o],m=c.event;c=c.listeners;e:{var g=void 0;if(s)for(var E=c.length-1;0<=E;E--){var w=c[E],L=w.instance,Y=w.currentTarget;if(w=w.listener,L!==g&&m.isPropagationStopped())break e;g=w,m.currentTarget=Y;try{g(m)}catch(se){df(se)}m.currentTarget=null,g=L}else for(E=0;E<c.length;E++){if(w=c[E],L=w.instance,Y=w.currentTarget,w=w.listener,L!==g&&m.isPropagationStopped())break e;g=w,m.currentTarget=Y;try{g(m)}catch(se){df(se)}m.currentTarget=null,g=L}}}}function ze(n,s){var o=s[ts];o===void 0&&(o=s[ts]=new Set);var c=n+"__bubble";o.has(c)||(CT(s,n,2,!1),o.add(c))}function Pg(n,s,o){var c=0;s&&(c|=4),CT(o,n,c,s)}var Zf="_reactListening"+Math.random().toString(36).slice(2);function Vg(n){if(!n[Zf]){n[Zf]=!0,ko.forEach(function(o){o!=="selectionchange"&&(ZR.has(o)||Pg(o,!1,n),Pg(o,!0,n))});var s=n.nodeType===9?n:n.ownerDocument;s===null||s[Zf]||(s[Zf]=!0,Pg("selectionchange",!1,s))}}function CT(n,s,o,c){switch(rb(s)){case 2:var m=xC;break;case 8:m=RC;break;default:m=Xg}o=m.bind(null,s,o,n),m=void 0,!ju||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(m=!0),c?m!==void 0?n.addEventListener(s,o,{capture:!0,passive:m}):n.addEventListener(s,o,!0):m!==void 0?n.addEventListener(s,o,{passive:m}):n.addEventListener(s,o,!1)}function Mg(n,s,o,c,m){var g=c;if((s&1)===0&&(s&2)===0&&c!==null)e:for(;;){if(c===null)return;var E=c.tag;if(E===3||E===4){var w=c.stateNode.containerInfo;if(w===m)break;if(E===4)for(E=c.return;E!==null;){var L=E.tag;if((L===3||L===4)&&E.stateNode.containerInfo===m)return;E=E.return}for(;w!==null;){if(E=ur(w),E===null)return;if(L=E.tag,L===5||L===6||L===26||L===27){c=g=E;continue e}w=w.parentNode}}c=c.return}Yh(function(){var Y=g,se=Bo(o),le=[];e:{var Z=l0.get(n);if(Z!==void 0){var te=Da,Ee=n;switch(n){case"keypress":if(Ca(o)===0)break e;case"keydown":case"keyup":te=af;break;case"focusin":Ee="focus",te=hs;break;case"focusout":Ee="blur",te=hs;break;case"beforeblur":case"afterblur":te=hs;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":te=Jh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":te=Zh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":te=lf;break;case r0:case s0:case a0:te=Ho;break;case o0:te=Go;break;case"scroll":case"scrollend":te=Wh;break;case"wheel":te=cf;break;case"copy":case"cut":case"paste":te=tf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":te=qu;break;case"toggle":case"beforetoggle":te=ds}var xe=(s&4)!==0,lt=!xe&&(n==="scroll"||n==="scrollend"),H=xe?Z!==null?Z+"Capture":null:Z;xe=[];for(var U=Y,X;U!==null;){var ae=U;if(X=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||X===null||H===null||(ae=Nn(U,H),ae!=null&&xe.push(yc(U,ae,X))),lt)break;U=U.return}0<xe.length&&(Z=new te(Z,Ee,null,o,se),le.push({event:Z,listeners:xe}))}}if((s&7)===0){e:{if(Z=n==="mouseover"||n==="pointerover",te=n==="mouseout"||n==="pointerout",Z&&o!==zo&&(Ee=o.relatedTarget||o.fromElement)&&(ur(Ee)||Ee[Mi]))break e;if((te||Z)&&(Z=se.window===se?se:(Z=se.ownerDocument)?Z.defaultView||Z.parentWindow:window,te?(Ee=o.relatedTarget||o.toElement,te=Y,Ee=Ee?ur(Ee):null,Ee!==null&&(lt=l(Ee),xe=Ee.tag,Ee!==lt||xe!==5&&xe!==27&&xe!==6)&&(Ee=null)):(te=null,Ee=Y),te!==Ee)){if(xe=Jh,ae="onMouseLeave",H="onMouseEnter",U="mouse",(n==="pointerout"||n==="pointerover")&&(xe=qu,ae="onPointerLeave",H="onPointerEnter",U="pointer"),lt=te==null?Z:Ia(te),X=Ee==null?Z:Ia(Ee),Z=new xe(ae,U+"leave",te,o,se),Z.target=lt,Z.relatedTarget=X,ae=null,ur(se)===Y&&(xe=new xe(H,U+"enter",Ee,o,se),xe.target=X,xe.relatedTarget=lt,ae=xe),lt=ae,te&&Ee)t:{for(xe=eC,H=te,U=Ee,X=0,ae=H;ae;ae=xe(ae))X++;ae=0;for(var we=U;we;we=xe(we))ae++;for(;0<X-ae;)H=xe(H),X--;for(;0<ae-X;)U=xe(U),ae--;for(;X--;){if(H===U||U!==null&&H===U.alternate){xe=H;break t}H=xe(H),U=xe(U)}xe=null}else xe=null;te!==null&&DT(le,Z,te,xe,!1),Ee!==null&&lt!==null&&DT(le,lt,Ee,xe,!0)}}e:{if(Z=Y?Ia(Y):window,te=Z.nodeName&&Z.nodeName.toLowerCase(),te==="select"||te==="input"&&Z.type==="file")var Ye=$v;else if(On(Z))if(Qv)Ye=hR;else{Ye=uR;var be=lR}else te=Z.nodeName,!te||te.toLowerCase()!=="input"||Z.type!=="checkbox"&&Z.type!=="radio"?Y&&ku(Y.elementType)&&(Ye=$v):Ye=cR;if(Ye&&(Ye=Ye(n,Y))){Va(le,Ye,o,se);break e}be&&be(n,Z,Y),n==="focusout"&&Y&&Z.type==="number"&&Y.memoizedProps.value!=null&&Uo(Z,"number",Z.value)}switch(be=Y?Ia(Y):window,n){case"focusin":(On(be)||be.contentEditable==="true")&&(Ko=be,cp=Y,Ku=null);break;case"focusout":Ku=cp=Ko=null;break;case"mousedown":hp=!0;break;case"contextmenu":case"mouseup":case"dragend":hp=!1,n0(le,o,se);break;case"selectionchange":if(dR)break;case"keydown":case"keyup":n0(le,o,se)}var Pe;if(v)e:{switch(n){case"compositionstart":var Fe="onCompositionStart";break e;case"compositionend":Fe="onCompositionEnd";break e;case"compositionupdate":Fe="onCompositionUpdate";break e}Fe=void 0}else Me?Ze(n,o)&&(Fe="onCompositionEnd"):n==="keydown"&&o.keyCode===229&&(Fe="onCompositionStart");Fe&&(Q&&o.locale!=="ko"&&(Me||Fe!=="onCompositionStart"?Fe==="onCompositionEnd"&&Me&&(Pe=os()):(Kn=se,Fo="value"in Kn?Kn.value:Kn.textContent,Me=!0)),be=ed(Y,Fe),0<be.length&&(Fe=new zu(Fe,n,null,o,se),le.push({event:Fe,listeners:be}),Pe?Fe.data=Pe:(Pe=jt(o),Pe!==null&&(Fe.data=Pe)))),(Pe=I?Jt(n,o):Zt(n,o))&&(Fe=ed(Y,"onBeforeInput"),0<Fe.length&&(be=new zu("onBeforeInput","beforeinput",null,o,se),le.push({event:be,listeners:Fe}),be.data=Pe)),YR(le,n,Y,o,se)}RT(le,s)})}function yc(n,s,o){return{instance:n,listener:s,currentTarget:o}}function ed(n,s){for(var o=s+"Capture",c=[];n!==null;){var m=n,g=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||g===null||(m=Nn(n,o),m!=null&&c.unshift(yc(n,m,g)),m=Nn(n,s),m!=null&&c.push(yc(n,m,g))),n.tag===3)return c;n=n.return}return[]}function eC(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function DT(n,s,o,c,m){for(var g=s._reactName,E=[];o!==null&&o!==c;){var w=o,L=w.alternate,Y=w.stateNode;if(w=w.tag,L!==null&&L===c)break;w!==5&&w!==26&&w!==27||Y===null||(L=Y,m?(Y=Nn(o,g),Y!=null&&E.unshift(yc(o,Y,L))):m||(Y=Nn(o,g),Y!=null&&E.push(yc(o,Y,L)))),o=o.return}E.length!==0&&n.push({event:s,listeners:E})}var tC=/\r\n?/g,nC=/\u0000|\uFFFD/g;function NT(n){return(typeof n=="string"?n:""+n).replace(tC,`
`).replace(nC,"")}function OT(n,s){return s=NT(s),NT(n)===s}function ot(n,s,o,c,m,g){switch(o){case"children":typeof c=="string"?s==="body"||s==="textarea"&&c===""||oi(n,c):(typeof c=="number"||typeof c=="bigint")&&s!=="body"&&oi(n,""+c);break;case"className":rs(n,"class",c);break;case"tabIndex":rs(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":rs(n,o,c);break;case"style":Qh(n,c,g);break;case"data":if(s!=="object"){rs(n,"data",c);break}case"src":case"href":if(c===""&&(s!=="a"||o!=="href")){n.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=ji(""+c),n.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(s!=="input"&&ot(n,s,"name",m.name,m,null),ot(n,s,"formEncType",m.formEncType,m,null),ot(n,s,"formMethod",m.formMethod,m,null),ot(n,s,"formTarget",m.formTarget,m,null)):(ot(n,s,"encType",m.encType,m,null),ot(n,s,"method",m.method,m,null),ot(n,s,"target",m.target,m,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(o);break}c=ji(""+c),n.setAttribute(o,c);break;case"onClick":c!=null&&(n.onclick=Wt);break;case"onScroll":c!=null&&ze("scroll",n);break;case"onScrollEnd":c!=null&&ze("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(m.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}o=ji(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""+c):n.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,""):n.removeAttribute(o);break;case"capture":case"download":c===!0?n.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(o,c):n.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(o,c):n.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(o):n.setAttribute(o,c);break;case"popover":ze("beforetoggle",n),ze("toggle",n),is(n,"popover",c);break;case"xlinkActuate":ai(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":ai(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":ai(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":ai(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":ai(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":ai(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":ai(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":ai(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":ai(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":is(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=rp.get(o)||o,is(n,o,c))}}function kg(n,s,o,c,m,g){switch(o){case"style":Qh(n,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(m.children!=null)throw Error(r(60));n.innerHTML=o}}break;case"children":typeof c=="string"?oi(n,c):(typeof c=="number"||typeof c=="bigint")&&oi(n,""+c);break;case"onScroll":c!=null&&ze("scroll",n);break;case"onScrollEnd":c!=null&&ze("scrollend",n);break;case"onClick":c!=null&&(n.onclick=Wt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ns.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(m=o.endsWith("Capture"),s=o.slice(2,m?o.length-7:void 0),g=n[un]||null,g=g!=null?g[o]:null,typeof g=="function"&&n.removeEventListener(s,g,m),typeof c=="function")){typeof g!="function"&&g!==null&&(o in n?n[o]=null:n.hasAttribute(o)&&n.removeAttribute(o)),n.addEventListener(s,c,m);break e}o in n?n[o]=c:c===!0?n.setAttribute(o,""):is(n,o,c)}}}function dn(n,s,o){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ze("error",n),ze("load",n);var c=!1,m=!1,g;for(g in o)if(o.hasOwnProperty(g)){var E=o[g];if(E!=null)switch(g){case"src":c=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:ot(n,s,g,E,o,null)}}m&&ot(n,s,"srcSet",o.srcSet,o,null),c&&ot(n,s,"src",o.src,o,null);return;case"input":ze("invalid",n);var w=g=E=m=null,L=null,Y=null;for(c in o)if(o.hasOwnProperty(c)){var se=o[c];if(se!=null)switch(c){case"name":m=se;break;case"type":E=se;break;case"checked":L=se;break;case"defaultChecked":Y=se;break;case"value":g=se;break;case"defaultValue":w=se;break;case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,s));break;default:ot(n,s,c,se,o,null)}}xa(n,g,w,L,Y,E,m,!1);return;case"select":ze("invalid",n),c=E=g=null;for(m in o)if(o.hasOwnProperty(m)&&(w=o[m],w!=null))switch(m){case"value":g=w;break;case"defaultValue":E=w;break;case"multiple":c=w;default:ot(n,s,m,w,o,null)}s=g,o=E,n.multiple=!!c,s!=null?Xe(n,!!c,s,!1):o!=null&&Xe(n,!!c,o,!0);return;case"textarea":ze("invalid",n),g=m=c=null;for(E in o)if(o.hasOwnProperty(E)&&(w=o[E],w!=null))switch(E){case"value":c=w;break;case"defaultValue":m=w;break;case"children":g=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(r(91));break;default:ot(n,s,E,w,o,null)}as(n,c,m,g);return;case"option":for(L in o)if(o.hasOwnProperty(L)&&(c=o[L],c!=null))switch(L){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:ot(n,s,L,c,o,null)}return;case"dialog":ze("beforetoggle",n),ze("toggle",n),ze("cancel",n),ze("close",n);break;case"iframe":case"object":ze("load",n);break;case"video":case"audio":for(c=0;c<gc.length;c++)ze(gc[c],n);break;case"image":ze("error",n),ze("load",n);break;case"details":ze("toggle",n);break;case"embed":case"source":case"link":ze("error",n),ze("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in o)if(o.hasOwnProperty(Y)&&(c=o[Y],c!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,s));default:ot(n,s,Y,c,o,null)}return;default:if(ku(s)){for(se in o)o.hasOwnProperty(se)&&(c=o[se],c!==void 0&&kg(n,s,se,c,o,void 0));return}}for(w in o)o.hasOwnProperty(w)&&(c=o[w],c!=null&&ot(n,s,w,c,o,null))}function iC(n,s,o,c){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,g=null,E=null,w=null,L=null,Y=null,se=null;for(te in o){var le=o[te];if(o.hasOwnProperty(te)&&le!=null)switch(te){case"checked":break;case"value":break;case"defaultValue":L=le;default:c.hasOwnProperty(te)||ot(n,s,te,null,c,le)}}for(var Z in c){var te=c[Z];if(le=o[Z],c.hasOwnProperty(Z)&&(te!=null||le!=null))switch(Z){case"type":g=te;break;case"name":m=te;break;case"checked":Y=te;break;case"defaultChecked":se=te;break;case"value":E=te;break;case"defaultValue":w=te;break;case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(r(137,s));break;default:te!==le&&ot(n,s,Z,te,c,le)}}ss(n,E,w,L,Y,se,g,m);return;case"select":te=E=w=Z=null;for(g in o)if(L=o[g],o.hasOwnProperty(g)&&L!=null)switch(g){case"value":break;case"multiple":te=L;default:c.hasOwnProperty(g)||ot(n,s,g,null,c,L)}for(m in c)if(g=c[m],L=o[m],c.hasOwnProperty(m)&&(g!=null||L!=null))switch(m){case"value":Z=g;break;case"defaultValue":w=g;break;case"multiple":E=g;default:g!==L&&ot(n,s,m,g,c,L)}s=w,o=E,c=te,Z!=null?Xe(n,!!o,Z,!1):!!c!=!!o&&(s!=null?Xe(n,!!o,s,!0):Xe(n,!!o,o?[]:"",!1));return;case"textarea":te=Z=null;for(w in o)if(m=o[w],o.hasOwnProperty(w)&&m!=null&&!c.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:ot(n,s,w,null,c,m)}for(E in c)if(m=c[E],g=o[E],c.hasOwnProperty(E)&&(m!=null||g!=null))switch(E){case"value":Z=m;break;case"defaultValue":te=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(r(91));break;default:m!==g&&ot(n,s,E,m,c,g)}Ra(n,Z,te);return;case"option":for(var Ee in o)if(Z=o[Ee],o.hasOwnProperty(Ee)&&Z!=null&&!c.hasOwnProperty(Ee))switch(Ee){case"selected":n.selected=!1;break;default:ot(n,s,Ee,null,c,Z)}for(L in c)if(Z=c[L],te=o[L],c.hasOwnProperty(L)&&Z!==te&&(Z!=null||te!=null))switch(L){case"selected":n.selected=Z&&typeof Z!="function"&&typeof Z!="symbol";break;default:ot(n,s,L,Z,c,te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var xe in o)Z=o[xe],o.hasOwnProperty(xe)&&Z!=null&&!c.hasOwnProperty(xe)&&ot(n,s,xe,null,c,Z);for(Y in c)if(Z=c[Y],te=o[Y],c.hasOwnProperty(Y)&&Z!==te&&(Z!=null||te!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,s));break;default:ot(n,s,Y,Z,c,te)}return;default:if(ku(s)){for(var lt in o)Z=o[lt],o.hasOwnProperty(lt)&&Z!==void 0&&!c.hasOwnProperty(lt)&&kg(n,s,lt,void 0,c,Z);for(se in c)Z=c[se],te=o[se],!c.hasOwnProperty(se)||Z===te||Z===void 0&&te===void 0||kg(n,s,se,Z,c,te);return}}for(var H in o)Z=o[H],o.hasOwnProperty(H)&&Z!=null&&!c.hasOwnProperty(H)&&ot(n,s,H,null,c,Z);for(le in c)Z=c[le],te=o[le],!c.hasOwnProperty(le)||Z===te||Z==null&&te==null||ot(n,s,le,Z,c,te)}function PT(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function rC(){if(typeof performance.getEntriesByType=="function"){for(var n=0,s=0,o=performance.getEntriesByType("resource"),c=0;c<o.length;c++){var m=o[c],g=m.transferSize,E=m.initiatorType,w=m.duration;if(g&&w&&PT(E)){for(E=0,w=m.responseEnd,c+=1;c<o.length;c++){var L=o[c],Y=L.startTime;if(Y>w)break;var se=L.transferSize,le=L.initiatorType;se&&PT(le)&&(L=L.responseEnd,E+=se*(L<w?1:(w-Y)/(L-Y)))}if(--c,s+=8*(g+E)/(m.duration/1e3),n++,10<n)break}}if(0<n)return s/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Lg=null,jg=null;function td(n){return n.nodeType===9?n:n.ownerDocument}function VT(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function MT(n,s){if(n===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&s==="foreignObject"?0:n}function Ug(n,s){return n==="textarea"||n==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var zg=null;function sC(){var n=window.event;return n&&n.type==="popstate"?n===zg?!1:(zg=n,!0):(zg=null,!1)}var kT=typeof setTimeout=="function"?setTimeout:void 0,aC=typeof clearTimeout=="function"?clearTimeout:void 0,LT=typeof Promise=="function"?Promise:void 0,oC=typeof queueMicrotask=="function"?queueMicrotask:typeof LT<"u"?function(n){return LT.resolve(null).then(n).catch(lC)}:kT;function lC(n){setTimeout(function(){throw n})}function Ns(n){return n==="head"}function jT(n,s){var o=s,c=0;do{var m=o.nextSibling;if(n.removeChild(o),m&&m.nodeType===8)if(o=m.data,o==="/$"||o==="/&"){if(c===0){n.removeChild(m),vl(s);return}c--}else if(o==="$"||o==="$?"||o==="$~"||o==="$!"||o==="&")c++;else if(o==="html")_c(n.ownerDocument.documentElement);else if(o==="head"){o=n.ownerDocument.head,_c(o);for(var g=o.firstChild;g;){var E=g.nextSibling,w=g.nodeName;g[lr]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&g.rel.toLowerCase()==="stylesheet"||o.removeChild(g),g=E}}else o==="body"&&_c(n.ownerDocument.body);o=m}while(o);vl(s)}function UT(n,s){var o=n;n=0;do{var c=o.nextSibling;if(o.nodeType===1?s?(o._stashedDisplay=o.style.display,o.style.display="none"):(o.style.display=o._stashedDisplay||"",o.getAttribute("style")===""&&o.removeAttribute("style")):o.nodeType===3&&(s?(o._stashedText=o.nodeValue,o.nodeValue=""):o.nodeValue=o._stashedText||""),c&&c.nodeType===8)if(o=c.data,o==="/$"){if(n===0)break;n--}else o!=="$"&&o!=="$?"&&o!=="$~"&&o!=="$!"||n++;o=c}while(o)}function Bg(n){var s=n.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var o=s;switch(s=s.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Bg(o),Aa(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}n.removeChild(o)}}function uC(n,s,o,c){for(;n.nodeType===1;){var m=o;if(n.nodeName.toLowerCase()!==s.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[lr])switch(s){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==m.rel||n.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||n.getAttribute("title")!==(m.title==null?null:m.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(m.src==null?null:m.src)||n.getAttribute("type")!==(m.type==null?null:m.type)||n.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(s==="input"&&n.type==="hidden"){var g=m.name==null?null:""+m.name;if(m.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=mi(n.nextSibling),n===null)break}return null}function cC(n,s,o){if(s==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!o||(n=mi(n.nextSibling),n===null))return null;return n}function zT(n,s){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!s||(n=mi(n.nextSibling),n===null))return null;return n}function Fg(n){return n.data==="$?"||n.data==="$~"}function qg(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function hC(n,s){var o=n.ownerDocument;if(n.data==="$~")n._reactRetry=s;else if(n.data!=="$?"||o.readyState!=="loading")s();else{var c=function(){s(),o.removeEventListener("DOMContentLoaded",c)};o.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function mi(n){for(;n!=null;n=n.nextSibling){var s=n.nodeType;if(s===1||s===3)break;if(s===8){if(s=n.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return n}var Hg=null;function BT(n){n=n.nextSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="/$"||o==="/&"){if(s===0)return mi(n.nextSibling);s--}else o!=="$"&&o!=="$!"&&o!=="$?"&&o!=="$~"&&o!=="&"||s++}n=n.nextSibling}return null}function FT(n){n=n.previousSibling;for(var s=0;n;){if(n.nodeType===8){var o=n.data;if(o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"){if(s===0)return n;s--}else o!=="/$"&&o!=="/&"||s++}n=n.previousSibling}return null}function qT(n,s,o){switch(s=td(o),n){case"html":if(n=s.documentElement,!n)throw Error(r(452));return n;case"head":if(n=s.head,!n)throw Error(r(453));return n;case"body":if(n=s.body,!n)throw Error(r(454));return n;default:throw Error(r(451))}}function _c(n){for(var s=n.attributes;s.length;)n.removeAttributeNode(s[0]);Aa(n)}var pi=new Map,HT=new Set;function nd(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Dr=he.d;he.d={f:fC,r:dC,D:mC,C:pC,L:gC,m:yC,X:vC,S:_C,M:EC};function fC(){var n=Dr.f(),s=$f();return n||s}function dC(n){var s=cr(n);s!==null&&s.tag===5&&s.type==="form"?oE(s):Dr.r(n)}var gl=typeof document>"u"?null:document;function GT(n,s,o){var c=gl;if(c&&typeof s=="string"&&s){var m=Dt(s);m='link[rel="'+n+'"][href="'+m+'"]',typeof o=="string"&&(m+='[crossorigin="'+o+'"]'),HT.has(m)||(HT.add(m),n={rel:n,crossOrigin:o,href:s},c.querySelector(m)===null&&(s=c.createElement("link"),dn(s,"link",n),Pt(s),c.head.appendChild(s)))}}function mC(n){Dr.D(n),GT("dns-prefetch",n,null)}function pC(n,s){Dr.C(n,s),GT("preconnect",n,s)}function gC(n,s,o){Dr.L(n,s,o);var c=gl;if(c&&n&&s){var m='link[rel="preload"][as="'+Dt(s)+'"]';s==="image"&&o&&o.imageSrcSet?(m+='[imagesrcset="'+Dt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(m+='[imagesizes="'+Dt(o.imageSizes)+'"]')):m+='[href="'+Dt(n)+'"]';var g=m;switch(s){case"style":g=yl(n);break;case"script":g=_l(n)}pi.has(g)||(n=_({rel:"preload",href:s==="image"&&o&&o.imageSrcSet?void 0:n,as:s},o),pi.set(g,n),c.querySelector(m)!==null||s==="style"&&c.querySelector(vc(g))||s==="script"&&c.querySelector(Ec(g))||(s=c.createElement("link"),dn(s,"link",n),Pt(s),c.head.appendChild(s)))}}function yC(n,s){Dr.m(n,s);var o=gl;if(o&&n){var c=s&&typeof s.as=="string"?s.as:"script",m='link[rel="modulepreload"][as="'+Dt(c)+'"][href="'+Dt(n)+'"]',g=m;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=_l(n)}if(!pi.has(g)&&(n=_({rel:"modulepreload",href:n},s),pi.set(g,n),o.querySelector(m)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(Ec(g)))return}c=o.createElement("link"),dn(c,"link",n),Pt(c),o.head.appendChild(c)}}}function _C(n,s,o){Dr.S(n,s,o);var c=gl;if(c&&n){var m=Ti(c).hoistableStyles,g=yl(n);s=s||"default";var E=m.get(g);if(!E){var w={loading:0,preload:null};if(E=c.querySelector(vc(g)))w.loading=5;else{n=_({rel:"stylesheet",href:n,"data-precedence":s},o),(o=pi.get(g))&&Gg(n,o);var L=E=c.createElement("link");Pt(L),dn(L,"link",n),L._p=new Promise(function(Y,se){L.onload=Y,L.onerror=se}),L.addEventListener("load",function(){w.loading|=1}),L.addEventListener("error",function(){w.loading|=2}),w.loading|=4,id(E,s,c)}E={type:"stylesheet",instance:E,count:1,state:w},m.set(g,E)}}}function vC(n,s){Dr.X(n,s);var o=gl;if(o&&n){var c=Ti(o).hoistableScripts,m=_l(n),g=c.get(m);g||(g=o.querySelector(Ec(m)),g||(n=_({src:n,async:!0},s),(s=pi.get(m))&&Kg(n,s),g=o.createElement("script"),Pt(g),dn(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(m,g))}}function EC(n,s){Dr.M(n,s);var o=gl;if(o&&n){var c=Ti(o).hoistableScripts,m=_l(n),g=c.get(m);g||(g=o.querySelector(Ec(m)),g||(n=_({src:n,async:!0,type:"module"},s),(s=pi.get(m))&&Kg(n,s),g=o.createElement("script"),Pt(g),dn(g,"link",n),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(m,g))}}function KT(n,s,o,c){var m=(m=Ce.current)?nd(m):null;if(!m)throw Error(r(446));switch(n){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(s=yl(o.href),o=Ti(m).hoistableStyles,c=o.get(s),c||(c={type:"style",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){n=yl(o.href);var g=Ti(m).hoistableStyles,E=g.get(n);if(E||(m=m.ownerDocument||m,E={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,E),(g=m.querySelector(vc(n)))&&!g._p&&(E.instance=g,E.state.loading=5),pi.has(n)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},pi.set(n,o),g||TC(m,n,o,E.state))),s&&c===null)throw Error(r(528,""));return E}if(s&&c!==null)throw Error(r(529,""));return null;case"script":return s=o.async,o=o.src,typeof o=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=_l(o),o=Ti(m).hoistableScripts,c=o.get(s),c||(c={type:"script",instance:null,count:0,state:null},o.set(s,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,n))}}function yl(n){return'href="'+Dt(n)+'"'}function vc(n){return'link[rel="stylesheet"]['+n+"]"}function $T(n){return _({},n,{"data-precedence":n.precedence,precedence:null})}function TC(n,s,o,c){n.querySelector('link[rel="preload"][as="style"]['+s+"]")?c.loading=1:(s=n.createElement("link"),c.preload=s,s.addEventListener("load",function(){return c.loading|=1}),s.addEventListener("error",function(){return c.loading|=2}),dn(s,"link",o),Pt(s),n.head.appendChild(s))}function _l(n){return'[src="'+Dt(n)+'"]'}function Ec(n){return"script[async]"+n}function QT(n,s,o){if(s.count++,s.instance===null)switch(s.type){case"style":var c=n.querySelector('style[data-href~="'+Dt(o.href)+'"]');if(c)return s.instance=c,Pt(c),c;var m=_({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),Pt(c),dn(c,"style",m),id(c,o.precedence,n),s.instance=c;case"stylesheet":m=yl(o.href);var g=n.querySelector(vc(m));if(g)return s.state.loading|=4,s.instance=g,Pt(g),g;c=$T(o),(m=pi.get(m))&&Gg(c,m),g=(n.ownerDocument||n).createElement("link"),Pt(g);var E=g;return E._p=new Promise(function(w,L){E.onload=w,E.onerror=L}),dn(g,"link",c),s.state.loading|=4,id(g,o.precedence,n),s.instance=g;case"script":return g=_l(o.src),(m=n.querySelector(Ec(g)))?(s.instance=m,Pt(m),m):(c=o,(m=pi.get(g))&&(c=_({},o),Kg(c,m)),n=n.ownerDocument||n,m=n.createElement("script"),Pt(m),dn(m,"link",c),n.head.appendChild(m),s.instance=m);case"void":return null;default:throw Error(r(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(c=s.instance,s.state.loading|=4,id(c,o.precedence,n));return s.instance}function id(n,s,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=c.length?c[c.length-1]:null,g=m,E=0;E<c.length;E++){var w=c[E];if(w.dataset.precedence===s)g=w;else if(g!==m)break}g?g.parentNode.insertBefore(n,g.nextSibling):(s=o.nodeType===9?o.head:o,s.insertBefore(n,s.firstChild))}function Gg(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.title==null&&(n.title=s.title)}function Kg(n,s){n.crossOrigin==null&&(n.crossOrigin=s.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=s.referrerPolicy),n.integrity==null&&(n.integrity=s.integrity)}var rd=null;function XT(n,s,o){if(rd===null){var c=new Map,m=rd=new Map;m.set(o,c)}else m=rd,c=m.get(o),c||(c=new Map,m.set(o,c));if(c.has(n))return c;for(c.set(n,null),o=o.getElementsByTagName(n),m=0;m<o.length;m++){var g=o[m];if(!(g[lr]||g[Ct]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var E=g.getAttribute(s)||"";E=n+E;var w=c.get(E);w?w.push(g):c.set(E,[g])}}return c}function YT(n,s,o){n=n.ownerDocument||n,n.head.insertBefore(o,s==="title"?n.querySelector("head > title"):null)}function bC(n,s,o){if(o===1||s.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;switch(s.rel){case"stylesheet":return n=s.disabled,typeof s.precedence=="string"&&n==null;default:return!0}case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function WT(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function SC(n,s,o,c){if(o.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(o.state.loading&4)===0){if(o.instance===null){var m=yl(c.href),g=s.querySelector(vc(m));if(g){s=g._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(n.count++,n=sd.bind(n),s.then(n,n)),o.state.loading|=4,o.instance=g,Pt(g);return}g=s.ownerDocument||s,c=$T(c),(m=pi.get(m))&&Gg(c,m),g=g.createElement("link"),Pt(g);var E=g;E._p=new Promise(function(w,L){E.onload=w,E.onerror=L}),dn(g,"link",c),o.instance=g}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(o,s),(s=o.state.preload)&&(o.state.loading&3)===0&&(n.count++,o=sd.bind(n),s.addEventListener("load",o),s.addEventListener("error",o))}}var $g=0;function wC(n,s){return n.stylesheets&&n.count===0&&od(n,n.stylesheets),0<n.count||0<n.imgCount?function(o){var c=setTimeout(function(){if(n.stylesheets&&od(n,n.stylesheets),n.unsuspend){var g=n.unsuspend;n.unsuspend=null,g()}},6e4+s);0<n.imgBytes&&$g===0&&($g=62500*rC());var m=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&od(n,n.stylesheets),n.unsuspend)){var g=n.unsuspend;n.unsuspend=null,g()}},(n.imgBytes>$g?50:800)+s);return n.unsuspend=o,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(m)}}:null}function sd(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)od(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var ad=null;function od(n,s){n.stylesheets=null,n.unsuspend!==null&&(n.count++,ad=new Map,s.forEach(AC,n),ad=null,sd.call(n))}function AC(n,s){if(!(s.state.loading&4)){var o=ad.get(n);if(o)var c=o.get(null);else{o=new Map,ad.set(n,o);for(var m=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<m.length;g++){var E=m[g];(E.nodeName==="LINK"||E.getAttribute("media")!=="not all")&&(o.set(E.dataset.precedence,E),c=E)}c&&o.set(null,c)}m=s.instance,E=m.getAttribute("data-precedence"),g=o.get(E)||c,g===c&&o.set(null,m),o.set(E,m),this.count++,c=sd.bind(this),m.addEventListener("load",c),m.addEventListener("error",c),g?g.parentNode.insertBefore(m,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(m,n.firstChild)),s.state.loading|=4}}var Tc={$$typeof:B,Provider:null,Consumer:null,_currentValue:ye,_currentValue2:ye,_threadCount:0};function IC(n,s,o,c,m,g,E,w,L){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ar(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ar(0),this.hiddenUpdates=ar(null),this.identifierPrefix=c,this.onUncaughtError=m,this.onCaughtError=g,this.onRecoverableError=E,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function JT(n,s,o,c,m,g,E,w,L,Y,se,le){return n=new IC(n,s,o,E,L,Y,se,le,w),s=1,g===!0&&(s|=24),g=Qn(3,null,null,s),n.current=g,g.stateNode=n,s=Ip(),s.refCount++,n.pooledCache=s,s.refCount++,g.memoizedState={element:c,isDehydrated:o,cache:s},Dp(g),n}function ZT(n){return n?(n=Xo,n):Xo}function eb(n,s,o,c,m,g){m=ZT(m),c.context===null?c.context=m:c.pendingContext=m,c=Es(s),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=Ts(n,c,s),o!==null&&(Ln(o,n,s),Zu(o,n,s))}function tb(n,s){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var o=n.retryLane;n.retryLane=o!==0&&o<s?o:s}}function Qg(n,s){tb(n,s),(n=n.alternate)&&tb(n,s)}function nb(n){if(n.tag===13||n.tag===31){var s=La(n,67108864);s!==null&&Ln(s,n,67108864),Qg(n,67108864)}}function ib(n){if(n.tag===13||n.tag===31){var s=Zn();s=Cu(s);var o=La(n,s);o!==null&&Ln(o,n,s),Qg(n,s)}}var ld=!0;function xC(n,s,o,c){var m=ie.T;ie.T=null;var g=he.p;try{he.p=2,Xg(n,s,o,c)}finally{he.p=g,ie.T=m}}function RC(n,s,o,c){var m=ie.T;ie.T=null;var g=he.p;try{he.p=8,Xg(n,s,o,c)}finally{he.p=g,ie.T=m}}function Xg(n,s,o,c){if(ld){var m=Yg(c);if(m===null)Mg(n,s,c,ud,o),sb(n,c);else if(DC(m,n,s,o,c))c.stopPropagation();else if(sb(n,c),s&4&&-1<CC.indexOf(n)){for(;m!==null;){var g=cr(m);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var E=Ei(g.pendingLanes);if(E!==0){var w=g;for(w.pendingLanes|=2,w.entangledLanes|=2;E;){var L=1<<31-An(E);w.entanglements[1]|=L,E&=~L}Hi(g),(Je&6)===0&&(Gf=on()+500,pc(0))}}break;case 31:case 13:w=La(g,2),w!==null&&Ln(w,g,2),$f(),Qg(g,2)}if(g=Yg(c),g===null&&Mg(n,s,c,ud,o),g===m)break;m=g}m!==null&&c.stopPropagation()}else Mg(n,s,c,null,o)}}function Yg(n){return n=Bo(n),Wg(n)}var ud=null;function Wg(n){if(ud=null,n=ur(n),n!==null){var s=l(n);if(s===null)n=null;else{var o=s.tag;if(o===13){if(n=u(s),n!==null)return n;n=null}else if(o===31){if(n=f(s),n!==null)return n;n=null}else if(o===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;n=null}else s!==n&&(n=null)}}return ud=n,null}function rb(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Bh()){case Gt:return 2;case Yt:return 8;case sr:case Fh:return 32;case Au:return 268435456;default:return 32}default:return 32}}var Jg=!1,Os=null,Ps=null,Vs=null,bc=new Map,Sc=new Map,Ms=[],CC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function sb(n,s){switch(n){case"focusin":case"focusout":Os=null;break;case"dragenter":case"dragleave":Ps=null;break;case"mouseover":case"mouseout":Vs=null;break;case"pointerover":case"pointerout":bc.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sc.delete(s.pointerId)}}function wc(n,s,o,c,m,g){return n===null||n.nativeEvent!==g?(n={blockedOn:s,domEventName:o,eventSystemFlags:c,nativeEvent:g,targetContainers:[m]},s!==null&&(s=cr(s),s!==null&&nb(s)),n):(n.eventSystemFlags|=c,s=n.targetContainers,m!==null&&s.indexOf(m)===-1&&s.push(m),n)}function DC(n,s,o,c,m){switch(s){case"focusin":return Os=wc(Os,n,s,o,c,m),!0;case"dragenter":return Ps=wc(Ps,n,s,o,c,m),!0;case"mouseover":return Vs=wc(Vs,n,s,o,c,m),!0;case"pointerover":var g=m.pointerId;return bc.set(g,wc(bc.get(g)||null,n,s,o,c,m)),!0;case"gotpointercapture":return g=m.pointerId,Sc.set(g,wc(Sc.get(g)||null,n,s,o,c,m)),!0}return!1}function ab(n){var s=ur(n.target);if(s!==null){var o=l(s);if(o!==null){if(s=o.tag,s===13){if(s=u(o),s!==null){n.blockedOn=s,Hh(n.priority,function(){ib(o)});return}}else if(s===31){if(s=f(o),s!==null){n.blockedOn=s,Hh(n.priority,function(){ib(o)});return}}else if(s===3&&o.stateNode.current.memoizedState.isDehydrated){n.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}n.blockedOn=null}function cd(n){if(n.blockedOn!==null)return!1;for(var s=n.targetContainers;0<s.length;){var o=Yg(n.nativeEvent);if(o===null){o=n.nativeEvent;var c=new o.constructor(o.type,o);zo=c,o.target.dispatchEvent(c),zo=null}else return s=cr(o),s!==null&&nb(s),n.blockedOn=o,!1;s.shift()}return!0}function ob(n,s,o){cd(n)&&o.delete(s)}function NC(){Jg=!1,Os!==null&&cd(Os)&&(Os=null),Ps!==null&&cd(Ps)&&(Ps=null),Vs!==null&&cd(Vs)&&(Vs=null),bc.forEach(ob),Sc.forEach(ob)}function hd(n,s){n.blockedOn===s&&(n.blockedOn=null,Jg||(Jg=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,NC)))}var fd=null;function lb(n){fd!==n&&(fd=n,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){fd===n&&(fd=null);for(var s=0;s<n.length;s+=3){var o=n[s],c=n[s+1],m=n[s+2];if(typeof c!="function"){if(Wg(c||o)===null)continue;break}var g=cr(o);g!==null&&(n.splice(s,3),s-=3,Yp(g,{pending:!0,data:m,method:o.method,action:c},c,m))}}))}function vl(n){function s(L){return hd(L,n)}Os!==null&&hd(Os,n),Ps!==null&&hd(Ps,n),Vs!==null&&hd(Vs,n),bc.forEach(s),Sc.forEach(s);for(var o=0;o<Ms.length;o++){var c=Ms[o];c.blockedOn===n&&(c.blockedOn=null)}for(;0<Ms.length&&(o=Ms[0],o.blockedOn===null);)ab(o),o.blockedOn===null&&Ms.shift();if(o=(n.ownerDocument||n).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var m=o[c],g=o[c+1],E=m[un]||null;if(typeof g=="function")E||lb(o);else if(E){var w=null;if(g&&g.hasAttribute("formAction")){if(m=g,E=g[un]||null)w=E.formAction;else if(Wg(m)!==null)continue}else w=E.action;typeof w=="function"?o[c+1]=w:(o.splice(c,3),c-=3),lb(o)}}}function ub(){function n(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(E){return m=E})},focusReset:"manual",scroll:"manual"})}function s(){m!==null&&(m(),m=null),c||setTimeout(o,20)}function o(){if(!c&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,m=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(o,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),m!==null&&(m(),m=null)}}}function Zg(n){this._internalRoot=n}dd.prototype.render=Zg.prototype.render=function(n){var s=this._internalRoot;if(s===null)throw Error(r(409));var o=s.current,c=Zn();eb(o,c,n,s,null,null)},dd.prototype.unmount=Zg.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var s=n.containerInfo;eb(n.current,2,null,n,null,null),$f(),s[Mi]=null}};function dd(n){this._internalRoot=n}dd.prototype.unstable_scheduleHydration=function(n){if(n){var s=or();n={blockedOn:null,target:n,priority:s};for(var o=0;o<Ms.length&&s!==0&&s<Ms[o].priority;o++);Ms.splice(o,0,n),o===0&&ab(n)}};var cb=e.version;if(cb!=="19.2.4")throw Error(r(527,cb,"19.2.4"));he.findDOMNode=function(n){var s=n._reactInternals;if(s===void 0)throw typeof n.render=="function"?Error(r(188)):(n=Object.keys(n).join(","),Error(r(268,n)));return n=p(s),n=n!==null?y(n):null,n=n===null?null:n.stateNode,n};var OC={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:ie,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var md=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!md.isDisabled&&md.supportsFiber)try{Xr=md.inject(OC),yn=md}catch{}}return Ic.createRoot=function(n,s){if(!a(n))throw Error(r(299));var o=!1,c="",m=yE,g=_E,E=vE;return s!=null&&(s.unstable_strictMode===!0&&(o=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onUncaughtError!==void 0&&(m=s.onUncaughtError),s.onCaughtError!==void 0&&(g=s.onCaughtError),s.onRecoverableError!==void 0&&(E=s.onRecoverableError)),s=JT(n,1,!1,null,null,o,c,null,m,g,E,ub),n[Mi]=s.current,Vg(n),new Zg(s)},Ic.hydrateRoot=function(n,s,o){if(!a(n))throw Error(r(299));var c=!1,m="",g=yE,E=_E,w=vE,L=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError),o.formState!==void 0&&(L=o.formState)),s=JT(n,1,!0,s,o??null,c,m,L,g,E,w,ub),s.context=ZT(null),o=s.current,c=Zn(),c=Cu(c),m=Es(c),m.callback=null,Ts(o,m,c),o=c,s.current.lanes=o,Jr(s,o),Hi(s),n[Mi]=s.current,Vg(n),new dd(s)},Ic.version="19.2.4",Ic}var Eb;function FC(){if(Eb)return ny.exports;Eb=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),ny.exports=BC(),ny.exports}var qC=FC();/**
 * react-router v7.13.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Tb="popstate";function HC(i={}){function e(a,l){let{pathname:u="/",search:f="",hash:d=""}=So(a.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),Dy("",{pathname:u,search:f,hash:d},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function t(a,l){let u=a.document.querySelector("base"),f="";if(u&&u.getAttribute("href")){let d=a.location.href,p=d.indexOf("#");f=p===-1?d:d.slice(0,p)}return f+"#"+(typeof l=="string"?l:Zc(l))}function r(a,l){_i(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(l)})`)}return KC(e,t,r,i)}function wt(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function _i(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function GC(){return Math.random().toString(36).substring(2,10)}function bb(i,e){return{usr:i.state,key:i.key,idx:e}}function Dy(i,e,t=null,r){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?So(e):e,state:t,key:e&&e.key||r||GC()}}function Zc({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function So(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let r=i.indexOf("?");r>=0&&(e.search=i.substring(r),i=i.substring(0,r)),i&&(e.pathname=i)}return e}function KC(i,e,t,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,u=a.history,f="POP",d=null,p=y();p==null&&(p=0,u.replaceState({...u.state,idx:p},""));function y(){return(u.state||{idx:null}).idx}function _(){f="POP";let P=y(),q=P==null?null:P-p;p=P,d&&d({action:f,location:M.location,delta:q})}function b(P,q){f="PUSH";let $=Dy(M.location,P,q);t&&t($,P),p=y()+1;let B=bb($,p),J=M.createHref($);try{u.pushState(B,"",J)}catch(fe){if(fe instanceof DOMException&&fe.name==="DataCloneError")throw fe;a.location.assign(J)}l&&d&&d({action:f,location:M.location,delta:1})}function A(P,q){f="REPLACE";let $=Dy(M.location,P,q);t&&t($,P),p=y();let B=bb($,p),J=M.createHref($);u.replaceState(B,"",J),l&&d&&d({action:f,location:M.location,delta:0})}function N(P){return $C(P)}let M={get action(){return f},get location(){return i(a,u)},listen(P){if(d)throw new Error("A history only accepts one active listener");return a.addEventListener(Tb,_),d=P,()=>{a.removeEventListener(Tb,_),d=null}},createHref(P){return e(a,P)},createURL:N,encodeLocation(P){let q=N(P);return{pathname:q.pathname,search:q.search,hash:q.hash}},push:b,replace:A,go(P){return u.go(P)}};return M}function $C(i,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),wt(t,"No window.location.(origin|href) available to create URL");let r=typeof i=="string"?i:Zc(i);return r=r.replace(/ $/,"%20"),!e&&r.startsWith("//")&&(r=t+r),new URL(r,t)}function Pw(i,e,t="/"){return QC(i,e,t,!1)}function QC(i,e,t,r){let a=typeof e=="string"?So(e):e,l=jr(a.pathname||"/",t);if(l==null)return null;let u=Vw(i);XC(u);let f=null;for(let d=0;f==null&&d<u.length;++d){let p=a2(l);f=r2(u[d],p,r)}return f}function Vw(i,e=[],t=[],r="",a=!1){let l=(u,f,d=a,p)=>{let y={relativePath:p===void 0?u.path||"":p,caseSensitive:u.caseSensitive===!0,childrenIndex:f,route:u};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(r)&&d)return;wt(y.relativePath.startsWith(r),`Absolute route path "${y.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(r.length)}let _=Mr([r,y.relativePath]),b=t.concat(y);u.children&&u.children.length>0&&(wt(u.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),Vw(u.children,e,b,_,d)),!(u.path==null&&!u.index)&&e.push({path:_,score:n2(_,u.index),routesMeta:b})};return i.forEach((u,f)=>{var d;if(u.path===""||!((d=u.path)!=null&&d.includes("?")))l(u,f);else for(let p of Mw(u.path))l(u,f,!0,p)}),e}function Mw(i){let e=i.split("/");if(e.length===0)return[];let[t,...r]=e,a=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let u=Mw(r.join("/")),f=[];return f.push(...u.map(d=>d===""?l:[l,d].join("/"))),a&&f.push(...u),f.map(d=>i.startsWith("/")&&d===""?"/":d)}function XC(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:i2(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var YC=/^:[\w-]+$/,WC=3,JC=2,ZC=1,e2=10,t2=-2,Sb=i=>i==="*";function n2(i,e){let t=i.split("/"),r=t.length;return t.some(Sb)&&(r+=t2),e&&(r+=JC),t.filter(a=>!Sb(a)).reduce((a,l)=>a+(YC.test(l)?WC:l===""?ZC:e2),r)}function i2(i,e){return i.length===e.length&&i.slice(0,-1).every((r,a)=>r===e[a])?i[i.length-1]-e[e.length-1]:0}function r2(i,e,t=!1){let{routesMeta:r}=i,a={},l="/",u=[];for(let f=0;f<r.length;++f){let d=r[f],p=f===r.length-1,y=l==="/"?e:e.slice(l.length)||"/",_=qd({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},y),b=d.route;if(!_&&p&&t&&!r[r.length-1].route.index&&(_=qd({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},y)),!_)return null;Object.assign(a,_.params),u.push({params:a,pathname:Mr([l,_.pathname]),pathnameBase:c2(Mr([l,_.pathnameBase])),route:b}),_.pathnameBase!=="/"&&(l=Mr([l,_.pathnameBase]))}return u}function qd(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,r]=s2(i.path,i.caseSensitive,i.end),a=e.match(t);if(!a)return null;let l=a[0],u=l.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:r.reduce((p,{paramName:y,isOptional:_},b)=>{if(y==="*"){let N=f[b]||"";u=l.slice(0,l.length-N.length).replace(/(.)\/+$/,"$1")}const A=f[b];return _&&!A?p[y]=void 0:p[y]=(A||"").replace(/%2F/g,"/"),p},{}),pathname:l,pathnameBase:u,pattern:i}}function s2(i,e=!1,t=!0){_i(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let r=[],a="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,d)=>(r.push({paramName:f,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(r.push({paramName:"*"}),a+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?a+="\\/*$":i!==""&&i!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),r]}function a2(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _i(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function jr(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=i.charAt(t);return r&&r!=="/"?null:i.slice(t)||"/"}var o2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function l2(i,e="/"){let{pathname:t,search:r="",hash:a=""}=typeof i=="string"?So(i):i,l;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?l=wb(t.substring(1),"/"):l=wb(t,e)):l=e,{pathname:l,search:h2(r),hash:f2(a)}}function wb(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(a=>{a===".."?t.length>1&&t.pop():a!=="."&&t.push(a)}),t.length>1?t.join("/"):"/"}function ay(i,e,t,r){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function u2(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function __(i){let e=u2(i);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function v_(i,e,t,r=!1){let a;typeof i=="string"?a=So(i):(a={...i},wt(!a.pathname||!a.pathname.includes("?"),ay("?","pathname","search",a)),wt(!a.pathname||!a.pathname.includes("#"),ay("#","pathname","hash",a)),wt(!a.search||!a.search.includes("#"),ay("#","search","hash",a)));let l=i===""||a.pathname==="",u=l?"/":a.pathname,f;if(u==null)f=t;else{let _=e.length-1;if(!r&&u.startsWith("..")){let b=u.split("/");for(;b[0]==="..";)b.shift(),_-=1;a.pathname=b.join("/")}f=_>=0?e[_]:"/"}let d=l2(a,f),p=u&&u!=="/"&&u.endsWith("/"),y=(l||u===".")&&t.endsWith("/");return!d.pathname.endsWith("/")&&(p||y)&&(d.pathname+="/"),d}var Mr=i=>i.join("/").replace(/\/\/+/g,"/"),c2=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),h2=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,f2=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,d2=class{constructor(i,e,t,r=!1){this.status=i,this.statusText=e||"",this.internal=r,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function m2(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}function p2(i){return i.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var kw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Lw(i,e){let t=i;if(typeof t!="string"||!o2.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let r=t,a=!1;if(kw)try{let l=new URL(window.location.href),u=t.startsWith("//")?new URL(l.protocol+t):new URL(t),f=jr(u.pathname,e);u.origin===l.origin&&f!=null?t=f+u.search+u.hash:a=!0}catch{_i(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:r,isExternal:a,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var jw=["POST","PUT","PATCH","DELETE"];new Set(jw);var g2=["GET",...jw];new Set(g2);var ou=z.createContext(null);ou.displayName="DataRouter";var pm=z.createContext(null);pm.displayName="DataRouterState";var y2=z.createContext(!1),Uw=z.createContext({isTransitioning:!1});Uw.displayName="ViewTransition";var _2=z.createContext(new Map);_2.displayName="Fetchers";var v2=z.createContext(null);v2.displayName="Await";var ii=z.createContext(null);ii.displayName="Navigation";var gh=z.createContext(null);gh.displayName="Location";var ir=z.createContext({outlet:null,matches:[],isDataRoute:!1});ir.displayName="Route";var E_=z.createContext(null);E_.displayName="RouteError";var zw="REACT_ROUTER_ERROR",E2="REDIRECT",T2="ROUTE_ERROR_RESPONSE";function b2(i){if(i.startsWith(`${zw}:${E2}:{`))try{let e=JSON.parse(i.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function S2(i){if(i.startsWith(`${zw}:${T2}:{`))try{let e=JSON.parse(i.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new d2(e.status,e.statusText,e.data)}catch{}}function w2(i,{relative:e}={}){wt(lu(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=z.useContext(ii),{hash:a,pathname:l,search:u}=yh(i,{relative:e}),f=l;return t!=="/"&&(f=l==="/"?t:Mr([t,l])),r.createHref({pathname:f,search:u,hash:a})}function lu(){return z.useContext(gh)!=null}function qr(){return wt(lu(),"useLocation() may be used only in the context of a <Router> component."),z.useContext(gh).location}var Bw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Fw(i){z.useContext(ii).static||z.useLayoutEffect(i)}function uu(){let{isDataRoute:i}=z.useContext(ir);return i?L2():A2()}function A2(){wt(lu(),"useNavigate() may be used only in the context of a <Router> component.");let i=z.useContext(ou),{basename:e,navigator:t}=z.useContext(ii),{matches:r}=z.useContext(ir),{pathname:a}=qr(),l=JSON.stringify(__(r)),u=z.useRef(!1);return Fw(()=>{u.current=!0}),z.useCallback((d,p={})=>{if(_i(u.current,Bw),!u.current)return;if(typeof d=="number"){t.go(d);return}let y=v_(d,JSON.parse(l),a,p.relative==="path");i==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Mr([e,y.pathname])),(p.replace?t.replace:t.push)(y,p.state,p)},[e,t,l,a,i])}z.createContext(null);function yh(i,{relative:e}={}){let{matches:t}=z.useContext(ir),{pathname:r}=qr(),a=JSON.stringify(__(t));return z.useMemo(()=>v_(i,JSON.parse(a),r,e==="path"),[i,a,r,e])}function I2(i,e){return qw(i,e)}function qw(i,e,t,r,a){var $;wt(lu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=z.useContext(ii),{matches:u}=z.useContext(ir),f=u[u.length-1],d=f?f.params:{},p=f?f.pathname:"/",y=f?f.pathnameBase:"/",_=f&&f.route;{let B=_&&_.path||"";Gw(p,!_||B.endsWith("*")||B.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${B}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${B}"> to <Route path="${B==="/"?"*":`${B}/*`}">.`)}let b=qr(),A;if(e){let B=typeof e=="string"?So(e):e;wt(y==="/"||(($=B.pathname)==null?void 0:$.startsWith(y)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${B.pathname}" was given in the \`location\` prop.`),A=B}else A=b;let N=A.pathname||"/",M=N;if(y!=="/"){let B=y.replace(/^\//,"").split("/");M="/"+N.replace(/^\//,"").split("/").slice(B.length).join("/")}let P=Pw(i,{pathname:M});_i(_||P!=null,`No routes matched location "${A.pathname}${A.search}${A.hash}" `),_i(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${A.pathname}${A.search}${A.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let q=N2(P&&P.map(B=>Object.assign({},B,{params:Object.assign({},d,B.params),pathname:Mr([y,l.encodeLocation?l.encodeLocation(B.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathname]),pathnameBase:B.pathnameBase==="/"?y:Mr([y,l.encodeLocation?l.encodeLocation(B.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:B.pathnameBase])})),u,t,r,a);return e&&q?z.createElement(gh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...A},navigationType:"POP"}},q):q}function x2(){let i=k2(),e=m2(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",i),u=z.createElement(z.Fragment,null,z.createElement("p",null," Hey developer "),z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",z.createElement("code",{style:l},"ErrorBoundary")," or"," ",z.createElement("code",{style:l},"errorElement")," prop on your route.")),z.createElement(z.Fragment,null,z.createElement("h2",null,"Unexpected Application Error!"),z.createElement("h3",{style:{fontStyle:"italic"}},e),t?z.createElement("pre",{style:a},t):null,u)}var R2=z.createElement(x2,null),Hw=class extends z.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.onError?this.props.onError(i,e):console.error("React Router caught the following error during render",i)}render(){let i=this.state.error;if(this.context&&typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){const t=S2(i.digest);t&&(i=t)}let e=i!==void 0?z.createElement(ir.Provider,{value:this.props.routeContext},z.createElement(E_.Provider,{value:i,children:this.props.component})):this.props.children;return this.context?z.createElement(C2,{error:i},e):e}};Hw.contextType=y2;var oy=new WeakMap;function C2({children:i,error:e}){let{basename:t}=z.useContext(ii);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let r=b2(e.digest);if(r){let a=oy.get(e);if(a)throw a;let l=Lw(r.location,t);if(kw&&!oy.get(e))if(l.isExternal||r.reloadDocument)window.location.href=l.absoluteURL||l.to;else{const u=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(l.to,{replace:r.replace}));throw oy.set(e,u),u}return z.createElement("meta",{httpEquiv:"refresh",content:`0;url=${l.absoluteURL||l.to}`})}}return i}function D2({routeContext:i,match:e,children:t}){let r=z.useContext(ou);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),z.createElement(ir.Provider,{value:i},t)}function N2(i,e=[],t=null,r=null,a=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let l=i,u=t==null?void 0:t.errors;if(u!=null){let y=l.findIndex(_=>_.route.id&&(u==null?void 0:u[_.route.id])!==void 0);wt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(u).join(",")}`),l=l.slice(0,Math.min(l.length,y+1))}let f=!1,d=-1;if(t)for(let y=0;y<l.length;y++){let _=l[y];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(d=y),_.route.id){let{loaderData:b,errors:A}=t,N=_.route.loader&&!b.hasOwnProperty(_.route.id)&&(!A||A[_.route.id]===void 0);if(_.route.lazy||N){f=!0,d>=0?l=l.slice(0,d+1):l=[l[0]];break}}}let p=t&&r?(y,_)=>{var b,A;r(y,{location:t.location,params:((A=(b=t.matches)==null?void 0:b[0])==null?void 0:A.params)??{},unstable_pattern:p2(t.matches),errorInfo:_})}:void 0;return l.reduceRight((y,_,b)=>{let A,N=!1,M=null,P=null;t&&(A=u&&_.route.id?u[_.route.id]:void 0,M=_.route.errorElement||R2,f&&(d<0&&b===0?(Gw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,P=null):d===b&&(N=!0,P=_.route.hydrateFallbackElement||null)));let q=e.concat(l.slice(0,b+1)),$=()=>{let B;return A?B=M:N?B=P:_.route.Component?B=z.createElement(_.route.Component,null):_.route.element?B=_.route.element:B=y,z.createElement(D2,{match:_,routeContext:{outlet:y,matches:q,isDataRoute:t!=null},children:B})};return t&&(_.route.ErrorBoundary||_.route.errorElement||b===0)?z.createElement(Hw,{location:t.location,revalidation:t.revalidation,component:M,error:A,children:$(),routeContext:{outlet:null,matches:q,isDataRoute:!0},onError:p}):$()},null)}function T_(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function O2(i){let e=z.useContext(ou);return wt(e,T_(i)),e}function P2(i){let e=z.useContext(pm);return wt(e,T_(i)),e}function V2(i){let e=z.useContext(ir);return wt(e,T_(i)),e}function b_(i){let e=V2(i),t=e.matches[e.matches.length-1];return wt(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function M2(){return b_("useRouteId")}function k2(){var r;let i=z.useContext(E_),e=P2("useRouteError"),t=b_("useRouteError");return i!==void 0?i:(r=e.errors)==null?void 0:r[t]}function L2(){let{router:i}=O2("useNavigate"),e=b_("useNavigate"),t=z.useRef(!1);return Fw(()=>{t.current=!0}),z.useCallback(async(a,l={})=>{_i(t.current,Bw),t.current&&(typeof a=="number"?await i.navigate(a):await i.navigate(a,{fromRouteId:e,...l}))},[i,e])}var Ab={};function Gw(i,e,t){!e&&!Ab[i]&&(Ab[i]=!0,_i(!1,t))}z.memo(j2);function j2({routes:i,future:e,state:t,onError:r}){return qw(i,void 0,t,r,e)}function U2({to:i,replace:e,state:t,relative:r}){wt(lu(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=z.useContext(ii);_i(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=z.useContext(ir),{pathname:u}=qr(),f=uu(),d=v_(i,__(l),u,r==="path"),p=JSON.stringify(d);return z.useEffect(()=>{f(JSON.parse(p),{replace:e,state:t,relative:r})},[f,p,r,e,t]),null}function Gi(i){wt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function z2({basename:i="/",children:e=null,location:t,navigationType:r="POP",navigator:a,static:l=!1,unstable_useTransitions:u}){wt(!lu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=i.replace(/^\/*/,"/"),d=z.useMemo(()=>({basename:f,navigator:a,static:l,unstable_useTransitions:u,future:{}}),[f,a,l,u]);typeof t=="string"&&(t=So(t));let{pathname:p="/",search:y="",hash:_="",state:b=null,key:A="default"}=t,N=z.useMemo(()=>{let M=jr(p,f);return M==null?null:{location:{pathname:M,search:y,hash:_,state:b,key:A},navigationType:r}},[f,p,y,_,b,A,r]);return _i(N!=null,`<Router basename="${f}"> is not able to match the URL "${p}${y}${_}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:z.createElement(ii.Provider,{value:d},z.createElement(gh.Provider,{children:e,value:N}))}function Ny({children:i,location:e}){return I2(Oy(i),e)}function Oy(i,e=[]){let t=[];return z.Children.forEach(i,(r,a)=>{if(!z.isValidElement(r))return;let l=[...e,a];if(r.type===z.Fragment){t.push.apply(t,Oy(r.props.children,l));return}wt(r.type===Gi,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),wt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,middleware:r.props.middleware,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=Oy(r.props.children,l)),t.push(u)}),t}var xd="get",Rd="application/x-www-form-urlencoded";function gm(i){return typeof HTMLElement<"u"&&i instanceof HTMLElement}function B2(i){return gm(i)&&i.tagName.toLowerCase()==="button"}function F2(i){return gm(i)&&i.tagName.toLowerCase()==="form"}function q2(i){return gm(i)&&i.tagName.toLowerCase()==="input"}function H2(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function G2(i,e){return i.button===0&&(!e||e==="_self")&&!H2(i)}var pd=null;function K2(){if(pd===null)try{new FormData(document.createElement("form"),0),pd=!1}catch{pd=!0}return pd}var $2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ly(i){return i!=null&&!$2.has(i)?(_i(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Rd}"`),null):i}function Q2(i,e){let t,r,a,l,u;if(F2(i)){let f=i.getAttribute("action");r=f?jr(f,e):null,t=i.getAttribute("method")||xd,a=ly(i.getAttribute("enctype"))||Rd,l=new FormData(i)}else if(B2(i)||q2(i)&&(i.type==="submit"||i.type==="image")){let f=i.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let d=i.getAttribute("formaction")||f.getAttribute("action");if(r=d?jr(d,e):null,t=i.getAttribute("formmethod")||f.getAttribute("method")||xd,a=ly(i.getAttribute("formenctype"))||ly(f.getAttribute("enctype"))||Rd,l=new FormData(f,i),!K2()){let{name:p,type:y,value:_}=i;if(y==="image"){let b=p?`${p}.`:"";l.append(`${b}x`,"0"),l.append(`${b}y`,"0")}else p&&l.append(p,_)}}else{if(gm(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=xd,r=null,a=Rd,u=i}return l&&a==="text/plain"&&(u=l,l=void 0),{action:r,method:t.toLowerCase(),encType:a,formData:l,body:u}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function S_(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function X2(i,e,t,r){let a=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return t?a.pathname.endsWith("/")?a.pathname=`${a.pathname}_.${r}`:a.pathname=`${a.pathname}.${r}`:a.pathname==="/"?a.pathname=`_root.${r}`:e&&jr(a.pathname,e)==="/"?a.pathname=`${e.replace(/\/$/,"")}/_root.${r}`:a.pathname=`${a.pathname.replace(/\/$/,"")}.${r}`,a}async function Y2(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function W2(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function J2(i,e,t){let r=await Promise.all(i.map(async a=>{let l=e.routes[a.route.id];if(l){let u=await Y2(l,t);return u.links?u.links():[]}return[]}));return nD(r.flat(1).filter(W2).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Ib(i,e,t,r,a,l){let u=(d,p)=>t[p]?d.route.id!==t[p].route.id:!0,f=(d,p)=>{var y;return t[p].pathname!==d.pathname||((y=t[p].route.path)==null?void 0:y.endsWith("*"))&&t[p].params["*"]!==d.params["*"]};return l==="assets"?e.filter((d,p)=>u(d,p)||f(d,p)):l==="data"?e.filter((d,p)=>{var _;let y=r.routes[d.route.id];if(!y||!y.hasLoader)return!1;if(u(d,p)||f(d,p))return!0;if(d.route.shouldRevalidate){let b=d.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((_=t[0])==null?void 0:_.params)||{},nextUrl:new URL(i,window.origin),nextParams:d.params,defaultShouldRevalidate:!0});if(typeof b=="boolean")return b}return!0}):[]}function Z2(i,e,{includeHydrateFallback:t}={}){return eD(i.map(r=>{let a=e.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),t&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function eD(i){return[...new Set(i)]}function tD(i){let e={},t=Object.keys(i).sort();for(let r of t)e[r]=i[r];return e}function nD(i,e){let t=new Set;return new Set(e),i.reduce((r,a)=>{let l=JSON.stringify(tD(a));return t.has(l)||(t.add(l),r.push({key:l,link:a})),r},[])}function Kw(){let i=z.useContext(ou);return S_(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function iD(){let i=z.useContext(pm);return S_(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var w_=z.createContext(void 0);w_.displayName="FrameworkContext";function $w(){let i=z.useContext(w_);return S_(i,"You must render this element inside a <HydratedRouter> element"),i}function rD(i,e){let t=z.useContext(w_),[r,a]=z.useState(!1),[l,u]=z.useState(!1),{onFocus:f,onBlur:d,onMouseEnter:p,onMouseLeave:y,onTouchStart:_}=e,b=z.useRef(null);z.useEffect(()=>{if(i==="render"&&u(!0),i==="viewport"){let M=q=>{q.forEach($=>{u($.isIntersecting)})},P=new IntersectionObserver(M,{threshold:.5});return b.current&&P.observe(b.current),()=>{P.disconnect()}}},[i]),z.useEffect(()=>{if(r){let M=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(M)}}},[r]);let A=()=>{a(!0)},N=()=>{a(!1),u(!1)};return t?i!=="intent"?[l,b,{}]:[l,b,{onFocus:xc(f,A),onBlur:xc(d,N),onMouseEnter:xc(p,A),onMouseLeave:xc(y,N),onTouchStart:xc(_,A)}]:[!1,b,{}]}function xc(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function sD({page:i,...e}){let{router:t}=Kw(),r=z.useMemo(()=>Pw(t.routes,i,t.basename),[t.routes,i,t.basename]);return r?z.createElement(oD,{page:i,matches:r,...e}):null}function aD(i){let{manifest:e,routeModules:t}=$w(),[r,a]=z.useState([]);return z.useEffect(()=>{let l=!1;return J2(i,e,t).then(u=>{l||a(u)}),()=>{l=!0}},[i,e,t]),r}function oD({page:i,matches:e,...t}){let r=qr(),{future:a,manifest:l,routeModules:u}=$w(),{basename:f}=Kw(),{loaderData:d,matches:p}=iD(),y=z.useMemo(()=>Ib(i,e,p,l,r,"data"),[i,e,p,l,r]),_=z.useMemo(()=>Ib(i,e,p,l,r,"assets"),[i,e,p,l,r]),b=z.useMemo(()=>{if(i===r.pathname+r.search+r.hash)return[];let M=new Set,P=!1;if(e.forEach($=>{var J;let B=l.routes[$.route.id];!B||!B.hasLoader||(!y.some(fe=>fe.route.id===$.route.id)&&$.route.id in d&&((J=u[$.route.id])!=null&&J.shouldRevalidate)||B.hasClientLoader?P=!0:M.add($.route.id))}),M.size===0)return[];let q=X2(i,f,a.unstable_trailingSlashAwareDataRequests,"data");return P&&M.size>0&&q.searchParams.set("_routes",e.filter($=>M.has($.route.id)).map($=>$.route.id).join(",")),[q.pathname+q.search]},[f,a.unstable_trailingSlashAwareDataRequests,d,r,l,y,e,i,u]),A=z.useMemo(()=>Z2(_,l),[_,l]),N=aD(_);return z.createElement(z.Fragment,null,b.map(M=>z.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...t})),A.map(M=>z.createElement("link",{key:M,rel:"modulepreload",href:M,...t})),N.map(({key:M,link:P})=>z.createElement("link",{key:M,nonce:t.nonce,...P,crossOrigin:P.crossOrigin??t.crossOrigin})))}function lD(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var uD=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{uD&&(window.__reactRouterVersion="7.13.0")}catch{}function cD({basename:i,children:e,unstable_useTransitions:t,window:r}){let a=z.useRef();a.current==null&&(a.current=HC({window:r,v5Compat:!0}));let l=a.current,[u,f]=z.useState({action:l.action,location:l.location}),d=z.useCallback(p=>{t===!1?f(p):z.startTransition(()=>f(p))},[t]);return z.useLayoutEffect(()=>l.listen(d),[l,d]),z.createElement(z2,{basename:i,children:e,location:u.location,navigationType:u.action,navigator:l,unstable_useTransitions:t})}var Qw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ym=z.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:a,reloadDocument:l,replace:u,state:f,target:d,to:p,preventScrollReset:y,viewTransition:_,unstable_defaultShouldRevalidate:b,...A},N){let{basename:M,unstable_useTransitions:P}=z.useContext(ii),q=typeof p=="string"&&Qw.test(p),$=Lw(p,M);p=$.to;let B=w2(p,{relative:a}),[J,fe,de]=rD(r,A),R=mD(p,{replace:u,state:f,target:d,preventScrollReset:y,relative:a,viewTransition:_,unstable_defaultShouldRevalidate:b,unstable_useTransitions:P});function C(j){e&&e(j),j.defaultPrevented||R(j)}let V=z.createElement("a",{...A,...de,href:$.absoluteURL||B,onClick:$.isExternal||l?e:C,ref:lD(N,fe),target:d,"data-discover":!q&&t==="render"?"true":void 0});return J&&!q?z.createElement(z.Fragment,null,V,z.createElement(sD,{page:B})):V});ym.displayName="Link";var hD=z.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:a=!1,style:l,to:u,viewTransition:f,children:d,...p},y){let _=yh(u,{relative:p.relative}),b=qr(),A=z.useContext(pm),{navigator:N,basename:M}=z.useContext(ii),P=A!=null&&vD(_)&&f===!0,q=N.encodeLocation?N.encodeLocation(_).pathname:_.pathname,$=b.pathname,B=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;t||($=$.toLowerCase(),B=B?B.toLowerCase():null,q=q.toLowerCase()),B&&M&&(B=jr(B,M)||B);const J=q!=="/"&&q.endsWith("/")?q.length-1:q.length;let fe=$===q||!a&&$.startsWith(q)&&$.charAt(J)==="/",de=B!=null&&(B===q||!a&&B.startsWith(q)&&B.charAt(q.length)==="/"),R={isActive:fe,isPending:de,isTransitioning:P},C=fe?e:void 0,V;typeof r=="function"?V=r(R):V=[r,fe?"active":null,de?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let j=typeof l=="function"?l(R):l;return z.createElement(ym,{...p,"aria-current":C,className:V,ref:y,style:j,to:u,viewTransition:f},typeof d=="function"?d(R):d)});hD.displayName="NavLink";var fD=z.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:a,state:l,method:u=xd,action:f,onSubmit:d,relative:p,preventScrollReset:y,viewTransition:_,unstable_defaultShouldRevalidate:b,...A},N)=>{let{unstable_useTransitions:M}=z.useContext(ii),P=yD(),q=_D(f,{relative:p}),$=u.toLowerCase()==="get"?"get":"post",B=typeof f=="string"&&Qw.test(f),J=fe=>{if(d&&d(fe),fe.defaultPrevented)return;fe.preventDefault();let de=fe.nativeEvent.submitter,R=(de==null?void 0:de.getAttribute("formmethod"))||u,C=()=>P(de||fe.currentTarget,{fetcherKey:e,method:R,navigate:t,replace:a,state:l,relative:p,preventScrollReset:y,viewTransition:_,unstable_defaultShouldRevalidate:b});M&&t!==!1?z.startTransition(()=>C()):C()};return z.createElement("form",{ref:N,method:$,action:q,onSubmit:r?d:J,...A,"data-discover":!B&&i==="render"?"true":void 0})});fD.displayName="Form";function dD(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Xw(i){let e=z.useContext(ou);return wt(e,dD(i)),e}function mD(i,{target:e,replace:t,state:r,preventScrollReset:a,relative:l,viewTransition:u,unstable_defaultShouldRevalidate:f,unstable_useTransitions:d}={}){let p=uu(),y=qr(),_=yh(i,{relative:l});return z.useCallback(b=>{if(G2(b,e)){b.preventDefault();let A=t!==void 0?t:Zc(y)===Zc(_),N=()=>p(i,{replace:A,state:r,preventScrollReset:a,relative:l,viewTransition:u,unstable_defaultShouldRevalidate:f});d?z.startTransition(()=>N()):N()}},[y,p,_,t,r,e,i,a,l,u,f,d])}var pD=0,gD=()=>`__${String(++pD)}__`;function yD(){let{router:i}=Xw("useSubmit"),{basename:e}=z.useContext(ii),t=M2(),r=i.fetch,a=i.navigate;return z.useCallback(async(l,u={})=>{let{action:f,method:d,encType:p,formData:y,body:_}=Q2(l,e);if(u.navigate===!1){let b=u.fetcherKey||gD();await r(b,t,u.action||f,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:y,body:_,formMethod:u.method||d,formEncType:u.encType||p,flushSync:u.flushSync})}else await a(u.action||f,{unstable_defaultShouldRevalidate:u.unstable_defaultShouldRevalidate,preventScrollReset:u.preventScrollReset,formData:y,body:_,formMethod:u.method||d,formEncType:u.encType||p,replace:u.replace,state:u.state,fromRouteId:t,flushSync:u.flushSync,viewTransition:u.viewTransition})},[r,a,e,t])}function _D(i,{relative:e}={}){let{basename:t}=z.useContext(ii),r=z.useContext(ir);wt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={...yh(i||".",{relative:e})},u=qr();if(i==null){l.search=u.search;let f=new URLSearchParams(l.search),d=f.getAll("index");if(d.some(y=>y==="")){f.delete("index"),d.filter(_=>_).forEach(_=>f.append("index",_));let y=f.toString();l.search=y?`?${y}`:""}}return(!i||i===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Mr([t,l.pathname])),Zc(l)}function vD(i,{relative:e}={}){let t=z.useContext(Uw);wt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Xw("useViewTransitionState"),a=yh(i,{relative:e});if(!t.isTransitioning)return!1;let l=jr(t.currentLocation.pathname,r)||t.currentLocation.pathname,u=jr(t.nextLocation.pathname,r)||t.nextLocation.pathname;return qd(a.pathname,u)!=null||qd(a.pathname,l)!=null}const ED=()=>{};var xb={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yw=function(i){const e=[];let t=0;for(let r=0;r<i.length;r++){let a=i.charCodeAt(r);a<128?e[t++]=a:a<2048?(e[t++]=a>>6|192,e[t++]=a&63|128):(a&64512)===55296&&r+1<i.length&&(i.charCodeAt(r+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++r)&1023),e[t++]=a>>18|240,e[t++]=a>>12&63|128,e[t++]=a>>6&63|128,e[t++]=a&63|128):(e[t++]=a>>12|224,e[t++]=a>>6&63|128,e[t++]=a&63|128)}return e},TD=function(i){const e=[];let t=0,r=0;for(;t<i.length;){const a=i[t++];if(a<128)e[r++]=String.fromCharCode(a);else if(a>191&&a<224){const l=i[t++];e[r++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=i[t++],u=i[t++],f=i[t++],d=((a&7)<<18|(l&63)<<12|(u&63)<<6|f&63)-65536;e[r++]=String.fromCharCode(55296+(d>>10)),e[r++]=String.fromCharCode(56320+(d&1023))}else{const l=i[t++],u=i[t++];e[r++]=String.fromCharCode((a&15)<<12|(l&63)<<6|u&63)}}return e.join("")},Ww={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let a=0;a<i.length;a+=3){const l=i[a],u=a+1<i.length,f=u?i[a+1]:0,d=a+2<i.length,p=d?i[a+2]:0,y=l>>2,_=(l&3)<<4|f>>4;let b=(f&15)<<2|p>>6,A=p&63;d||(A=64,u||(b=64)),r.push(t[y],t[_],t[b],t[A])}return r.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(Yw(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):TD(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let a=0;a<i.length;){const l=t[i.charAt(a++)],f=a<i.length?t[i.charAt(a)]:0;++a;const p=a<i.length?t[i.charAt(a)]:64;++a;const _=a<i.length?t[i.charAt(a)]:64;if(++a,l==null||f==null||p==null||_==null)throw new bD;const b=l<<2|f>>4;if(r.push(b),p!==64){const A=f<<4&240|p>>2;if(r.push(A),_!==64){const N=p<<6&192|_;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class bD extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const SD=function(i){const e=Yw(i);return Ww.encodeByteArray(e,!0)},Hd=function(i){return SD(i).replace(/\./g,"")},Jw=function(i){try{return Ww.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wD=()=>Zw().__FIREBASE_DEFAULTS__,AD=()=>{if(typeof process>"u"||typeof xb>"u")return;const i=xb.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},ID=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&Jw(i[1]);return e&&JSON.parse(e)},_m=()=>{try{return ED()||wD()||AD()||ID()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},eA=i=>{var e,t;return(t=(e=_m())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[i]},xD=i=>{const e=eA(i);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},tA=()=>{var i;return(i=_m())===null||i===void 0?void 0:i.config},nA=i=>{var e;return(e=_m())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wo(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function A_(i){return(await fetch(i,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CD(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",a=i.iat||0,l=i.sub||i.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},i);return[Hd(JSON.stringify(t)),Hd(JSON.stringify(u)),""].join(".")}const Fc={};function DD(){const i={prod:[],emulator:[]};for(const e of Object.keys(Fc))Fc[e]?i.emulator.push(e):i.prod.push(e);return i}function ND(i){let e=document.getElementById(i),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),t=!0),{created:t,element:e}}let Rb=!1;function iA(i,e){if(typeof window>"u"||typeof document>"u"||!wo(window.location.host)||Fc[i]===e||Fc[i]||Rb)return;Fc[i]=e;function t(b){return`__firebase__banner__${b}`}const r="__firebase__banner",l=DD().prod.length>0;function u(){const b=document.getElementById(r);b&&b.remove()}function f(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function d(b,A){b.setAttribute("width","24"),b.setAttribute("id",A),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function p(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{Rb=!0,u()},b}function y(b,A){b.setAttribute("id",A),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function _(){const b=ND(r),A=t("text"),N=document.getElementById(A)||document.createElement("span"),M=t("learnmore"),P=document.getElementById(M)||document.createElement("a"),q=t("preprendIcon"),$=document.getElementById(q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const B=b.element;f(B),y(P,M);const J=p();d($,q),B.append($,N,P,J),document.body.appendChild(B)}l?(N.innerText="Preview backend disconnected.",$.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):($.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",_):_()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function OD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test($t())}function rA(){var i;const e=(i=_m())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function VD(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function MD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function kD(){const i=$t();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function sA(){return!rA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aA(){return!rA()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function oA(){try{return typeof indexedDB=="object"}catch{return!1}}function LD(){return new Promise((i,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(r);a.onsuccess=()=>{a.result.close(),t||self.indexedDB.deleteDatabase(r),i(!0)},a.onupgradeneeded=()=>{t=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD="FirebaseError";class Hr extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=jD,Object.setPrototypeOf(this,Hr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,_h.prototype.create)}}class _h{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},a=`${this.service}/${e}`,l=this.errors[e],u=l?UD(l,r):"Error",f=`${this.serviceName}: ${u} (${a}).`;return new Hr(a,f,r)}}function UD(i,e){return i.replace(zD,(t,r)=>{const a=e[r];return a!=null?String(a):`<${r}?>`})}const zD=/\{\$([^}]+)}/g;function BD(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Di(i,e){if(i===e)return!0;const t=Object.keys(i),r=Object.keys(e);for(const a of t){if(!r.includes(a))return!1;const l=i[a],u=e[a];if(Cb(l)&&Cb(u)){if(!Di(l,u))return!1}else if(l!==u)return!1}for(const a of r)if(!t.includes(a))return!1;return!0}function Cb(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vh(i){const e=[];for(const[t,r]of Object.entries(i))Array.isArray(r)?r.forEach(a=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function kc(i){const e={};return i.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[a,l]=r.split("=");e[decodeURIComponent(a)]=decodeURIComponent(l)}}),e}function Lc(i){const e=i.indexOf("?");if(!e)return"";const t=i.indexOf("#",e);return i.substring(e,t>0?t:void 0)}function FD(i,e){const t=new qD(i,e);return t.subscribe.bind(t)}class qD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let a;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");HD(e,["next","error","complete"])?a=e:a={next:e,error:t,complete:r},a.next===void 0&&(a.next=uy),a.error===void 0&&(a.error=uy),a.complete===void 0&&(a.complete=uy);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?a.error(this.finalError):a.complete()}catch{}}),this.observers.push(a),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HD(i,e){if(typeof i!="object"||i===null)return!1;for(const t of e)if(t in i&&typeof i[t]=="function")return!0;return!1}function uy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(i){return i&&i._delegate?i._delegate:i}class uo{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new RD;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:t});a&&r.resolve(a)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($D(e))try{this.getOrInitializeService({instanceIdentifier:Wa})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:a});r.resolve(l)}catch{}}}}clearInstance(e=Wa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Wa){return this.instances.has(e)}getOptions(e=Wa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);r===f&&u.resolve(a)}return a}onInit(e,t){var r;const a=this.normalizeInstanceIdentifier(t),l=(r=this.onInitCallbacks.get(a))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(a,l);const u=this.instances.get(a);return u&&e(u,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const a of r)try{a(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:KD(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Wa){return this.component?this.component.multipleInstances?e:Wa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KD(i){return i===Wa?void 0:i}function $D(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new GD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(qe||(qe={}));const XD={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},YD=qe.INFO,WD={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},JD=(i,e,...t)=>{if(e<i.logLevel)return;const r=new Date().toISOString(),a=WD[e];if(a)console[a](`[${r}]  ${i.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class I_{constructor(e){this.name=e,this._logLevel=YD,this._logHandler=JD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?XD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const ZD=(i,e)=>e.some(t=>i instanceof t);let Db,Nb;function eN(){return Db||(Db=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function tN(){return Nb||(Nb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const lA=new WeakMap,Py=new WeakMap,uA=new WeakMap,cy=new WeakMap,x_=new WeakMap;function nN(i){const e=new Promise((t,r)=>{const a=()=>{i.removeEventListener("success",l),i.removeEventListener("error",u)},l=()=>{t(Ys(i.result)),a()},u=()=>{r(i.error),a()};i.addEventListener("success",l),i.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&lA.set(t,i)}).catch(()=>{}),x_.set(e,i),e}function iN(i){if(Py.has(i))return;const e=new Promise((t,r)=>{const a=()=>{i.removeEventListener("complete",l),i.removeEventListener("error",u),i.removeEventListener("abort",u)},l=()=>{t(),a()},u=()=>{r(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",l),i.addEventListener("error",u),i.addEventListener("abort",u)});Py.set(i,e)}let Vy={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Py.get(i);if(e==="objectStoreNames")return i.objectStoreNames||uA.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Ys(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function rN(i){Vy=i(Vy)}function sN(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=i.call(hy(this),e,...t);return uA.set(r,e.sort?e.sort():[e]),Ys(r)}:tN().includes(i)?function(...e){return i.apply(hy(this),e),Ys(lA.get(this))}:function(...e){return Ys(i.apply(hy(this),e))}}function aN(i){return typeof i=="function"?sN(i):(i instanceof IDBTransaction&&iN(i),ZD(i,eN())?new Proxy(i,Vy):i)}function Ys(i){if(i instanceof IDBRequest)return nN(i);if(cy.has(i))return cy.get(i);const e=aN(i);return e!==i&&(cy.set(i,e),x_.set(e,i)),e}const hy=i=>x_.get(i);function oN(i,e,{blocked:t,upgrade:r,blocking:a,terminated:l}={}){const u=indexedDB.open(i,e),f=Ys(u);return r&&u.addEventListener("upgradeneeded",d=>{r(Ys(u.result),d.oldVersion,d.newVersion,Ys(u.transaction),d)}),t&&u.addEventListener("blocked",d=>t(d.oldVersion,d.newVersion,d)),f.then(d=>{l&&d.addEventListener("close",()=>l()),a&&d.addEventListener("versionchange",p=>a(p.oldVersion,p.newVersion,p))}).catch(()=>{}),f}const lN=["get","getKey","getAll","getAllKeys","count"],uN=["put","add","delete","clear"],fy=new Map;function Ob(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(fy.get(e))return fy.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,a=uN.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(a||lN.includes(t)))return;const l=async function(u,...f){const d=this.transaction(u,a?"readwrite":"readonly");let p=d.store;return r&&(p=p.index(f.shift())),(await Promise.all([p[t](...f),a&&d.done]))[0]};return fy.set(e,l),l}rN(i=>({...i,get:(e,t,r)=>Ob(e,t)||i.get(e,t,r),has:(e,t)=>!!Ob(e,t)||i.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cN{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(hN(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function hN(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const My="@firebase/app",Pb="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ur=new I_("@firebase/app"),fN="@firebase/app-compat",dN="@firebase/analytics-compat",mN="@firebase/analytics",pN="@firebase/app-check-compat",gN="@firebase/app-check",yN="@firebase/auth",_N="@firebase/auth-compat",vN="@firebase/database",EN="@firebase/data-connect",TN="@firebase/database-compat",bN="@firebase/functions",SN="@firebase/functions-compat",wN="@firebase/installations",AN="@firebase/installations-compat",IN="@firebase/messaging",xN="@firebase/messaging-compat",RN="@firebase/performance",CN="@firebase/performance-compat",DN="@firebase/remote-config",NN="@firebase/remote-config-compat",ON="@firebase/storage",PN="@firebase/storage-compat",VN="@firebase/firestore",MN="@firebase/ai",kN="@firebase/firestore-compat",LN="firebase",jN="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gd="[DEFAULT]",UN={[My]:"fire-core",[fN]:"fire-core-compat",[mN]:"fire-analytics",[dN]:"fire-analytics-compat",[gN]:"fire-app-check",[pN]:"fire-app-check-compat",[yN]:"fire-auth",[_N]:"fire-auth-compat",[vN]:"fire-rtdb",[EN]:"fire-data-connect",[TN]:"fire-rtdb-compat",[bN]:"fire-fn",[SN]:"fire-fn-compat",[wN]:"fire-iid",[AN]:"fire-iid-compat",[IN]:"fire-fcm",[xN]:"fire-fcm-compat",[RN]:"fire-perf",[CN]:"fire-perf-compat",[DN]:"fire-rc",[NN]:"fire-rc-compat",[ON]:"fire-gcs",[PN]:"fire-gcs-compat",[VN]:"fire-fst",[kN]:"fire-fst-compat",[MN]:"fire-vertex","fire-js":"fire-js",[LN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kd=new Map,zN=new Map,ky=new Map;function Vb(i,e){try{i.container.addComponent(e)}catch(t){Ur.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,t)}}function Ll(i){const e=i.name;if(ky.has(e))return Ur.debug(`There were multiple attempts to register component ${e}.`),!1;ky.set(e,i);for(const t of Kd.values())Vb(t,i);for(const t of zN.values())Vb(t,i);return!0}function Eh(i,e){const t=i.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),i.container.getProvider(e)}function BN(i,e,t=Gd){Eh(i,e).clearInstance(t)}function gi(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ws=new _h("app","Firebase",FN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new uo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ws.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu=jN;function cA(i,e={}){let t=i;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Gd,automaticDataCollectionEnabled:!0},e),a=r.name;if(typeof a!="string"||!a)throw Ws.create("bad-app-name",{appName:String(a)});if(t||(t=tA()),!t)throw Ws.create("no-options");const l=Kd.get(a);if(l){if(Di(t,l.options)&&Di(r,l.config))return l;throw Ws.create("duplicate-app",{appName:a})}const u=new QD(a);for(const d of ky.values())u.addComponent(d);const f=new qN(t,r,u);return Kd.set(a,f),f}function hA(i=Gd){const e=Kd.get(i);if(!e&&i===Gd&&tA())return cA();if(!e)throw Ws.create("no-app",{appName:i});return e}function Js(i,e,t){var r;let a=(r=UN[i])!==null&&r!==void 0?r:i;t&&(a+=`-${t}`);const l=a.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const f=[`Unable to register library "${a}" with version "${e}":`];l&&f.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ur.warn(f.join(" "));return}Ll(new uo(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN="firebase-heartbeat-database",GN=1,eh="firebase-heartbeat-store";let dy=null;function fA(){return dy||(dy=oN(HN,GN,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(eh)}catch(t){console.warn(t)}}}}).catch(i=>{throw Ws.create("idb-open",{originalErrorMessage:i.message})})),dy}async function KN(i){try{const t=(await fA()).transaction(eh),r=await t.objectStore(eh).get(dA(i));return await t.done,r}catch(e){if(e instanceof Hr)Ur.warn(e.message);else{const t=Ws.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ur.warn(t.message)}}}async function Mb(i,e){try{const r=(await fA()).transaction(eh,"readwrite");await r.objectStore(eh).put(e,dA(i)),await r.done}catch(t){if(t instanceof Hr)Ur.warn(t.message);else{const r=Ws.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Ur.warn(r.message)}}}function dA(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N=1024,QN=30;class XN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new WN(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=kb();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats.length>QN){const u=JN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ur.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=kb(),{heartbeatsToSend:r,unsentEntries:a}=YN(this._heartbeatsCache.heartbeats),l=Hd(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Ur.warn(t),""}}}function kb(){return new Date().toISOString().substring(0,10)}function YN(i,e=$N){const t=[];let r=i.slice();for(const a of i){const l=t.find(u=>u.agent===a.agent);if(l){if(l.dates.push(a.date),Lb(t)>e){l.dates.pop();break}}else if(t.push({agent:a.agent,dates:[a.date]}),Lb(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class WN{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return oA()?LD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await KN(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return Mb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const a=await this.read();return Mb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function Lb(i){return Hd(JSON.stringify({version:2,heartbeats:i})).length}function JN(i){if(i.length===0)return-1;let e=0,t=i[0].date;for(let r=1;r<i.length;r++)i[r].date<t&&(t=i[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(i){Ll(new uo("platform-logger",e=>new cN(e),"PRIVATE")),Ll(new uo("heartbeat",e=>new XN(e),"PRIVATE")),Js(My,Pb,i),Js(My,Pb,"esm2017"),Js("fire-js","")}ZN("");function R_(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(i);a<r.length;a++)e.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(i,r[a])&&(t[r[a]]=i[r[a]]);return t}function mA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const eO=mA,pA=new _h("auth","Firebase",mA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d=new I_("@firebase/auth");function tO(i,...e){$d.logLevel<=qe.WARN&&$d.warn(`Auth (${cu}): ${i}`,...e)}function Cd(i,...e){$d.logLevel<=qe.ERROR&&$d.error(`Auth (${cu}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ni(i,...e){throw C_(i,...e)}function Ji(i,...e){return C_(i,...e)}function gA(i,e,t){const r=Object.assign(Object.assign({},eO()),{[e]:t});return new _h("auth","Firebase",r).create(e,{appName:i.name})}function kr(i){return gA(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function C_(i,...e){if(typeof i!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=i.name),i._errorFactory.create(t,...r)}return pA.create(i,...e)}function Re(i,e,...t){if(!i)throw C_(e,...t)}function Nr(i){const e="INTERNAL ASSERTION FAILED: "+i;throw Cd(e),new Error(e)}function zr(i,e){i||Nr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function nO(){return jb()==="http:"||jb()==="https:"}function jb(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(nO()||VD()||"connection"in navigator)?navigator.onLine:!0}function rO(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,t){this.shortDelay=e,this.longDelay=t,zr(t>e,"Short delay should be less than long delay!"),this.isMobile=OD()||MD()}get(){return iO()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D_(i,e){zr(i.emulator,"Emulator should always be set here");const{url:t}=i.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Nr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Nr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Nr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sO={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],oO=new Th(3e4,6e4);function ua(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function ca(i,e,t,r,a={}){return _A(i,a,async()=>{let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});const f=vh(Object.assign({key:i.config.apiKey},u)).slice(1),d=await i._getAdditionalHeaders();d["Content-Type"]="application/json",i.languageCode&&(d["X-Firebase-Locale"]=i.languageCode);const p=Object.assign({method:e,headers:d},l);return PD()||(p.referrerPolicy="no-referrer"),i.emulatorConfig&&wo(i.emulatorConfig.host)&&(p.credentials="include"),yA.fetch()(await vA(i,i.config.apiHost,t,f),p)})}async function _A(i,e,t){i._canInitEmulator=!1;const r=Object.assign(Object.assign({},sO),e);try{const a=new uO(i),l=await Promise.race([t(),a.promise]);a.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw gd(i,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const f=l.ok?u.errorMessage:u.error.message,[d,p]=f.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw gd(i,"credential-already-in-use",u);if(d==="EMAIL_EXISTS")throw gd(i,"email-already-in-use",u);if(d==="USER_DISABLED")throw gd(i,"user-disabled",u);const y=r[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(p)throw gA(i,y,p);Ni(i,y)}}catch(a){if(a instanceof Hr)throw a;Ni(i,"network-request-failed",{message:String(a)})}}async function bh(i,e,t,r,a={}){const l=await ca(i,e,t,r,a);return"mfaPendingCredential"in l&&Ni(i,"multi-factor-auth-required",{_serverResponse:l}),l}async function vA(i,e,t,r){const a=`${e}${t}?${r}`,l=i,u=l.config.emulator?D_(i.config,a):`${i.config.apiScheme}://${a}`;return aO.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(u).toString():u}function lO(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class uO{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ji(this.auth,"network-request-failed")),oO.get())})}}function gd(i,e,t){const r={appName:i.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const a=Ji(i,e,r);return a.customData._tokenResponse=t,a}function Ub(i){return i!==void 0&&i.enterprise!==void 0}class cO{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return lO(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function hO(i,e){return ca(i,"GET","/v2/recaptchaConfig",ua(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fO(i,e){return ca(i,"POST","/v1/accounts:delete",e)}async function Qd(i,e){return ca(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dO(i,e=!1){const t=ht(i),r=await t.getIdToken(e),a=N_(r);Re(a&&a.exp&&a.auth_time&&a.iat,t.auth,"internal-error");const l=typeof a.firebase=="object"?a.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:a,token:r,authTime:qc(my(a.auth_time)),issuedAtTime:qc(my(a.iat)),expirationTime:qc(my(a.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function my(i){return Number(i)*1e3}function N_(i){const[e,t,r]=i.split(".");if(e===void 0||t===void 0||r===void 0)return Cd("JWT malformed, contained fewer than 3 sections"),null;try{const a=Jw(t);return a?JSON.parse(a):(Cd("Failed to decode base64 JWT payload"),null)}catch(a){return Cd("Caught error parsing JWT payload as JSON",a==null?void 0:a.toString()),null}}function zb(i){const e=N_(i);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function th(i,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Hr&&mO(r)&&i.auth.currentUser===i&&await i.auth.signOut(),r}}function mO({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pO{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const a=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,a)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=qc(this.lastLoginAt),this.creationTime=qc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xd(i){var e;const t=i.auth,r=await i.getIdToken(),a=await th(i,Qd(t,{idToken:r}));Re(a==null?void 0:a.users.length,t,"internal-error");const l=a.users[0];i._notifyReloadListener(l);const u=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?EA(l.providerUserInfo):[],f=yO(i.providerData,u),d=i.isAnonymous,p=!(i.email&&l.passwordHash)&&!(f!=null&&f.length),y=d?p:!1,_={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new jy(l.createdAt,l.lastLoginAt),isAnonymous:y};Object.assign(i,_)}async function gO(i){const e=ht(i);await Xd(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function yO(i,e){return[...i.filter(r=>!e.some(a=>a.providerId===r.providerId)),...e]}function EA(i){return i.map(e=>{var{providerId:t}=e,r=R_(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _O(i,e){const t=await _A(i,{},async()=>{const r=vh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:a,apiKey:l}=i.config,u=await vA(i,a,"/v1/token",`key=${l}`),f=await i._getAdditionalHeaders();f["Content-Type"]="application/x-www-form-urlencoded";const d={method:"POST",headers:f,body:r};return i.emulatorConfig&&wo(i.emulatorConfig.host)&&(d.credentials="include"),yA.fetch()(u,d)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function vO(i,e){return ca(i,"POST","/v2/accounts:revokeToken",ua(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const t=zb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:a,expiresIn:l}=await _O(e,t);this.updateTokensAndExpiration(r,a,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:a,expirationTime:l}=t,u=new Nl;return r&&(Re(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),a&&(Re(typeof a=="string","internal-error",{appName:e}),u.accessToken=a),l&&(Re(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Nl,this.toJSON())}_performRefresh(){return Nr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ls(i,e){Re(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class xi{constructor(e){var{uid:t,auth:r,stsTokenManager:a}=e,l=R_(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new pO(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=a,this.accessToken=a.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new jy(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await th(this,this.stsTokenManager.getToken(this.auth,e));return Re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return dO(this,e)}reload(){return gO(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new xi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await Xd(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gi(this.auth.app))return Promise.reject(kr(this.auth));const e=await this.getIdToken();return await th(this,fO(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,a,l,u,f,d,p,y;const _=(r=t.displayName)!==null&&r!==void 0?r:void 0,b=(a=t.email)!==null&&a!==void 0?a:void 0,A=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,N=(u=t.photoURL)!==null&&u!==void 0?u:void 0,M=(f=t.tenantId)!==null&&f!==void 0?f:void 0,P=(d=t._redirectEventId)!==null&&d!==void 0?d:void 0,q=(p=t.createdAt)!==null&&p!==void 0?p:void 0,$=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:B,emailVerified:J,isAnonymous:fe,providerData:de,stsTokenManager:R}=t;Re(B&&R,e,"internal-error");const C=Nl.fromJSON(this.name,R);Re(typeof B=="string",e,"internal-error"),Ls(_,e.name),Ls(b,e.name),Re(typeof J=="boolean",e,"internal-error"),Re(typeof fe=="boolean",e,"internal-error"),Ls(A,e.name),Ls(N,e.name),Ls(M,e.name),Ls(P,e.name),Ls(q,e.name),Ls($,e.name);const V=new xi({uid:B,auth:e,email:b,emailVerified:J,displayName:_,isAnonymous:fe,photoURL:N,phoneNumber:A,tenantId:M,stsTokenManager:C,createdAt:q,lastLoginAt:$});return de&&Array.isArray(de)&&(V.providerData=de.map(j=>Object.assign({},j))),P&&(V._redirectEventId=P),V}static async _fromIdTokenResponse(e,t,r=!1){const a=new Nl;a.updateFromServerResponse(t);const l=new xi({uid:t.localId,auth:e,stsTokenManager:a,isAnonymous:r});return await Xd(l),l}static async _fromGetAccountInfoResponse(e,t,r){const a=t.users[0];Re(a.localId!==void 0,"internal-error");const l=a.providerUserInfo!==void 0?EA(a.providerUserInfo):[],u=!(a.email&&a.passwordHash)&&!(l!=null&&l.length),f=new Nl;f.updateFromIdToken(r);const d=new xi({uid:a.localId,auth:e,stsTokenManager:f,isAnonymous:u}),p={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new jy(a.createdAt,a.lastLoginAt),isAnonymous:!(a.email&&a.passwordHash)&&!(l!=null&&l.length)};return Object.assign(d,p),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb=new Map;function Or(i){zr(i instanceof Function,"Expected a class definition");let e=Bb.get(i);return e?(zr(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,Bb.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}TA.type="NONE";const Fb=TA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(i,e,t){return`firebase:${i}:${e}:${t}`}class Ol{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:a,name:l}=this.auth;this.fullUserKey=Dd(this.userKey,a.apiKey,l),this.fullPersistenceKey=Dd("persistence",a.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Qd(this.auth,{idToken:e}).catch(()=>{});return t?xi._fromGetAccountInfoResponse(this.auth,t,e):null}return xi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Ol(Or(Fb),e,r);const a=(await Promise.all(t.map(async p=>{if(await p._isAvailable())return p}))).filter(p=>p);let l=a[0]||Or(Fb);const u=Dd(r,e.config.apiKey,e.name);let f=null;for(const p of t)try{const y=await p._get(u);if(y){let _;if(typeof y=="string"){const b=await Qd(e,{idToken:y}).catch(()=>{});if(!b)break;_=await xi._fromGetAccountInfoResponse(e,b,y)}else _=xi._fromJSON(e,y);p!==l&&(f=_),l=p;break}}catch{}const d=a.filter(p=>p._shouldAllowMigration);return!l._shouldAllowMigration||!d.length?new Ol(l,e,r):(l=d[0],f&&await l._set(u,f.toJSON()),await Promise.all(t.map(async p=>{if(p!==l)try{await p._remove(u)}catch{}})),new Ol(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qb(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(AA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(bA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(xA(e))return"Blackberry";if(RA(e))return"Webos";if(SA(e))return"Safari";if((e.includes("chrome/")||wA(e))&&!e.includes("edge/"))return"Chrome";if(IA(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=i.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function bA(i=$t()){return/firefox\//i.test(i)}function SA(i=$t()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function wA(i=$t()){return/crios\//i.test(i)}function AA(i=$t()){return/iemobile/i.test(i)}function IA(i=$t()){return/android/i.test(i)}function xA(i=$t()){return/blackberry/i.test(i)}function RA(i=$t()){return/webos/i.test(i)}function O_(i=$t()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function EO(i=$t()){var e;return O_(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function TO(){return kD()&&document.documentMode===10}function CA(i=$t()){return O_(i)||IA(i)||RA(i)||xA(i)||/windows phone/i.test(i)||AA(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DA(i,e=[]){let t;switch(i){case"Browser":t=qb($t());break;case"Worker":t=`${qb($t())}-${i}`;break;default:t=i}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${cu}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((u,f)=>{try{const d=e(l);u(d)}catch(d){f(d)}});r.onAbort=t,this.queue.push(r);const a=this.queue.length-1;return()=>{this.queue[a]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const a of t)try{a()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SO(i,e={}){return ca(i,"GET","/v2/passwordPolicy",ua(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wO=6;class AO{constructor(e){var t,r,a,l;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:wO,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(a=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&a!==void 0?a:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,a,l,u,f;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(t=d.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),d.isValid&&(d.isValid=(r=d.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),d.isValid&&(d.isValid=(a=d.containsLowercaseLetter)!==null&&a!==void 0?a:!0),d.isValid&&(d.isValid=(l=d.containsUppercaseLetter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(u=d.containsNumericCharacter)!==null&&u!==void 0?u:!0),d.isValid&&(d.isValid=(f=d.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),d}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,a=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),a&&(t.meetsMaxPasswordLength=e.length<=a)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let a=0;a<e.length;a++)r=e.charAt(a),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,a,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=a)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e,t,r,a){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=a,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hb(this),this.idTokenSubscription=new Hb(this),this.beforeStateQueue=new bO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=a.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Or(t)),this._initializationPromise=this.queue(async()=>{var r,a,l;if(!this._deleted&&(this.persistenceManager=await Ol.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Qd(this,{idToken:e}),r=await xi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(gi(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let a=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=a==null?void 0:a._redirectEventId,d=await this.tryRedirectSignIn(e);(!u||u===f)&&(d!=null&&d.user)&&(a=d.user,l=!0)}if(!a)return this.directlySetCurrentUser(null);if(!a._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(a)}catch(u){a=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return a?this.reloadAndSetCurrentUserOrClear(a):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===a._redirectEventId?this.directlySetCurrentUser(a):this.reloadAndSetCurrentUserOrClear(a)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Xd(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=rO()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gi(this.app))return Promise.reject(kr(this));const t=e?ht(e):null;return t&&Re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gi(this.app)?Promise.reject(kr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gi(this.app)?Promise.reject(kr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Or(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await SO(this),t=new AO(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new _h("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await vO(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Or(e)||this._popupRedirectResolver;Re(t,this,"argument-error"),this.redirectPersistenceManager=await Ol.create(this,[Or(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,a){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(f,this,"internal-error"),f.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const d=e.addObserver(t,r,a);return()=>{u=!0,d()}}else{const d=e.addObserver(t);return()=>{u=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=DA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const a=await this._getAppCheckToken();return a&&(t["X-Firebase-AppCheck"]=a),t}async _getAppCheckToken(){var e;if(gi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&tO(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ao(i){return ht(i)}class Hb{constructor(e){this.auth=e,this.observer=null,this.addObserver=FD(t=>this.observer=t)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function xO(i){vm=i}function NA(i){return vm.loadJS(i)}function RO(){return vm.recaptchaEnterpriseScript}function CO(){return vm.gapiScript}function DO(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class NO{constructor(){this.enterprise=new OO}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class OO{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const PO="recaptcha-enterprise",OA="NO_RECAPTCHA";class VO{constructor(e){this.type=PO,this.auth=Ao(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,f)=>{hO(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const p=new cO(d);return l.tenantId==null?l._agentRecaptchaConfig=p:l._tenantRecaptchaConfigs[l.tenantId]=p,u(p.siteKey)}}).catch(d=>{f(d)})})}function a(l,u,f){const d=window.grecaptcha;Ub(d)?d.enterprise.ready(()=>{d.enterprise.execute(l,{action:e}).then(p=>{u(p)}).catch(()=>{u(OA)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new NO().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{r(this.auth).then(f=>{if(!t&&Ub(window.grecaptcha))a(f,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let d=RO();d.length!==0&&(d+=f),NA(d).then(()=>{a(f,l,u)}).catch(p=>{u(p)})}}).catch(f=>{u(f)})})}}async function Gb(i,e,t,r=!1,a=!1){const l=new VO(i);let u;if(a)u=OA;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const d=f.phoneEnrollmentInfo.phoneNumber,p=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:d,recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const d=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:d,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return r?Object.assign(f,{captchaResp:u}):Object.assign(f,{captchaResponse:u}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function Uy(i,e,t,r,a){var l;if(!((l=i._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await Gb(i,e,t,t==="getOobCode");return r(i,u)}else return r(i,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await Gb(i,e,t,t==="getOobCode");return r(i,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MO(i,e){const t=Eh(i,"auth");if(t.isInitialized()){const a=t.getImmediate(),l=t.getOptions();if(Di(l,e??{}))return a;Ni(a,"already-initialized")}return t.initialize({options:e})}function kO(i,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Or);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function LO(i,e,t){const r=Ao(i);Re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const a=!1,l=PA(e),{host:u,port:f}=jO(e),d=f===null?"":`:${f}`,p={url:`${l}//${u}${d}/`},y=Object.freeze({host:u,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:a})});if(!r._canInitEmulator){Re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Re(Di(p,r.config.emulator)&&Di(y,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=p,r.emulatorConfig=y,r.settings.appVerificationDisabledForTesting=!0,wo(u)?(A_(`${l}//${u}${d}`),iA("Auth",!0)):UO()}function PA(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function jO(i){const e=PA(i),t=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",a=/^(\[[^\]]+\])(:|$)/.exec(r);if(a){const l=a[1];return{host:l,port:Kb(r.substr(l.length+1))}}else{const[l,u]=r.split(":");return{host:l,port:Kb(u)}}}function Kb(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function UO(){function i(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Nr("not implemented")}_getIdTokenResponse(e){return Nr("not implemented")}_linkToIdToken(e,t){return Nr("not implemented")}_getReauthenticationResolver(e){return Nr("not implemented")}}async function zO(i,e){return ca(i,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BO(i,e){return bh(i,"POST","/v1/accounts:signInWithPassword",ua(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FO(i,e){return bh(i,"POST","/v1/accounts:signInWithEmailLink",ua(i,e))}async function qO(i,e){return bh(i,"POST","/v1/accounts:signInWithEmailLink",ua(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh extends P_{constructor(e,t,r,a=null){super("password",r),this._email=e,this._password=t,this._tenantId=a}static _fromEmailAndPassword(e,t){return new nh(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new nh(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uy(e,t,"signInWithPassword",BO);case"emailLink":return FO(e,{email:this._email,oobCode:this._password});default:Ni(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uy(e,r,"signUpPassword",zO);case"emailLink":return qO(e,{idToken:t,email:this._email,oobCode:this._password});default:Ni(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pl(i,e){return bh(i,"POST","/v1/accounts:signInWithIdp",ua(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO="http://localhost";class co extends P_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new co(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ni("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:a}=t,l=R_(t,["providerId","signInMethod"]);if(!r||!a)return null;const u=new co(r,a);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return Pl(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,Pl(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Pl(e,t)}buildRequest(){const e={requestUri:HO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=vh(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GO(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function KO(i){const e=kc(Lc(i)).link,t=e?kc(Lc(e)).deep_link_id:null,r=kc(Lc(i)).deep_link_id;return(r?kc(Lc(r)).link:null)||r||t||e||i}class V_{constructor(e){var t,r,a,l,u,f;const d=kc(Lc(e)),p=(t=d.apiKey)!==null&&t!==void 0?t:null,y=(r=d.oobCode)!==null&&r!==void 0?r:null,_=GO((a=d.mode)!==null&&a!==void 0?a:null);Re(p&&y&&_,"argument-error"),this.apiKey=p,this.operation=_,this.code=y,this.continueUrl=(l=d.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(u=d.lang)!==null&&u!==void 0?u:null,this.tenantId=(f=d.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=KO(e);try{return new V_(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(){this.providerId=hu.PROVIDER_ID}static credential(e,t){return nh._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=V_.parseLink(t);return Re(r,"argument-error"),nh._fromEmailAndCode(e,r.code,r.tenantId)}}hu.PROVIDER_ID="password";hu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";hu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh extends VA{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs extends Sh{constructor(){super("facebook.com")}static credential(e){return co._fromParams({providerId:Bs.PROVIDER_ID,signInMethod:Bs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bs.credentialFromTaggedObject(e)}static credentialFromError(e){return Bs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bs.credential(e.oauthAccessToken)}catch{return null}}}Bs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Bs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends Sh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return co._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Fs.credential(t,r)}catch{return null}}}Fs.GOOGLE_SIGN_IN_METHOD="google.com";Fs.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs extends Sh{constructor(){super("github.com")}static credential(e){return co._fromParams({providerId:qs.PROVIDER_ID,signInMethod:qs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return qs.credentialFromTaggedObject(e)}static credentialFromError(e){return qs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return qs.credential(e.oauthAccessToken)}catch{return null}}}qs.GITHUB_SIGN_IN_METHOD="github.com";qs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs extends Sh{constructor(){super("twitter.com")}static credential(e,t){return co._fromParams({providerId:Hs.PROVIDER_ID,signInMethod:Hs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Hs.credentialFromTaggedObject(e)}static credentialFromError(e){return Hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Hs.credential(t,r)}catch{return null}}}Hs.TWITTER_SIGN_IN_METHOD="twitter.com";Hs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $O(i,e){return bh(i,"POST","/v1/accounts:signUp",ua(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,a=!1){const l=await xi._fromIdTokenResponse(e,r,a),u=$b(r);return new ho({user:l,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const a=$b(r);return new ho({user:e,providerId:a,_tokenResponse:r,operationType:t})}}function $b(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd extends Hr{constructor(e,t,r,a){var l;super(t.code,t.message),this.operationType=r,this.user=a,Object.setPrototypeOf(this,Yd.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,a){return new Yd(e,t,r,a)}}function MA(i,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(i):t._getIdTokenResponse(i)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Yd._fromErrorAndOperation(i,l,e,r):l})}async function QO(i,e,t=!1){const r=await th(i,e._linkToIdToken(i.auth,await i.getIdToken()),t);return ho._forOperation(i,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XO(i,e,t=!1){const{auth:r}=i;if(gi(r.app))return Promise.reject(kr(r));const a="reauthenticate";try{const l=await th(i,MA(r,a,e,i),t);Re(l.idToken,r,"internal-error");const u=N_(l.idToken);Re(u,r,"internal-error");const{sub:f}=u;return Re(i.uid===f,r,"user-mismatch"),ho._forOperation(i,a,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&Ni(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kA(i,e,t=!1){if(gi(i.app))return Promise.reject(kr(i));const r="signIn",a=await MA(i,r,e),l=await ho._fromIdTokenResponse(i,r,a);return t||await i._updateCurrentUser(l.user),l}async function YO(i,e){return kA(Ao(i),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LA(i){const e=Ao(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function WO(i,e,t){if(gi(i.app))return Promise.reject(kr(i));const r=Ao(i),u=await Uy(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",$O).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&LA(i),d}),f=await ho._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(f.user),f}function JO(i,e,t){return gi(i.app)?Promise.reject(kr(i)):YO(ht(i),hu.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&LA(i),r})}function ZO(i,e,t,r){return ht(i).onIdTokenChanged(e,t,r)}function eP(i,e,t){return ht(i).beforeAuthStateChanged(e,t)}function tP(i,e,t,r){return ht(i).onAuthStateChanged(e,t,r)}function nP(i){return ht(i).signOut()}const Wd="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Wd,"1"),this.storage.removeItem(Wd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iP=1e3,rP=10;class UA extends jA{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=CA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),a=this.localCache[t];r!==a&&e(t,a,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,d)=>{this.notifyListeners(u,d)});return}const r=e.key;t?this.detachListener():this.stopPolling();const a=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},l=this.storage.getItem(r);TO()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,rP):a()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},iP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}UA.type="LOCAL";const sP=UA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA extends jA{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}zA.type="SESSION";const BA=zA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aP(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(a=>a.isListeningto(e));if(t)return t;const r=new Em(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:a,data:l}=t.data,u=this.handlersMap[a];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:a});const f=Array.from(u).map(async p=>p(t.origin,l)),d=await aP(f);t.ports[0].postMessage({status:"done",eventId:r,eventType:a,response:d})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Em.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M_(i="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return i+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const a=typeof MessageChannel<"u"?new MessageChannel:null;if(!a)throw new Error("connection_unavailable");let l,u;return new Promise((f,d)=>{const p=M_("",20);a.port1.start();const y=setTimeout(()=>{d(new Error("unsupported_event"))},r);u={messageChannel:a,onMessage(_){const b=_;if(b.data.eventId===p)switch(b.data.status){case"ack":clearTimeout(y),l=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(b.data.response);break;default:clearTimeout(y),clearTimeout(l),d(new Error("invalid_response"));break}}},this.handlers.add(u),a.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:p,data:t},[a.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zi(){return window}function lP(i){Zi().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(){return typeof Zi().WorkerGlobalScope<"u"&&typeof Zi().importScripts=="function"}async function uP(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cP(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function hP(){return FA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="firebaseLocalStorageDb",fP=1,Jd="firebaseLocalStorage",HA="fbase_key";class wh{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Tm(i,e){return i.transaction([Jd],e?"readwrite":"readonly").objectStore(Jd)}function dP(){const i=indexedDB.deleteDatabase(qA);return new wh(i).toPromise()}function zy(){const i=indexedDB.open(qA,fP);return new Promise((e,t)=>{i.addEventListener("error",()=>{t(i.error)}),i.addEventListener("upgradeneeded",()=>{const r=i.result;try{r.createObjectStore(Jd,{keyPath:HA})}catch(a){t(a)}}),i.addEventListener("success",async()=>{const r=i.result;r.objectStoreNames.contains(Jd)?e(r):(r.close(),await dP(),e(await zy()))})})}async function Qb(i,e,t){const r=Tm(i,!0).put({[HA]:e,value:t});return new wh(r).toPromise()}async function mP(i,e){const t=Tm(i,!1).get(e),r=await new wh(t).toPromise();return r===void 0?null:r.value}function Xb(i,e){const t=Tm(i,!0).delete(e);return new wh(t).toPromise()}const pP=800,gP=3;class GA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await zy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>gP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return FA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Em._getInstance(hP()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await uP(),!this.activeServiceWorker)return;this.sender=new oP(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cP()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await zy();return await Qb(e,Wd,"1"),await Xb(e,Wd),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>Qb(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>mP(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Xb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(a=>{const l=Tm(a,!1).getAll();return new wh(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:a,value:l}of e)r.add(a),JSON.stringify(this.localCache[a])!==JSON.stringify(l)&&(this.notifyListeners(a,l),t.push(a));for(const a of Object.keys(this.localCache))this.localCache[a]&&!r.has(a)&&(this.notifyListeners(a,null),t.push(a));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const a of Array.from(r))a(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}GA.type="LOCAL";const yP=GA;new Th(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _P(i,e){return e?Or(e):(Re(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_ extends P_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Pl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Pl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Pl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function vP(i){return kA(i.auth,new k_(i),i.bypassAuthState)}function EP(i){const{auth:e,user:t}=i;return Re(t,e,"internal-error"),XO(t,new k_(i),i.bypassAuthState)}async function TP(i){const{auth:e,user:t}=i;return Re(t,e,"internal-error"),QO(t,new k_(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,t,r,a,l=!1){this.auth=e,this.resolver=r,this.user=a,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:a,tenantId:l,error:u,type:f}=e;if(u){this.reject(u);return}const d={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:a||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(d))}catch(p){this.reject(p)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return vP;case"linkViaPopup":case"linkViaRedirect":return TP;case"reauthViaPopup":case"reauthViaRedirect":return EP;default:Ni(this.auth,"internal-error")}}resolve(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){zr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bP=new Th(2e3,1e4);class Dl extends KA{constructor(e,t,r,a,l){super(e,t,a,l),this.provider=r,this.authWindow=null,this.pollId=null,Dl.currentPopupAction&&Dl.currentPopupAction.cancel(),Dl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){zr(this.filter.length===1,"Popup operations only handle one event");const e=M_();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Ji(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Ji(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Dl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ji(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,bP.get())};e()}}Dl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP="pendingRedirect",Nd=new Map;class wP extends KA{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Nd.get(this.auth._key());if(!e){try{const r=await AP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Nd.set(this.auth._key(),e)}return this.bypassAuthState||Nd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function AP(i,e){const t=RP(e),r=xP(i);if(!await r._isAvailable())return!1;const a=await r._get(t)==="true";return await r._remove(t),a}function IP(i,e){Nd.set(i._key(),e)}function xP(i){return Or(i._redirectPersistence)}function RP(i){return Dd(SP,i.config.apiKey,i.name)}async function CP(i,e,t=!1){if(gi(i.app))return Promise.reject(kr(i));const r=Ao(i),a=_P(r,e),u=await new wP(r,a,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DP=600*1e3;class NP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!OP(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!$A(e)){const a=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Ji(this.auth,a))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=DP&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yb(e))}saveEventToCache(e){this.cachedEventUids.add(Yb(e)),this.lastProcessedEventTime=Date.now()}}function Yb(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function $A({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function OP(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $A(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PP(i,e={}){return ca(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,MP=/^https?/;async function kP(i){if(i.config.emulator)return;const{authorizedDomains:e}=await PP(i);for(const t of e)try{if(LP(t))return}catch{}Ni(i,"unauthorized-domain")}function LP(i){const e=Ly(),{protocol:t,hostname:r}=new URL(e);if(i.startsWith("chrome-extension://")){const u=new URL(i);return u.hostname===""&&r===""?t==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!MP.test(t))return!1;if(VP.test(i))return r===i;const a=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP=new Th(3e4,6e4);function Wb(){const i=Zi().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let t=0;t<i.CP.length;t++)i.CP[t]=null}}function UP(i){return new Promise((e,t)=>{var r,a,l;function u(){Wb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Wb(),t(Ji(i,"network-request-failed"))},timeout:jP.get()})}if(!((a=(r=Zi().gapi)===null||r===void 0?void 0:r.iframes)===null||a===void 0)&&a.Iframe)e(gapi.iframes.getContext());else if(!((l=Zi().gapi)===null||l===void 0)&&l.load)u();else{const f=DO("iframefcb");return Zi()[f]=()=>{gapi.load?u():t(Ji(i,"network-request-failed"))},NA(`${CO()}?onload=${f}`).catch(d=>t(d))}}).catch(e=>{throw Od=null,e})}let Od=null;function zP(i){return Od=Od||UP(i),Od}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP=new Th(5e3,15e3),FP="__/auth/iframe",qP="emulator/auth/iframe",HP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},GP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function KP(i){const e=i.config;Re(e.authDomain,i,"auth-domain-config-required");const t=e.emulator?D_(e,qP):`https://${i.config.authDomain}/${FP}`,r={apiKey:e.apiKey,appName:i.name,v:cu},a=GP.get(i.config.apiHost);a&&(r.eid=a);const l=i._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${vh(r).slice(1)}`}async function $P(i){const e=await zP(i),t=Zi().gapi;return Re(t,i,"internal-error"),e.open({where:document.body,url:KP(i),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HP,dontclear:!0},r=>new Promise(async(a,l)=>{await r.restyle({setHideOnLeave:!1});const u=Ji(i,"network-request-failed"),f=Zi().setTimeout(()=>{l(u)},BP.get());function d(){Zi().clearTimeout(f),a(r)}r.ping(d).then(d,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},XP=500,YP=600,WP="_blank",JP="http://localhost";class Jb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function ZP(i,e,t,r=XP,a=YP){const l=Math.max((window.screen.availHeight-a)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let f="";const d=Object.assign(Object.assign({},QP),{width:r.toString(),height:a.toString(),top:l,left:u}),p=$t().toLowerCase();t&&(f=wA(p)?WP:t),bA(p)&&(e=e||JP,d.scrollbars="yes");const y=Object.entries(d).reduce((b,[A,N])=>`${b}${A}=${N},`,"");if(EO(p)&&f!=="_self")return eV(e||"",f),new Jb(null);const _=window.open(e||"",f,y);Re(_,i,"popup-blocked");try{_.focus()}catch{}return new Jb(_)}function eV(i,e){const t=document.createElement("a");t.href=i,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tV="__/auth/handler",nV="emulator/auth/handler",iV=encodeURIComponent("fac");async function Zb(i,e,t,r,a,l){Re(i.config.authDomain,i,"auth-domain-config-required"),Re(i.config.apiKey,i,"invalid-api-key");const u={apiKey:i.config.apiKey,appName:i.name,authType:t,redirectUrl:r,v:cu,eventId:a};if(e instanceof VA){e.setDefaultLanguage(i.languageCode),u.providerId=e.providerId||"",BD(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,_]of Object.entries({}))u[y]=_}if(e instanceof Sh){const y=e.getScopes().filter(_=>_!=="");y.length>0&&(u.scopes=y.join(","))}i.tenantId&&(u.tid=i.tenantId);const f=u;for(const y of Object.keys(f))f[y]===void 0&&delete f[y];const d=await i._getAppCheckToken(),p=d?`#${iV}=${encodeURIComponent(d)}`:"";return`${rV(i)}?${vh(f).slice(1)}${p}`}function rV({config:i}){return i.emulator?D_(i,nV):`https://${i.authDomain}/${tV}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const py="webStorageSupport";class sV{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=BA,this._completeRedirectFn=CP,this._overrideRedirectResult=IP}async _openPopup(e,t,r,a){var l;zr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const u=await Zb(e,t,r,Ly(),a);return ZP(e,u,M_())}async _openRedirect(e,t,r,a){await this._originValidation(e);const l=await Zb(e,t,r,Ly(),a);return lP(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:a,promise:l}=this.eventManagers[t];return a?Promise.resolve(a):(zr(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await $P(e),r=new NP(e);return t.register("authEvent",a=>(Re(a==null?void 0:a.authEvent,e,"invalid-auth-event"),{status:r.onEvent(a.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(py,{type:py},a=>{var l;const u=(l=a==null?void 0:a[0])===null||l===void 0?void 0:l[py];u!==void 0&&t(!!u),Ni(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=kP(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return CA()||SA()||O_()}}const aV=sV;var eS="@firebase/auth",tS="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lV(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function uV(i){Ll(new uo("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),a=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=r.options;Re(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const d={apiKey:u,authDomain:f,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:DA(i)},p=new IO(r,a,l,d);return kO(p,t),p},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ll(new uo("auth-internal",e=>{const t=Ao(e.getProvider("auth").getImmediate());return(r=>new oV(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Js(eS,tS,lV(i)),Js(eS,tS,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV=300,hV=nA("authIdTokenMaxAge")||cV;let nS=null;const fV=i=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>hV)return;const a=t==null?void 0:t.token;nS!==a&&(nS=a,await fetch(i,{method:a?"POST":"DELETE",headers:a?{Authorization:`Bearer ${a}`}:{}}))};function dV(i=hA()){const e=Eh(i,"auth");if(e.isInitialized())return e.getImmediate();const t=MO(i,{popupRedirectResolver:aV,persistence:[yP,sP,BA]}),r=nA("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const u=fV(l.toString());eP(t,u,()=>u(t.currentUser)),ZO(t,f=>u(f))}}const a=eA("auth");return a&&LO(t,`http://${a}`),t}function mV(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}xO({loadJS(i){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",i),r.onload=e,r.onerror=a=>{const l=Ji("internal-error");l.customData=a,t(l)},r.type="text/javascript",r.charset="UTF-8",mV().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});uV("Browser");var iS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Zs,QA;(function(){var i;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,C){function V(){}V.prototype=C.prototype,R.D=C.prototype,R.prototype=new V,R.prototype.constructor=R,R.C=function(j,F,G){for(var O=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)O[dt-2]=arguments[dt];return C.prototype[F].apply(j,O)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(R,C,V){V||(V=0);var j=Array(16);if(typeof C=="string")for(var F=0;16>F;++F)j[F]=C.charCodeAt(V++)|C.charCodeAt(V++)<<8|C.charCodeAt(V++)<<16|C.charCodeAt(V++)<<24;else for(F=0;16>F;++F)j[F]=C[V++]|C[V++]<<8|C[V++]<<16|C[V++]<<24;C=R.g[0],V=R.g[1],F=R.g[2];var G=R.g[3],O=C+(G^V&(F^G))+j[0]+3614090360&4294967295;C=V+(O<<7&4294967295|O>>>25),O=G+(F^C&(V^F))+j[1]+3905402710&4294967295,G=C+(O<<12&4294967295|O>>>20),O=F+(V^G&(C^V))+j[2]+606105819&4294967295,F=G+(O<<17&4294967295|O>>>15),O=V+(C^F&(G^C))+j[3]+3250441966&4294967295,V=F+(O<<22&4294967295|O>>>10),O=C+(G^V&(F^G))+j[4]+4118548399&4294967295,C=V+(O<<7&4294967295|O>>>25),O=G+(F^C&(V^F))+j[5]+1200080426&4294967295,G=C+(O<<12&4294967295|O>>>20),O=F+(V^G&(C^V))+j[6]+2821735955&4294967295,F=G+(O<<17&4294967295|O>>>15),O=V+(C^F&(G^C))+j[7]+4249261313&4294967295,V=F+(O<<22&4294967295|O>>>10),O=C+(G^V&(F^G))+j[8]+1770035416&4294967295,C=V+(O<<7&4294967295|O>>>25),O=G+(F^C&(V^F))+j[9]+2336552879&4294967295,G=C+(O<<12&4294967295|O>>>20),O=F+(V^G&(C^V))+j[10]+4294925233&4294967295,F=G+(O<<17&4294967295|O>>>15),O=V+(C^F&(G^C))+j[11]+2304563134&4294967295,V=F+(O<<22&4294967295|O>>>10),O=C+(G^V&(F^G))+j[12]+1804603682&4294967295,C=V+(O<<7&4294967295|O>>>25),O=G+(F^C&(V^F))+j[13]+4254626195&4294967295,G=C+(O<<12&4294967295|O>>>20),O=F+(V^G&(C^V))+j[14]+2792965006&4294967295,F=G+(O<<17&4294967295|O>>>15),O=V+(C^F&(G^C))+j[15]+1236535329&4294967295,V=F+(O<<22&4294967295|O>>>10),O=C+(F^G&(V^F))+j[1]+4129170786&4294967295,C=V+(O<<5&4294967295|O>>>27),O=G+(V^F&(C^V))+j[6]+3225465664&4294967295,G=C+(O<<9&4294967295|O>>>23),O=F+(C^V&(G^C))+j[11]+643717713&4294967295,F=G+(O<<14&4294967295|O>>>18),O=V+(G^C&(F^G))+j[0]+3921069994&4294967295,V=F+(O<<20&4294967295|O>>>12),O=C+(F^G&(V^F))+j[5]+3593408605&4294967295,C=V+(O<<5&4294967295|O>>>27),O=G+(V^F&(C^V))+j[10]+38016083&4294967295,G=C+(O<<9&4294967295|O>>>23),O=F+(C^V&(G^C))+j[15]+3634488961&4294967295,F=G+(O<<14&4294967295|O>>>18),O=V+(G^C&(F^G))+j[4]+3889429448&4294967295,V=F+(O<<20&4294967295|O>>>12),O=C+(F^G&(V^F))+j[9]+568446438&4294967295,C=V+(O<<5&4294967295|O>>>27),O=G+(V^F&(C^V))+j[14]+3275163606&4294967295,G=C+(O<<9&4294967295|O>>>23),O=F+(C^V&(G^C))+j[3]+4107603335&4294967295,F=G+(O<<14&4294967295|O>>>18),O=V+(G^C&(F^G))+j[8]+1163531501&4294967295,V=F+(O<<20&4294967295|O>>>12),O=C+(F^G&(V^F))+j[13]+2850285829&4294967295,C=V+(O<<5&4294967295|O>>>27),O=G+(V^F&(C^V))+j[2]+4243563512&4294967295,G=C+(O<<9&4294967295|O>>>23),O=F+(C^V&(G^C))+j[7]+1735328473&4294967295,F=G+(O<<14&4294967295|O>>>18),O=V+(G^C&(F^G))+j[12]+2368359562&4294967295,V=F+(O<<20&4294967295|O>>>12),O=C+(V^F^G)+j[5]+4294588738&4294967295,C=V+(O<<4&4294967295|O>>>28),O=G+(C^V^F)+j[8]+2272392833&4294967295,G=C+(O<<11&4294967295|O>>>21),O=F+(G^C^V)+j[11]+1839030562&4294967295,F=G+(O<<16&4294967295|O>>>16),O=V+(F^G^C)+j[14]+4259657740&4294967295,V=F+(O<<23&4294967295|O>>>9),O=C+(V^F^G)+j[1]+2763975236&4294967295,C=V+(O<<4&4294967295|O>>>28),O=G+(C^V^F)+j[4]+1272893353&4294967295,G=C+(O<<11&4294967295|O>>>21),O=F+(G^C^V)+j[7]+4139469664&4294967295,F=G+(O<<16&4294967295|O>>>16),O=V+(F^G^C)+j[10]+3200236656&4294967295,V=F+(O<<23&4294967295|O>>>9),O=C+(V^F^G)+j[13]+681279174&4294967295,C=V+(O<<4&4294967295|O>>>28),O=G+(C^V^F)+j[0]+3936430074&4294967295,G=C+(O<<11&4294967295|O>>>21),O=F+(G^C^V)+j[3]+3572445317&4294967295,F=G+(O<<16&4294967295|O>>>16),O=V+(F^G^C)+j[6]+76029189&4294967295,V=F+(O<<23&4294967295|O>>>9),O=C+(V^F^G)+j[9]+3654602809&4294967295,C=V+(O<<4&4294967295|O>>>28),O=G+(C^V^F)+j[12]+3873151461&4294967295,G=C+(O<<11&4294967295|O>>>21),O=F+(G^C^V)+j[15]+530742520&4294967295,F=G+(O<<16&4294967295|O>>>16),O=V+(F^G^C)+j[2]+3299628645&4294967295,V=F+(O<<23&4294967295|O>>>9),O=C+(F^(V|~G))+j[0]+4096336452&4294967295,C=V+(O<<6&4294967295|O>>>26),O=G+(V^(C|~F))+j[7]+1126891415&4294967295,G=C+(O<<10&4294967295|O>>>22),O=F+(C^(G|~V))+j[14]+2878612391&4294967295,F=G+(O<<15&4294967295|O>>>17),O=V+(G^(F|~C))+j[5]+4237533241&4294967295,V=F+(O<<21&4294967295|O>>>11),O=C+(F^(V|~G))+j[12]+1700485571&4294967295,C=V+(O<<6&4294967295|O>>>26),O=G+(V^(C|~F))+j[3]+2399980690&4294967295,G=C+(O<<10&4294967295|O>>>22),O=F+(C^(G|~V))+j[10]+4293915773&4294967295,F=G+(O<<15&4294967295|O>>>17),O=V+(G^(F|~C))+j[1]+2240044497&4294967295,V=F+(O<<21&4294967295|O>>>11),O=C+(F^(V|~G))+j[8]+1873313359&4294967295,C=V+(O<<6&4294967295|O>>>26),O=G+(V^(C|~F))+j[15]+4264355552&4294967295,G=C+(O<<10&4294967295|O>>>22),O=F+(C^(G|~V))+j[6]+2734768916&4294967295,F=G+(O<<15&4294967295|O>>>17),O=V+(G^(F|~C))+j[13]+1309151649&4294967295,V=F+(O<<21&4294967295|O>>>11),O=C+(F^(V|~G))+j[4]+4149444226&4294967295,C=V+(O<<6&4294967295|O>>>26),O=G+(V^(C|~F))+j[11]+3174756917&4294967295,G=C+(O<<10&4294967295|O>>>22),O=F+(C^(G|~V))+j[2]+718787259&4294967295,F=G+(O<<15&4294967295|O>>>17),O=V+(G^(F|~C))+j[9]+3951481745&4294967295,R.g[0]=R.g[0]+C&4294967295,R.g[1]=R.g[1]+(F+(O<<21&4294967295|O>>>11))&4294967295,R.g[2]=R.g[2]+F&4294967295,R.g[3]=R.g[3]+G&4294967295}r.prototype.u=function(R,C){C===void 0&&(C=R.length);for(var V=C-this.blockSize,j=this.B,F=this.h,G=0;G<C;){if(F==0)for(;G<=V;)a(this,R,G),G+=this.blockSize;if(typeof R=="string"){for(;G<C;)if(j[F++]=R.charCodeAt(G++),F==this.blockSize){a(this,j),F=0;break}}else for(;G<C;)if(j[F++]=R[G++],F==this.blockSize){a(this,j),F=0;break}}this.h=F,this.o+=C},r.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var C=1;C<R.length-8;++C)R[C]=0;var V=8*this.o;for(C=R.length-8;C<R.length;++C)R[C]=V&255,V/=256;for(this.u(R),R=Array(16),C=V=0;4>C;++C)for(var j=0;32>j;j+=8)R[V++]=this.g[C]>>>j&255;return R};function l(R,C){var V=f;return Object.prototype.hasOwnProperty.call(V,R)?V[R]:V[R]=C(R)}function u(R,C){this.h=C;for(var V=[],j=!0,F=R.length-1;0<=F;F--){var G=R[F]|0;j&&G==C||(V[F]=G,j=!1)}this.g=V}var f={};function d(R){return-128<=R&&128>R?l(R,function(C){return new u([C|0],0>C?-1:0)}):new u([R|0],0>R?-1:0)}function p(R){if(isNaN(R)||!isFinite(R))return _;if(0>R)return P(p(-R));for(var C=[],V=1,j=0;R>=V;j++)C[j]=R/V|0,V*=4294967296;return new u(C,0)}function y(R,C){if(R.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(R.charAt(0)=="-")return P(y(R.substring(1),C));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var V=p(Math.pow(C,8)),j=_,F=0;F<R.length;F+=8){var G=Math.min(8,R.length-F),O=parseInt(R.substring(F,F+G),C);8>G?(G=p(Math.pow(C,G)),j=j.j(G).add(p(O))):(j=j.j(V),j=j.add(p(O)))}return j}var _=d(0),b=d(1),A=d(16777216);i=u.prototype,i.m=function(){if(M(this))return-P(this).m();for(var R=0,C=1,V=0;V<this.g.length;V++){var j=this.i(V);R+=(0<=j?j:4294967296+j)*C,C*=4294967296}return R},i.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(N(this))return"0";if(M(this))return"-"+P(this).toString(R);for(var C=p(Math.pow(R,6)),V=this,j="";;){var F=J(V,C).g;V=q(V,F.j(C));var G=((0<V.g.length?V.g[0]:V.h)>>>0).toString(R);if(V=F,N(V))return G+j;for(;6>G.length;)G="0"+G;j=G+j}},i.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function N(R){if(R.h!=0)return!1;for(var C=0;C<R.g.length;C++)if(R.g[C]!=0)return!1;return!0}function M(R){return R.h==-1}i.l=function(R){return R=q(this,R),M(R)?-1:N(R)?0:1};function P(R){for(var C=R.g.length,V=[],j=0;j<C;j++)V[j]=~R.g[j];return new u(V,~R.h).add(b)}i.abs=function(){return M(this)?P(this):this},i.add=function(R){for(var C=Math.max(this.g.length,R.g.length),V=[],j=0,F=0;F<=C;F++){var G=j+(this.i(F)&65535)+(R.i(F)&65535),O=(G>>>16)+(this.i(F)>>>16)+(R.i(F)>>>16);j=O>>>16,G&=65535,O&=65535,V[F]=O<<16|G}return new u(V,V[V.length-1]&-2147483648?-1:0)};function q(R,C){return R.add(P(C))}i.j=function(R){if(N(this)||N(R))return _;if(M(this))return M(R)?P(this).j(P(R)):P(P(this).j(R));if(M(R))return P(this.j(P(R)));if(0>this.l(A)&&0>R.l(A))return p(this.m()*R.m());for(var C=this.g.length+R.g.length,V=[],j=0;j<2*C;j++)V[j]=0;for(j=0;j<this.g.length;j++)for(var F=0;F<R.g.length;F++){var G=this.i(j)>>>16,O=this.i(j)&65535,dt=R.i(F)>>>16,Rt=R.i(F)&65535;V[2*j+2*F]+=O*Rt,$(V,2*j+2*F),V[2*j+2*F+1]+=G*Rt,$(V,2*j+2*F+1),V[2*j+2*F+1]+=O*dt,$(V,2*j+2*F+1),V[2*j+2*F+2]+=G*dt,$(V,2*j+2*F+2)}for(j=0;j<C;j++)V[j]=V[2*j+1]<<16|V[2*j];for(j=C;j<2*C;j++)V[j]=0;return new u(V,0)};function $(R,C){for(;(R[C]&65535)!=R[C];)R[C+1]+=R[C]>>>16,R[C]&=65535,C++}function B(R,C){this.g=R,this.h=C}function J(R,C){if(N(C))throw Error("division by zero");if(N(R))return new B(_,_);if(M(R))return C=J(P(R),C),new B(P(C.g),P(C.h));if(M(C))return C=J(R,P(C)),new B(P(C.g),C.h);if(30<R.g.length){if(M(R)||M(C))throw Error("slowDivide_ only works with positive integers.");for(var V=b,j=C;0>=j.l(R);)V=fe(V),j=fe(j);var F=de(V,1),G=de(j,1);for(j=de(j,2),V=de(V,2);!N(j);){var O=G.add(j);0>=O.l(R)&&(F=F.add(V),G=O),j=de(j,1),V=de(V,1)}return C=q(R,F.j(C)),new B(F,C)}for(F=_;0<=R.l(C);){for(V=Math.max(1,Math.floor(R.m()/C.m())),j=Math.ceil(Math.log(V)/Math.LN2),j=48>=j?1:Math.pow(2,j-48),G=p(V),O=G.j(C);M(O)||0<O.l(R);)V-=j,G=p(V),O=G.j(C);N(G)&&(G=b),F=F.add(G),R=q(R,O)}return new B(F,R)}i.A=function(R){return J(this,R).h},i.and=function(R){for(var C=Math.max(this.g.length,R.g.length),V=[],j=0;j<C;j++)V[j]=this.i(j)&R.i(j);return new u(V,this.h&R.h)},i.or=function(R){for(var C=Math.max(this.g.length,R.g.length),V=[],j=0;j<C;j++)V[j]=this.i(j)|R.i(j);return new u(V,this.h|R.h)},i.xor=function(R){for(var C=Math.max(this.g.length,R.g.length),V=[],j=0;j<C;j++)V[j]=this.i(j)^R.i(j);return new u(V,this.h^R.h)};function fe(R){for(var C=R.g.length+1,V=[],j=0;j<C;j++)V[j]=R.i(j)<<1|R.i(j-1)>>>31;return new u(V,R.h)}function de(R,C){var V=C>>5;C%=32;for(var j=R.g.length-V,F=[],G=0;G<j;G++)F[G]=0<C?R.i(G+V)>>>C|R.i(G+V+1)<<32-C:R.i(G+V);return new u(F,R.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,QA=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=p,u.fromString=y,Zs=u}).apply(typeof iS<"u"?iS:typeof self<"u"?self:typeof window<"u"?window:{});var yd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XA,jc,YA,Pd,By,WA,JA,ZA;(function(){var i,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(h,v,T){return h==Array.prototype||h==Object.prototype||(h[v]=T.value),h};function t(h){h=[typeof globalThis=="object"&&globalThis,h,typeof window=="object"&&window,typeof self=="object"&&self,typeof yd=="object"&&yd];for(var v=0;v<h.length;++v){var T=h[v];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var r=t(this);function a(h,v){if(v)e:{var T=r;h=h.split(".");for(var I=0;I<h.length-1;I++){var Q=h[I];if(!(Q in T))break e;T=T[Q]}h=h[h.length-1],I=T[h],v=v(I),v!=I&&v!=null&&e(T,h,{configurable:!0,writable:!0,value:v})}}function l(h,v){h instanceof String&&(h+="");var T=0,I=!1,Q={next:function(){if(!I&&T<h.length){var ne=T++;return{value:v(ne,h[ne]),done:!1}}return I=!0,{done:!0,value:void 0}}};return Q[Symbol.iterator]=function(){return Q},Q}a("Array.prototype.values",function(h){return h||function(){return l(this,function(v,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function d(h){var v=typeof h;return v=v!="object"?v:h?Array.isArray(h)?"array":v:"null",v=="array"||v=="object"&&typeof h.length=="number"}function p(h){var v=typeof h;return v=="object"&&h!=null||v=="function"}function y(h,v,T){return h.call.apply(h.bind,arguments)}function _(h,v,T){if(!h)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var Q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Q,I),h.apply(v,Q)}}return function(){return h.apply(v,arguments)}}function b(h,v,T){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:_,b.apply(null,arguments)}function A(h,v){var T=Array.prototype.slice.call(arguments,1);return function(){var I=T.slice();return I.push.apply(I,arguments),h.apply(this,I)}}function N(h,v){function T(){}T.prototype=v.prototype,h.aa=v.prototype,h.prototype=new T,h.prototype.constructor=h,h.Qb=function(I,Q,ne){for(var me=Array(arguments.length-2),Ze=2;Ze<arguments.length;Ze++)me[Ze-2]=arguments[Ze];return v.prototype[Q].apply(I,me)}}function M(h){const v=h.length;if(0<v){const T=Array(v);for(let I=0;I<v;I++)T[I]=h[I];return T}return[]}function P(h,v){for(let T=1;T<arguments.length;T++){const I=arguments[T];if(d(I)){const Q=h.length||0,ne=I.length||0;h.length=Q+ne;for(let me=0;me<ne;me++)h[Q+me]=I[me]}else h.push(I)}}class q{constructor(v,T){this.i=v,this.j=T,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function $(h){return/^[\s\xa0]*$/.test(h)}function B(){var h=f.navigator;return h&&(h=h.userAgent)?h:""}function J(h){return J[" "](h),h}J[" "]=function(){};var fe=B().indexOf("Gecko")!=-1&&!(B().toLowerCase().indexOf("webkit")!=-1&&B().indexOf("Edge")==-1)&&!(B().indexOf("Trident")!=-1||B().indexOf("MSIE")!=-1)&&B().indexOf("Edge")==-1;function de(h,v,T){for(const I in h)v.call(T,h[I],I,h)}function R(h,v){for(const T in h)v.call(void 0,h[T],T,h)}function C(h){const v={};for(const T in h)v[T]=h[T];return v}const V="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(h,v){let T,I;for(let Q=1;Q<arguments.length;Q++){I=arguments[Q];for(T in I)h[T]=I[T];for(let ne=0;ne<V.length;ne++)T=V[ne],Object.prototype.hasOwnProperty.call(I,T)&&(h[T]=I[T])}}function F(h){var v=1;h=h.split(":");const T=[];for(;0<v&&h.length;)T.push(h.shift()),v--;return h.length&&T.push(h.join(":")),T}function G(h){f.setTimeout(()=>{throw h},0)}function O(){var h=Ve;let v=null;return h.g&&(v=h.g,h.g=h.g.next,h.g||(h.h=null),v.next=null),v}class dt{constructor(){this.h=this.g=null}add(v,T){const I=Rt.get();I.set(v,T),this.h?this.h.next=I:this.g=I,this.h=I}}var Rt=new q(()=>new ie,h=>h.reset());class ie{constructor(){this.next=this.g=this.h=null}set(v,T){this.h=v,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let he,ye=!1,Ve=new dt,$e=()=>{const h=f.Promise.resolve(void 0);he=()=>{h.then(k)}};var k=()=>{for(var h;h=O();){try{h.h.call(h.g)}catch(T){G(T)}var v=Rt;v.j(h),100>v.h&&(v.h++,h.next=v.g,v.g=h)}ye=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ue(h,v){this.type=h,this.g=this.target=v,this.defaultPrevented=!1}ue.prototype.h=function(){this.defaultPrevented=!0};var ve=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var h=!1,v=Object.defineProperty({},"passive",{get:function(){h=!0}});try{const T=()=>{};f.addEventListener("test",T,v),f.removeEventListener("test",T,v)}catch{}return h})();function Ie(h,v){if(ue.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var T=this.type=h.type,I=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=v,v=h.relatedTarget){if(fe){e:{try{J(v.nodeName);var Q=!0;break e}catch{}Q=!1}Q||(v=null)}}else T=="mouseover"?v=h.fromElement:T=="mouseout"&&(v=h.toElement);this.relatedTarget=v,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=h.clientX!==void 0?h.clientX:h.pageX,this.clientY=h.clientY!==void 0?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType=typeof h.pointerType=="string"?h.pointerType:Ce[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&Ie.aa.h.call(this)}}N(Ie,ue);var Ce={2:"touch",3:"pen",4:"mouse"};Ie.prototype.h=function(){Ie.aa.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),an=0;function It(h,v,T,I,Q){this.listener=h,this.proxy=null,this.src=v,this.type=T,this.capture=!!I,this.ha=Q,this.key=++an,this.da=this.fa=!1}function Oi(h){h.da=!0,h.listener=null,h.proxy=null,h.src=null,h.ha=null}function rr(h){this.src=h,this.g={},this.h=0}rr.prototype.add=function(h,v,T,I,Q){var ne=h.toString();h=this.g[ne],h||(h=this.g[ne]=[],this.h++);var me=No(h,v,I,Q);return-1<me?(v=h[me],T||(v.fa=!1)):(v=new It(v,this.src,ne,!!I,Q),v.fa=T,h.push(v)),v};function Ea(h,v){var T=v.type;if(T in h.g){var I=h.g[T],Q=Array.prototype.indexOf.call(I,v,void 0),ne;(ne=0<=Q)&&Array.prototype.splice.call(I,Q,1),ne&&(Oi(v),h.g[T].length==0&&(delete h.g[T],h.h--))}}function No(h,v,T,I){for(var Q=0;Q<h.length;++Q){var ne=h[Q];if(!ne.da&&ne.listener==v&&ne.capture==!!T&&ne.ha==I)return Q}return-1}var vi="closure_lm_"+(1e6*Math.random()|0),Ta={};function Oo(h,v,T,I,Q){if(Array.isArray(v)){for(var ne=0;ne<v.length;ne++)Oo(h,v[ne],T,I,Q);return null}return T=Bh(T),h&&h[je]?h.K(v,T,p(I)?!!I.capture:!1,Q):Wm(h,v,T,!1,I,Q)}function Wm(h,v,T,I,Q,ne){if(!v)throw Error("Invalid event type");var me=p(Q)?!!Q.capture:!!Q,Ze=wu(h);if(Ze||(h[vi]=Ze=new rr(h)),T=Ze.add(v,T,I,me,ne),T.proxy)return T;if(I=zh(),T.proxy=I,I.src=h,I.listener=T,h.addEventListener)ve||(Q=me),Q===void 0&&(Q=!1),h.addEventListener(v.toString(),I,Q);else if(h.attachEvent)h.attachEvent(Vo(v.toString()),I);else if(h.addListener&&h.removeListener)h.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return T}function zh(){function h(T){return v.call(h.src,h.listener,T)}const v=Jm;return h}function Po(h,v,T,I,Q){if(Array.isArray(v))for(var ne=0;ne<v.length;ne++)Po(h,v[ne],T,I,Q);else I=p(I)?!!I.capture:!!I,T=Bh(T),h&&h[je]?(h=h.i,v=String(v).toString(),v in h.g&&(ne=h.g[v],T=No(ne,T,I,Q),-1<T&&(Oi(ne[T]),Array.prototype.splice.call(ne,T,1),ne.length==0&&(delete h.g[v],h.h--)))):h&&(h=wu(h))&&(v=h.g[v.toString()],h=-1,v&&(h=No(v,T,I,Q)),(T=-1<h?v[h]:null)&&ba(T))}function ba(h){if(typeof h!="number"&&h&&!h.da){var v=h.src;if(v&&v[je])Ea(v.i,h);else{var T=h.type,I=h.proxy;v.removeEventListener?v.removeEventListener(T,I,h.capture):v.detachEvent?v.detachEvent(Vo(T),I):v.addListener&&v.removeListener&&v.removeListener(I),(T=wu(v))?(Ea(T,h),T.h==0&&(T.src=null,v[vi]=null)):Oi(h)}}}function Vo(h){return h in Ta?Ta[h]:Ta[h]="on"+h}function Jm(h,v){if(h.da)h=!0;else{v=new Ie(v,this);var T=h.listener,I=h.ha||h.src;h.fa&&ba(h),h=T.call(I,v)}return h}function wu(h){return h=h[vi],h instanceof rr?h:null}var on="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bh(h){return typeof h=="function"?h:(h[on]||(h[on]=function(v){return h.handleEvent(v)}),h[on])}function Gt(){re.call(this),this.i=new rr(this),this.M=this,this.F=null}N(Gt,re),Gt.prototype[je]=!0,Gt.prototype.removeEventListener=function(h,v,T,I){Po(this,h,v,T,I)};function Yt(h,v){var T,I=h.F;if(I)for(T=[];I;I=I.F)T.push(I);if(h=h.M,I=v.type||v,typeof v=="string")v=new ue(v,h);else if(v instanceof ue)v.target=v.target||h;else{var Q=v;v=new ue(I,h),j(v,Q)}if(Q=!0,T)for(var ne=T.length-1;0<=ne;ne--){var me=v.g=T[ne];Q=sr(me,I,!0,v)&&Q}if(me=v.g=h,Q=sr(me,I,!0,v)&&Q,Q=sr(me,I,!1,v)&&Q,T)for(ne=0;ne<T.length;ne++)me=v.g=T[ne],Q=sr(me,I,!1,v)&&Q}Gt.prototype.N=function(){if(Gt.aa.N.call(this),this.i){var h=this.i,v;for(v in h.g){for(var T=h.g[v],I=0;I<T.length;I++)Oi(T[I]);delete h.g[v],h.h--}}this.F=null},Gt.prototype.K=function(h,v,T,I){return this.i.add(String(h),v,!1,T,I)},Gt.prototype.L=function(h,v,T,I){return this.i.add(String(h),v,!0,T,I)};function sr(h,v,T,I){if(v=h.i.g[String(v)],!v)return!0;v=v.concat();for(var Q=!0,ne=0;ne<v.length;++ne){var me=v[ne];if(me&&!me.da&&me.capture==T){var Ze=me.listener,jt=me.ha||me.src;me.fa&&Ea(h.i,me),Q=Ze.call(jt,I)!==!1&&Q}}return Q&&!I.defaultPrevented}function Fh(h,v,T){if(typeof h=="function")T&&(h=b(h,T));else if(h&&typeof h.handleEvent=="function")h=b(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:f.setTimeout(h,v||0)}function Au(h){h.g=Fh(()=>{h.g=null,h.i&&(h.i=!1,Au(h))},h.l);const v=h.h;h.h=null,h.m.apply(null,v)}class Zm extends re{constructor(v,T){super(),this.m=v,this.l=T,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Au(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sa(h){re.call(this),this.h=h,this.g={}}N(Sa,re);var Xr=[];function yn(h){de(h.g,function(v,T){this.g.hasOwnProperty(T)&&ba(v)},h),h.g={}}Sa.prototype.N=function(){Sa.aa.N.call(this),yn(this)},Sa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ri=f.JSON.stringify,An=f.JSON.parse,ep=class{stringify(h){return f.JSON.stringify(h,void 0)}parse(h){return f.JSON.parse(h,void 0)}};function Iu(){}Iu.prototype.h=null;function qh(h){return h.h||(h.h=h.i())}function wa(){}var Pi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Yr(){ue.call(this,"d")}N(Yr,ue);function Ei(){ue.call(this,"c")}N(Ei,ue);var si={},Wr=null;function Mo(){return Wr=Wr||new Gt}si.La="serverreachability";function xu(h){ue.call(this,si.La,h)}N(xu,ue);function ar(h){const v=Mo();Yt(v,new xu(v))}si.STAT_EVENT="statevent";function Jr(h,v){ue.call(this,si.STAT_EVENT,h),this.stat=v}N(Jr,ue);function ln(h){const v=Mo();Yt(v,new Jr(v,h))}si.Ma="timingevent";function Ru(h,v){ue.call(this,si.Ma,h),this.size=v}N(Ru,ue);function Zr(h,v){if(typeof h!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){h()},v)}function es(){this.g=!0}es.prototype.xa=function(){this.g=!1};function Cu(h,v,T,I,Q,ne){h.info(function(){if(h.g)if(ne)for(var me="",Ze=ne.split("&"),jt=0;jt<Ze.length;jt++){var Me=Ze[jt].split("=");if(1<Me.length){var Jt=Me[0];Me=Me[1];var Zt=Jt.split("_");me=2<=Zt.length&&Zt[1]=="type"?me+(Jt+"="+Me+"&"):me+(Jt+"=redacted&")}}else me=null;else me=ne;return"XMLHTTP REQ ("+I+") [attempt "+Q+"]: "+v+`
`+T+`
`+me})}function Du(h,v,T,I,Q,ne,me){h.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+Q+"]: "+v+`
`+T+`
`+ne+" "+me})}function or(h,v,T,I){h.info(function(){return"XMLHTTP TEXT ("+v+"): "+Vi(h,T)+(I?" "+I:"")})}function Hh(h,v){h.info(function(){return"TIMEOUT: "+v})}es.prototype.info=function(){};function Vi(h,v){if(!h.g)return v;if(!v)return null;try{var T=JSON.parse(v);if(T){for(h=0;h<T.length;h++)if(Array.isArray(T[h])){var I=T[h];if(!(2>I.length)){var Q=I[1];if(Array.isArray(Q)&&!(1>Q.length)){var ne=Q[0];if(ne!="noop"&&ne!="stop"&&ne!="close")for(var me=1;me<Q.length;me++)Q[me]=""}}}}return ri(T)}catch{return v}}var Ct={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},un={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Mi;function ts(){}N(ts,Iu),ts.prototype.g=function(){return new XMLHttpRequest},ts.prototype.i=function(){return{}},Mi=new ts;function ki(h,v,T,I){this.j=h,this.i=v,this.l=T,this.R=I||1,this.U=new Sa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Gh}function Gh(){this.i=null,this.g="",this.h=!1}var Nu={},lr={};function Aa(h,v,T){h.L=1,h.v=Ra(Dt(v)),h.m=T,h.P=!0,ur(h,null)}function ur(h,v){h.F=Date.now(),Ti(h),h.A=Dt(h.v);var T=h.A,I=h.R;Array.isArray(I)||(I=[String(I)]),fr(T.i,"t",I),h.C=0,T=h.j.J,h.h=new Gh,h.g=lf(h.j,T?v:null,!h.m),0<h.O&&(h.M=new Zm(b(h.Y,h,h.g),h.O)),v=h.U,T=h.g,I=h.ca;var Q="readystatechange";Array.isArray(Q)||(Q&&(Xr[0]=Q.toString()),Q=Xr);for(var ne=0;ne<Q.length;ne++){var me=Oo(T,Q[ne],I||v.handleEvent,!1,v.h||v);if(!me)break;v.g[me.key]=me}v=h.H?C(h.H):{},h.m?(h.u||(h.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",h.g.ea(h.A,h.u,h.m,v)):(h.u="GET",h.g.ea(h.A,h.u,null,v)),ar(),Cu(h.i,h.u,h.A,h.l,h.R,h.m)}ki.prototype.ca=function(h){h=h.target;const v=this.M;v&&Rn(h)==3?v.j():this.Y(h)},ki.prototype.Y=function(h){try{if(h==this.g)e:{const Zt=Rn(this.g);var v=this.g.Ba();const ms=this.g.Z();if(!(3>Zt)&&(Zt!=3||this.g&&(this.h.h||this.g.oa()||Na(this.g)))){this.J||Zt!=4||v==7||(v==8||0>=ms?ar(3):ar(2)),ko(this);var T=this.g.Z();this.X=T;t:if(cr(this)){var I=Na(this.g);h="";var Q=I.length,ne=Rn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){In(this),ns(this);var me="";break t}this.h.i=new f.TextDecoder}for(v=0;v<Q;v++)this.h.h=!0,h+=this.h.i.decode(I[v],{stream:!(ne&&v==Q-1)});I.length=0,this.h.g+=h,this.C=0,me=this.h.g}else me=this.g.oa();if(this.o=T==200,Du(this.i,this.u,this.A,this.l,this.R,Zt,T),this.o){if(this.T&&!this.K){t:{if(this.g){var Ze,jt=this.g;if((Ze=jt.g?jt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!$(Ze)){var Me=Ze;break t}}Me=null}if(T=Me)or(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Li(this,T);else{this.o=!1,this.s=3,ln(12),In(this),ns(this);break e}}if(this.P){T=!0;let On;for(;!this.J&&this.C<me.length;)if(On=Ia(this,me),On==lr){Zt==4&&(this.s=4,ln(14),T=!1),or(this.i,this.l,null,"[Incomplete Response]");break}else if(On==Nu){this.s=4,ln(15),or(this.i,this.l,me,"[Invalid Chunk]"),T=!1;break}else or(this.i,this.l,On,null),Li(this,On);if(cr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Zt!=4||me.length!=0||this.h.h||(this.s=1,ln(16),T=!1),this.o=this.o&&T,!T)or(this.i,this.l,me,"[Invalid Chunked Response]"),In(this),ns(this);else if(0<me.length&&!this.W){this.W=!0;var Jt=this.j;Jt.g==this&&Jt.ba&&!Jt.M&&(Jt.j.info("Great, no buffering proxy detected. Bytes received: "+me.length),Fu(Jt),Jt.M=!0,ln(11))}}else or(this.i,this.l,me,null),Li(this,me);Zt==4&&In(this),this.o&&!this.J&&(Zt==4?sf(this.j,this):(this.o=!1,Ti(this)))}else Jh(this.g),T==400&&0<me.indexOf("Unknown SID")?(this.s=3,ln(12)):(this.s=0,ln(13)),In(this),ns(this)}}}catch{}finally{}};function cr(h){return h.g?h.u=="GET"&&h.L!=2&&h.j.Ca:!1}function Ia(h,v){var T=h.C,I=v.indexOf(`
`,T);return I==-1?lr:(T=Number(v.substring(T,I)),isNaN(T)?Nu:(I+=1,I+T>v.length?lr:(v=v.slice(I,I+T),h.C=I+T,v)))}ki.prototype.cancel=function(){this.J=!0,In(this)};function Ti(h){h.S=Date.now()+h.I,Pt(h,h.I)}function Pt(h,v){if(h.B!=null)throw Error("WatchDog timer not null");h.B=Zr(b(h.ba,h),v)}function ko(h){h.B&&(f.clearTimeout(h.B),h.B=null)}ki.prototype.ba=function(){this.B=null;const h=Date.now();0<=h-this.S?(Hh(this.i,this.A),this.L!=2&&(ar(),ln(17)),In(this),this.s=2,ns(this)):Pt(this,this.S-h)};function ns(h){h.j.G==0||h.J||sf(h.j,h)}function In(h){ko(h);var v=h.M;v&&typeof v.ma=="function"&&v.ma(),h.M=null,yn(h.U),h.g&&(v=h.g,h.g=null,v.abort(),v.ma())}function Li(h,v){try{var T=h.j;if(T.G!=0&&(T.g==h||is(T.h,h))){if(!h.K&&is(T.h,h)&&T.G==3){try{var I=T.Da.g.parse(v)}catch{I=null}if(Array.isArray(I)&&I.length==3){var Q=I;if(Q[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<h.F)fs(T),hs(T);else break e;Bu(T),ln(18)}}else T.za=Q[1],0<T.za-T.T&&37500>Q[2]&&T.F&&T.v==0&&!T.C&&(T.C=Zr(b(T.Za,T),6e3));if(1>=Kh(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else mr(T,11)}else if((h.K||T.g==h)&&fs(T),!$(v))for(Q=T.Da.g.parse(v),v=0;v<Q.length;v++){let Me=Q[v];if(T.T=Me[0],Me=Me[1],T.G==2)if(Me[0]=="c"){T.K=Me[1],T.ia=Me[2];const Jt=Me[3];Jt!=null&&(T.la=Jt,T.j.info("VER="+T.la));const Zt=Me[4];Zt!=null&&(T.Aa=Zt,T.j.info("SVER="+T.Aa));const ms=Me[5];ms!=null&&typeof ms=="number"&&0<ms&&(I=1.5*ms,T.L=I,T.j.info("backChannelRequestTimeoutMs_="+I)),I=T;const On=h.g;if(On){const Va=On.g?On.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Va){var ne=I.h;ne.g||Va.indexOf("spdy")==-1&&Va.indexOf("quic")==-1&&Va.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(rs(ne,ne.h),ne.h=null))}if(I.D){const pr=On.g?On.g.getResponseHeader("X-HTTP-Session-Id"):null;pr&&(I.ya=pr,Xe(I.I,I.D,pr))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-h.F,T.j.info("Handshake RTT: "+T.R+"ms")),I=T;var me=h;if(I.qa=of(I,I.J?I.ia:null,I.W),me.K){ai(I.h,me);var Ze=me,jt=I.L;jt&&(Ze.I=jt),Ze.B&&(ko(Ze),Ti(Ze)),I.g=me}else nf(I);0<T.i.length&&Ho(T)}else Me[0]!="stop"&&Me[0]!="close"||mr(T,7);else T.G==3&&(Me[0]=="stop"||Me[0]=="close"?Me[0]=="stop"?mr(T,7):Uu(T):Me[0]!="noop"&&T.l&&T.l.ta(Me),T.v=0)}}ar(4)}catch{}}var tp=class{constructor(h,v){this.g=h,this.map=v}};function Ou(h){this.l=h||10,f.PerformanceNavigationTiming?(h=f.performance.getEntriesByType("navigation"),h=0<h.length&&(h[0].nextHopProtocol=="hq"||h[0].nextHopProtocol=="h2")):h=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Pu(h){return h.h?!0:h.g?h.g.size>=h.j:!1}function Kh(h){return h.h?1:h.g?h.g.size:0}function is(h,v){return h.h?h.h==v:h.g?h.g.has(v):!1}function rs(h,v){h.g?h.g.add(v):h.h=v}function ai(h,v){h.h&&h.h==v?h.h=null:h.g&&h.g.has(v)&&h.g.delete(v)}Ou.prototype.cancel=function(){if(this.i=xn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const h of this.g.values())h.cancel();this.g.clear()}};function xn(h){if(h.h!=null)return h.i.concat(h.h.D);if(h.g!=null&&h.g.size!==0){let v=h.i;for(const T of h.g.values())v=v.concat(T.D);return v}return M(h.i)}function $h(h){if(h.V&&typeof h.V=="function")return h.V();if(typeof Map<"u"&&h instanceof Map||typeof Set<"u"&&h instanceof Set)return Array.from(h.values());if(typeof h=="string")return h.split("");if(d(h)){for(var v=[],T=h.length,I=0;I<T;I++)v.push(h[I]);return v}v=[],T=0;for(I in h)v[T++]=h[I];return v}function np(h){if(h.na&&typeof h.na=="function")return h.na();if(!h.V||typeof h.V!="function"){if(typeof Map<"u"&&h instanceof Map)return Array.from(h.keys());if(!(typeof Set<"u"&&h instanceof Set)){if(d(h)||typeof h=="string"){var v=[];h=h.length;for(var T=0;T<h;T++)v.push(T);return v}v=[],T=0;for(const I in h)v[T++]=I;return v}}}function Lo(h,v){if(h.forEach&&typeof h.forEach=="function")h.forEach(v,void 0);else if(d(h)||typeof h=="string")Array.prototype.forEach.call(h,v,void 0);else for(var T=np(h),I=$h(h),Q=I.length,ne=0;ne<Q;ne++)v.call(void 0,I[ne],T&&T[ne],h)}var Vu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jo(h,v){if(h){h=h.split("&");for(var T=0;T<h.length;T++){var I=h[T].indexOf("="),Q=null;if(0<=I){var ne=h[T].substring(0,I);Q=h[T].substring(I+1)}else ne=h[T];v(ne,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function hr(h){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,h instanceof hr){this.h=h.h,ss(this,h.j),this.o=h.o,this.g=h.g,xa(this,h.s),this.l=h.l;var v=h.i,T=new ji;T.i=v.i,v.g&&(T.g=new Map(v.g),T.h=v.h),Uo(this,T),this.m=h.m}else h&&(v=String(h).match(Vu))?(this.h=!1,ss(this,v[1]||"",!0),this.o=as(v[2]||""),this.g=as(v[3]||"",!0),xa(this,v[4]),this.l=as(v[5]||"",!0),Uo(this,v[6]||"",!0),this.m=as(v[7]||"")):(this.h=!1,this.i=new ji(null,this.h))}hr.prototype.toString=function(){var h=[],v=this.j;v&&h.push(oi(v,Mu,!0),":");var T=this.g;return(T||v=="file")&&(h.push("//"),(v=this.o)&&h.push(oi(v,Mu,!0),"@"),h.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&h.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&h.push("/"),h.push(oi(T,T.charAt(0)=="/"?ku:Qh,!0))),(T=this.i.toString())&&h.push("?",T),(T=this.m)&&h.push("#",oi(T,sp)),h.join("")};function Dt(h){return new hr(h)}function ss(h,v,T){h.j=T?as(v,!0):v,h.j&&(h.j=h.j.replace(/:$/,""))}function xa(h,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);h.s=v}else h.s=null}function Uo(h,v,T){v instanceof ji?(h.i=v,Xh(h.i,h.h)):(T||(v=oi(v,rp)),h.i=new ji(v,h.h))}function Xe(h,v,T){h.i.set(v,T)}function Ra(h){return Xe(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function as(h,v){return h?v?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function oi(h,v,T){return typeof h=="string"?(h=encodeURI(h).replace(v,ip),T&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function ip(h){return h=h.charCodeAt(0),"%"+(h>>4&15).toString(16)+(h&15).toString(16)}var Mu=/[#\/\?@]/g,Qh=/[#\?:]/g,ku=/[#\?]/g,rp=/[#\?@]/g,sp=/#/g;function ji(h,v){this.h=this.g=null,this.i=h||null,this.j=!!v}function Wt(h){h.g||(h.g=new Map,h.h=0,h.i&&jo(h.i,function(v,T){h.add(decodeURIComponent(v.replace(/\+/g," ")),T)}))}i=ji.prototype,i.add=function(h,v){Wt(this),this.i=null,h=Gn(this,h);var T=this.g.get(h);return T||this.g.set(h,T=[]),T.push(v),this.h+=1,this};function zo(h,v){Wt(h),v=Gn(h,v),h.g.has(v)&&(h.i=null,h.h-=h.g.get(v).length,h.g.delete(v))}function Bo(h,v){return Wt(h),v=Gn(h,v),h.g.has(v)}i.forEach=function(h,v){Wt(this),this.g.forEach(function(T,I){T.forEach(function(Q){h.call(v,Q,I,this)},this)},this)},i.na=function(){Wt(this);const h=Array.from(this.g.values()),v=Array.from(this.g.keys()),T=[];for(let I=0;I<v.length;I++){const Q=h[I];for(let ne=0;ne<Q.length;ne++)T.push(v[I])}return T},i.V=function(h){Wt(this);let v=[];if(typeof h=="string")Bo(this,h)&&(v=v.concat(this.g.get(Gn(this,h))));else{h=Array.from(this.g.values());for(let T=0;T<h.length;T++)v=v.concat(h[T])}return v},i.set=function(h,v){return Wt(this),this.i=null,h=Gn(this,h),Bo(this,h)&&(this.h-=this.g.get(h).length),this.g.set(h,[v]),this.h+=1,this},i.get=function(h,v){return h?(h=this.V(h),0<h.length?String(h[0]):v):v};function fr(h,v,T){zo(h,v),0<T.length&&(h.i=null,h.g.set(Gn(h,v),M(T)),h.h+=T.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const h=[],v=Array.from(this.g.keys());for(var T=0;T<v.length;T++){var I=v[T];const ne=encodeURIComponent(String(I)),me=this.V(I);for(I=0;I<me.length;I++){var Q=ne;me[I]!==""&&(Q+="="+encodeURIComponent(String(me[I]))),h.push(Q)}}return this.i=h.join("&")};function Gn(h,v){return v=String(v),h.j&&(v=v.toLowerCase()),v}function Xh(h,v){v&&!h.j&&(Wt(h),h.i=null,h.g.forEach(function(T,I){var Q=I.toLowerCase();I!=Q&&(zo(this,I),fr(this,Q,T))},h)),h.j=v}function Lu(h,v){const T=new es;if(f.Image){const I=new Image;I.onload=A(Nn,T,"TestLoadImage: loaded",!0,v,I),I.onerror=A(Nn,T,"TestLoadImage: error",!1,v,I),I.onabort=A(Nn,T,"TestLoadImage: abort",!1,v,I),I.ontimeout=A(Nn,T,"TestLoadImage: timeout",!1,v,I),f.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=h}else v(!1)}function Yh(h,v){const T=new es,I=new AbortController,Q=setTimeout(()=>{I.abort(),Nn(T,"TestPingServer: timeout",!1,v)},1e4);fetch(h,{signal:I.signal}).then(ne=>{clearTimeout(Q),ne.ok?Nn(T,"TestPingServer: ok",!0,v):Nn(T,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(Q),Nn(T,"TestPingServer: error",!1,v)})}function Nn(h,v,T,I,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),I(T)}catch{}}function bi(){this.g=new ep}function ju(h,v,T){const I=T||"";try{Lo(h,function(Q,ne){let me=Q;p(Q)&&(me=ri(Q)),v.push(I+ne+"="+encodeURIComponent(me))})}catch(Q){throw v.push(I+"type="+encodeURIComponent("_badmap")),Q}}function Ui(h){this.l=h.Ub||null,this.j=h.eb||!1}N(Ui,Iu),Ui.prototype.g=function(){return new Kn(this.l,this.j)},Ui.prototype.i=(function(h){return function(){return h}})({});function Kn(h,v){Gt.call(this),this.D=h,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(Kn,Gt),i=Kn.prototype,i.open=function(h,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=h,this.A=v,this.readyState=1,os(this)},i.send=function(h){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};h&&(v.body=h),(this.D||f).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,zi(this)),this.readyState=0},i.Sa=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,os(this)),this.g&&(this.readyState=3,os(this),this.g)))if(this.responseType==="arraybuffer")h.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in h){if(this.j=h.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fo(this)}else h.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fo(h){h.j.read().then(h.Pa.bind(h)).catch(h.ga.bind(h))}i.Pa=function(h){if(this.g){if(this.o&&h.value)this.response.push(h.value);else if(!this.o){var v=h.value?h.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!h.done}))&&(this.response=this.responseText+=v)}h.done?zi(this):os(this),this.readyState==3&&Fo(this)}},i.Ra=function(h){this.g&&(this.response=this.responseText=h,zi(this))},i.Qa=function(h){this.g&&(this.response=h,zi(this))},i.ga=function(){this.g&&zi(this)};function zi(h){h.readyState=4,h.l=null,h.j=null,h.v=null,os(h)}i.setRequestHeader=function(h,v){this.u.append(h,v)},i.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const h=[],v=this.h.entries();for(var T=v.next();!T.done;)T=T.value,h.push(T[0]+": "+T[1]),T=v.next();return h.join(`\r
`)};function os(h){h.onreadystatechange&&h.onreadystatechange.call(h)}Object.defineProperty(Kn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(h){this.m=h?"include":"same-origin"}});function Ca(h){let v="";return de(h,function(T,I){v+=I,v+=":",v+=T,v+=`\r
`}),v}function ls(h,v,T){e:{for(I in T){var I=!1;break e}I=!0}I||(T=Ca(T),typeof h=="string"?T!=null&&encodeURIComponent(String(T)):Xe(h,v,T))}function gt(h){Gt.call(this),this.headers=new Map,this.o=h||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(gt,Gt);var _n=/^https?$/i,dr=["POST","PUT"];i=gt.prototype,i.Ha=function(h){this.J=h},i.ea=function(h,v,T,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+h);v=v?v.toUpperCase():"GET",this.D=h,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Mi.g(),this.v=this.o?qh(this.o):qh(Mi),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(v,String(h),!0),this.B=!1}catch(ne){Da(this,ne);return}if(h=T||"",T=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var Q in I)T.set(Q,I[Q]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const ne of I.keys())T.set(ne,I.get(ne));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(T.keys()).find(ne=>ne.toLowerCase()=="content-type"),Q=f.FormData&&h instanceof f.FormData,!(0<=Array.prototype.indexOf.call(dr,v,void 0))||I||Q||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,me]of T)this.g.setRequestHeader(ne,me);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{qo(this),this.u=!0,this.g.send(h),this.u=!1}catch(ne){Da(this,ne)}};function Da(h,v){h.h=!1,h.g&&(h.j=!0,h.g.abort(),h.j=!1),h.l=v,h.m=5,us(h),cs(h)}function us(h){h.A||(h.A=!0,Yt(h,"complete"),Yt(h,"error"))}i.abort=function(h){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=h||7,Yt(this,"complete"),Yt(this,"abort"),cs(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),cs(this,!0)),gt.aa.N.call(this)},i.Ea=function(){this.s||(this.B||this.u||this.j?Wh(this):this.bb())},i.bb=function(){Wh(this)};function Wh(h){if(h.h&&typeof u<"u"&&(!h.v[1]||Rn(h)!=4||h.Z()!=2)){if(h.u&&Rn(h)==4)Fh(h.Ea,0,h);else if(Yt(h,"readystatechange"),Rn(h)==4){h.h=!1;try{const me=h.Z();e:switch(me){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var T;if(!(T=v)){var I;if(I=me===0){var Q=String(h.D).match(Vu)[1]||null;!Q&&f.self&&f.self.location&&(Q=f.self.location.protocol.slice(0,-1)),I=!_n.test(Q?Q.toLowerCase():"")}T=I}if(T)Yt(h,"complete"),Yt(h,"success");else{h.m=6;try{var ne=2<Rn(h)?h.g.statusText:""}catch{ne=""}h.l=ne+" ["+h.Z()+"]",us(h)}}finally{cs(h)}}}}function cs(h,v){if(h.g){qo(h);const T=h.g,I=h.v[0]?()=>{}:null;h.g=null,h.v=null,v||Yt(h,"ready");try{T.onreadystatechange=I}catch{}}}function qo(h){h.I&&(f.clearTimeout(h.I),h.I=null)}i.isActive=function(){return!!this.g};function Rn(h){return h.g?h.g.readyState:0}i.Z=function(){try{return 2<Rn(this)?this.g.status:-1}catch{return-1}},i.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.Oa=function(h){if(this.g){var v=this.g.responseText;return h&&v.indexOf(h)==0&&(v=v.substring(h.length)),An(v)}};function Na(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.H){case"":case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch{return null}}function Jh(h){const v={};h=(h.g&&2<=Rn(h)&&h.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<h.length;I++){if($(h[I]))continue;var T=F(h[I]);const Q=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const ne=v[Q]||[];v[Q]=ne,ne.push(T)}R(v,function(I){return I.join(", ")})}i.Ba=function(){return this.m},i.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oa(h,v,T){return T&&T.internalChannelParams&&T.internalChannelParams[h]||v}function Zh(h){this.Aa=0,this.i=[],this.j=new es,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Oa("failFast",!1,h),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Oa("baseRetryDelayMs",5e3,h),this.cb=Oa("retryDelaySeedMs",1e4,h),this.Wa=Oa("forwardChannelMaxRetries",2,h),this.wa=Oa("forwardChannelRequestTimeoutMs",2e4,h),this.pa=h&&h.xmlHttpFactory||void 0,this.Xa=h&&h.Tb||void 0,this.Ca=h&&h.useFetchStreams||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.h=new Ou(h&&h.concurrentRequestLimit),this.Da=new bi,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=h&&h.Rb||!1,h&&h.xa&&this.j.xa(),h&&h.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&h&&h.detectBufferingProxy||!1,this.ja=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.ja=h.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}i=Zh.prototype,i.la=8,i.G=1,i.connect=function(h,v,T,I){ln(0),this.W=h,this.H=v||{},T&&I!==void 0&&(this.H.OSID=T,this.H.OAID=I),this.F=this.X,this.I=of(this,null,this.W),Ho(this)};function Uu(h){if(ef(h),h.G==3){var v=h.U++,T=Dt(h.I);if(Xe(T,"SID",h.K),Xe(T,"RID",v),Xe(T,"TYPE","terminate"),Pa(h,T),v=new ki(h,h.j,v),v.L=2,v.v=Ra(Dt(T)),T=!1,f.navigator&&f.navigator.sendBeacon)try{T=f.navigator.sendBeacon(v.v.toString(),"")}catch{}!T&&f.Image&&(new Image().src=v.v,T=!0),T||(v.g=lf(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Ti(v)}qu(h)}function hs(h){h.g&&(Fu(h),h.g.cancel(),h.g=null)}function ef(h){hs(h),h.u&&(f.clearTimeout(h.u),h.u=null),fs(h),h.h.cancel(),h.s&&(typeof h.s=="number"&&f.clearTimeout(h.s),h.s=null)}function Ho(h){if(!Pu(h.h)&&!h.s){h.s=!0;var v=h.Ga;he||$e(),ye||(he(),ye=!0),Ve.add(v,h),h.B=0}}function ap(h,v){return Kh(h.h)>=h.h.j-(h.s?1:0)?!1:h.s?(h.i=v.D.concat(h.i),!0):h.G==1||h.G==2||h.B>=(h.Va?0:h.Wa)?!1:(h.s=Zr(b(h.Ga,h,v),af(h,h.B)),h.B++,!0)}i.Ga=function(h){if(this.s)if(this.s=null,this.G==1){if(!h){this.U=Math.floor(1e5*Math.random()),h=this.U++;const Q=new ki(this,this.j,h);let ne=this.o;if(this.S&&(ne?(ne=C(ne),j(ne,this.S)):ne=this.S),this.m!==null||this.O||(Q.H=ne,ne=null),this.P)e:{for(var v=0,T=0;T<this.i.length;T++){t:{var I=this.i[T];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(v+=I,4096<v){v=T;break e}if(v===4096||T===this.i.length-1){v=T+1;break e}}v=1e3}else v=1e3;v=zu(this,Q,v),T=Dt(this.I),Xe(T,"RID",h),Xe(T,"CVER",22),this.D&&Xe(T,"X-HTTP-Session-Id",this.D),Pa(this,T),ne&&(this.O?v="headers="+encodeURIComponent(String(Ca(ne)))+"&"+v:this.m&&ls(T,this.m,ne)),rs(this.h,Q),this.Ua&&Xe(T,"TYPE","init"),this.P?(Xe(T,"$req",v),Xe(T,"SID","null"),Q.T=!0,Aa(Q,T,null)):Aa(Q,T,v),this.G=2}}else this.G==3&&(h?tf(this,h):this.i.length==0||Pu(this.h)||tf(this))};function tf(h,v){var T;v?T=v.l:T=h.U++;const I=Dt(h.I);Xe(I,"SID",h.K),Xe(I,"RID",T),Xe(I,"AID",h.T),Pa(h,I),h.m&&h.o&&ls(I,h.m,h.o),T=new ki(h,h.j,T,h.B+1),h.m===null&&(T.H=h.o),v&&(h.i=v.D.concat(h.i)),v=zu(h,T,1e3),T.I=Math.round(.5*h.wa)+Math.round(.5*h.wa*Math.random()),rs(h.h,T),Aa(T,I,v)}function Pa(h,v){h.H&&de(h.H,function(T,I){Xe(v,I,T)}),h.l&&Lo({},function(T,I){Xe(v,I,T)})}function zu(h,v,T){T=Math.min(h.i.length,T);var I=h.l?b(h.l.Na,h.l,h):null;e:{var Q=h.i;let ne=-1;for(;;){const me=["count="+T];ne==-1?0<T?(ne=Q[0].g,me.push("ofs="+ne)):ne=0:me.push("ofs="+ne);let Ze=!0;for(let jt=0;jt<T;jt++){let Me=Q[jt].g;const Jt=Q[jt].map;if(Me-=ne,0>Me)ne=Math.max(0,Q[jt].g-100),Ze=!1;else try{ju(Jt,me,"req"+Me+"_")}catch{I&&I(Jt)}}if(Ze){I=me.join("&");break e}}}return h=h.i.splice(0,T),v.D=h,I}function nf(h){if(!h.g&&!h.u){h.Y=1;var v=h.Fa;he||$e(),ye||(he(),ye=!0),Ve.add(v,h),h.v=0}}function Bu(h){return h.g||h.u||3<=h.v?!1:(h.Y++,h.u=Zr(b(h.Fa,h),af(h,h.v)),h.v++,!0)}i.Fa=function(){if(this.u=null,rf(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var h=2*this.R;this.j.info("BP detection timer enabled: "+h),this.A=Zr(b(this.ab,this),h)}},i.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ln(10),hs(this),rf(this))};function Fu(h){h.A!=null&&(f.clearTimeout(h.A),h.A=null)}function rf(h){h.g=new ki(h,h.j,"rpc",h.Y),h.m===null&&(h.g.H=h.o),h.g.O=0;var v=Dt(h.qa);Xe(v,"RID","rpc"),Xe(v,"SID",h.K),Xe(v,"AID",h.T),Xe(v,"CI",h.F?"0":"1"),!h.F&&h.ja&&Xe(v,"TO",h.ja),Xe(v,"TYPE","xmlhttp"),Pa(h,v),h.m&&h.o&&ls(v,h.m,h.o),h.L&&(h.g.I=h.L);var T=h.g;h=h.ia,T.L=1,T.v=Ra(Dt(v)),T.m=null,T.P=!0,ur(T,h)}i.Za=function(){this.C!=null&&(this.C=null,hs(this),Bu(this),ln(19))};function fs(h){h.C!=null&&(f.clearTimeout(h.C),h.C=null)}function sf(h,v){var T=null;if(h.g==v){fs(h),Fu(h),h.g=null;var I=2}else if(is(h.h,v))T=v.D,ai(h.h,v),I=1;else return;if(h.G!=0){if(v.o)if(I==1){T=v.m?v.m.length:0,v=Date.now()-v.F;var Q=h.B;I=Mo(),Yt(I,new Ru(I,T)),Ho(h)}else nf(h);else if(Q=v.s,Q==3||Q==0&&0<v.X||!(I==1&&ap(h,v)||I==2&&Bu(h)))switch(T&&0<T.length&&(v=h.h,v.i=v.i.concat(T)),Q){case 1:mr(h,5);break;case 4:mr(h,10);break;case 3:mr(h,6);break;default:mr(h,2)}}}function af(h,v){let T=h.Ta+Math.floor(Math.random()*h.cb);return h.isActive()||(T*=2),T*v}function mr(h,v){if(h.j.info("Error code "+v),v==2){var T=b(h.fb,h),I=h.Xa;const Q=!I;I=new hr(I||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||ss(I,"https"),Ra(I),Q?Lu(I.toString(),T):Yh(I.toString(),T)}else ln(2);h.G=0,h.l&&h.l.sa(v),qu(h),ef(h)}i.fb=function(h){h?(this.j.info("Successfully pinged google.com"),ln(2)):(this.j.info("Failed to ping google.com"),ln(1))};function qu(h){if(h.G=0,h.ka=[],h.l){const v=xn(h.h);(v.length!=0||h.i.length!=0)&&(P(h.ka,v),P(h.ka,h.i),h.h.i.length=0,M(h.i),h.i.length=0),h.l.ra()}}function of(h,v,T){var I=T instanceof hr?Dt(T):new hr(T);if(I.g!="")v&&(I.g=v+"."+I.g),xa(I,I.s);else{var Q=f.location;I=Q.protocol,v=v?v+"."+Q.hostname:Q.hostname,Q=+Q.port;var ne=new hr(null);I&&ss(ne,I),v&&(ne.g=v),Q&&xa(ne,Q),T&&(ne.l=T),I=ne}return T=h.D,v=h.ya,T&&v&&Xe(I,T,v),Xe(I,"VER",h.la),Pa(h,I),I}function lf(h,v,T){if(v&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=h.Ca&&!h.pa?new gt(new Ui({eb:T})):new gt(h.pa),v.Ha(h.J),v}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function uf(){}i=uf.prototype,i.ua=function(){},i.ta=function(){},i.sa=function(){},i.ra=function(){},i.isActive=function(){return!0},i.Na=function(){};function Go(){}Go.prototype.g=function(h,v){return new Cn(h,v)};function Cn(h,v){Gt.call(this),this.g=new Zh(v),this.l=h,this.h=v&&v.messageUrlParams||null,h=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.o=h,h=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(h?h["X-WebChannel-Content-Type"]=v.messageContentType:h={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(h?h["X-WebChannel-Client-Profile"]=v.va:h={"X-WebChannel-Client-Profile":v.va}),this.g.S=h,(h=v&&v.Sb)&&!$(h)&&(this.g.m=h),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!$(v)&&(this.g.D=v,h=this.h,h!==null&&v in h&&(h=this.h,v in h&&delete h[v])),this.j=new ds(this)}N(Cn,Gt),Cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){Uu(this.g)},Cn.prototype.o=function(h){var v=this.g;if(typeof h=="string"){var T={};T.__data__=h,h=T}else this.u&&(T={},T.__data__=ri(h),h=T);v.i.push(new tp(v.Ya++,h)),v.G==3&&Ho(v)},Cn.prototype.N=function(){this.g.l=null,delete this.j,Uu(this.g),delete this.g,Cn.aa.N.call(this)};function cf(h){Yr.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var v=h.__sm__;if(v){e:{for(const T in v){h=T;break e}h=void 0}(this.i=h)&&(h=this.i,v=v!==null&&h in v?v[h]:void 0),this.data=v}else this.data=h}N(cf,Yr);function hf(){Ei.call(this),this.status=1}N(hf,Ei);function ds(h){this.g=h}N(ds,uf),ds.prototype.ua=function(){Yt(this.g,"a")},ds.prototype.ta=function(h){Yt(this.g,new cf(h))},ds.prototype.sa=function(h){Yt(this.g,new hf)},ds.prototype.ra=function(){Yt(this.g,"b")},Go.prototype.createWebChannel=Go.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,ZA=function(){return new Go},JA=function(){return Mo()},WA=si,By={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ct.NO_ERROR=0,Ct.TIMEOUT=8,Ct.HTTP_ERROR=6,Pd=Ct,un.COMPLETE="complete",YA=un,wa.EventType=Pi,Pi.OPEN="a",Pi.CLOSE="b",Pi.ERROR="c",Pi.MESSAGE="d",Gt.prototype.listen=Gt.prototype.K,jc=wa,gt.prototype.listenOnce=gt.prototype.L,gt.prototype.getLastError=gt.prototype.Ka,gt.prototype.getLastErrorCode=gt.prototype.Ba,gt.prototype.getStatus=gt.prototype.Z,gt.prototype.getResponseJson=gt.prototype.Oa,gt.prototype.getResponseText=gt.prototype.oa,gt.prototype.send=gt.prototype.ea,gt.prototype.setWithCredentials=gt.prototype.Ha,XA=gt}).apply(typeof yd<"u"?yd:typeof self<"u"?self:typeof window<"u"?window:{});const rS="@firebase/firestore",sS="4.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fu="11.10.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=new I_("@firebase/firestore");function Il(){return ta.logLevel}function pV(i){ta.setLogLevel(i)}function ce(i,...e){if(ta.logLevel<=qe.DEBUG){const t=e.map(L_);ta.debug(`Firestore (${fu}): ${i}`,...t)}}function kt(i,...e){if(ta.logLevel<=qe.ERROR){const t=e.map(L_);ta.error(`Firestore (${fu}): ${i}`,...t)}}function wn(i,...e){if(ta.logLevel<=qe.WARN){const t=e.map(L_);ta.warn(`Firestore (${fu}): ${i}`,...t)}}function L_(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(i,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,eI(i,r,t)}function eI(i,e,t){let r=`FIRESTORE (${fu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw kt(r),new Error(r)}function Te(i,e,t,r){let a="Unexpected state";typeof t=="string"?a=t:r=t,i||eI(e,a,r)}function gV(i,e){i||_e(57014,e)}function ge(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends Hr{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class nI{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(nn.UNAUTHENTICATED)))}shutdown(){}}class yV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class _V{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Te(this.o===void 0,42304);let r=this.i;const a=d=>this.i!==r?(r=this.i,t(d)):Promise.resolve();let l=new rn;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new rn,e.enqueueRetryable((()=>a(this.currentUser)))};const u=()=>{const d=l;e.enqueueRetryable((async()=>{await d.promise,await a(this.currentUser)}))},f=d=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit((d=>f(d))),setTimeout((()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?f(d):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new rn)}}),0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((r=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Te(typeof r.accessToken=="string",31837,{l:r}),new tI(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Te(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class vV{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class EV{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new vV(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Fy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class TV{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,gi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Te(this.o===void 0,3512);const r=l=>{l.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.m;return this.m=l.token,ce("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>r(l)))};const a=l=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>a(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?a(l):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Fy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Te(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Fy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class bV{getToken(){return Promise.resolve(new Fy(""))}invalidateToken(){}start(e,t){}shutdown(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SV(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<i;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const a=SV(40);for(let l=0;l<a.length;++l)r.length<20&&a[l]<t&&(r+=e.charAt(a[l]%62))}return r}}function Ae(i,e){return i<e?-1:i>e?1:0}function qy(i,e){let t=0;for(;t<i.length&&t<e.length;){const r=i.codePointAt(t),a=e.codePointAt(t);if(r!==a){if(r<128&&a<128)return Ae(r,a);{const l=j_(),u=wV(l.encode(aS(i,t)),l.encode(aS(e,t)));return u!==0?u:Ae(r,a)}}t+=r>65535?2:1}return Ae(i.length,e.length)}function aS(i,e){return i.codePointAt(e)>65535?i.substring(e,e+2):i.substring(e,e+1)}function wV(i,e){for(let t=0;t<i.length&&t<e.length;++t)if(i[t]!==e[t])return Ae(i[t],e[t]);return Ae(i.length,e.length)}function jl(i,e,t){return i.length===e.length&&i.every(((r,a)=>t(r,e[a])))}function iI(i){return i+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy="__name__";class Ki{constructor(e,t,r){t===void 0?t=0:t>e.length&&_e(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&_e(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Ki.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ki?e.forEach((r=>{t.push(r)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let a=0;a<r;a++){const l=Ki.compareSegments(e.get(a),t.get(a));if(l!==0)return l}return Ae(e.length,t.length)}static compareSegments(e,t){const r=Ki.isNumericId(e),a=Ki.isNumericId(t);return r&&!a?-1:!r&&a?1:r&&a?Ki.extractNumericId(e).compare(Ki.extractNumericId(t)):qy(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zs.fromString(e.substring(4,e.length-2))}}class ke extends Ki{construct(e,t,r){return new ke(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new oe(W.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter((a=>a.length>0)))}return new ke(t)}static emptyPath(){return new ke([])}}const AV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Et extends Ki{construct(e,t,r){return new Et(e,t,r)}static isValidIdentifier(e){return AV.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Et.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Hy}static keyField(){return new Et([Hy])}static fromServerFormat(e){const t=[];let r="",a=0;const l=()=>{if(r.length===0)throw new oe(W.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;a<e.length;){const f=e[a];if(f==="\\"){if(a+1===e.length)throw new oe(W.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[a+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new oe(W.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=d,a+=2}else f==="`"?(u=!u,a++):f!=="."||u?(r+=f,a++):(l(),a++)}if(l(),u)throw new oe(W.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Et(t)}static emptyPath(){return new Et([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.path=e}static fromPath(e){return new pe(ke.fromString(e))}static fromName(e){return new pe(ke.fromString(e).popFirst(5))}static empty(){return new pe(ke.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ke.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ke.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new pe(new ke(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U_(i,e,t){if(!t)throw new oe(W.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function rI(i,e,t,r){if(e===!0&&r===!0)throw new oe(W.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function oS(i){if(!pe.isDocumentKey(i))throw new oe(W.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function lS(i){if(pe.isDocumentKey(i))throw new oe(W.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function sI(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function Sm(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":_e(12329,{type:typeof i})}function Le(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new oe(W.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Sm(i);throw new oe(W.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function aI(i,e){if(e<=0)throw new oe(W.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(i,e){const t={typeString:i};return e&&(t.value=e),t}function Io(i,e){if(!sI(i))throw new oe(W.INVALID_ARGUMENT,"JSON must be an object");let t;for(const r in e)if(e[r]){const a=e[r].typeString,l="value"in e[r]?{value:e[r].value}:void 0;if(!(r in i)){t=`JSON missing required field: '${r}'`;break}const u=i[r];if(a&&typeof u!==a){t=`JSON field '${r}' must be a ${a}.`;break}if(l!==void 0&&u!==l.value){t=`Expected '${r}' field to equal '${l.value}'`;break}}if(t)throw new oe(W.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=-62135596800,cS=1e6;class et{static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*cS);return new et(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new oe(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new oe(W.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<uS)throw new oe(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(W.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/cS}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:et._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Io(e,et._jsonSchema))return new et(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-uS;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}et._jsonSchemaVersion="firestore/timestamp/1.0",et._jsonSchema={type:Ht("string",et._jsonSchemaVersion),seconds:Ht("number"),nanoseconds:Ht("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new et(0,0))}static max(){return new Se(new et(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ul=-1;class zl{constructor(e,t,r,a){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=a}}function Gy(i){return i.fields.find((e=>e.kind===2))}function Ja(i){return i.fields.filter((e=>e.kind!==2))}function IV(i,e){let t=Ae(i.collectionGroup,e.collectionGroup);if(t!==0)return t;for(let r=0;r<Math.min(i.fields.length,e.fields.length);++r)if(t=xV(i.fields[r],e.fields[r]),t!==0)return t;return Ae(i.fields.length,e.fields.length)}zl.UNKNOWN_ID=-1;class so{constructor(e,t){this.fieldPath=e,this.kind=t}}function xV(i,e){const t=Et.comparator(i.fieldPath,e.fieldPath);return t!==0?t:Ae(i.kind,e.kind)}class Bl{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Bl(0,ti.min())}}function oI(i,e){const t=i.toTimestamp().seconds,r=i.toTimestamp().nanoseconds+1,a=Se.fromTimestamp(r===1e9?new et(t+1,0):new et(t,r));return new ti(a,pe.empty(),e)}function lI(i){return new ti(i.readTime,i.key,Ul)}class ti{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ti(Se.min(),pe.empty(),Ul)}static max(){return new ti(Se.max(),pe.empty(),Ul)}}function z_(i,e){let t=i.readTime.compareTo(e.readTime);return t!==0?t:(t=pe.comparator(i.documentKey,e.documentKey),t!==0?t:Ae(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cI{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ha(i){if(i.code!==W.FAILED_PRECONDITION||i.message!==uI)throw i;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&_e(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new K(((r,a)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,a)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,a)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof K?t:K.resolve(t)}catch(t){return K.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):K.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):K.reject(t)}static resolve(e){return new K(((t,r)=>{t(e)}))}static reject(e){return new K(((t,r)=>{r(e)}))}static waitFor(e){return new K(((t,r)=>{let a=0,l=0,u=!1;e.forEach((f=>{++a,f.next((()=>{++l,u&&l===a&&t()}),(d=>r(d)))})),u=!0,l===a&&t()}))}static or(e){let t=K.resolve(!1);for(const r of e)t=t.next((a=>a?K.resolve(a):r()));return t}static forEach(e,t){const r=[];return e.forEach(((a,l)=>{r.push(t.call(this,a,l))})),this.waitFor(r)}static mapArray(e,t){return new K(((r,a)=>{const l=e.length,u=new Array(l);let f=0;for(let d=0;d<l;d++){const p=d;t(e[p]).next((y=>{u[p]=y,++f,f===l&&r(u)}),(y=>a(y)))}}))}static doWhile(e,t){return new K(((r,a)=>{const l=()=>{e()===!0?t().next((()=>{l()}),a):r()};l()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei="SimpleDb";class wm{static open(e,t,r,a){try{return new wm(t,e.transaction(a,r))}catch(l){throw new Hc(t,l)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new rn,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Hc(e,t.error)):this.S.resolve()},this.transaction.onerror=r=>{const a=B_(r.target.error);this.S.reject(new Hc(e,a))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(ce(ei,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}v(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new CV(t)}}class er{static delete(e){return ce(ei,"Removing database:",e),eo(Zw().indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!oA())return!1;if(er.F())return!0;const e=$t(),t=er.M(e),r=0<t&&t<10,a=hI(e),l=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||l)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.O)==="YES"}static N(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(e,t,r){this.name=e,this.version=t,this.B=r,this.L=null,er.M($t())===12.2&&kt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async k(e){return this.db||(ce(ei,"Opening database:",this.name),this.db=await new Promise(((t,r)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=l=>{const u=l.target.result;t(u)},a.onblocked=()=>{r(new Hc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const u=l.target.error;u.name==="VersionError"?r(new oe(W.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):u.name==="InvalidStateError"?r(new oe(W.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+u)):r(new Hc(e,u))},a.onupgradeneeded=l=>{ce(ei,'Database "'+this.name+'" requires upgrade from version:',l.oldVersion);const u=l.target.result;if(this.L!==null&&this.L!==l.oldVersion)throw new Error(`refusing to open IndexedDB database due to potential corruption of the IndexedDB database data; this corruption could be caused by clicking the "clear site data" button in a web browser; try reloading the web page to re-initialize the IndexedDB database: lastClosedDbVersion=${this.L}, event.oldVersion=${l.oldVersion}, event.newVersion=${l.newVersion}, db.version=${u.version}`);this.B.q(u,a.transaction,l.oldVersion,this.version).next((()=>{ce(ei,"Database upgrade to version "+this.version+" complete")}))}})),this.db.addEventListener("close",(t=>{const r=t.target;this.L=r.version}),{passive:!0})),this.db.addEventListener("versionchange",(t=>{var r;t.newVersion===null&&(wn('Received "versionchange" event with newVersion===null; notifying the registered DatabaseDeletedListener, if any'),(r=this.databaseDeletedListener)===null||r===void 0||r.call(this))}),{passive:!0}),this.db}setDatabaseDeletedListener(e){if(this.databaseDeletedListener)throw new Error("setDatabaseDeletedListener() may only be called once, and it has already been called");this.databaseDeletedListener=e}async runTransaction(e,t,r,a){const l=t==="readonly";let u=0;for(;;){++u;try{this.db=await this.k(e);const f=wm.open(this.db,e,l?"readonly":"readwrite",r),d=a(f).next((p=>(f.v(),p))).catch((p=>(f.abort(p),K.reject(p)))).toPromise();return d.catch((()=>{})),await f.D,d}catch(f){const d=f,p=d.name!=="FirebaseError"&&u<3;if(ce(ei,"Transaction failed with error:",d.message,"Retrying:",p),this.close(),!p)return Promise.reject(d)}}}close(){this.db&&this.db.close(),this.db=void 0}}function hI(i){const e=i.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class RV{constructor(e){this.$=e,this.U=!1,this.K=null}get isDone(){return this.U}get W(){return this.K}set cursor(e){this.$=e}done(){this.U=!0}G(e){this.K=e}delete(){return eo(this.$.delete())}}class Hc extends oe{constructor(e,t){super(W.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function fa(i){return i.name==="IndexedDbTransactionError"}class CV{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(ce(ei,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(ce(ei,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),eo(r)}add(e){return ce(ei,"ADD",this.store.name,e,e),eo(this.store.add(e))}get(e){return eo(this.store.get(e)).next((t=>(t===void 0&&(t=null),ce(ei,"GET",this.store.name,e,t),t)))}delete(e){return ce(ei,"DELETE",this.store.name,e),eo(this.store.delete(e))}count(){return ce(ei,"COUNT",this.store.name),eo(this.store.count())}j(e,t){const r=this.options(e,t),a=r.index?this.store.index(r.index):this.store;if(typeof a.getAll=="function"){const l=a.getAll(r.range);return new K(((u,f)=>{l.onerror=d=>{f(d.target.error)},l.onsuccess=d=>{u(d.target.result)}}))}{const l=this.cursor(r),u=[];return this.J(l,((f,d)=>{u.push(d)})).next((()=>u))}}H(e,t){const r=this.store.getAll(e,t===null?void 0:t);return new K(((a,l)=>{r.onerror=u=>{l(u.target.error)},r.onsuccess=u=>{a(u.target.result)}}))}Y(e,t){ce(ei,"DELETE ALL",this.store.name);const r=this.options(e,t);r.Z=!1;const a=this.cursor(r);return this.J(a,((l,u,f)=>f.delete()))}X(e,t){let r;t?r=e:(r={},t=e);const a=this.cursor(r);return this.J(a,t)}ee(e){const t=this.cursor({});return new K(((r,a)=>{t.onerror=l=>{const u=B_(l.target.error);a(u)},t.onsuccess=l=>{const u=l.target.result;u?e(u.primaryKey,u.value).next((f=>{f?u.continue():r()})):r()}}))}J(e,t){const r=[];return new K(((a,l)=>{e.onerror=u=>{l(u.target.error)},e.onsuccess=u=>{const f=u.target.result;if(!f)return void a();const d=new RV(f),p=t(f.primaryKey,f.value,d);if(p instanceof K){const y=p.catch((_=>(d.done(),K.reject(_))));r.push(y)}d.isDone?a():d.W===null?f.continue():f.continue(d.W)}})).next((()=>K.waitFor(r)))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Z?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function eo(i){return new K(((e,t)=>{i.onsuccess=r=>{const a=r.target.result;e(a)},i.onerror=r=>{const a=B_(r.target.error);t(a)}}))}let hS=!1;function B_(i){const e=er.M($t());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const r=new oe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return hS||(hS=!0,setTimeout((()=>{throw r}),0)),r}}return i}const Gc="IndexBackfiller";class DV{constructor(e,t){this.asyncQueue=e,this.te=t,this.task=null}start(){this.ne(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ne(e){ce(Gc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.te.re();ce(Gc,`Documents written: ${t}`)}catch(t){fa(t)?ce(Gc,"Ignoring IndexedDB error during index backfill: ",t):await ha(t)}await this.ne(6e4)}))}}class NV{constructor(e,t){this.localStore=e,this.persistence=t}async re(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ie(t,e)))}ie(e,t){const r=new Set;let a=t,l=!0;return K.doWhile((()=>l===!0&&a>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((u=>{if(u!==null&&!r.has(u))return ce(Gc,`Processing collection: ${u}`),this.se(e,u,a).next((f=>{a-=f,r.add(u)}));l=!1})))).next((()=>t-a))}se(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((a=>this.localStore.localDocuments.getNextDocuments(e,t,a,r).next((l=>{const u=l.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next((()=>this.oe(a,l))).next((f=>(ce(Gc,`Updating offset: ${f}`),this.localStore.indexManager.updateCollectionGroup(e,t,f)))).next((()=>u.size))}))))}oe(e,t){let r=e;return t.changes.forEach(((a,l)=>{const u=lI(l);z_(u,r)>0&&(r=u)})),new ti(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this._e(r),this.ae=r=>t.writeSequenceNumber(r))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}Un.ue=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea=-1;function Ah(i){return i==null}function ih(i){return i===0&&1/i==-1/0}function fI(i){return typeof i=="number"&&Number.isInteger(i)&&!ih(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd="";function bn(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=fS(e)),e=OV(i.get(t),e);return fS(e)}function OV(i,e){let t=e;const r=i.length;for(let a=0;a<r;a++){const l=i.charAt(a);switch(l){case"\0":t+="";break;case Zd:t+="";break;default:t+=l}}return t}function fS(i){return i+Zd+""}function Yi(i){const e=i.length;if(Te(e>=2,64408,{path:i}),e===2)return Te(i.charAt(0)===Zd&&i.charAt(1)==="",56145,{path:i}),ke.emptyPath();const t=e-2,r=[];let a="";for(let l=0;l<e;){const u=i.indexOf(Zd,l);switch((u<0||u>t)&&_e(50515,{path:i}),i.charAt(u+1)){case"":const f=i.substring(l,u);let d;a.length===0?d=f:(a+=f,d=a,a=""),r.push(d);break;case"":a+=i.substring(l,u),a+="\0";break;case"":a+=i.substring(l,u+1);break;default:_e(61167,{path:i})}l=u+2}return new ke(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za="remoteDocuments",Ih="owner",El="owner",rh="mutationQueues",PV="userId",Ii="mutations",dS="batchId",ro="userMutationsIndex",mS=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vd(i,e){return[i,bn(e)]}function dI(i,e,t){return[i,bn(e),t]}const VV={},Fl="documentMutations",em="remoteDocumentsV14",MV=["prefixPath","collectionGroup","readTime","documentId"],Md="documentKeyIndex",kV=["prefixPath","collectionGroup","documentId"],mI="collectionGroupIndex",LV=["collectionGroup","readTime","prefixPath","documentId"],sh="remoteDocumentGlobal",Ky="remoteDocumentGlobalKey",ql="targets",pI="queryTargetsIndex",jV=["canonicalId","targetId"],Hl="targetDocuments",UV=["targetId","path"],F_="documentTargetsIndex",zV=["path","targetId"],tm="targetGlobalKey",ao="targetGlobal",ah="collectionParents",BV=["collectionId","parent"],Gl="clientMetadata",FV="clientId",Am="bundles",qV="bundleId",Im="namedQueries",HV="name",q_="indexConfiguration",GV="indexId",$y="collectionGroupIndex",KV="collectionGroup",Kc="indexState",$V=["indexId","uid"],gI="sequenceNumberIndex",QV=["uid","sequenceNumber"],$c="indexEntries",XV=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yI="documentKeyIndex",YV=["indexId","uid","orderedDocumentKey"],xm="documentOverlays",WV=["userId","collectionPath","documentId"],Qy="collectionPathOverlayIndex",JV=["userId","collectionPath","largestBatchId"],_I="collectionGroupOverlayIndex",ZV=["userId","collectionGroup","largestBatchId"],H_="globals",e4="name",vI=[rh,Ii,Fl,Za,ql,Ih,ao,Hl,Gl,sh,ah,Am,Im],t4=[...vI,xm],EI=[rh,Ii,Fl,em,ql,Ih,ao,Hl,Gl,sh,ah,Am,Im,xm],TI=EI,G_=[...TI,q_,Kc,$c],n4=G_,bI=[...G_,H_],i4=bI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy extends cI{constructor(e,t){super(),this.ce=e,this.currentSequenceNumber=t}}function Xt(i,e){const t=ge(i);return er.N(t.ce,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function da(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function SI(i,e){const t=[];for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&t.push(e(i[r],r,i));return t}function wI(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,t){this.comparator=e,this.root=t||pn.EMPTY}insert(e,t){return new pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,pn.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,pn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const a=this.comparator(e,r.key);if(a===0)return t+r.left.size;a<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,r)=>(e(t,r),!1)))}toString(){const e=[];return this.inorderTraversal(((t,r)=>(e.push(`${t}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _d(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _d(this.root,e,this.comparator,!1)}getReverseIterator(){return new _d(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _d(this.root,e,this.comparator,!0)}}class _d{constructor(e,t,r,a){this.isReverse=a,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&a&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class pn{constructor(e,t,r,a,l){this.key=e,this.value=t,this.color=r??pn.RED,this.left=a??pn.EMPTY,this.right=l??pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,a,l){return new pn(e??this.key,t??this.value,r??this.color,a??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let a=this;const l=r(e,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(e,t,r),null):l===0?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,r)),a.fixUp()}removeMin(){if(this.left.isEmpty())return pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),t(e,a.key)===0){if(a.right.isEmpty())return pn.EMPTY;r=a.right.min(),a=a.copy(r.key,r.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw _e(43730,{key:this.key,value:this.value});if(this.right.isRed())throw _e(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw _e(27949);return e+(this.isRed()?0:1)}}pn.EMPTY=null,pn.RED=!0,pn.BLACK=!1;pn.EMPTY=new class{constructor(){this.size=0}get key(){throw _e(57766)}get value(){throw _e(16141)}get color(){throw _e(16727)}get left(){throw _e(29726)}get right(){throw _e(36894)}copy(e,t,r,a,l){return this}insert(e,t,r){return new pn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,r)=>(e(t),!1)))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const a=r.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gS(this.data.getIterator())}getIteratorFrom(e){return new gS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((r=>{t=t.add(r)})),t}isEqual(e){if(!(e instanceof st)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(this.comparator(a,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new st(this.comparator);return t.data=e,t}}class gS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Tl(i){return i.hasNext()?i.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.fields=e,e.sort(Et.comparator)}static empty(){return new zn([])}unionWith(e){let t=new st(Et.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new zn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return jl(this.fields,e.fields,((t,r)=>t.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(a){try{return atob(a)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new AI("Invalid base64 string: "+l):l}})(e);return new xt(t)}static fromUint8Array(e){const t=(function(a){let l="";for(let u=0;u<a.length;++u)l+=String.fromCharCode(a[u]);return l})(e);return new xt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xt.EMPTY_BYTE_STRING=new xt("");const s4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Br(i){if(Te(!!i,39018),typeof i=="string"){let e=0;const t=s4.exec(i);if(Te(!!t,46558,{timestamp:i}),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const r=new Date(i);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:bt(i.seconds),nanos:bt(i.nanos)}}function bt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Fr(i){return typeof i=="string"?xt.fromBase64String(i):xt.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const II="server_timestamp",xI="__type__",RI="__previous_value__",CI="__local_write_time__";function Rm(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[xI])===null||t===void 0?void 0:t.stringValue)===II}function Cm(i){const e=i.mapValue.fields[RI];return Rm(e)?Cm(e):e}function oh(i){const e=Br(i.mapValue.fields[CI].timestampValue);return new et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e,t,r,a,l,u,f,d,p,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=a,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=d,this.useFetchStreams=p,this.isUsingEmulator=y}}const lh="(default)";class na{constructor(e,t){this.projectId=e,this.database=t||lh}static empty(){return new na("","")}get isDefaultDatabase(){return this.database===lh}isEqual(e){return e instanceof na&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="__type__",DI="__max__",$s={mapValue:{fields:{__type__:{stringValue:DI}}}},$_="__vector__",Kl="value",kd={nullValue:"NULL_VALUE"};function ia(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Rm(i)?4:NI(i)?9007199254740991:Dm(i)?10:11:_e(28295,{value:i})}function nr(i,e){if(i===e)return!0;const t=ia(i);if(t!==ia(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return oh(i).isEqual(oh(e));case 3:return(function(a,l){if(typeof a.timestampValue=="string"&&typeof l.timestampValue=="string"&&a.timestampValue.length===l.timestampValue.length)return a.timestampValue===l.timestampValue;const u=Br(a.timestampValue),f=Br(l.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(a,l){return Fr(a.bytesValue).isEqual(Fr(l.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(a,l){return bt(a.geoPointValue.latitude)===bt(l.geoPointValue.latitude)&&bt(a.geoPointValue.longitude)===bt(l.geoPointValue.longitude)})(i,e);case 2:return(function(a,l){if("integerValue"in a&&"integerValue"in l)return bt(a.integerValue)===bt(l.integerValue);if("doubleValue"in a&&"doubleValue"in l){const u=bt(a.doubleValue),f=bt(l.doubleValue);return u===f?ih(u)===ih(f):isNaN(u)&&isNaN(f)}return!1})(i,e);case 9:return jl(i.arrayValue.values||[],e.arrayValue.values||[],nr);case 10:case 11:return(function(a,l){const u=a.mapValue.fields||{},f=l.mapValue.fields||{};if(pS(u)!==pS(f))return!1;for(const d in u)if(u.hasOwnProperty(d)&&(f[d]===void 0||!nr(u[d],f[d])))return!1;return!0})(i,e);default:return _e(52216,{left:i})}}function uh(i,e){return(i.values||[]).find((t=>nr(t,e)))!==void 0}function ra(i,e){if(i===e)return 0;const t=ia(i),r=ia(e);if(t!==r)return Ae(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ae(i.booleanValue,e.booleanValue);case 2:return(function(l,u){const f=bt(l.integerValue||l.doubleValue),d=bt(u.integerValue||u.doubleValue);return f<d?-1:f>d?1:f===d?0:isNaN(f)?isNaN(d)?0:-1:1})(i,e);case 3:return yS(i.timestampValue,e.timestampValue);case 4:return yS(oh(i),oh(e));case 5:return qy(i.stringValue,e.stringValue);case 6:return(function(l,u){const f=Fr(l),d=Fr(u);return f.compareTo(d)})(i.bytesValue,e.bytesValue);case 7:return(function(l,u){const f=l.split("/"),d=u.split("/");for(let p=0;p<f.length&&p<d.length;p++){const y=Ae(f[p],d[p]);if(y!==0)return y}return Ae(f.length,d.length)})(i.referenceValue,e.referenceValue);case 8:return(function(l,u){const f=Ae(bt(l.latitude),bt(u.latitude));return f!==0?f:Ae(bt(l.longitude),bt(u.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return _S(i.arrayValue,e.arrayValue);case 10:return(function(l,u){var f,d,p,y;const _=l.fields||{},b=u.fields||{},A=(f=_[Kl])===null||f===void 0?void 0:f.arrayValue,N=(d=b[Kl])===null||d===void 0?void 0:d.arrayValue,M=Ae(((p=A==null?void 0:A.values)===null||p===void 0?void 0:p.length)||0,((y=N==null?void 0:N.values)===null||y===void 0?void 0:y.length)||0);return M!==0?M:_S(A,N)})(i.mapValue,e.mapValue);case 11:return(function(l,u){if(l===$s.mapValue&&u===$s.mapValue)return 0;if(l===$s.mapValue)return 1;if(u===$s.mapValue)return-1;const f=l.fields||{},d=Object.keys(f),p=u.fields||{},y=Object.keys(p);d.sort(),y.sort();for(let _=0;_<d.length&&_<y.length;++_){const b=qy(d[_],y[_]);if(b!==0)return b;const A=ra(f[d[_]],p[y[_]]);if(A!==0)return A}return Ae(d.length,y.length)})(i.mapValue,e.mapValue);default:throw _e(23264,{le:t})}}function yS(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ae(i,e);const t=Br(i),r=Br(e),a=Ae(t.seconds,r.seconds);return a!==0?a:Ae(t.nanos,r.nanos)}function _S(i,e){const t=i.values||[],r=e.values||[];for(let a=0;a<t.length&&a<r.length;++a){const l=ra(t[a],r[a]);if(l)return l}return Ae(t.length,r.length)}function $l(i){return Yy(i)}function Yy(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(t){const r=Br(t);return`time(${r.seconds},${r.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(t){return Fr(t).toBase64()})(i.bytesValue):"referenceValue"in i?(function(t){return pe.fromName(t).toString()})(i.referenceValue):"geoPointValue"in i?(function(t){return`geo(${t.latitude},${t.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(t){let r="[",a=!0;for(const l of t.values||[])a?a=!1:r+=",",r+=Yy(l);return r+"]"})(i.arrayValue):"mapValue"in i?(function(t){const r=Object.keys(t.fields||{}).sort();let a="{",l=!0;for(const u of r)l?l=!1:a+=",",a+=`${u}:${Yy(t.fields[u])}`;return a+"}"})(i.mapValue):_e(61005,{value:i})}function Ld(i){switch(ia(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Cm(i);return e?16+Ld(e):16;case 5:return 2*i.stringValue.length;case 6:return Fr(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((a,l)=>a+Ld(l)),0)})(i.arrayValue);case 10:case 11:return(function(r){let a=0;return da(r.fields,((l,u)=>{a+=l.length+Ld(u)})),a})(i.mapValue);default:throw _e(13486,{value:i})}}function fo(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Wy(i){return!!i&&"integerValue"in i}function ch(i){return!!i&&"arrayValue"in i}function vS(i){return!!i&&"nullValue"in i}function ES(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function jd(i){return!!i&&"mapValue"in i}function Dm(i){var e,t;return((t=(((e=i==null?void 0:i.mapValue)===null||e===void 0?void 0:e.fields)||{})[K_])===null||t===void 0?void 0:t.stringValue)===$_}function Qc(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return da(i.mapValue.fields,((t,r)=>e.mapValue.fields[t]=Qc(r))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Qc(i.arrayValue.values[t]);return e}return Object.assign({},i)}function NI(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===DI}const OI={mapValue:{fields:{[K_]:{stringValue:$_},[Kl]:{arrayValue:{}}}}};function o4(i){return"nullValue"in i?kd:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?fo(na.empty(),pe.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?Dm(i)?OI:{mapValue:{}}:_e(35942,{value:i})}function l4(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?fo(na.empty(),pe.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?OI:"mapValue"in i?Dm(i)?{mapValue:{}}:$s:_e(61959,{value:i})}function TS(i,e){const t=ra(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function bS(i,e){const t=ra(i.value,e.value);return t!==0?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.value=e}static empty(){return new gn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!jd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qc(t)}setAll(e){let t=Et.emptyPath(),r={},a=[];e.forEach(((u,f)=>{if(!t.isImmediateParentOf(f)){const d=this.getFieldsMap(t);this.applyChanges(d,r,a),r={},a=[],t=f.popLast()}u?r[f.lastSegment()]=Qc(u):a.push(f.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,r,a)}delete(e){const t=this.field(e.popLast());jd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return nr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let a=t.mapValue.fields[e.get(r)];jd(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,r){da(t,((a,l)=>e[a]=l));for(const a of r)delete e[a]}clone(){return new gn(Qc(this.value))}}function PI(i){const e=[];return da(i.fields,((t,r)=>{const a=new Et([t]);if(jd(r)){const l=PI(r.mapValue).fields;if(l.length===0)e.push(a);else for(const u of l)e.push(a.child(u))}else e.push(a)})),new zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,t,r,a,l,u,f){this.key=e,this.documentType=t,this.version=r,this.readTime=a,this.createTime=l,this.data=u,this.documentState=f}static newInvalidDocument(e){return new vt(e,0,Se.min(),Se.min(),Se.min(),gn.empty(),0)}static newFoundDocument(e,t,r,a){return new vt(e,1,t,Se.min(),r,a,0)}static newNoDocument(e,t){return new vt(e,2,t,Se.min(),Se.min(),gn.empty(),0)}static newUnknownDocument(e,t){return new vt(e,3,t,Se.min(),Se.min(),gn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=gn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=gn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,t){this.position=e,this.inclusive=t}}function SS(i,e,t){let r=0;for(let a=0;a<i.position.length;a++){const l=e[a],u=i.position[a];if(l.field.isKeyField()?r=pe.comparator(pe.fromName(u.referenceValue),t.key):r=ra(u,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function wS(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!nr(i.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,t="asc"){this.field=e,this.dir=t}}function u4(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{}class He extends VI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new c4(e,t,r):t==="array-contains"?new d4(e,r):t==="in"?new zI(e,r):t==="not-in"?new m4(e,r):t==="array-contains-any"?new p4(e,r):new He(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new h4(e,r):new f4(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ra(t,this.value)):t!==null&&ia(this.value)===ia(t)&&this.matchesComparison(ra(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return _e(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class it extends VI{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new it(e,t)}matches(e){return Ql(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.he!==null||(this.he=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Ql(i){return i.op==="and"}function Jy(i){return i.op==="or"}function Q_(i){return MI(i)&&Ql(i)}function MI(i){for(const e of i.filters)if(e instanceof it)return!1;return!0}function Zy(i){if(i instanceof He)return i.field.canonicalString()+i.op.toString()+$l(i.value);if(Q_(i))return i.filters.map((e=>Zy(e))).join(",");{const e=i.filters.map((t=>Zy(t))).join(",");return`${i.op}(${e})`}}function kI(i,e){return i instanceof He?(function(r,a){return a instanceof He&&r.op===a.op&&r.field.isEqual(a.field)&&nr(r.value,a.value)})(i,e):i instanceof it?(function(r,a){return a instanceof it&&r.op===a.op&&r.filters.length===a.filters.length?r.filters.reduce(((l,u,f)=>l&&kI(u,a.filters[f])),!0):!1})(i,e):void _e(19439)}function LI(i,e){const t=i.filters.concat(e);return it.create(t,i.op)}function jI(i){return i instanceof He?(function(t){return`${t.field.canonicalString()} ${t.op} ${$l(t.value)}`})(i):i instanceof it?(function(t){return t.op.toString()+" {"+t.getFilters().map(jI).join(" ,")+"}"})(i):"Filter"}class c4 extends He{constructor(e,t,r){super(e,t,r),this.key=pe.fromName(r.referenceValue)}matches(e){const t=pe.comparator(e.key,this.key);return this.matchesComparison(t)}}class h4 extends He{constructor(e,t){super(e,"in",t),this.keys=UI("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class f4 extends He{constructor(e,t){super(e,"not-in",t),this.keys=UI("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function UI(i,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map((r=>pe.fromName(r.referenceValue)))}class d4 extends He{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ch(t)&&uh(t.arrayValue,this.value)}}class zI extends He{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&uh(this.value.arrayValue,t)}}class m4 extends He{constructor(e,t){super(e,"not-in",t)}matches(e){if(uh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!uh(this.value.arrayValue,t)}}class p4 extends He{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ch(t)||!t.arrayValue.values)&&t.arrayValue.values.some((r=>uh(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(e,t=null,r=[],a=[],l=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=a,this.limit=l,this.startAt=u,this.endAt=f,this.Pe=null}}function e_(i,e=null,t=[],r=[],a=null,l=null,u=null){return new g4(i,e,t,r,a,l,u)}function mo(i){const e=ge(i);if(e.Pe===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((r=>Zy(r))).join(","),t+="|ob:",t+=e.orderBy.map((r=>(function(l){return l.field.canonicalString()+l.dir})(r))).join(","),Ah(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((r=>$l(r))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((r=>$l(r))).join(",")),e.Pe=t}return e.Pe}function xh(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<i.orderBy.length;t++)if(!u4(i.orderBy[t],e.orderBy[t]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let t=0;t<i.filters.length;t++)if(!kI(i.filters[t],e.filters[t]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!wS(i.startAt,e.startAt)&&wS(i.endAt,e.endAt)}function nm(i){return pe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function im(i,e){return i.filters.filter((t=>t instanceof He&&t.field.isEqual(e)))}function AS(i,e,t){let r=kd,a=!0;for(const l of im(i,e)){let u=kd,f=!0;switch(l.op){case"<":case"<=":u=o4(l.value);break;case"==":case"in":case">=":u=l.value;break;case">":u=l.value,f=!1;break;case"!=":case"not-in":u=kd}TS({value:r,inclusive:a},{value:u,inclusive:f})<0&&(r=u,a=f)}if(t!==null){for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const u=t.position[l];TS({value:r,inclusive:a},{value:u,inclusive:t.inclusive})<0&&(r=u,a=t.inclusive);break}}return{value:r,inclusive:a}}function IS(i,e,t){let r=$s,a=!0;for(const l of im(i,e)){let u=$s,f=!0;switch(l.op){case">=":case">":u=l4(l.value),f=!1;break;case"==":case"in":case"<=":u=l.value;break;case"<":u=l.value,f=!1;break;case"!=":case"not-in":u=$s}bS({value:r,inclusive:a},{value:u,inclusive:f})>0&&(r=u,a=f)}if(t!==null){for(let l=0;l<i.orderBy.length;++l)if(i.orderBy[l].field.isEqual(e)){const u=t.position[l];bS({value:r,inclusive:a},{value:u,inclusive:t.inclusive})>0&&(r=u,a=t.inclusive);break}}return{value:r,inclusive:a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e,t=null,r=[],a=[],l=null,u="F",f=null,d=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=a,this.limit=l,this.limitType=u,this.startAt=f,this.endAt=d,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function BI(i,e,t,r,a,l,u,f){return new Gr(i,e,t,r,a,l,u,f)}function du(i){return new Gr(i)}function xS(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function X_(i){return i.collectionGroup!==null}function Vl(i){const e=ge(i);if(e.Te===null){e.Te=[];const t=new Set;for(const l of e.explicitOrderBy)e.Te.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new st(Et.comparator);return u.filters.forEach((d=>{d.getFlattenedFilters().forEach((p=>{p.isInequality()&&(f=f.add(p.field))}))})),f})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Te.push(new hh(l,r))})),t.has(Et.keyField().canonicalString())||e.Te.push(new hh(Et.keyField(),r))}return e.Te}function Sn(i){const e=ge(i);return e.Ie||(e.Ie=qI(e,Vl(i))),e.Ie}function FI(i){const e=ge(i);return e.de||(e.de=qI(e,i.explicitOrderBy)),e.de}function qI(i,e){if(i.limitType==="F")return e_(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((a=>{const l=a.dir==="desc"?"asc":"desc";return new hh(a.field,l)}));const t=i.endAt?new sa(i.endAt.position,i.endAt.inclusive):null,r=i.startAt?new sa(i.startAt.position,i.startAt.inclusive):null;return e_(i.path,i.collectionGroup,e,i.filters,i.limit,t,r)}}function t_(i,e){const t=i.filters.concat([e]);return new Gr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),t,i.limit,i.limitType,i.startAt,i.endAt)}function rm(i,e,t){return new Gr(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Rh(i,e){return xh(Sn(i),Sn(e))&&i.limitType===e.limitType}function HI(i){return`${mo(Sn(i))}|lt:${i.limitType}`}function xl(i){return`Query(target=${(function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map((a=>jI(a))).join(", ")}]`),Ah(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map((a=>(function(u){return`${u.field.canonicalString()} (${u.dir})`})(a))).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map((a=>$l(a))).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map((a=>$l(a))).join(",")),`Target(${r})`})(Sn(i))}; limitType=${i.limitType})`}function Ch(i,e){return e.isFoundDocument()&&(function(r,a){const l=a.key.path;return r.collectionGroup!==null?a.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):pe.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)})(i,e)&&(function(r,a){for(const l of Vl(r))if(!l.field.isKeyField()&&a.data.field(l.field)===null)return!1;return!0})(i,e)&&(function(r,a){for(const l of r.filters)if(!l.matches(a))return!1;return!0})(i,e)&&(function(r,a){return!(r.startAt&&!(function(u,f,d){const p=SS(u,f,d);return u.inclusive?p<=0:p<0})(r.startAt,Vl(r),a)||r.endAt&&!(function(u,f,d){const p=SS(u,f,d);return u.inclusive?p>=0:p>0})(r.endAt,Vl(r),a))})(i,e)}function GI(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function KI(i){return(e,t)=>{let r=!1;for(const a of Vl(i)){const l=y4(a,e,t);if(l!==0)return l;r=r||a.field.isKeyField()}return 0}}function y4(i,e,t){const r=i.field.isKeyField()?pe.comparator(e.key,t.key):(function(l,u,f){const d=u.data.field(l),p=f.data.field(l);return d!==null&&p!==null?ra(d,p):_e(42886)})(i.field,e,t);switch(i.dir){case"asc":return r;case"desc":return-1*r;default:return _e(19790,{direction:i.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[a,l]of r)if(this.equalsFn(a,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),a=this.inner[r];if(a===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<a.length;l++)if(this.equalsFn(a[l][0],e))return void(a[l]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return r.length===1?delete this.inner[t]:r.splice(a,1),this.innerSize--,!0;return!1}forEach(e){da(this.inner,((t,r)=>{for(const[a,l]of r)e(a,l)}))}isEmpty(){return wI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _4=new pt(pe.comparator);function Bn(){return _4}const $I=new pt(pe.comparator);function Uc(...i){let e=$I;for(const t of i)e=e.insert(t.key,t);return e}function QI(i){let e=$I;return i.forEach(((t,r)=>e=e.insert(t,r.overlayedDocument))),e}function Wi(){return Xc()}function XI(){return Xc()}function Xc(){return new Kr((i=>i.toString()),((i,e)=>i.isEqual(e)))}const v4=new pt(pe.comparator),E4=new st(pe.comparator);function Ne(...i){let e=E4;for(const t of i)e=e.add(t);return e}const T4=new st(Ae);function Y_(){return T4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ih(e)?"-0":e}}function YI(i){return{integerValue:""+i}}function WI(i,e){return fI(e)?YI(e):W_(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(){this._=void 0}}function b4(i,e,t){return i instanceof Xl?(function(a,l){const u={fields:{[xI]:{stringValue:II},[CI]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return l&&Rm(l)&&(l=Cm(l)),l&&(u.fields[RI]=l),{mapValue:u}})(t,e):i instanceof po?ZI(i,e):i instanceof go?ex(i,e):(function(a,l){const u=JI(a,l),f=RS(u)+RS(a.Ee);return Wy(u)&&Wy(a.Ee)?YI(f):W_(a.serializer,f)})(i,e)}function S4(i,e,t){return i instanceof po?ZI(i,e):i instanceof go?ex(i,e):t}function JI(i,e){return i instanceof Yl?(function(r){return Wy(r)||(function(l){return!!l&&"doubleValue"in l})(r)})(e)?e:{integerValue:0}:null}class Xl extends Nm{}class po extends Nm{constructor(e){super(),this.elements=e}}function ZI(i,e){const t=tx(e);for(const r of i.elements)t.some((a=>nr(a,r)))||t.push(r);return{arrayValue:{values:t}}}class go extends Nm{constructor(e){super(),this.elements=e}}function ex(i,e){let t=tx(e);for(const r of i.elements)t=t.filter((a=>!nr(a,r)));return{arrayValue:{values:t}}}class Yl extends Nm{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function RS(i){return bt(i.integerValue||i.doubleValue)}function tx(i){return ch(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,t){this.field=e,this.transform=t}}function w4(i,e){return i.field.isEqual(e.field)&&(function(r,a){return r instanceof po&&a instanceof po||r instanceof go&&a instanceof go?jl(r.elements,a.elements,nr):r instanceof Yl&&a instanceof Yl?nr(r.Ee,a.Ee):r instanceof Xl&&a instanceof Xl})(i.transform,e.transform)}class A4{constructor(e,t){this.version=e,this.transformResults=t}}class St{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new St}static exists(e){return new St(void 0,e)}static updateTime(e){return new St(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ud(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Om{}function nx(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new pu(i.key,St.none()):new mu(i.key,i.data,St.none());{const t=i.data,r=gn.empty();let a=new st(Et.comparator);for(let l of e.fields)if(!a.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?r.delete(l):r.set(l,u),a=a.add(l)}return new $r(i.key,r,new zn(a.toArray()),St.none())}}function I4(i,e,t){i instanceof mu?(function(a,l,u){const f=a.value.clone(),d=DS(a.fieldTransforms,l,u.transformResults);f.setAll(d),l.convertToFoundDocument(u.version,f).setHasCommittedMutations()})(i,e,t):i instanceof $r?(function(a,l,u){if(!Ud(a.precondition,l))return void l.convertToUnknownDocument(u.version);const f=DS(a.fieldTransforms,l,u.transformResults),d=l.data;d.setAll(ix(a)),d.setAll(f),l.convertToFoundDocument(u.version,d).setHasCommittedMutations()})(i,e,t):(function(a,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()})(0,e,t)}function Yc(i,e,t,r){return i instanceof mu?(function(l,u,f,d){if(!Ud(l.precondition,u))return f;const p=l.value.clone(),y=NS(l.fieldTransforms,d,u);return p.setAll(y),u.convertToFoundDocument(u.version,p).setHasLocalMutations(),null})(i,e,t,r):i instanceof $r?(function(l,u,f,d){if(!Ud(l.precondition,u))return f;const p=NS(l.fieldTransforms,d,u),y=u.data;return y.setAll(ix(l)),y.setAll(p),u.convertToFoundDocument(u.version,y).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((_=>_.field)))})(i,e,t,r):(function(l,u,f){return Ud(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f})(i,e,t)}function x4(i,e){let t=null;for(const r of i.fieldTransforms){const a=e.data.field(r.field),l=JI(r.transform,a||null);l!=null&&(t===null&&(t=gn.empty()),t.set(r.field,l))}return t||null}function CS(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(r,a){return r===void 0&&a===void 0||!(!r||!a)&&jl(r,a,((l,u)=>w4(l,u)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class mu extends Om{constructor(e,t,r,a=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class $r extends Om{constructor(e,t,r,a,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=a,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function ix(i){const e=new Map;return i.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const r=i.data.field(t);e.set(t,r)}})),e}function DS(i,e,t){const r=new Map;Te(i.length===t.length,32656,{Ae:t.length,Re:i.length});for(let a=0;a<t.length;a++){const l=i[a],u=l.transform,f=e.data.field(l.field);r.set(l.field,S4(u,f,t[a]))}return r}function NS(i,e,t){const r=new Map;for(const a of i){const l=a.transform,u=t.data.field(a.field);r.set(a.field,b4(l,u,e))}return r}class pu extends Om{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class J_ extends Om{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z_{constructor(e,t,r,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=a}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const l=this.mutations[a];l.key.isEqual(e.key)&&I4(l,e,r[a])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Yc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Yc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=XI();return this.mutations.forEach((a=>{const l=e.get(a.key),u=l.overlayedDocument;let f=this.applyToLocalView(u,l.mutatedFields);f=t.has(a.key)?null:f;const d=nx(u,f);d!==null&&r.set(a.key,d),u.isValidDocument()||u.convertToNoDocument(Se.min())})),r}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Ne())}isEqual(e){return this.batchId===e.batchId&&jl(this.mutations,e.mutations,((t,r)=>CS(t,r)))&&jl(this.baseMutations,e.baseMutations,((t,r)=>CS(t,r)))}}class ev{constructor(e,t,r,a){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=a}static from(e,t,r){Te(e.mutations.length===r.length,58842,{Ve:e.mutations.length,me:r.length});let a=(function(){return v4})();const l=e.mutations;for(let u=0;u<l.length;u++)a=a.insert(l[u].key,r[u].version);return new ev(e,t,r,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(e,t,r){this.alias=e,this.aggregateType=t,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qt,Ke;function sx(i){switch(i){case W.OK:return _e(64938);case W.CANCELLED:case W.UNKNOWN:case W.DEADLINE_EXCEEDED:case W.RESOURCE_EXHAUSTED:case W.INTERNAL:case W.UNAVAILABLE:case W.UNAUTHENTICATED:return!1;case W.INVALID_ARGUMENT:case W.NOT_FOUND:case W.ALREADY_EXISTS:case W.PERMISSION_DENIED:case W.FAILED_PRECONDITION:case W.ABORTED:case W.OUT_OF_RANGE:case W.UNIMPLEMENTED:case W.DATA_LOSS:return!0;default:return _e(15467,{code:i})}}function ax(i){if(i===void 0)return kt("GRPC error has no .code"),W.UNKNOWN;switch(i){case qt.OK:return W.OK;case qt.CANCELLED:return W.CANCELLED;case qt.UNKNOWN:return W.UNKNOWN;case qt.DEADLINE_EXCEEDED:return W.DEADLINE_EXCEEDED;case qt.RESOURCE_EXHAUSTED:return W.RESOURCE_EXHAUSTED;case qt.INTERNAL:return W.INTERNAL;case qt.UNAVAILABLE:return W.UNAVAILABLE;case qt.UNAUTHENTICATED:return W.UNAUTHENTICATED;case qt.INVALID_ARGUMENT:return W.INVALID_ARGUMENT;case qt.NOT_FOUND:return W.NOT_FOUND;case qt.ALREADY_EXISTS:return W.ALREADY_EXISTS;case qt.PERMISSION_DENIED:return W.PERMISSION_DENIED;case qt.FAILED_PRECONDITION:return W.FAILED_PRECONDITION;case qt.ABORTED:return W.ABORTED;case qt.OUT_OF_RANGE:return W.OUT_OF_RANGE;case qt.UNIMPLEMENTED:return W.UNIMPLEMENTED;case qt.DATA_LOSS:return W.DATA_LOSS;default:return _e(39323,{code:i})}}(Ke=qt||(qt={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sm=null;/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4=new Zs([4294967295,4294967295],0);function OS(i){const e=j_().encode(i),t=new QA;return t.update(e),new Uint8Array(t.digest())}function PS(i){const e=new DataView(i.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),a=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Zs([t,r],0),new Zs([a,l],0)]}class nv{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new zc(`Invalid padding: ${t}`);if(r<0)throw new zc(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new zc(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new zc(`Invalid padding when bitmap length is 0: ${t}`);this.fe=8*e.length-t,this.ge=Zs.fromNumber(this.fe)}pe(e,t,r){let a=e.add(t.multiply(Zs.fromNumber(r)));return a.compare(C4)===1&&(a=new Zs([a.getBits(0),a.getBits(1)],0)),a.modulo(this.ge).toNumber()}ye(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.fe===0)return!1;const t=OS(e),[r,a]=PS(t);for(let l=0;l<this.hashCount;l++){const u=this.pe(r,a,l);if(!this.ye(u))return!1}return!0}static create(e,t,r){const a=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new nv(l,a,t);return r.forEach((f=>u.insert(f))),u}insert(e){if(this.fe===0)return;const t=OS(e),[r,a]=PS(t);for(let l=0;l<this.hashCount;l++){const u=this.pe(r,a,l);this.we(u)}}we(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class zc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,t,r,a,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=a,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const a=new Map;return a.set(e,Oh.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Nh(Se.min(),a,new pt(Ae),Bn(),Ne())}}class Oh{constructor(e,t,r,a,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=a,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Oh(r,t,Ne(),Ne(),Ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zd{constructor(e,t,r,a){this.Se=e,this.removedTargetIds=t,this.key=r,this.be=a}}class ox{constructor(e,t){this.targetId=e,this.De=t}}class lx{constructor(e,t,r=xt.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=a}}class VS{constructor(){this.ve=0,this.Ce=MS(),this.Fe=xt.EMPTY_BYTE_STRING,this.Me=!1,this.xe=!0}get current(){return this.Me}get resumeToken(){return this.Fe}get Oe(){return this.ve!==0}get Ne(){return this.xe}Be(e){e.approximateByteSize()>0&&(this.xe=!0,this.Fe=e)}Le(){let e=Ne(),t=Ne(),r=Ne();return this.Ce.forEach(((a,l)=>{switch(l){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:r=r.add(a);break;default:_e(38017,{changeType:l})}})),new Oh(this.Fe,this.Me,e,t,r)}ke(){this.xe=!1,this.Ce=MS()}qe(e,t){this.xe=!0,this.Ce=this.Ce.insert(e,t)}Qe(e){this.xe=!0,this.Ce=this.Ce.remove(e)}$e(){this.ve+=1}Ue(){this.ve-=1,Te(this.ve>=0,3241,{ve:this.ve})}Ke(){this.xe=!0,this.Me=!0}}class D4{constructor(e){this.We=e,this.Ge=new Map,this.ze=Bn(),this.je=vd(),this.Je=vd(),this.He=new pt(Ae)}Ye(e){for(const t of e.Se)e.be&&e.be.isFoundDocument()?this.Ze(t,e.be):this.Xe(t,e.key,e.be);for(const t of e.removedTargetIds)this.Xe(t,e.key,e.be)}et(e){this.forEachTarget(e,(t=>{const r=this.tt(t);switch(e.state){case 0:this.nt(t)&&r.Be(e.resumeToken);break;case 1:r.Ue(),r.Oe||r.ke(),r.Be(e.resumeToken);break;case 2:r.Ue(),r.Oe||this.removeTarget(t);break;case 3:this.nt(t)&&(r.Ke(),r.Be(e.resumeToken));break;case 4:this.nt(t)&&(this.rt(t),r.Be(e.resumeToken));break;default:_e(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Ge.forEach(((r,a)=>{this.nt(a)&&t(a)}))}it(e){const t=e.targetId,r=e.De.count,a=this.st(t);if(a){const l=a.target;if(nm(l))if(r===0){const u=new pe(l.path);this.Xe(t,u,vt.newNoDocument(u,Se.min()))}else Te(r===1,20013,{expectedCount:r});else{const u=this.ot(t);if(u!==r){const f=this._t(e),d=f?this.ut(f,e,u):1;if(d!==0){this.rt(t);const p=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.He=this.He.insert(t,p)}sm==null||sm.ct((function(y,_,b,A,N){var M,P,q,$,B,J;const fe={localCacheCount:y,existenceFilterCount:_.count,databaseId:b.database,projectId:b.projectId},de=_.unchangedNames;return de&&(fe.bloomFilter={applied:N===0,hashCount:(M=de==null?void 0:de.hashCount)!==null&&M!==void 0?M:0,bitmapLength:($=(q=(P=de==null?void 0:de.bits)===null||P===void 0?void 0:P.bitmap)===null||q===void 0?void 0:q.length)!==null&&$!==void 0?$:0,padding:(J=(B=de==null?void 0:de.bits)===null||B===void 0?void 0:B.padding)!==null&&J!==void 0?J:0,mightContain:R=>{var C;return(C=A==null?void 0:A.mightContain(R))!==null&&C!==void 0&&C}}),fe})(u,e.De,this.We.lt(),f,d))}}}}_t(e){const t=e.De.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:a=0},hashCount:l=0}=t;let u,f;try{u=Fr(r).toUint8Array()}catch(d){if(d instanceof AI)return wn("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{f=new nv(u,a,l)}catch(d){return wn(d instanceof zc?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return f.fe===0?null:f}ut(e,t,r){return t.De.count===r-this.ht(e,t.targetId)?0:2}ht(e,t){const r=this.We.getRemoteKeysForTarget(t);let a=0;return r.forEach((l=>{const u=this.We.lt(),f=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.Xe(t,l,null),a++)})),a}Pt(e){const t=new Map;this.Ge.forEach(((l,u)=>{const f=this.st(u);if(f){if(l.current&&nm(f.target)){const d=new pe(f.target.path);this.Tt(d).has(u)||this.It(u,d)||this.Xe(u,d,vt.newNoDocument(d,e))}l.Ne&&(t.set(u,l.Le()),l.ke())}}));let r=Ne();this.Je.forEach(((l,u)=>{let f=!0;u.forEachWhile((d=>{const p=this.st(d);return!p||p.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)})),f&&(r=r.add(l))})),this.ze.forEach(((l,u)=>u.setReadTime(e)));const a=new Nh(e,t,this.He,this.ze,r);return this.ze=Bn(),this.je=vd(),this.Je=vd(),this.He=new pt(Ae),a}Ze(e,t){if(!this.nt(e))return;const r=this.It(e,t.key)?2:0;this.tt(e).qe(t.key,r),this.ze=this.ze.insert(t.key,t),this.je=this.je.insert(t.key,this.Tt(t.key).add(e)),this.Je=this.Je.insert(t.key,this.dt(t.key).add(e))}Xe(e,t,r){if(!this.nt(e))return;const a=this.tt(e);this.It(e,t)?a.qe(t,1):a.Qe(t),this.Je=this.Je.insert(t,this.dt(t).delete(e)),this.Je=this.Je.insert(t,this.dt(t).add(e)),r&&(this.ze=this.ze.insert(t,r))}removeTarget(e){this.Ge.delete(e)}ot(e){const t=this.tt(e).Le();return this.We.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.tt(e).$e()}tt(e){let t=this.Ge.get(e);return t||(t=new VS,this.Ge.set(e,t)),t}dt(e){let t=this.Je.get(e);return t||(t=new st(Ae),this.Je=this.Je.insert(e,t)),t}Tt(e){let t=this.je.get(e);return t||(t=new st(Ae),this.je=this.je.insert(e,t)),t}nt(e){const t=this.st(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}st(e){const t=this.Ge.get(e);return t&&t.Oe?null:this.We.Et(e)}rt(e){this.Ge.set(e,new VS),this.We.getRemoteKeysForTarget(e).forEach((t=>{this.Xe(e,t,null)}))}It(e,t){return this.We.getRemoteKeysForTarget(e).has(t)}}function vd(){return new pt(pe.comparator)}function MS(){return new pt(pe.comparator)}const N4={asc:"ASCENDING",desc:"DESCENDING"},O4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},P4={and:"AND",or:"OR"};class V4{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function n_(i,e){return i.useProto3Json||Ah(e)?e:{value:e}}function Wl(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ux(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function M4(i,e){return Wl(i,e.toTimestamp())}function Lt(i){return Te(!!i,49232),Se.fromTimestamp((function(t){const r=Br(t);return new et(r.seconds,r.nanos)})(i))}function iv(i,e){return i_(i,e).canonicalString()}function i_(i,e){const t=(function(a){return new ke(["projects",a.projectId,"databases",a.database])})(i).child("documents");return e===void 0?t:t.child(e)}function cx(i){const e=ke.fromString(i);return Te(vx(e),10190,{key:e.toString()}),e}function fh(i,e){return iv(i.databaseId,e.path)}function tr(i,e){const t=cx(e);if(t.get(1)!==i.databaseId.projectId)throw new oe(W.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new oe(W.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new pe(dx(t))}function hx(i,e){return iv(i.databaseId,e)}function fx(i){const e=cx(i);return e.length===4?ke.emptyPath():dx(e)}function r_(i){return new ke(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function dx(i){return Te(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function kS(i,e,t){return{name:fh(i,e),fields:t.value.mapValue.fields}}function Pm(i,e,t){const r=tr(i,e.name),a=Lt(e.updateTime),l=e.createTime?Lt(e.createTime):Se.min(),u=new gn({mapValue:{fields:e.fields}}),f=vt.newFoundDocument(r,a,l,u);return t&&f.setHasCommittedMutations(),t?f.setHasCommittedMutations():f}function k4(i,e){return"found"in e?(function(r,a){Te(!!a.found,43571),a.found.name,a.found.updateTime;const l=tr(r,a.found.name),u=Lt(a.found.updateTime),f=a.found.createTime?Lt(a.found.createTime):Se.min(),d=new gn({mapValue:{fields:a.found.fields}});return vt.newFoundDocument(l,u,f,d)})(i,e):"missing"in e?(function(r,a){Te(!!a.missing,3894),Te(!!a.readTime,22933);const l=tr(r,a.missing),u=Lt(a.readTime);return vt.newNoDocument(l,u)})(i,e):_e(7234,{result:e})}function L4(i,e){let t;if("targetChange"in e){e.targetChange;const r=(function(p){return p==="NO_CHANGE"?0:p==="ADD"?1:p==="REMOVE"?2:p==="CURRENT"?3:p==="RESET"?4:_e(39313,{state:p})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],l=(function(p,y){return p.useProto3Json?(Te(y===void 0||typeof y=="string",58123),xt.fromBase64String(y||"")):(Te(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),xt.fromUint8Array(y||new Uint8Array))})(i,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&(function(p){const y=p.code===void 0?W.UNKNOWN:ax(p.code);return new oe(y,p.message||"")})(u);t=new lx(r,a,l,f||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const a=tr(i,r.document.name),l=Lt(r.document.updateTime),u=r.document.createTime?Lt(r.document.createTime):Se.min(),f=new gn({mapValue:{fields:r.document.fields}}),d=vt.newFoundDocument(a,l,u,f),p=r.targetIds||[],y=r.removedTargetIds||[];t=new zd(p,y,d.key,d)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const a=tr(i,r.document),l=r.readTime?Lt(r.readTime):Se.min(),u=vt.newNoDocument(a,l),f=r.removedTargetIds||[];t=new zd([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const a=tr(i,r.document),l=r.removedTargetIds||[];t=new zd([],l,a,null)}else{if(!("filter"in e))return _e(11601,{At:e});{e.filter;const r=e.filter;r.targetId;const{count:a=0,unchangedNames:l}=r,u=new R4(a,l),f=r.targetId;t=new ox(f,u)}}return t}function dh(i,e){let t;if(e instanceof mu)t={update:kS(i,e.key,e.value)};else if(e instanceof pu)t={delete:fh(i,e.key)};else if(e instanceof $r)t={update:kS(i,e.key,e.data),updateMask:q4(e.fieldMask)};else{if(!(e instanceof J_))return _e(16599,{Rt:e.type});t={verify:fh(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((r=>(function(l,u){const f=u.transform;if(f instanceof Xl)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof po)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof go)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Yl)return{fieldPath:u.field.canonicalString(),increment:f.Ee};throw _e(20930,{transform:u.transform})})(0,r)))),e.precondition.isNone||(t.currentDocument=(function(a,l){return l.updateTime!==void 0?{updateTime:M4(a,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:_e(27497)})(i,e.precondition)),t}function s_(i,e){const t=e.currentDocument?(function(l){return l.updateTime!==void 0?St.updateTime(Lt(l.updateTime)):l.exists!==void 0?St.exists(l.exists):St.none()})(e.currentDocument):St.none(),r=e.updateTransforms?e.updateTransforms.map((a=>(function(u,f){let d=null;if("setToServerValue"in f)Te(f.setToServerValue==="REQUEST_TIME",16630,{proto:f}),d=new Xl;else if("appendMissingElements"in f){const y=f.appendMissingElements.values||[];d=new po(y)}else if("removeAllFromArray"in f){const y=f.removeAllFromArray.values||[];d=new go(y)}else"increment"in f?d=new Yl(u,f.increment):_e(16584,{proto:f});const p=Et.fromServerFormat(f.fieldPath);return new Dh(p,d)})(i,a))):[];if(e.update){e.update.name;const a=tr(i,e.update.name),l=new gn({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=(function(d){const p=d.fieldPaths||[];return new zn(p.map((y=>Et.fromServerFormat(y))))})(e.updateMask);return new $r(a,l,u,t,r)}return new mu(a,l,t,r)}if(e.delete){const a=tr(i,e.delete);return new pu(a,t)}if(e.verify){const a=tr(i,e.verify);return new J_(a,t)}return _e(1463,{proto:e})}function j4(i,e){return i&&i.length>0?(Te(e!==void 0,14353),i.map((t=>(function(a,l){let u=a.updateTime?Lt(a.updateTime):Lt(l);return u.isEqual(Se.min())&&(u=Lt(l)),new A4(u,a.transformResults||[])})(t,e)))):[]}function mx(i,e){return{documents:[hx(i,e.path)]}}function Vm(i,e){const t={structuredQuery:{}},r=e.path;let a;e.collectionGroup!==null?(a=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=hx(i,a);const l=(function(p){if(p.length!==0)return _x(it.create(p,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const u=(function(p){if(p.length!==0)return p.map((y=>(function(b){return{field:Gs(b.field),direction:z4(b.dir)}})(y)))})(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=n_(i,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=(function(p){return{before:p.inclusive,values:p.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(p){return{before:!p.inclusive,values:p.position}})(e.endAt)),{Vt:t,parent:a}}function px(i,e,t,r){const{Vt:a,parent:l}=Vm(i,e),u={},f=[];let d=0;return t.forEach((p=>{const y=r?p.alias:"aggregate_"+d++;u[y]=p.alias,p.aggregateType==="count"?f.push({alias:y,count:{}}):p.aggregateType==="avg"?f.push({alias:y,avg:{field:Gs(p.fieldPath)}}):p.aggregateType==="sum"&&f.push({alias:y,sum:{field:Gs(p.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:f,structuredQuery:a.structuredQuery},parent:a.parent},ft:u,parent:l}}function gx(i){let e=fx(i.parent);const t=i.structuredQuery,r=t.from?t.from.length:0;let a=null;if(r>0){Te(r===1,65062);const y=t.from[0];y.allDescendants?a=y.collectionId:e=e.child(y.collectionId)}let l=[];t.where&&(l=(function(_){const b=yx(_);return b instanceof it&&Q_(b)?b.getFilters():[b]})(t.where));let u=[];t.orderBy&&(u=(function(_){return _.map((b=>(function(N){return new hh(Rl(N.field),(function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(b)))})(t.orderBy));let f=null;t.limit&&(f=(function(_){let b;return b=typeof _=="object"?_.value:_,Ah(b)?null:b})(t.limit));let d=null;t.startAt&&(d=(function(_){const b=!!_.before,A=_.values||[];return new sa(A,b)})(t.startAt));let p=null;return t.endAt&&(p=(function(_){const b=!_.before,A=_.values||[];return new sa(A,b)})(t.endAt)),BI(e,a,u,l,f,"F",d,p)}function U4(i,e){const t=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return _e(28987,{purpose:a})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function yx(i){return i.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Rl(t.unaryFilter.field);return He.create(r,"==",{doubleValue:NaN});case"IS_NULL":const a=Rl(t.unaryFilter.field);return He.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Rl(t.unaryFilter.field);return He.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Rl(t.unaryFilter.field);return He.create(u,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return _e(61313);default:return _e(60726)}})(i):i.fieldFilter!==void 0?(function(t){return He.create(Rl(t.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return _e(58110);default:return _e(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(t){return it.create(t.compositeFilter.filters.map((r=>yx(r))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return _e(1026)}})(t.compositeFilter.op))})(i):_e(30097,{filter:i})}function z4(i){return N4[i]}function B4(i){return O4[i]}function F4(i){return P4[i]}function Gs(i){return{fieldPath:i.canonicalString()}}function Rl(i){return Et.fromServerFormat(i.fieldPath)}function _x(i){return i instanceof He?(function(t){if(t.op==="=="){if(ES(t.value))return{unaryFilter:{field:Gs(t.field),op:"IS_NAN"}};if(vS(t.value))return{unaryFilter:{field:Gs(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(ES(t.value))return{unaryFilter:{field:Gs(t.field),op:"IS_NOT_NAN"}};if(vS(t.value))return{unaryFilter:{field:Gs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gs(t.field),op:B4(t.op),value:t.value}}})(i):i instanceof it?(function(t){const r=t.getFilters().map((a=>_x(a)));return r.length===1?r[0]:{compositeFilter:{op:F4(t.op),filters:r}}})(i):_e(54877,{filter:i})}function q4(i){const e=[];return i.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function vx(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,t,r,a,l=Se.min(),u=Se.min(),f=xt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=a,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=d}withSequenceNumber(e){return new Pr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e){this.gt=e}}function H4(i,e){let t;if(e.document)t=Pm(i.gt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=pe.fromSegments(e.noDocument.path),a=_o(e.noDocument.readTime);t=vt.newNoDocument(r,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return _e(56709);{const r=pe.fromSegments(e.unknownDocument.path),a=_o(e.unknownDocument.version);t=vt.newUnknownDocument(r,a)}}return e.readTime&&t.setReadTime((function(a){const l=new et(a[0],a[1]);return Se.fromTimestamp(l)})(e.readTime)),t}function LS(i,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:am(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=(function(l,u){return{name:fh(l,u.key),fields:u.data.value.mapValue.fields,updateTime:Wl(l,u.version.toTimestamp()),createTime:Wl(l,u.createTime.toTimestamp())}})(i.gt,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:yo(e.version)};else{if(!e.isUnknownDocument())return _e(57904,{document:e});r.unknownDocument={path:t.path.toArray(),version:yo(e.version)}}return r}function am(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function yo(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function _o(i){const e=new et(i.seconds,i.nanoseconds);return Se.fromTimestamp(e)}function to(i,e){const t=(e.baseMutations||[]).map((l=>s_(i.gt,l)));for(let l=0;l<e.mutations.length-1;++l){const u=e.mutations[l];if(l+1<e.mutations.length&&e.mutations[l+1].transform!==void 0){const f=e.mutations[l+1];u.updateTransforms=f.transform.fieldTransforms,e.mutations.splice(l+1,1),++l}}const r=e.mutations.map((l=>s_(i.gt,l))),a=et.fromMillis(e.localWriteTimeMs);return new Z_(e.batchId,a,t,r)}function Bc(i){const e=_o(i.readTime),t=i.lastLimboFreeSnapshotVersion!==void 0?_o(i.lastLimboFreeSnapshotVersion):Se.min();let r;return r=(function(l){return l.documents!==void 0})(i.query)?(function(l){const u=l.documents.length;return Te(u===1,1966,{count:u}),Sn(du(fx(l.documents[0])))})(i.query):(function(l){return Sn(gx(l))})(i.query),new Pr(r,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,e,t,xt.fromBase64String(i.resumeToken))}function Tx(i,e){const t=yo(e.snapshotVersion),r=yo(e.lastLimboFreeSnapshotVersion);let a;a=nm(e.target)?mx(i.gt,e.target):Vm(i.gt,e.target).Vt;const l=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:mo(e.target),readTime:t,resumeToken:l,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:a}}function Mm(i){const e=gx({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?rm(e,e.limit,"L"):e}function gy(i,e){return new tv(e.largestBatchId,s_(i.gt,e.overlayMutation))}function jS(i,e){const t=e.path.lastSegment();return[i,bn(e.path.popLast()),t]}function US(i,e,t,r){return{indexId:i,uid:e,sequenceNumber:t,readTime:yo(r.readTime),documentKey:bn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G4{getBundleMetadata(e,t){return zS(e).get(t).next((r=>{if(r)return(function(l){return{id:l.bundleId,createTime:_o(l.createTime),version:l.version}})(r)}))}saveBundleMetadata(e,t){return zS(e).put((function(a){return{bundleId:a.id,createTime:yo(Lt(a.createTime)),version:a.version}})(t))}getNamedQuery(e,t){return BS(e).get(t).next((r=>{if(r)return(function(l){return{name:l.name,query:Mm(l.bundledQuery),readTime:_o(l.readTime)}})(r)}))}saveNamedQuery(e,t){return BS(e).put((function(a){return{name:a.name,readTime:yo(Lt(a.readTime)),bundledQuery:a.bundledQuery}})(t))}}function zS(i){return Xt(i,Am)}function BS(i){return Xt(i,Im)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,t){this.serializer=e,this.userId=t}static yt(e,t){const r=t.uid||"";return new km(e,r)}getOverlay(e,t){return Rc(e).get(jS(this.userId,t)).next((r=>r?gy(this.serializer,r):null))}getOverlays(e,t){const r=Wi();return K.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){const a=[];return r.forEach(((l,u)=>{const f=new tv(t,u);a.push(this.wt(e,f))})),K.waitFor(a)}removeOverlaysForBatchId(e,t,r){const a=new Set;t.forEach((u=>a.add(bn(u.getCollectionPath()))));const l=[];return a.forEach((u=>{const f=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);l.push(Rc(e).Y(Qy,f))})),K.waitFor(l)}getOverlaysForCollection(e,t,r){const a=Wi(),l=bn(t),u=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,Number.POSITIVE_INFINITY],!0);return Rc(e).j(Qy,u).next((f=>{for(const d of f){const p=gy(this.serializer,d);a.set(p.getKey(),p)}return a}))}getOverlaysForCollectionGroup(e,t,r,a){const l=Wi();let u;const f=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Rc(e).X({index:_I,range:f},((d,p,y)=>{const _=gy(this.serializer,p);l.size()<a||_.largestBatchId===u?(l.set(_.getKey(),_),u=_.largestBatchId):y.done()})).next((()=>l))}wt(e,t){return Rc(e).put((function(a,l,u){const[f,d,p]=jS(l,u.mutation.key);return{userId:l,collectionPath:d,documentId:p,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:dh(a.gt,u.mutation)}})(this.serializer,this.userId,t))}}function Rc(i){return Xt(i,xm)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K4{St(e){return Xt(e,H_)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const r=t==null?void 0:t.value;return r?xt.fromUint8Array(r):xt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(bt(e.integerValue));else if("doubleValue"in e){const r=bt(e.doubleValue);isNaN(r)?this.Ct(t,13):(this.Ct(t,15),ih(r)?t.Ft(0):t.Ft(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ct(t,20),typeof r=="string"&&(r=Br(r)),t.Mt(`${r.seconds||""}`),t.Ft(r.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(Fr(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.Ct(t,45),t.Ft(r.latitude||0),t.Ft(r.longitude||0)}else"mapValue"in e?NI(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):Dm(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):_e(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){const r=e.fields||{};this.Ct(t,55);for(const a of Object.keys(r))this.xt(a,t),this.Dt(r[a],t)}Lt(e,t){var r,a;const l=e.fields||{};this.Ct(t,53);const u=Kl,f=((a=(r=l[u].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.length)||0;this.Ct(t,15),t.Ft(bt(f)),this.xt(u,t),this.Dt(l[u],t)}qt(e,t){const r=e.values||[];this.Ct(t,50);for(const a of r)this.Dt(a,t)}Bt(e,t){this.Ct(t,37),pe.fromName(e).path.forEach((r=>{this.Ct(t,60),this.$t(r,t)}))}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}}no.Ut=new no;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bl=255;function $4(i){if(i===0)return 8;let e=0;return i>>4||(e+=4,i<<=4),i>>6||(e+=2,i<<=2),i>>7||(e+=1),e}function FS(i){const e=64-(function(r){let a=0;for(let l=0;l<8;++l){const u=$4(255&r[l]);if(a+=u,u!==8)break}return a})(i);return Math.ceil(e/8)}class Q4{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Kt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Wt(r.value),r=t.next();this.Gt()}zt(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.jt(r.value),r=t.next();this.Jt()}Ht(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Wt(r);else if(r<2048)this.Wt(960|r>>>6),this.Wt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Wt(480|r>>>12),this.Wt(128|63&r>>>6),this.Wt(128|63&r);else{const a=t.codePointAt(0);this.Wt(240|a>>>18),this.Wt(128|63&a>>>12),this.Wt(128|63&a>>>6),this.Wt(128|63&a)}}this.Gt()}Yt(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.jt(r);else if(r<2048)this.jt(960|r>>>6),this.jt(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.jt(480|r>>>12),this.jt(128|63&r>>>6),this.jt(128|63&r);else{const a=t.codePointAt(0);this.jt(240|a>>>18),this.jt(128|63&a>>>12),this.jt(128|63&a>>>6),this.jt(128|63&a)}}this.Jt()}Zt(e){const t=this.Xt(e),r=FS(t);this.en(1+r),this.buffer[this.position++]=255&r;for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=255&t[a]}tn(e){const t=this.Xt(e),r=FS(t);this.en(1+r),this.buffer[this.position++]=~(255&r);for(let a=t.length-r;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}nn(){this.rn(bl),this.rn(255)}sn(){this._n(bl),this._n(255)}reset(){this.position=0}seed(e){this.en(e.length),this.buffer.set(e,this.position),this.position+=e.length}an(){return this.buffer.slice(0,this.position)}Xt(e){const t=(function(l){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,l,!1),new Uint8Array(u.buffer)})(e),r=!!(128&t[0]);t[0]^=r?255:128;for(let a=1;a<t.length;++a)t[a]^=r?255:0;return t}Wt(e){const t=255&e;t===0?(this.rn(0),this.rn(255)):t===bl?(this.rn(bl),this.rn(0)):this.rn(t)}jt(e){const t=255&e;t===0?(this._n(0),this._n(255)):t===bl?(this._n(bl),this._n(0)):this._n(e)}Gt(){this.rn(0),this.rn(1)}Jt(){this._n(0),this._n(1)}rn(e){this.en(1),this.buffer[this.position++]=e}_n(e){this.en(1),this.buffer[this.position++]=~e}en(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const a=new Uint8Array(r);a.set(this.buffer),this.buffer=a}}class X4{constructor(e){this.un=e}Nt(e){this.un.Kt(e)}Mt(e){this.un.Ht(e)}Ft(e){this.un.Zt(e)}vt(){this.un.nn()}}class Y4{constructor(e){this.un=e}Nt(e){this.un.zt(e)}Mt(e){this.un.Yt(e)}Ft(e){this.un.tn(e)}vt(){this.un.sn()}}class Cc{constructor(){this.un=new Q4,this.cn=new X4(this.un),this.ln=new Y4(this.un)}seed(e){this.un.seed(e)}hn(e){return e===0?this.cn:this.ln}an(){return this.un.an()}reset(){this.un.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e,t,r,a){this.Pn=e,this.Tn=t,this.In=r,this.dn=a}En(){const e=this.dn.length,t=e===0||this.dn[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.dn,0),t!==e?r.set([0],this.dn.length):++r[r.length-1],new io(this.Pn,this.Tn,this.In,r)}An(e,t,r){return{indexId:this.Pn,uid:e,arrayValue:Bd(this.In),directionalValue:Bd(this.dn),orderedDocumentKey:Bd(t),documentKey:r.path.toArray()}}Rn(e,t,r){const a=this.An(e,t,r);return[a.indexId,a.uid,a.arrayValue,a.directionalValue,a.orderedDocumentKey,a.documentKey]}}function js(i,e){let t=i.Pn-e.Pn;return t!==0?t:(t=qS(i.In,e.In),t!==0?t:(t=qS(i.dn,e.dn),t!==0?t:pe.comparator(i.Tn,e.Tn)))}function qS(i,e){for(let t=0;t<i.length&&t<e.length;++t){const r=i[t]-e[t];if(r!==0)return r}return i.length-e.length}function Bd(i){return aA()?(function(t){let r="";for(let a=0;a<t.length;a++)r+=String.fromCharCode(t[a]);return r})(i):i}function HS(i){return typeof i!="string"?i:(function(t){const r=new Uint8Array(t.length);for(let a=0;a<t.length;a++)r[a]=t.charCodeAt(a);return r})(i)}class GS{constructor(e){this.Vn=new st(((t,r)=>Et.comparator(t.field,r.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.mn=e.orderBy,this.fn=[];for(const t of e.filters){const r=t;r.isInequality()?this.Vn=this.Vn.add(r):this.fn.push(r)}}get gn(){return this.Vn.size>1}pn(e){if(Te(e.collectionGroup===this.collectionId,49279),this.gn)return!1;const t=Gy(e);if(t!==void 0&&!this.yn(t))return!1;const r=Ja(e);let a=new Set,l=0,u=0;for(;l<r.length&&this.yn(r[l]);++l)a=a.add(r[l].fieldPath.canonicalString());if(l===r.length)return!0;if(this.Vn.size>0){const f=this.Vn.getIterator().getNext();if(!a.has(f.field.canonicalString())){const d=r[l];if(!this.wn(f,d)||!this.Sn(this.mn[u++],d))return!1}++l}for(;l<r.length;++l){const f=r[l];if(u>=this.mn.length||!this.Sn(this.mn[u++],f))return!1}return!0}bn(){if(this.gn)return null;let e=new st(Et.comparator);const t=[];for(const r of this.fn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new so(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new so(r.field,0))}for(const r of this.mn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new so(r.field,r.dir==="asc"?0:1)));return new zl(zl.UNKNOWN_ID,this.collectionId,t,Bl.empty())}yn(e){for(const t of this.fn)if(this.wn(t,e))return!0;return!1}wn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}Sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(i){var e,t;if(Te(i instanceof He||i instanceof it,20012),i instanceof He){if(i instanceof zI){const a=((t=(e=i.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map((l=>He.create(i.field,"==",l))))||[];return it.create(a,"or")}return i}const r=i.filters.map((a=>bx(a)));return it.create(r,i.op)}function W4(i){if(i.getFilters().length===0)return[];const e=l_(bx(i));return Te(Sx(e),7391),a_(e)||o_(e)?[e]:e.getFilters()}function a_(i){return i instanceof He}function o_(i){return i instanceof it&&Q_(i)}function Sx(i){return a_(i)||o_(i)||(function(t){if(t instanceof it&&Jy(t)){for(const r of t.getFilters())if(!a_(r)&&!o_(r))return!1;return!0}return!1})(i)}function l_(i){if(Te(i instanceof He||i instanceof it,34018),i instanceof He)return i;if(i.filters.length===1)return l_(i.filters[0]);const e=i.filters.map((r=>l_(r)));let t=it.create(e,i.op);return t=om(t),Sx(t)?t:(Te(t instanceof it,64498),Te(Ql(t),40251),Te(t.filters.length>1,57927),t.filters.reduce(((r,a)=>rv(r,a))))}function rv(i,e){let t;return Te(i instanceof He||i instanceof it,38388),Te(e instanceof He||e instanceof it,25473),t=i instanceof He?e instanceof He?(function(a,l){return it.create([a,l],"and")})(i,e):KS(i,e):e instanceof He?KS(e,i):(function(a,l){if(Te(a.filters.length>0&&l.filters.length>0,48005),Ql(a)&&Ql(l))return LI(a,l.getFilters());const u=Jy(a)?a:l,f=Jy(a)?l:a,d=u.filters.map((p=>rv(p,f)));return it.create(d,"or")})(i,e),om(t)}function KS(i,e){if(Ql(e))return LI(e,i.getFilters());{const t=e.filters.map((r=>rv(i,r)));return it.create(t,"or")}}function om(i){if(Te(i instanceof He||i instanceof it,11850),i instanceof He)return i;const e=i.getFilters();if(e.length===1)return om(e[0]);if(MI(i))return i;const t=e.map((a=>om(a))),r=[];return t.forEach((a=>{a instanceof He?r.push(a):a instanceof it&&(a.op===i.op?r.push(...a.filters):r.push(a))})),r.length===1?r[0]:it.create(r,i.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{constructor(){this.Dn=new sv}addToCollectionParentIndex(e,t){return this.Dn.add(t),K.resolve()}getCollectionParents(e,t){return K.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return K.resolve()}deleteFieldIndex(e,t){return K.resolve()}deleteAllFieldIndexes(e){return K.resolve()}createTargetIndexes(e,t){return K.resolve()}getDocumentsMatchingTarget(e,t){return K.resolve(null)}getIndexType(e,t){return K.resolve(0)}getFieldIndexes(e,t){return K.resolve([])}getNextCollectionGroupToUpdate(e){return K.resolve(null)}getMinOffset(e,t){return K.resolve(ti.min())}getMinOffsetFromCollectionGroup(e,t){return K.resolve(ti.min())}updateCollectionGroup(e,t,r){return K.resolve()}updateIndexEntries(e,t){return K.resolve()}}class sv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t]||new st(ke.comparator),l=!a.has(r);return this.index[t]=a.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),a=this.index[t];return a&&a.has(r)}getEntries(e){return(this.index[e]||new st(ke.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $S="IndexedDbIndexManager",Ed=new Uint8Array(0);class Z4{constructor(e,t){this.databaseId=t,this.vn=new sv,this.Cn=new Kr((r=>mo(r)),((r,a)=>xh(r,a))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const r=t.lastSegment(),a=t.popLast();e.addOnCommittedListener((()=>{this.vn.add(t)}));const l={collectionId:r,parent:bn(a)};return QS(e).put(l)}return K.resolve()}getCollectionParents(e,t){const r=[],a=IDBKeyRange.bound([t,""],[iI(t),""],!1,!0);return QS(e).j(a).next((l=>{for(const u of l){if(u.collectionId!==t)break;r.push(Yi(u.parent))}return r}))}addFieldIndex(e,t){const r=Dc(e),a=(function(f){return{indexId:f.indexId,collectionGroup:f.collectionGroup,fields:f.fields.map((d=>[d.fieldPath.canonicalString(),d.kind]))}})(t);delete a.indexId;const l=r.add(a);if(t.indexState){const u=wl(e);return l.next((f=>{u.put(US(f,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return l.next()}deleteFieldIndex(e,t){const r=Dc(e),a=wl(e),l=Sl(e);return r.delete(t.indexId).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>l.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=Dc(e),r=Sl(e),a=wl(e);return t.Y().next((()=>r.Y())).next((()=>a.Y()))}createTargetIndexes(e,t){return K.forEach(this.Fn(t),(r=>this.getIndexType(e,r).next((a=>{if(a===0||a===1){const l=new GS(r).bn();if(l!=null)return this.addFieldIndex(e,l)}}))))}getDocumentsMatchingTarget(e,t){const r=Sl(e);let a=!0;const l=new Map;return K.forEach(this.Fn(t),(u=>this.Mn(e,u).next((f=>{a&&(a=!!f),l.set(u,f)})))).next((()=>{if(a){let u=Ne();const f=[];return K.forEach(l,((d,p)=>{ce($S,`Using index ${(function(B){return`id=${B.indexId}|cg=${B.collectionGroup}|f=${B.fields.map((J=>`${J.fieldPath}:${J.kind}`)).join(",")}`})(d)} to execute ${mo(t)}`);const y=(function(B,J){const fe=Gy(J);if(fe===void 0)return null;for(const de of im(B,fe.fieldPath))switch(de.op){case"array-contains-any":return de.value.arrayValue.values||[];case"array-contains":return[de.value]}return null})(p,d),_=(function(B,J){const fe=new Map;for(const de of Ja(J))for(const R of im(B,de.fieldPath))switch(R.op){case"==":case"in":fe.set(de.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return fe.set(de.fieldPath.canonicalString(),R.value),Array.from(fe.values())}return null})(p,d),b=(function(B,J){const fe=[];let de=!0;for(const R of Ja(J)){const C=R.kind===0?AS(B,R.fieldPath,B.startAt):IS(B,R.fieldPath,B.startAt);fe.push(C.value),de&&(de=C.inclusive)}return new sa(fe,de)})(p,d),A=(function(B,J){const fe=[];let de=!0;for(const R of Ja(J)){const C=R.kind===0?IS(B,R.fieldPath,B.endAt):AS(B,R.fieldPath,B.endAt);fe.push(C.value),de&&(de=C.inclusive)}return new sa(fe,de)})(p,d),N=this.xn(d,p,b),M=this.xn(d,p,A),P=this.On(d,p,_),q=this.Nn(d.indexId,y,N,b.inclusive,M,A.inclusive,P);return K.forEach(q,($=>r.H($,t.limit).next((B=>{B.forEach((J=>{const fe=pe.fromSegments(J.documentKey);u.has(fe)||(u=u.add(fe),f.push(fe))}))}))))})).next((()=>f))}return K.resolve(null)}))}Fn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=W4(it.create(e.filters,"and")).map((r=>e_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}Nn(e,t,r,a,l,u,f){const d=(t!=null?t.length:1)*Math.max(r.length,l.length),p=d/(t!=null?t.length:1),y=[];for(let _=0;_<d;++_){const b=t?this.Bn(t[_/p]):Ed,A=this.Ln(e,b,r[_%p],a),N=this.kn(e,b,l[_%p],u),M=f.map((P=>this.Ln(e,b,P,!0)));y.push(...this.createRange(A,N,M))}return y}Ln(e,t,r,a){const l=new io(e,pe.empty(),t,r);return a?l:l.En()}kn(e,t,r,a){const l=new io(e,pe.empty(),t,r);return a?l.En():l}Mn(e,t){const r=new GS(t),a=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next((l=>{let u=null;for(const f of l)r.pn(f)&&(!u||f.fields.length>u.fields.length)&&(u=f);return u}))}getIndexType(e,t){let r=2;const a=this.Fn(t);return K.forEach(a,(l=>this.Mn(e,l).next((u=>{u?r!==0&&u.fields.length<(function(d){let p=new st(Et.comparator),y=!1;for(const _ of d.filters)for(const b of _.getFlattenedFilters())b.field.isKeyField()||(b.op==="array-contains"||b.op==="array-contains-any"?y=!0:p=p.add(b.field));for(const _ of d.orderBy)_.field.isKeyField()||(p=p.add(_.field));return p.size+(y?1:0)})(l)&&(r=1):r=0})))).next((()=>(function(u){return u.limit!==null})(t)&&a.length>1&&r===2?1:r))}qn(e,t){const r=new Cc;for(const a of Ja(e)){const l=t.data.field(a.fieldPath);if(l==null)return null;const u=r.hn(a.kind);no.Ut.bt(l,u)}return r.an()}Bn(e){const t=new Cc;return no.Ut.bt(e,t.hn(0)),t.an()}Qn(e,t){const r=new Cc;return no.Ut.bt(fo(this.databaseId,t),r.hn((function(l){const u=Ja(l);return u.length===0?0:u[u.length-1].kind})(e))),r.an()}On(e,t,r){if(r===null)return[];let a=[];a.push(new Cc);let l=0;for(const u of Ja(e)){const f=r[l++];for(const d of a)if(this.$n(t,u.fieldPath)&&ch(f))a=this.Un(a,u,f);else{const p=d.hn(u.kind);no.Ut.bt(f,p)}}return this.Kn(a)}xn(e,t,r){return this.On(e,t,r.position)}Kn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].an();return t}Un(e,t,r){const a=[...e],l=[];for(const u of r.arrayValue.values||[])for(const f of a){const d=new Cc;d.seed(f.an()),no.Ut.bt(u,d.hn(t.kind)),l.push(d)}return l}$n(e,t){return!!e.filters.find((r=>r instanceof He&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(e,t){const r=Dc(e),a=wl(e);return(t?r.j($y,IDBKeyRange.bound(t,t)):r.j()).next((l=>{const u=[];return K.forEach(l,(f=>a.get([f.indexId,this.uid]).next((d=>{u.push((function(y,_){const b=_?new Bl(_.sequenceNumber,new ti(_o(_.readTime),new pe(Yi(_.documentKey)),_.largestBatchId)):Bl.empty(),A=y.fields.map((([N,M])=>new so(Et.fromServerFormat(N),M)));return new zl(y.indexId,y.collectionGroup,A,b)})(f,d))})))).next((()=>u))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((r,a)=>{const l=r.indexState.sequenceNumber-a.indexState.sequenceNumber;return l!==0?l:Ae(r.collectionGroup,a.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,r){const a=Dc(e),l=wl(e);return this.Wn(e).next((u=>a.j($y,IDBKeyRange.bound(t,t)).next((f=>K.forEach(f,(d=>l.put(US(d.indexId,this.uid,u,r))))))))}updateIndexEntries(e,t){const r=new Map;return K.forEach(t,((a,l)=>{const u=r.get(a.collectionGroup);return(u?K.resolve(u):this.getFieldIndexes(e,a.collectionGroup)).next((f=>(r.set(a.collectionGroup,f),K.forEach(f,(d=>this.Gn(e,a,d).next((p=>{const y=this.zn(l,d);return p.isEqual(y)?K.resolve():this.jn(e,l,d,p,y)})))))))}))}Jn(e,t,r,a){return Sl(e).put(a.An(this.uid,this.Qn(r,t.key),t.key))}Hn(e,t,r,a){return Sl(e).delete(a.Rn(this.uid,this.Qn(r,t.key),t.key))}Gn(e,t,r){const a=Sl(e);let l=new st(js);return a.X({index:yI,range:IDBKeyRange.only([r.indexId,this.uid,Bd(this.Qn(r,t))])},((u,f)=>{l=l.add(new io(r.indexId,t,HS(f.arrayValue),HS(f.directionalValue)))})).next((()=>l))}zn(e,t){let r=new st(js);const a=this.qn(t,e);if(a==null)return r;const l=Gy(t);if(l!=null){const u=e.data.field(l.fieldPath);if(ch(u))for(const f of u.arrayValue.values||[])r=r.add(new io(t.indexId,e.key,this.Bn(f),a))}else r=r.add(new io(t.indexId,e.key,Ed,a));return r}jn(e,t,r,a,l){ce($S,"Updating index entries for document '%s'",t.key);const u=[];return(function(d,p,y,_,b){const A=d.getIterator(),N=p.getIterator();let M=Tl(A),P=Tl(N);for(;M||P;){let q=!1,$=!1;if(M&&P){const B=y(M,P);B<0?$=!0:B>0&&(q=!0)}else M!=null?$=!0:q=!0;q?(_(P),P=Tl(N)):$?(b(M),M=Tl(A)):(M=Tl(A),P=Tl(N))}})(a,l,js,(f=>{u.push(this.Jn(e,t,r,f))}),(f=>{u.push(this.Hn(e,t,r,f))})),K.waitFor(u)}Wn(e){let t=1;return wl(e).X({index:gI,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,a,l)=>{l.done(),t=a.sequenceNumber+1})).next((()=>t))}createRange(e,t,r){r=r.sort(((u,f)=>js(u,f))).filter(((u,f,d)=>!f||js(u,d[f-1])!==0));const a=[];a.push(e);for(const u of r){const f=js(u,e),d=js(u,t);if(f===0)a[0]=e.En();else if(f>0&&d<0)a.push(u),a.push(u.En());else if(d>0)break}a.push(t);const l=[];for(let u=0;u<a.length;u+=2){if(this.Yn(a[u],a[u+1]))return[];const f=a[u].Rn(this.uid,Ed,pe.empty()),d=a[u+1].Rn(this.uid,Ed,pe.empty());l.push(IDBKeyRange.bound(f,d))}return l}Yn(e,t){return js(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(XS)}getMinOffset(e,t){return K.mapArray(this.Fn(t),(r=>this.Mn(e,r).next((a=>a||_e(44426))))).next(XS)}}function QS(i){return Xt(i,ah)}function Sl(i){return Xt(i,$c)}function Dc(i){return Xt(i,q_)}function wl(i){return Xt(i,Kc)}function XS(i){Te(i.length!==0,28825);let e=i[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<i.length;r++){const a=i[r].indexState.offset;z_(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new ti(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},wx=41943040;class Tn{static withCacheSize(e){return new Tn(e,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ax(i,e,t){const r=i.store(Ii),a=i.store(Fl),l=[],u=IDBKeyRange.only(t.batchId);let f=0;const d=r.X({range:u},((y,_,b)=>(f++,b.delete())));l.push(d.next((()=>{Te(f===1,47070,{batchId:t.batchId})})));const p=[];for(const y of t.mutations){const _=dI(e,y.key.path,t.batchId);l.push(a.delete(_)),p.push(y.key)}return K.waitFor(l).next((()=>p))}function lm(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw _e(14731);e=i.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Tn.DEFAULT_COLLECTION_PERCENTILE=10,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tn.DEFAULT=new Tn(wx,Tn.DEFAULT_COLLECTION_PERCENTILE,Tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tn.DISABLED=new Tn(-1,0,0);class Lm{constructor(e,t,r,a){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=a,this.Zn={}}static yt(e,t,r,a){Te(e.uid!=="",64387);const l=e.isAuthenticated()?e.uid:"";return new Lm(l,t,r,a)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Us(e).X({index:ro,range:r},((a,l,u)=>{t=!1,u.done()})).next((()=>t))}addMutationBatch(e,t,r,a){const l=Cl(e),u=Us(e);return u.add({}).next((f=>{Te(typeof f=="number",49019);const d=new Z_(f,t,r,a),p=(function(A,N,M){const P=M.baseMutations.map(($=>dh(A.gt,$))),q=M.mutations.map(($=>dh(A.gt,$)));return{userId:N,batchId:M.batchId,localWriteTimeMs:M.localWriteTime.toMillis(),baseMutations:P,mutations:q}})(this.serializer,this.userId,d),y=[];let _=new st(((b,A)=>Ae(b.canonicalString(),A.canonicalString())));for(const b of a){const A=dI(this.userId,b.key.path,f);_=_.add(b.key.path.popLast()),y.push(u.put(p)),y.push(l.put(A,VV))}return _.forEach((b=>{y.push(this.indexManager.addToCollectionParentIndex(e,b))})),e.addOnCommittedListener((()=>{this.Zn[f]=d.keys()})),K.waitFor(y).next((()=>d))}))}lookupMutationBatch(e,t){return Us(e).get(t).next((r=>r?(Te(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:t}),to(this.serializer,r)):null))}Xn(e,t){return this.Zn[t]?K.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((r=>{if(r){const a=r.keys();return this.Zn[t]=a,a}return null}))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=IDBKeyRange.lowerBound([this.userId,r]);let l=null;return Us(e).X({index:ro,range:a},((u,f,d)=>{f.userId===this.userId&&(Te(f.batchId>=r,47524,{er:r}),l=to(this.serializer,f)),d.done()})).next((()=>l))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ea;return Us(e).X({index:ro,range:t,reverse:!0},((a,l,u)=>{r=l.batchId,u.done()})).next((()=>r))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,ea],[this.userId,Number.POSITIVE_INFINITY]);return Us(e).j(ro,t).next((r=>r.map((a=>to(this.serializer,a)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Vd(this.userId,t.path),a=IDBKeyRange.lowerBound(r),l=[];return Cl(e).X({range:a},((u,f,d)=>{const[p,y,_]=u,b=Yi(y);if(p===this.userId&&t.path.isEqual(b))return Us(e).get(_).next((A=>{if(!A)throw _e(61480,{tr:u,batchId:_});Te(A.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:A.userId,batchId:_}),l.push(to(this.serializer,A))}));d.done()})).next((()=>l))}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new st(Ae);const a=[];return t.forEach((l=>{const u=Vd(this.userId,l.path),f=IDBKeyRange.lowerBound(u),d=Cl(e).X({range:f},((p,y,_)=>{const[b,A,N]=p,M=Yi(A);b===this.userId&&l.path.isEqual(M)?r=r.add(N):_.done()}));a.push(d)})),K.waitFor(a).next((()=>this.nr(e,r)))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1,l=Vd(this.userId,r),u=IDBKeyRange.lowerBound(l);let f=new st(Ae);return Cl(e).X({range:u},((d,p,y)=>{const[_,b,A]=d,N=Yi(b);_===this.userId&&r.isPrefixOf(N)?N.length===a&&(f=f.add(A)):y.done()})).next((()=>this.nr(e,f)))}nr(e,t){const r=[],a=[];return t.forEach((l=>{a.push(Us(e).get(l).next((u=>{if(u===null)throw _e(35274,{batchId:l});Te(u.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:u.userId,batchId:l}),r.push(to(this.serializer,u))})))})),K.waitFor(a).next((()=>r))}removeMutationBatch(e,t){return Ax(e.ce,this.userId,t).next((r=>(e.addOnCommittedListener((()=>{this.rr(t.batchId)})),K.forEach(r,(a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))))}rr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return K.resolve();const r=IDBKeyRange.lowerBound((function(u){return[u]})(this.userId)),a=[];return Cl(e).X({range:r},((l,u,f)=>{if(l[0]===this.userId){const d=Yi(l[1]);a.push(d)}else f.done()})).next((()=>{Te(a.length===0,56720,{ir:a.map((l=>l.canonicalString()))})}))}))}containsKey(e,t){return Ix(e,this.userId,t)}sr(e){return xx(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:ea,lastStreamToken:""}))}}function Ix(i,e,t){const r=Vd(e,t.path),a=r[1],l=IDBKeyRange.lowerBound(r);let u=!1;return Cl(i).X({range:l,Z:!0},((f,d,p)=>{const[y,_,b]=f;y===e&&_===a&&(u=!0),p.done()})).next((()=>u))}function Us(i){return Xt(i,Ii)}function Cl(i){return Xt(i,Fl)}function xx(i){return Xt(i,rh)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new vo(0)}static ur(){return new vo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eM{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.cr(e).next((t=>{const r=new vo(t.highestTargetId);return t.highestTargetId=r.next(),this.lr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.cr(e).next((t=>Se.fromTimestamp(new et(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.cr(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,r){return this.cr(e).next((a=>(a.highestListenSequenceNumber=t,r&&(a.lastRemoteSnapshotVersion=r.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.lr(e,a))))}addTargetData(e,t){return this.hr(e,t).next((()=>this.cr(e).next((r=>(r.targetCount+=1,this.Pr(t,r),this.lr(e,r))))))}updateTargetData(e,t){return this.hr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>Al(e).delete(t.targetId))).next((()=>this.cr(e))).next((r=>(Te(r.targetCount>0,8065),r.targetCount-=1,this.lr(e,r))))}removeTargets(e,t,r){let a=0;const l=[];return Al(e).X(((u,f)=>{const d=Bc(f);d.sequenceNumber<=t&&r.get(d.targetId)===null&&(a++,l.push(this.removeTargetData(e,d)))})).next((()=>K.waitFor(l))).next((()=>a))}forEachTarget(e,t){return Al(e).X(((r,a)=>{const l=Bc(a);t(l)}))}cr(e){return WS(e).get(tm).next((t=>(Te(t!==null,2888),t)))}lr(e,t){return WS(e).put(tm,t)}hr(e,t){return Al(e).put(Tx(this.serializer,t))}Pr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.cr(e).next((t=>t.targetCount))}getTargetData(e,t){const r=mo(t),a=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let l=null;return Al(e).X({range:a,index:pI},((u,f,d)=>{const p=Bc(f);xh(t,p.target)&&(l=p,d.done())})).next((()=>l))}addMatchingKeys(e,t,r){const a=[],l=Ks(e);return t.forEach((u=>{const f=bn(u.path);a.push(l.put({targetId:r,path:f})),a.push(this.referenceDelegate.addReference(e,r,u))})),K.waitFor(a)}removeMatchingKeys(e,t,r){const a=Ks(e);return K.forEach(t,(l=>{const u=bn(l.path);return K.waitFor([a.delete([r,u]),this.referenceDelegate.removeReference(e,r,l)])}))}removeMatchingKeysForTargetId(e,t){const r=Ks(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(a)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),a=Ks(e);let l=Ne();return a.X({range:r,Z:!0},((u,f,d)=>{const p=Yi(u[1]),y=new pe(p);l=l.add(y)})).next((()=>l))}containsKey(e,t){const r=bn(t.path),a=IDBKeyRange.bound([r],[iI(r)],!1,!0);let l=0;return Ks(e).X({index:F_,Z:!0,range:a},(([u,f],d,p)=>{u!==0&&(l++,p.done())})).next((()=>l>0))}Et(e,t){return Al(e).get(t).next((r=>r?Bc(r):null))}}function Al(i){return Xt(i,ql)}function WS(i){return Xt(i,ao)}function Ks(i){return Xt(i,Hl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS="LruGarbageCollector",Rx=1048576;function ZS([i,e],[t,r]){const a=Ae(i,t);return a===0?Ae(e,r):a}class tM{constructor(e){this.Tr=e,this.buffer=new st(ZS),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();ZS(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Cx{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Ar=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return this.Ar!==null}Rr(e){ce(JS,`Garbage collection scheduled in ${e}ms`),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){fa(t)?ce(JS,"Ignoring IndexedDB error during garbage collection: ",t):await ha(t)}await this.Rr(3e5)}))}}class nM{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next((r=>Math.floor(t/100*r)))}nthSequenceNumber(e,t){if(t===0)return K.resolve(Un.ue);const r=new tM(t);return this.Vr.forEachTarget(e,(a=>r.Er(a.sequenceNumber))).next((()=>this.Vr.gr(e,(a=>r.Er(a))))).next((()=>r.maxValue))}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),K.resolve(YS)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),YS):this.pr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let r,a,l,u,f,d,p;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((_=>(_>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${_}`),a=this.params.maximumSequenceNumbersToCollect):a=_,u=Date.now(),this.nthSequenceNumber(e,a)))).next((_=>(r=_,f=Date.now(),this.removeTargets(e,r,t)))).next((_=>(l=_,d=Date.now(),this.removeOrphanedDocuments(e,r)))).next((_=>(p=Date.now(),Il()<=qe.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-y}ms
	Determined least recently used ${a} in `+(f-u)+`ms
	Removed ${l} targets in `+(d-f)+`ms
	Removed ${_} documents in `+(p-d)+`ms
Total Duration: ${p-y}ms`),K.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:l,documentsRemoved:_}))))}}function Dx(i,e){return new nM(i,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,t){this.db=e,this.garbageCollector=Dx(this,t)}mr(e){const t=this.yr(e);return this.db.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}yr(e){let t=0;return this.gr(e,(r=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}gr(e,t){return this.wr(e,((r,a)=>t(a)))}addReference(e,t,r){return Td(e,r)}removeReference(e,t,r){return Td(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Td(e,t)}Sr(e,t){return(function(a,l){let u=!1;return xx(a).ee((f=>Ix(a,f,l).next((d=>(d&&(u=!0),K.resolve(!d)))))).next((()=>u))})(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let l=0;return this.wr(e,((u,f)=>{if(f<=t){const d=this.Sr(e,u).next((p=>{if(!p)return l++,r.getEntry(e,u).next((()=>(r.removeEntry(u,Se.min()),Ks(e).delete((function(_){return[0,bn(_.path)]})(u)))))}));a.push(d)}})).next((()=>K.waitFor(a))).next((()=>r.apply(e))).next((()=>l))}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Td(e,t)}wr(e,t){const r=Ks(e);let a,l=Un.ue;return r.X({index:F_},(([u,f],{path:d,sequenceNumber:p})=>{u===0?(l!==Un.ue&&t(new pe(Yi(a)),l),l=p,a=d):l=Un.ue})).next((()=>{l!==Un.ue&&t(new pe(Yi(a)),l)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Td(i,e){return Ks(i).put((function(r,a){return{targetId:0,path:bn(r.path),sequenceNumber:a}})(e,i.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(){this.changes=new Kr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,vt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?K.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ya(e).put(r)}removeEntry(e,t,r){return Ya(e).delete((function(l,u){const f=l.path.toArray();return[f.slice(0,f.length-2),f[f.length-2],am(u),f[f.length-1]]})(t,r))}updateMetadata(e,t){return this.getMetadata(e).next((r=>(r.byteSize+=t,this.br(e,r))))}getEntry(e,t){let r=vt.newInvalidDocument(t);return Ya(e).X({index:Md,range:IDBKeyRange.only(Nc(t))},((a,l)=>{r=this.Dr(t,l)})).next((()=>r))}vr(e,t){let r={size:0,document:vt.newInvalidDocument(t)};return Ya(e).X({index:Md,range:IDBKeyRange.only(Nc(t))},((a,l)=>{r={document:this.Dr(t,l),size:lm(l)}})).next((()=>r))}getEntries(e,t){let r=Bn();return this.Cr(e,t,((a,l)=>{const u=this.Dr(a,l);r=r.insert(a,u)})).next((()=>r))}Fr(e,t){let r=Bn(),a=new pt(pe.comparator);return this.Cr(e,t,((l,u)=>{const f=this.Dr(l,u);r=r.insert(l,f),a=a.insert(l,lm(u))})).next((()=>({documents:r,Mr:a})))}Cr(e,t,r){if(t.isEmpty())return K.resolve();let a=new st(nw);t.forEach((d=>a=a.add(d)));const l=IDBKeyRange.bound(Nc(a.first()),Nc(a.last())),u=a.getIterator();let f=u.getNext();return Ya(e).X({index:Md,range:l},((d,p,y)=>{const _=pe.fromSegments([...p.prefixPath,p.collectionGroup,p.documentId]);for(;f&&nw(f,_)<0;)r(f,null),f=u.getNext();f&&f.isEqual(_)&&(r(f,p),f=u.hasNext()?u.getNext():null),f?y.G(Nc(f)):y.done()})).next((()=>{for(;f;)r(f,null),f=u.hasNext()?u.getNext():null}))}getDocumentsMatchingQuery(e,t,r,a,l){const u=t.path,f=[u.popLast().toArray(),u.lastSegment(),am(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],d=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ya(e).j(IDBKeyRange.bound(f,d,!0)).next((p=>{l==null||l.incrementDocumentReadCount(p.length);let y=Bn();for(const _ of p){const b=this.Dr(pe.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);b.isFoundDocument()&&(Ch(t,b)||a.has(b.key))&&(y=y.insert(b.key,b))}return y}))}getAllFromCollectionGroup(e,t,r,a){let l=Bn();const u=tw(t,r),f=tw(t,ti.max());return Ya(e).X({index:mI,range:IDBKeyRange.bound(u,f,!0)},((d,p,y)=>{const _=this.Dr(pe.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);l=l.insert(_.key,_),l.size===a&&y.done()})).next((()=>l))}newChangeBuffer(e){return new sM(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return ew(e).get(Ky).next((t=>(Te(!!t,20021),t)))}br(e,t){return ew(e).put(Ky,t)}Dr(e,t){if(t){const r=H4(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(Se.min())))return r}return vt.newInvalidDocument(e)}}function Ox(i){return new rM(i)}class sM extends Nx{constructor(e,t){super(),this.Or=e,this.trackRemovals=t,this.Nr=new Kr((r=>r.toString()),((r,a)=>r.isEqual(a)))}applyChanges(e){const t=[];let r=0,a=new st(((l,u)=>Ae(l.canonicalString(),u.canonicalString())));return this.changes.forEach(((l,u)=>{const f=this.Nr.get(l);if(t.push(this.Or.removeEntry(e,l,f.readTime)),u.isValidDocument()){const d=LS(this.Or.serializer,u);a=a.add(l.path.popLast());const p=lm(d);r+=p-f.size,t.push(this.Or.addEntry(e,l,d))}else if(r-=f.size,this.trackRemovals){const d=LS(this.Or.serializer,u.convertToNoDocument(Se.min()));t.push(this.Or.addEntry(e,l,d))}})),a.forEach((l=>{t.push(this.Or.indexManager.addToCollectionParentIndex(e,l))})),t.push(this.Or.updateMetadata(e,r)),K.waitFor(t)}getFromCache(e,t){return this.Or.vr(e,t).next((r=>(this.Nr.set(t,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(e,t){return this.Or.Fr(e,t).next((({documents:r,Mr:a})=>(a.forEach(((l,u)=>{this.Nr.set(l,{size:u,readTime:r.get(l).readTime})})),r)))}}function ew(i){return Xt(i,sh)}function Ya(i){return Xt(i,em)}function Nc(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function tw(i,e){const t=e.documentKey.path.toArray();return[i,am(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function nw(i,e){const t=i.path.toArray(),r=e.path.toArray();let a=0;for(let l=0;l<t.length-2&&l<r.length-2;++l)if(a=Ae(t[l],r[l]),a)return a;return a=Ae(t.length,r.length),a||(a=Ae(t[t.length-2],r[r.length-2]),a||Ae(t[t.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aM{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e,t,r,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=a}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next((a=>(r=a,this.remoteDocumentCache.getEntry(e,t)))).next((a=>(r!==null&&Yc(r.mutation,a,zn.empty(),et.now()),a)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.getLocalViewOfDocuments(e,r,Ne()).next((()=>r))))}getLocalViewOfDocuments(e,t,r=Ne()){const a=Wi();return this.populateOverlays(e,a,t).next((()=>this.computeViews(e,t,a,r).next((l=>{let u=Uc();return l.forEach(((f,d)=>{u=u.insert(f,d.overlayedDocument)})),u}))))}getOverlayedDocuments(e,t){const r=Wi();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,Ne())))}populateOverlays(e,t,r){const a=[];return r.forEach((l=>{t.has(l)||a.push(l)})),this.documentOverlayCache.getOverlays(e,a).next((l=>{l.forEach(((u,f)=>{t.set(u,f)}))}))}computeViews(e,t,r,a){let l=Bn();const u=Xc(),f=(function(){return Xc()})();return t.forEach(((d,p)=>{const y=r.get(p.key);a.has(p.key)&&(y===void 0||y.mutation instanceof $r)?l=l.insert(p.key,p):y!==void 0?(u.set(p.key,y.mutation.getFieldMask()),Yc(y.mutation,p,y.mutation.getFieldMask(),et.now())):u.set(p.key,zn.empty())})),this.recalculateAndSaveOverlays(e,l).next((d=>(d.forEach(((p,y)=>u.set(p,y))),t.forEach(((p,y)=>{var _;return f.set(p,new aM(y,(_=u.get(p))!==null&&_!==void 0?_:null))})),f)))}recalculateAndSaveOverlays(e,t){const r=Xc();let a=new pt(((u,f)=>u-f)),l=Ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((u=>{for(const f of u)f.keys().forEach((d=>{const p=t.get(d);if(p===null)return;let y=r.get(d)||zn.empty();y=f.applyToLocalView(p,y),r.set(d,y);const _=(a.get(f.batchId)||Ne()).add(d);a=a.insert(f.batchId,_)}))})).next((()=>{const u=[],f=a.getReverseIterator();for(;f.hasNext();){const d=f.getNext(),p=d.key,y=d.value,_=XI();y.forEach((b=>{if(!l.has(b)){const A=nx(t.get(b),r.get(b));A!==null&&_.set(b,A),l=l.add(b)}})),u.push(this.documentOverlayCache.saveOverlays(e,p,_))}return K.waitFor(u)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,t,r,a){return(function(u){return pe.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):X_(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,a):this.getDocumentsMatchingCollectionQuery(e,t,r,a)}getNextDocuments(e,t,r,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,a).next((l=>{const u=a-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,a-l.size):K.resolve(Wi());let f=Ul,d=l;return u.next((p=>K.forEach(p,((y,_)=>(f<_.largestBatchId&&(f=_.largestBatchId),l.get(y)?K.resolve():this.remoteDocumentCache.getEntry(e,y).next((b=>{d=d.insert(y,b)}))))).next((()=>this.populateOverlays(e,p,l))).next((()=>this.computeViews(e,d,p,Ne()))).next((y=>({batchId:f,changes:QI(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new pe(t)).next((r=>{let a=Uc();return r.isFoundDocument()&&(a=a.insert(r.key,r)),a}))}getDocumentsMatchingCollectionGroupQuery(e,t,r,a){const l=t.collectionGroup;let u=Uc();return this.indexManager.getCollectionParents(e,l).next((f=>K.forEach(f,(d=>{const p=(function(_,b){return new Gr(b,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt)})(t,d.child(l));return this.getDocumentsMatchingCollectionQuery(e,p,r,a).next((y=>{y.forEach(((_,b)=>{u=u.insert(_,b)}))}))})).next((()=>u))))}getDocumentsMatchingCollectionQuery(e,t,r,a){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next((u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,a)))).next((u=>{l.forEach(((d,p)=>{const y=p.getKey();u.get(y)===null&&(u=u.insert(y,vt.newInvalidDocument(y)))}));let f=Uc();return u.forEach(((d,p)=>{const y=l.get(d);y!==void 0&&Yc(y.mutation,p,zn.empty(),et.now()),Ch(t,p)&&(f=f.insert(d,p))})),f}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return K.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,(function(a){return{id:a.id,version:a.version,createTime:Lt(a.createTime)}})(t)),K.resolve()}getNamedQuery(e,t){return K.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,(function(a){return{name:a.name,query:Mm(a.bundledQuery),readTime:Lt(a.readTime)}})(t)),K.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(){this.overlays=new pt(pe.comparator),this.kr=new Map}getOverlay(e,t){return K.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Wi();return K.forEach(t,(a=>this.getOverlay(e,a).next((l=>{l!==null&&r.set(a,l)})))).next((()=>r))}saveOverlays(e,t,r){return r.forEach(((a,l)=>{this.wt(e,t,l)})),K.resolve()}removeOverlaysForBatchId(e,t,r){const a=this.kr.get(r);return a!==void 0&&(a.forEach((l=>this.overlays=this.overlays.remove(l))),this.kr.delete(r)),K.resolve()}getOverlaysForCollection(e,t,r){const a=Wi(),l=t.length+1,u=new pe(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const d=f.getNext().value,p=d.getKey();if(!t.isPrefixOf(p.path))break;p.path.length===l&&d.largestBatchId>r&&a.set(d.getKey(),d)}return K.resolve(a)}getOverlaysForCollectionGroup(e,t,r,a){let l=new pt(((p,y)=>p-y));const u=this.overlays.getIterator();for(;u.hasNext();){const p=u.getNext().value;if(p.getKey().getCollectionGroup()===t&&p.largestBatchId>r){let y=l.get(p.largestBatchId);y===null&&(y=Wi(),l=l.insert(p.largestBatchId,y)),y.set(p.getKey(),p)}}const f=Wi(),d=l.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach(((p,y)=>f.set(p,y))),!(f.size()>=a)););return K.resolve(f)}wt(e,t,r){const a=this.overlays.get(r.key);if(a!==null){const u=this.kr.get(a.largestBatchId).delete(r.key);this.kr.set(a.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new tv(t,r));let l=this.kr.get(t);l===void 0&&(l=Ne(),this.kr.set(t,l)),this.kr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(){this.sessionToken=xt.EMPTY_BYTE_STRING}getSessionToken(e){return K.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,K.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class av{constructor(){this.qr=new st(tn.Qr),this.$r=new st(tn.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const r=new tn(e,t);this.qr=this.qr.add(r),this.$r=this.$r.add(r)}Kr(e,t){e.forEach((r=>this.addReference(r,t)))}removeReference(e,t){this.Wr(new tn(e,t))}Gr(e,t){e.forEach((r=>this.removeReference(r,t)))}zr(e){const t=new pe(new ke([])),r=new tn(t,e),a=new tn(t,e+1),l=[];return this.$r.forEachInRange([r,a],(u=>{this.Wr(u),l.push(u.key)})),l}jr(){this.qr.forEach((e=>this.Wr(e)))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new pe(new ke([])),r=new tn(t,e),a=new tn(t,e+1);let l=Ne();return this.$r.forEachInRange([r,a],(u=>{l=l.add(u.key)})),l}containsKey(e){const t=new tn(e,0),r=this.qr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class tn{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return pe.comparator(e.key,t.key)||Ae(e.Hr,t.Hr)}static Ur(e,t){return Ae(e.Hr,t.Hr)||pe.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new st(tn.Qr)}checkEmpty(e){return K.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,a){const l=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new Z_(l,t,r,a);this.mutationQueue.push(u);for(const f of a)this.Yr=this.Yr.add(new tn(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return K.resolve(u)}lookupMutationBatch(e,t){return K.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,a=this.Xr(r),l=a<0?0:a;return K.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return K.resolve(this.mutationQueue.length===0?ea:this.er-1)}getAllMutationBatches(e){return K.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new tn(t,0),a=new tn(t,Number.POSITIVE_INFINITY),l=[];return this.Yr.forEachInRange([r,a],(u=>{const f=this.Zr(u.Hr);l.push(f)})),K.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new st(Ae);return t.forEach((a=>{const l=new tn(a,0),u=new tn(a,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([l,u],(f=>{r=r.add(f.Hr)}))})),K.resolve(this.ei(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,a=r.length+1;let l=r;pe.isDocumentKey(l)||(l=l.child(""));const u=new tn(new pe(l),0);let f=new st(Ae);return this.Yr.forEachWhile((d=>{const p=d.key.path;return!!r.isPrefixOf(p)&&(p.length===a&&(f=f.add(d.Hr)),!0)}),u),K.resolve(this.ei(f))}ei(e){const t=[];return e.forEach((r=>{const a=this.Zr(r);a!==null&&t.push(a)})),t}removeMutationBatch(e,t){Te(this.ti(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Yr;return K.forEach(t.mutations,(a=>{const l=new tn(a.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Yr=r}))}rr(e){}containsKey(e,t){const r=new tn(t,0),a=this.Yr.firstAfterOrEqual(r);return K.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,K.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(e){this.ni=e,this.docs=(function(){return new pt(pe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,a=this.docs.get(r),l=a?a.size:0,u=this.ni(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return K.resolve(r?r.document.mutableCopy():vt.newInvalidDocument(t))}getEntries(e,t){let r=Bn();return t.forEach((a=>{const l=this.docs.get(a);r=r.insert(a,l?l.document.mutableCopy():vt.newInvalidDocument(a))})),K.resolve(r)}getDocumentsMatchingQuery(e,t,r,a){let l=Bn();const u=t.path,f=new pe(u.child("__id-9223372036854775808__")),d=this.docs.getIteratorFrom(f);for(;d.hasNext();){const{key:p,value:{document:y}}=d.getNext();if(!u.isPrefixOf(p.path))break;p.path.length>u.length+1||z_(lI(y),r)<=0||(a.has(y.key)||Ch(t,y))&&(l=l.insert(y.key,y.mutableCopy()))}return K.resolve(l)}getAllFromCollectionGroup(e,t,r,a){_e(9500)}ri(e,t){return K.forEach(this.docs,(r=>t(r)))}newChangeBuffer(e){return new fM(this)}getSize(e){return K.resolve(this.size)}}class fM extends Nx{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach(((r,a)=>{a.isValidDocument()?t.push(this.Or.addEntry(e,a)):this.Or.removeEntry(r)})),K.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dM{constructor(e){this.persistence=e,this.ii=new Kr((t=>mo(t)),xh),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.si=0,this.oi=new av,this.targetCount=0,this._i=vo.ar()}forEachTarget(e,t){return this.ii.forEach(((r,a)=>t(a))),K.resolve()}getLastRemoteSnapshotVersion(e){return K.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return K.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),K.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.si&&(this.si=t),K.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new vo(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,K.resolve()}updateTargetData(e,t){return this.hr(t),K.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,K.resolve()}removeTargets(e,t,r){let a=0;const l=[];return this.ii.forEach(((u,f)=>{f.sequenceNumber<=t&&r.get(f.targetId)===null&&(this.ii.delete(u),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),a++)})),K.waitFor(l).next((()=>a))}getTargetCount(e){return K.resolve(this.targetCount)}getTargetData(e,t){const r=this.ii.get(t)||null;return K.resolve(r)}addMatchingKeys(e,t,r){return this.oi.Kr(t,r),K.resolve()}removeMatchingKeys(e,t,r){this.oi.Gr(t,r);const a=this.persistence.referenceDelegate,l=[];return a&&t.forEach((u=>{l.push(a.markPotentiallyOrphaned(e,u))})),K.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),K.resolve()}getMatchingKeysForTargetId(e,t){const r=this.oi.Jr(t);return K.resolve(r)}containsKey(e,t){return K.resolve(this.oi.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(e,t){this.ai={},this.overlays={},this.ui=new Un(0),this.ci=!1,this.ci=!0,this.li=new uM,this.referenceDelegate=e(this),this.hi=new dM(this),this.indexManager=new J4,this.remoteDocumentCache=(function(a){return new hM(a)})((r=>this.referenceDelegate.Pi(r))),this.serializer=new Ex(t),this.Ti=new oM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new lM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ai[e.toKey()];return r||(r=new cM(t,this.referenceDelegate),this.ai[e.toKey()]=r),r}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,r){ce("MemoryPersistence","Starting transaction:",e);const a=new mM(this.ui.next());return this.referenceDelegate.Ii(),r(a).next((l=>this.referenceDelegate.di(a).next((()=>l)))).toPromise().then((l=>(a.raiseOnCommittedEvent(),l)))}Ei(e,t){return K.or(Object.values(this.ai).map((r=>()=>r.containsKey(e,t))))}}class mM extends cI{constructor(e){super(),this.currentSequenceNumber=e}}class jm{constructor(e){this.persistence=e,this.Ai=new av,this.Ri=null}static Vi(e){return new jm(e)}get mi(){if(this.Ri)return this.Ri;throw _e(60996)}addReference(e,t,r){return this.Ai.addReference(r,t),this.mi.delete(r.toString()),K.resolve()}removeReference(e,t,r){return this.Ai.removeReference(r,t),this.mi.add(r.toString()),K.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),K.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach((a=>this.mi.add(a.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((a=>{a.forEach((l=>this.mi.add(l.toString())))})).next((()=>r.removeTargetData(e,t)))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return K.forEach(this.mi,(r=>{const a=pe.fromPath(r);return this.fi(e,a).next((l=>{l||t.removeEntry(a,Se.min())}))})).next((()=>(this.Ri=null,t.apply(e))))}updateLimboDocument(e,t){return this.fi(e,t).next((r=>{r?this.mi.delete(t.toString()):this.mi.add(t.toString())}))}Pi(e){return 0}fi(e,t){return K.or([()=>K.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class um{constructor(e,t){this.persistence=e,this.gi=new Kr((r=>bn(r.path)),((r,a)=>r.isEqual(a))),this.garbageCollector=Dx(this,t)}static Vi(e,t){return new um(e,t)}Ii(){}di(e){return K.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>t.next((a=>r+a))))}yr(e){let t=0;return this.gr(e,(r=>{t++})).next((()=>t))}gr(e,t){return K.forEach(this.gi,((r,a)=>this.Sr(e,r,a).next((l=>l?K.resolve():t(a)))))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const a=this.persistence.getRemoteDocumentCache(),l=a.newChangeBuffer();return a.ri(e,(u=>this.Sr(e,u,t).next((f=>{f||(r++,l.removeEntry(u,Se.min()))})))).next((()=>l.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),K.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),K.resolve()}removeReference(e,t,r){return this.gi.set(r,e.currentSequenceNumber),K.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),K.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Ld(e.data.value)),t}Sr(e,t,r){return K.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const a=this.gi.get(t);return K.resolve(a!==void 0&&a>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pM{constructor(e){this.serializer=e}q(e,t,r,a){const l=new wm("createOrUpgrade",t);r<1&&a>=1&&((function(d){d.createObjectStore(Ih)})(e),(function(d){d.createObjectStore(rh,{keyPath:PV}),d.createObjectStore(Ii,{keyPath:dS,autoIncrement:!0}).createIndex(ro,mS,{unique:!0}),d.createObjectStore(Fl)})(e),iw(e),(function(d){d.createObjectStore(Za)})(e));let u=K.resolve();return r<3&&a>=3&&(r!==0&&((function(d){d.deleteObjectStore(Hl),d.deleteObjectStore(ql),d.deleteObjectStore(ao)})(e),iw(e)),u=u.next((()=>(function(d){const p=d.store(ao),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Se.min().toTimestamp(),targetCount:0};return p.put(tm,y)})(l)))),r<4&&a>=4&&(r!==0&&(u=u.next((()=>(function(d,p){return p.store(Ii).j().next((_=>{d.deleteObjectStore(Ii),d.createObjectStore(Ii,{keyPath:dS,autoIncrement:!0}).createIndex(ro,mS,{unique:!0});const b=p.store(Ii),A=_.map((N=>b.put(N)));return K.waitFor(A)}))})(e,l)))),u=u.next((()=>{(function(d){d.createObjectStore(Gl,{keyPath:FV})})(e)}))),r<5&&a>=5&&(u=u.next((()=>this.pi(l)))),r<6&&a>=6&&(u=u.next((()=>((function(d){d.createObjectStore(sh)})(e),this.yi(l))))),r<7&&a>=7&&(u=u.next((()=>this.wi(l)))),r<8&&a>=8&&(u=u.next((()=>this.Si(e,l)))),r<9&&a>=9&&(u=u.next((()=>{(function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")})(e)}))),r<10&&a>=10&&(u=u.next((()=>this.bi(l)))),r<11&&a>=11&&(u=u.next((()=>{(function(d){d.createObjectStore(Am,{keyPath:qV})})(e),(function(d){d.createObjectStore(Im,{keyPath:HV})})(e)}))),r<12&&a>=12&&(u=u.next((()=>{(function(d){const p=d.createObjectStore(xm,{keyPath:WV});p.createIndex(Qy,JV,{unique:!1}),p.createIndex(_I,ZV,{unique:!1})})(e)}))),r<13&&a>=13&&(u=u.next((()=>(function(d){const p=d.createObjectStore(em,{keyPath:MV});p.createIndex(Md,kV),p.createIndex(mI,LV)})(e))).next((()=>this.Di(e,l))).next((()=>e.deleteObjectStore(Za)))),r<14&&a>=14&&(u=u.next((()=>this.Ci(e,l)))),r<15&&a>=15&&(u=u.next((()=>(function(d){d.createObjectStore(q_,{keyPath:GV,autoIncrement:!0}).createIndex($y,KV,{unique:!1}),d.createObjectStore(Kc,{keyPath:$V}).createIndex(gI,QV,{unique:!1}),d.createObjectStore($c,{keyPath:XV}).createIndex(yI,YV,{unique:!1})})(e)))),r<16&&a>=16&&(u=u.next((()=>{t.objectStore(Kc).clear()})).next((()=>{t.objectStore($c).clear()}))),r<17&&a>=17&&(u=u.next((()=>{(function(d){d.createObjectStore(H_,{keyPath:e4})})(e)}))),r<18&&a>=18&&aA()&&(u=u.next((()=>{t.objectStore(Kc).clear()})).next((()=>{t.objectStore($c).clear()}))),u}yi(e){let t=0;return e.store(Za).X(((r,a)=>{t+=lm(a)})).next((()=>{const r={byteSize:t};return e.store(sh).put(Ky,r)}))}pi(e){const t=e.store(rh),r=e.store(Ii);return t.j().next((a=>K.forEach(a,(l=>{const u=IDBKeyRange.bound([l.userId,ea],[l.userId,l.lastAcknowledgedBatchId]);return r.j(ro,u).next((f=>K.forEach(f,(d=>{Te(d.userId===l.userId,18650,"Cannot process batch from unexpected user",{batchId:d.batchId});const p=to(this.serializer,d);return Ax(e,l.userId,p).next((()=>{}))}))))}))))}wi(e){const t=e.store(Hl),r=e.store(Za);return e.store(ao).get(tm).next((a=>{const l=[];return r.X(((u,f)=>{const d=new ke(u),p=(function(_){return[0,bn(_)]})(d);l.push(t.get(p).next((y=>y?K.resolve():(_=>t.put({targetId:0,path:bn(_),sequenceNumber:a.highestListenSequenceNumber}))(d))))})).next((()=>K.waitFor(l)))}))}Si(e,t){e.createObjectStore(ah,{keyPath:BV});const r=t.store(ah),a=new sv,l=u=>{if(a.add(u)){const f=u.lastSegment(),d=u.popLast();return r.put({collectionId:f,parent:bn(d)})}};return t.store(Za).X({Z:!0},((u,f)=>{const d=new ke(u);return l(d.popLast())})).next((()=>t.store(Fl).X({Z:!0},(([u,f,d],p)=>{const y=Yi(f);return l(y.popLast())}))))}bi(e){const t=e.store(ql);return t.X(((r,a)=>{const l=Bc(a),u=Tx(this.serializer,l);return t.put(u)}))}Di(e,t){const r=t.store(Za),a=[];return r.X(((l,u)=>{const f=t.store(em),d=(function(_){return _.document?new pe(ke.fromString(_.document.name).popFirst(5)):_.noDocument?pe.fromSegments(_.noDocument.path):_.unknownDocument?pe.fromSegments(_.unknownDocument.path):_e(36783)})(u).path.toArray(),p={prefixPath:d.slice(0,d.length-2),collectionGroup:d[d.length-2],documentId:d[d.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};a.push(f.put(p))})).next((()=>K.waitFor(a)))}Ci(e,t){const r=t.store(Ii),a=Ox(this.serializer),l=new ov(jm.Vi,this.serializer.gt);return r.j().next((u=>{const f=new Map;return u.forEach((d=>{var p;let y=(p=f.get(d.userId))!==null&&p!==void 0?p:Ne();to(this.serializer,d).keys().forEach((_=>y=y.add(_))),f.set(d.userId,y)})),K.forEach(f,((d,p)=>{const y=new nn(p),_=km.yt(this.serializer,y),b=l.getIndexManager(y),A=Lm.yt(y,this.serializer,b,l.referenceDelegate);return new Px(a,A,_,b).recalculateAndSaveOverlaysForDocumentKeys(new Xy(t,Un.ue),d).next()}))}))}}function iw(i){i.createObjectStore(Hl,{keyPath:UV}).createIndex(F_,zV,{unique:!0}),i.createObjectStore(ql,{keyPath:"targetId"}).createIndex(pI,jV,{unique:!0}),i.createObjectStore(ao)}const zs="IndexedDbPersistence",yy=18e5,_y=5e3,vy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Vx="main";class lv{constructor(e,t,r,a,l,u,f,d,p,y,_=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Fi=l,this.window=u,this.document=f,this.Mi=p,this.xi=y,this.Oi=_,this.ui=null,this.ci=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ni=null,this.inForeground=!1,this.Bi=null,this.Li=null,this.ki=Number.NEGATIVE_INFINITY,this.qi=b=>Promise.resolve(),!lv.C())throw new oe(W.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new iM(this,a),this.Qi=t+Vx,this.serializer=new Ex(d),this.$i=new er(this.Qi,this.Oi,new pM(this.serializer)),this.li=new K4,this.hi=new eM(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Ox(this.serializer),this.Ti=new G4,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,y===!1&&kt(zs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ki().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new oe(W.FAILED_PRECONDITION,vy);return this.Wi(),this.Gi(),this.zi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.hi.getHighestSequenceNumber(e)))})).then((e=>{this.ui=new Un(e,this.Mi)})).then((()=>{this.ci=!0})).catch((e=>(this.$i&&this.$i.close(),Promise.reject(e))))}ji(e){return this.qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.$i.setDatabaseDeletedListener(e)}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Fi.enqueueAndForget((async()=>{this.started&&await this.Ki()})))}Ki(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>bd(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Ji(e).next((t=>{t||(this.isPrimary=!1,this.Fi.enqueueRetryable((()=>this.qi(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Yi(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(fa(e))return ce(zs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ce(zs,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Fi.enqueueRetryable((()=>this.qi(e))),this.isPrimary=e}))}Ji(e){return Oc(e).get(El).next((t=>K.resolve(this.Xi(t))))}es(e){return bd(e).delete(this.clientId)}async ts(){if(this.isPrimary&&!this.ns(this.ki,yy)){this.ki=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const r=Xt(t,Gl);return r.j().next((a=>{const l=this.rs(a,yy),u=a.filter((f=>l.indexOf(f)===-1));return K.forEach(u,(f=>r.delete(f.clientId))).next((()=>u))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.ss(t.clientId))}}zi(){this.Li=this.Fi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ki().then((()=>this.ts())).then((()=>this.zi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.xi?K.resolve(!0):Oc(e).get(El).next((t=>{if(t!==null&&this.ns(t.leaseTimestampMs,_y)&&!this._s(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new oe(W.FAILED_PRECONDITION,vy);return!1}}return!(!this.networkEnabled||!this.inForeground)||bd(e).j().next((r=>this.rs(r,_y).find((a=>{if(this.clientId!==a.clientId){const l=!this.networkEnabled&&a.networkEnabled,u=!this.inForeground&&a.inForeground,f=this.networkEnabled===a.networkEnabled;if(l||u&&f)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&ce(zs,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ci=!1,this.us(),this.Li&&(this.Li.cancel(),this.Li=null),this.cs(),this.ls(),await this.$i.runTransaction("shutdown","readwrite",[Ih,Gl],(e=>{const t=new Xy(e,Un.ue);return this.Yi(t).next((()=>this.es(t)))})),this.$i.close(),this.hs()}rs(e,t){return e.filter((r=>this.ns(r.updateTimeMs,t)&&!this._s(r.clientId)))}Ps(){return this.runTransaction("getActiveClients","readonly",(e=>bd(e).j().next((t=>this.rs(t,yy).map((r=>r.clientId))))))}get started(){return this.ci}getGlobalsCache(){return this.li}getMutationQueue(e,t){return Lm.yt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Z4(e,this.serializer.gt.databaseId)}getDocumentOverlayCache(e){return km.yt(this.serializer,e)}getBundleCache(){return this.Ti}runTransaction(e,t,r){ce(zs,"Starting transaction:",e);const a=t==="readonly"?"readonly":"readwrite",l=(function(d){return d===18?i4:d===17?bI:d===16?n4:d===15?G_:d===14?TI:d===13?EI:d===12?t4:d===11?vI:void _e(60245)})(this.Oi);let u;return this.$i.runTransaction(e,a,l,(f=>(u=new Xy(f,this.ui?this.ui.next():Un.ue),t==="readwrite-primary"?this.Ji(u).next((d=>!!d||this.Hi(u))).next((d=>{if(!d)throw kt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Fi.enqueueRetryable((()=>this.qi(!1))),new oe(W.FAILED_PRECONDITION,uI);return r(u)})).next((d=>this.Zi(u).next((()=>d)))):this.Ts(u).next((()=>r(u)))))).then((f=>(u.raiseOnCommittedEvent(),f)))}Ts(e){return Oc(e).get(El).next((t=>{if(t!==null&&this.ns(t.leaseTimestampMs,_y)&&!this._s(t.ownerId)&&!this.Xi(t)&&!(this.xi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new oe(W.FAILED_PRECONDITION,vy)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Oc(e).put(El,t)}static C(){return er.C()}Yi(e){const t=Oc(e);return t.get(El).next((r=>this.Xi(r)?(ce(zs,"Releasing primary lease."),t.delete(El)):K.resolve()))}ns(e,t){const r=Date.now();return!(e<r-t)&&(!(e>r)||(kt(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Bi=()=>{this.Fi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Ki())))},this.document.addEventListener("visibilitychange",this.Bi),this.inForeground=this.document.visibilityState==="visible")}cs(){this.Bi&&(this.document.removeEventListener("visibilitychange",this.Bi),this.Bi=null)}Gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Ni=()=>{this.us();const t=/(?:Version|Mobile)\/1[456]/;sA()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Fi.enterRestrictedMode(!0),this.Fi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Ni))}ls(){this.Ni&&(this.window.removeEventListener("pagehide",this.Ni),this.Ni=null)}_s(e){var t;try{const r=((t=this.Ui)===null||t===void 0?void 0:t.getItem(this.ss(e)))!==null;return ce(zs,`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return kt(zs,"Failed to get zombied client id.",r),!1}}us(){if(this.Ui)try{this.Ui.setItem(this.ss(this.clientId),String(Date.now()))}catch(e){kt("Failed to set zombie client id.",e)}}hs(){if(this.Ui)try{this.Ui.removeItem(this.ss(this.clientId))}catch{}}ss(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Oc(i){return Xt(i,Ih)}function bd(i){return Xt(i,Gl)}function uv(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(e,t,r,a){this.targetId=e,this.fromCache=t,this.Is=r,this.ds=a}static Es(e,t){let r=Ne(),a=Ne();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:a=a.add(l.doc.key)}return new cv(e,t.fromCache,r,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=(function(){return sA()?8:hI($t())>0?6:4})()}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,r,a){const l={result:null};return this.ps(e,t).next((u=>{l.result=u})).next((()=>{if(!l.result)return this.ys(e,t,a,r).next((u=>{l.result=u}))})).next((()=>{if(l.result)return;const u=new gM;return this.ws(e,t,u).next((f=>{if(l.result=f,this.Rs)return this.Ss(e,t,u,f.size)}))})).next((()=>l.result))}Ss(e,t,r,a){return r.documentReadCount<this.Vs?(Il()<=qe.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",xl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),K.resolve()):(Il()<=qe.DEBUG&&ce("QueryEngine","Query:",xl(t),"scans",r.documentReadCount,"local documents and returns",a,"documents as results."),r.documentReadCount>this.fs*a?(Il()<=qe.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",xl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sn(t))):K.resolve())}ps(e,t){if(xS(t))return K.resolve(null);let r=Sn(t);return this.indexManager.getIndexType(e,r).next((a=>a===0?null:(t.limit!==null&&a===1&&(t=rm(t,null,"F"),r=Sn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next((l=>{const u=Ne(...l);return this.gs.getDocuments(e,u).next((f=>this.indexManager.getMinOffset(e,r).next((d=>{const p=this.bs(t,f);return this.Ds(t,p,u,d.readTime)?this.ps(e,rm(t,null,"F")):this.vs(e,p,t,d)}))))})))))}ys(e,t,r,a){return xS(t)||a.isEqual(Se.min())?K.resolve(null):this.gs.getDocuments(e,r).next((l=>{const u=this.bs(t,l);return this.Ds(t,u,r,a)?K.resolve(null):(Il()<=qe.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),xl(t)),this.vs(e,u,t,oI(a,Ul)).next((f=>f)))}))}bs(e,t){let r=new st(KI(e));return t.forEach(((a,l)=>{Ch(e,l)&&(r=r.add(l))})),r}Ds(e,t,r,a){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(a)>0)}ws(e,t,r){return Il()<=qe.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",xl(t)),this.gs.getDocumentsMatchingQuery(e,t,ti.min(),r)}vs(e,t,r,a){return this.gs.getDocumentsMatchingQuery(e,r,a).next((l=>(t.forEach((u=>{l=l.insert(u.key,u)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hv="LocalStore",yM=3e8;class _M{constructor(e,t,r,a){this.persistence=e,this.Cs=t,this.serializer=a,this.Fs=new pt(Ae),this.Ms=new Kr((l=>mo(l)),xh),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(r)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Px(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Fs)))}}function kx(i,e,t,r){return new _M(i,e,t,r)}async function Lx(i,e){const t=ge(i);return await t.persistence.runTransaction("Handle user change","readonly",(r=>{let a;return t.mutationQueue.getAllMutationBatches(r).next((l=>(a=l,t.Ns(e),t.mutationQueue.getAllMutationBatches(r)))).next((l=>{const u=[],f=[];let d=Ne();for(const p of a){u.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}for(const p of l){f.push(p.batchId);for(const y of p.mutations)d=d.add(y.key)}return t.localDocuments.getDocuments(r,d).next((p=>({Bs:p,removedBatchIds:u,addedBatchIds:f})))}))}))}function vM(i,e){const t=ge(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const a=e.batch.keys(),l=t.Os.newChangeBuffer({trackRemovals:!0});return(function(f,d,p,y){const _=p.batch,b=_.keys();let A=K.resolve();return b.forEach((N=>{A=A.next((()=>y.getEntry(d,N))).next((M=>{const P=p.docVersions.get(N);Te(P!==null,48541),M.version.compareTo(P)<0&&(_.applyToRemoteDocument(M,p),M.isValidDocument()&&(M.setReadTime(p.commitVersion),y.addEntry(M)))}))})),A.next((()=>f.mutationQueue.removeMutationBatch(d,_)))})(t,r,e,l).next((()=>l.apply(r))).next((()=>t.mutationQueue.performConsistencyCheck(r))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(r,a,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(f){let d=Ne();for(let p=0;p<f.mutationResults.length;++p)f.mutationResults[p].transformResults.length>0&&(d=d.add(f.batch.mutations[p].key));return d})(e)))).next((()=>t.localDocuments.getDocuments(r,a)))}))}function jx(i){const e=ge(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.hi.getLastRemoteSnapshotVersion(t)))}function EM(i,e){const t=ge(i),r=e.snapshotVersion;let a=t.Fs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const u=t.Os.newChangeBuffer({trackRemovals:!0});a=t.Fs;const f=[];e.targetChanges.forEach(((y,_)=>{const b=a.get(_);if(!b)return;f.push(t.hi.removeMatchingKeys(l,y.removedDocuments,_).next((()=>t.hi.addMatchingKeys(l,y.addedDocuments,_))));let A=b.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(_)!==null?A=A.withResumeToken(xt.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):y.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(y.resumeToken,r)),a=a.insert(_,A),(function(M,P,q){return M.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=yM?!0:q.addedDocuments.size+q.modifiedDocuments.size+q.removedDocuments.size>0})(b,A,y)&&f.push(t.hi.updateTargetData(l,A))}));let d=Bn(),p=Ne();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,y))})),f.push(Ux(l,u,e.documentUpdates).next((y=>{d=y.Ls,p=y.ks}))),!r.isEqual(Se.min())){const y=t.hi.getLastRemoteSnapshotVersion(l).next((_=>t.hi.setTargetsMetadata(l,l.currentSequenceNumber,r)));f.push(y)}return K.waitFor(f).next((()=>u.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,d,p))).next((()=>d))})).then((l=>(t.Fs=a,l)))}function Ux(i,e,t){let r=Ne(),a=Ne();return t.forEach((l=>r=r.add(l))),e.getEntries(i,r).next((l=>{let u=Bn();return t.forEach(((f,d)=>{const p=l.get(f);d.isFoundDocument()!==p.isFoundDocument()&&(a=a.add(f)),d.isNoDocument()&&d.version.isEqual(Se.min())?(e.removeEntry(f,d.readTime),u=u.insert(f,d)):!p.isValidDocument()||d.version.compareTo(p.version)>0||d.version.compareTo(p.version)===0&&p.hasPendingWrites?(e.addEntry(d),u=u.insert(f,d)):ce(hv,"Ignoring outdated watch update for ",f,". Current version:",p.version," Watch version:",d.version)})),{Ls:u,ks:a}}))}function TM(i,e){const t=ge(i);return t.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=ea),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function Jl(i,e){const t=ge(i);return t.persistence.runTransaction("Allocate target","readwrite",(r=>{let a;return t.hi.getTargetData(r,e).next((l=>l?(a=l,K.resolve(a)):t.hi.allocateTargetId(r).next((u=>(a=new Pr(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.hi.addTargetData(r,a).next((()=>a)))))))})).then((r=>{const a=t.Fs.get(r.targetId);return(a===null||r.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Fs=t.Fs.insert(r.targetId,r),t.Ms.set(e,r.targetId)),r}))}async function Zl(i,e,t){const r=ge(i),a=r.Fs.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,(u=>r.persistence.referenceDelegate.removeTarget(u,a)))}catch(u){if(!fa(u))throw u;ce(hv,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Fs=r.Fs.remove(e),r.Ms.delete(a.target)}function cm(i,e,t){const r=ge(i);let a=Se.min(),l=Ne();return r.persistence.runTransaction("Execute query","readwrite",(u=>(function(d,p,y){const _=ge(d),b=_.Ms.get(y);return b!==void 0?K.resolve(_.Fs.get(b)):_.hi.getTargetData(p,y)})(r,u,Sn(e)).next((f=>{if(f)return a=f.lastLimboFreeSnapshotVersion,r.hi.getMatchingKeysForTargetId(u,f.targetId).next((d=>{l=d}))})).next((()=>r.Cs.getDocumentsMatchingQuery(u,e,t?a:Se.min(),t?l:Ne()))).next((f=>(Fx(r,GI(e),f),{documents:f,qs:l})))))}function zx(i,e){const t=ge(i),r=ge(t.hi),a=t.Fs.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",(l=>r.Et(l,e).next((u=>u?u.target:null))))}function Bx(i,e){const t=ge(i),r=t.xs.get(e)||Se.min();return t.persistence.runTransaction("Get new document changes","readonly",(a=>t.Os.getAllFromCollectionGroup(a,e,oI(r,Ul),Number.MAX_SAFE_INTEGER))).then((a=>(Fx(t,e,a),a)))}function Fx(i,e,t){let r=i.xs.get(e)||Se.min();t.forEach(((a,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)})),i.xs.set(e,r)}async function bM(i,e,t,r){const a=ge(i);let l=Ne(),u=Bn();for(const p of t){const y=e.Qs(p.metadata.name);p.document&&(l=l.add(y));const _=e.$s(p);_.setReadTime(e.Us(p.metadata.readTime)),u=u.insert(y,_)}const f=a.Os.newChangeBuffer({trackRemovals:!0}),d=await Jl(a,(function(y){return Sn(du(ke.fromString(`__bundle__/docs/${y}`)))})(r));return a.persistence.runTransaction("Apply bundle documents","readwrite",(p=>Ux(p,f,u).next((y=>(f.apply(p),y))).next((y=>a.hi.removeMatchingKeysForTargetId(p,d.targetId).next((()=>a.hi.addMatchingKeys(p,l,d.targetId))).next((()=>a.localDocuments.getLocalViewOfDocuments(p,y.Ls,y.ks))).next((()=>y.Ls))))))}async function SM(i,e,t=Ne()){const r=await Jl(i,Sn(Mm(e.bundledQuery))),a=ge(i);return a.persistence.runTransaction("Save named query","readwrite",(l=>{const u=Lt(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return a.Ti.saveNamedQuery(l,e);const f=r.withResumeToken(xt.EMPTY_BYTE_STRING,u);return a.Fs=a.Fs.insert(f.targetId,f),a.hi.updateTargetData(l,f).next((()=>a.hi.removeMatchingKeysForTargetId(l,r.targetId))).next((()=>a.hi.addMatchingKeys(l,t,r.targetId))).next((()=>a.Ti.saveNamedQuery(l,e)))}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qx="firestore_clients";function rw(i,e){return`${qx}_${i}_${e}`}const Hx="firestore_mutations";function sw(i,e,t){let r=`${Hx}_${i}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}const Gx="firestore_targets";function Ey(i,e){return`${Gx}_${i}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi="SharedClientState";class hm{constructor(e,t,r,a){this.user=e,this.batchId=t,this.state=r,this.error=a}static Ks(e,t,r){const a=JSON.parse(r);let l,u=typeof a=="object"&&["pending","acknowledged","rejected"].indexOf(a.state)!==-1&&(a.error===void 0||typeof a.error=="object");return u&&a.error&&(u=typeof a.error.message=="string"&&typeof a.error.code=="string",u&&(l=new oe(a.error.code,a.error.message))),u?new hm(e,t,a.state,l):(kt(Xi,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Wc{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Ks(e,t){const r=JSON.parse(t);let a,l=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(a=new oe(r.error.code,r.error.message))),l?new Wc(e,r.state,a):(kt(Xi,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ks(e,t){const r=JSON.parse(t);let a=typeof r=="object"&&r.activeTargetIds instanceof Array,l=Y_();for(let u=0;a&&u<r.activeTargetIds.length;++u)a=fI(r.activeTargetIds[u]),l=l.add(r.activeTargetIds[u]);return a?new fm(e,l):(kt(Xi,`Failed to parse client data for instance '${e}': ${t}`),null)}}class fv{constructor(e,t){this.clientId=e,this.onlineState=t}static Ks(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new fv(t.clientId,t.onlineState):(kt(Xi,`Failed to parse online state: ${e}`),null)}}class u_{constructor(){this.activeTargetIds=Y_()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ty{constructor(e,t,r,a,l){this.window=e,this.Fi=t,this.persistenceKey=r,this.js=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Js=this.Hs.bind(this),this.Ys=new pt(Ae),this.started=!1,this.Zs=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=l,this.Xs=rw(this.persistenceKey,this.js),this.eo=(function(d){return`firestore_sequence_number_${d}`})(this.persistenceKey),this.Ys=this.Ys.insert(this.js,new u_),this.no=new RegExp(`^${qx}_${u}_([^_]*)$`),this.ro=new RegExp(`^${Hx}_${u}_(\\d+)(?:_(.*))?$`),this.io=new RegExp(`^${Gx}_${u}_(\\d+)$`),this.so=(function(d){return`firestore_online_state_${d}`})(this.persistenceKey),this.oo=(function(d){return`firestore_bundle_loaded_v2_${d}`})(this.persistenceKey),this.window.addEventListener("storage",this.Js)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ps();for(const r of e){if(r===this.js)continue;const a=this.getItem(rw(this.persistenceKey,r));if(a){const l=fm.Ks(r,a);l&&(this.Ys=this.Ys.insert(l.clientId,l))}}this._o();const t=this.storage.getItem(this.so);if(t){const r=this.ao(t);r&&this.uo(r)}for(const r of this.Zs)this.Hs(r);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.eo,JSON.stringify(e))}getAllActiveQueryTargets(){return this.co(this.Ys)}isActiveQueryTarget(e){let t=!1;return this.Ys.forEach(((r,a)=>{a.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.lo(e,"pending")}updateMutationState(e,t,r){this.lo(e,t,r),this.ho(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(Ey(this.persistenceKey,e));if(a){const l=Wc.Ks(e,a);l&&(r=l.state)}}return t&&this.Po.Gs(e),this._o(),r}removeLocalQueryTarget(e){this.Po.zs(e),this._o()}isLocalQueryTarget(e){return this.Po.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ey(this.persistenceKey,e))}updateQueryState(e,t,r){this.To(e,t,r)}handleUserChange(e,t,r){t.forEach((a=>{this.ho(a)})),this.currentUser=e,r.forEach((a=>{this.addPendingMutation(a)}))}setOnlineState(e){this.Io(e)}notifyBundleLoaded(e){this.Eo(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ce(Xi,"READ",e,t),t}setItem(e,t){ce(Xi,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){ce(Xi,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(ce(Xi,"EVENT",t.key,t.newValue),t.key===this.Xs)return void kt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fi.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.no.test(t.key)){if(t.newValue==null){const r=this.Ao(t.key);return this.Ro(r,null)}{const r=this.Vo(t.key,t.newValue);if(r)return this.Ro(r.clientId,r)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const r=this.mo(t.key,t.newValue);if(r)return this.fo(r)}}else if(this.io.test(t.key)){if(t.newValue!==null){const r=this.po(t.key,t.newValue);if(r)return this.yo(r)}}else if(t.key===this.so){if(t.newValue!==null){const r=this.ao(t.newValue);if(r)return this.uo(r)}}else if(t.key===this.eo){const r=(function(l){let u=Un.ue;if(l!=null)try{const f=JSON.parse(l);Te(typeof f=="number",30636,{wo:l}),u=f}catch(f){kt(Xi,"Failed to read sequence number from WebStorage",f)}return u})(t.newValue);r!==Un.ue&&this.sequenceNumberHandler(r)}else if(t.key===this.oo){const r=this.So(t.newValue);await Promise.all(r.map((a=>this.syncEngine.bo(a))))}}}else this.Zs.push(t)}))}}get Po(){return this.Ys.get(this.js)}_o(){this.setItem(this.Xs,this.Po.Ws())}lo(e,t,r){const a=new hm(this.currentUser,e,t,r),l=sw(this.persistenceKey,this.currentUser,e);this.setItem(l,a.Ws())}ho(e){const t=sw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Io(e){const t={clientId:this.js,onlineState:e};this.storage.setItem(this.so,JSON.stringify(t))}To(e,t,r){const a=Ey(this.persistenceKey,e),l=new Wc(e,t,r);this.setItem(a,l.Ws())}Eo(e){const t=JSON.stringify(Array.from(e));this.setItem(this.oo,t)}Ao(e){const t=this.no.exec(e);return t?t[1]:null}Vo(e,t){const r=this.Ao(e);return fm.Ks(r,t)}mo(e,t){const r=this.ro.exec(e),a=Number(r[1]),l=r[2]!==void 0?r[2]:null;return hm.Ks(new nn(l),a,t)}po(e,t){const r=this.io.exec(e),a=Number(r[1]);return Wc.Ks(a,t)}ao(e){return fv.Ks(e)}So(e){return JSON.parse(e)}async fo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Do(e.batchId,e.state,e.error);ce(Xi,`Ignoring mutation for non-active user ${e.user.uid}`)}yo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Ro(e,t){const r=t?this.Ys.insert(e,t):this.Ys.remove(e),a=this.co(this.Ys),l=this.co(r),u=[],f=[];return l.forEach((d=>{a.has(d)||u.push(d)})),a.forEach((d=>{l.has(d)||f.push(d)})),this.syncEngine.Co(u,f).then((()=>{this.Ys=r}))}uo(e){this.Ys.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}co(e){let t=Y_();return e.forEach(((r,a)=>{t=t.unionWith(a.activeTargetIds)})),t}}class Kx{constructor(){this.Fo=new u_,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,r){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new u_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wM{xo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aw="ConnectivityMonitor";class ow{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){ce(aw,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){ce(aw,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sd=null;function c_(){return Sd===null?Sd=(function(){return 268435456+Math.round(2147483648*Math.random())})():Sd++,"0x"+Sd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by="RestConnection",AM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class IM{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo=`projects/${r}/databases/${a}`,this.Ko=this.databaseId.database===lh?`project_id=${r}`:`project_id=${r}&database_id=${a}`}Wo(e,t,r,a,l){const u=c_(),f=this.Go(e,t.toUriEncodedString());ce(by,`Sending RPC '${e}' ${u}:`,f,r);const d={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(d,a,l);const{host:p}=new URL(f),y=wo(p);return this.jo(e,f,d,r,y).then((_=>(ce(by,`Received RPC '${e}' ${u}: `,_),_)),(_=>{throw wn(by,`RPC '${e}' ${u} failed with error: `,_,"url: ",f,"request:",r),_}))}Jo(e,t,r,a,l,u){return this.Wo(e,t,r,a,l)}zo(e,t,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+fu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((a,l)=>e[l]=a)),r&&r.headers.forEach(((a,l)=>e[l]=a))}Go(e,t){const r=AM[e];return`${this.$o}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En="WebChannelConnection";class RM extends IM{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,r,a,l){const u=c_();return new Promise(((f,d)=>{const p=new XA;p.setWithCredentials(!0),p.listenOnce(YA.COMPLETE,(()=>{try{switch(p.getLastErrorCode()){case Pd.NO_ERROR:const _=p.getResponseJson();ce(En,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(_)),f(_);break;case Pd.TIMEOUT:ce(En,`RPC '${e}' ${u} timed out`),d(new oe(W.DEADLINE_EXCEEDED,"Request time out"));break;case Pd.HTTP_ERROR:const b=p.getStatus();if(ce(En,`RPC '${e}' ${u} failed with status:`,b,"response text:",p.getResponseText()),b>0){let A=p.getResponseJson();Array.isArray(A)&&(A=A[0]);const N=A==null?void 0:A.error;if(N&&N.status&&N.message){const M=(function(q){const $=q.toLowerCase().replace(/_/g,"-");return Object.values(W).indexOf($)>=0?$:W.UNKNOWN})(N.status);d(new oe(M,N.message))}else d(new oe(W.UNKNOWN,"Server responded with status "+p.getStatus()))}else d(new oe(W.UNAVAILABLE,"Connection failed."));break;default:_e(9055,{c_:e,streamId:u,l_:p.getLastErrorCode(),h_:p.getLastError()})}}finally{ce(En,`RPC '${e}' ${u} completed.`)}}));const y=JSON.stringify(a);ce(En,`RPC '${e}' ${u} sending request:`,a),p.send(t,"POST",y,r,15)}))}P_(e,t,r){const a=c_(),l=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=ZA(),f=JA(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},p=this.longPollingOptions.timeoutSeconds;p!==void 0&&(d.longPollingTimeout=Math.round(1e3*p)),this.useFetchStreams&&(d.useFetchStreams=!0),this.zo(d.initMessageHeaders,t,r),d.encodeInitMessageHeaders=!0;const y=l.join("");ce(En,`Creating RPC '${e}' stream ${a}: ${y}`,d);const _=u.createWebChannel(y,d);this.T_(_);let b=!1,A=!1;const N=new xM({Ho:P=>{A?ce(En,`Not sending because RPC '${e}' stream ${a} is closed:`,P):(b||(ce(En,`Opening RPC '${e}' stream ${a} transport.`),_.open(),b=!0),ce(En,`RPC '${e}' stream ${a} sending:`,P),_.send(P))},Yo:()=>_.close()}),M=(P,q,$)=>{P.listen(q,(B=>{try{$(B)}catch(J){setTimeout((()=>{throw J}),0)}}))};return M(_,jc.EventType.OPEN,(()=>{A||(ce(En,`RPC '${e}' stream ${a} transport opened.`),N.s_())})),M(_,jc.EventType.CLOSE,(()=>{A||(A=!0,ce(En,`RPC '${e}' stream ${a} transport closed`),N.__(),this.I_(_))})),M(_,jc.EventType.ERROR,(P=>{A||(A=!0,wn(En,`RPC '${e}' stream ${a} transport errored. Name:`,P.name,"Message:",P.message),N.__(new oe(W.UNAVAILABLE,"The operation could not be completed")))})),M(_,jc.EventType.MESSAGE,(P=>{var q;if(!A){const $=P.data[0];Te(!!$,16349);const B=$,J=(B==null?void 0:B.error)||((q=B[0])===null||q===void 0?void 0:q.error);if(J){ce(En,`RPC '${e}' stream ${a} received error:`,J);const fe=J.status;let de=(function(V){const j=qt[V];if(j!==void 0)return ax(j)})(fe),R=J.message;de===void 0&&(de=W.INTERNAL,R="Unknown error status: "+fe+" with message "+J.message),A=!0,N.__(new oe(de,R)),_.close()}else ce(En,`RPC '${e}' stream ${a} received:`,$),N.a_($)}})),M(f,WA.STAT_EVENT,(P=>{P.stat===By.PROXY?ce(En,`RPC '${e}' stream ${a} detected buffering proxy`):P.stat===By.NOPROXY&&ce(En,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{N.o_()}),0),N}terminate(){this.u_.forEach((e=>e.close())),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter((t=>t===e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $x(){return typeof window<"u"?window:null}function Fd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xo(i){return new V4(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e,t,r=1e3,a=1.5,l=6e4){this.Fi=e,this.timerId=t,this.d_=r,this.E_=a,this.A_=l,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),r=Math.max(0,Date.now()-this.m_),a=Math.max(0,t-r);a>0&&ce("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.R_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.V_=this.Fi.enqueueAfterDelay(this.timerId,a,(()=>(this.m_=Date.now(),e()))),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){this.V_!==null&&(this.V_.skipDelay(),this.V_=null)}cancel(){this.V_!==null&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lw="PersistentStream";class Qx{constructor(e,t,r,a,l,u,f,d){this.Fi=e,this.w_=r,this.S_=a,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=d,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new dv(e,t)}M_(){return this.state===1||this.state===5||this.x_()}x_(){return this.state===2||this.state===3}start(){this.C_=0,this.state!==4?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&this.D_===null&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,(()=>this.L_())))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,e!==4?this.F_.reset():t&&t.code===W.RESOURCE_EXHAUSTED?(kt(t.toString()),kt("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===W.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,a])=>{this.b_===t&&this.W_(r,a)}),(r=>{e((()=>{const a=new oe(W.UNKNOWN,"Fetching auth token failed: "+r.message);return this.G_(a)}))}))}W_(e,t){const r=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.e_((()=>{r((()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,(()=>(this.x_()&&(this.state=3),Promise.resolve()))),this.listener.e_())))})),this.stream.n_((a=>{r((()=>this.G_(a)))})),this.stream.onMessage((a=>{r((()=>++this.C_==1?this.j_(a):this.onNext(a)))}))}O_(){this.state=5,this.F_.g_((async()=>{this.state=0,this.start()}))}G_(e){return ce(lw,`close with error: ${e}`),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget((()=>this.b_===e?t():(ce(lw,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class CM extends Qx{constructor(e,t,r,a,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,a,u),this.serializer=l}z_(e,t){return this.connection.P_("Listen",e,t)}j_(e){return this.onNext(e)}onNext(e){this.F_.reset();const t=L4(this.serializer,e),r=(function(l){if(!("targetChange"in l))return Se.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Se.min():u.readTime?Lt(u.readTime):Se.min()})(e);return this.listener.J_(t,r)}H_(e){const t={};t.database=r_(this.serializer),t.addTarget=(function(l,u){let f;const d=u.target;if(f=nm(d)?{documents:mx(l,d)}:{query:Vm(l,d).Vt},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=ux(l,u.resumeToken);const p=n_(l,u.expectedCount);p!==null&&(f.expectedCount=p)}else if(u.snapshotVersion.compareTo(Se.min())>0){f.readTime=Wl(l,u.snapshotVersion.toTimestamp());const p=n_(l,u.expectedCount);p!==null&&(f.expectedCount=p)}return f})(this.serializer,e);const r=U4(this.serializer,e);r&&(t.labels=r),this.k_(t)}Y_(e){const t={};t.database=r_(this.serializer),t.removeTarget=e,this.k_(t)}}class DM extends Qx{constructor(e,t,r,a,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,a,u),this.serializer=l}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return Te(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Te(!e.writeResults||e.writeResults.length===0,55816),this.listener.ea()}onNext(e){Te(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=j4(e.writeResults,e.commitTime),r=Lt(e.commitTime);return this.listener.ta(r,t)}na(){const e={};e.database=r_(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map((r=>dh(this.serializer,r)))};this.k_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{}class OM extends NM{constructor(e,t,r,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=a,this.ra=!1}ia(){if(this.ra)throw new oe(W.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,a){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,u])=>this.connection.Wo(e,i_(t,r),a,l,u))).catch((l=>{throw l.name==="FirebaseError"?(l.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new oe(W.UNKNOWN,l.toString())}))}Jo(e,t,r,a,l){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Jo(e,i_(t,r),a,u,f,l))).catch((u=>{throw u.name==="FirebaseError"?(u.code===W.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new oe(W.UNKNOWN,u.toString())}))}terminate(){this.ra=!0,this.connection.terminate()}}class PM{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){this.sa===0&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve()))))}la(e){this.state==="Online"?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ua("Offline")))}set(e){this.ha(),this.sa=0,e==="Online"&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this._a?(kt(t),this._a=!1):ce("OnlineStateTracker",t)}ha(){this.oa!==null&&(this.oa.cancel(),this.oa=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eo="RemoteStore";class VM{constructor(e,t,r,a,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=l,this.Ea.xo((u=>{r.enqueueAndForget((async()=>{ma(this)&&(ce(Eo,"Restarting streams for network reachability change."),await(async function(d){const p=ge(d);p.Ia.add(4),await gu(p),p.Aa.set("Unknown"),p.Ia.delete(4),await Ph(p)})(this))}))})),this.Aa=new PM(r,a)}}async function Ph(i){if(ma(i))for(const e of i.da)await e(!0)}async function gu(i){for(const e of i.da)await e(!1)}function Um(i,e){const t=ge(i);t.Ta.has(e.targetId)||(t.Ta.set(e.targetId,e),gv(t)?pv(t):_u(t).x_()&&mv(t,e))}function eu(i,e){const t=ge(i),r=_u(t);t.Ta.delete(e),r.x_()&&Xx(t,e),t.Ta.size===0&&(r.x_()?r.B_():ma(t)&&t.Aa.set("Unknown"))}function mv(i,e){if(i.Ra.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const t=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_u(i).H_(e)}function Xx(i,e){i.Ra.$e(e),_u(i).Y_(e)}function pv(i){i.Ra=new D4({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.Ta.get(e)||null,lt:()=>i.datastore.serializer.databaseId}),_u(i).start(),i.Aa.aa()}function gv(i){return ma(i)&&!_u(i).M_()&&i.Ta.size>0}function ma(i){return ge(i).Ia.size===0}function Yx(i){i.Ra=void 0}async function MM(i){i.Aa.set("Online")}async function kM(i){i.Ta.forEach(((e,t)=>{mv(i,e)}))}async function LM(i,e){Yx(i),gv(i)?(i.Aa.la(e),pv(i)):i.Aa.set("Unknown")}async function jM(i,e,t){if(i.Aa.set("Online"),e instanceof lx&&e.state===2&&e.cause)try{await(async function(a,l){const u=l.cause;for(const f of l.targetIds)a.Ta.has(f)&&(await a.remoteSyncer.rejectListen(f,u),a.Ta.delete(f),a.Ra.removeTarget(f))})(i,e)}catch(r){ce(Eo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await dm(i,r)}else if(e instanceof zd?i.Ra.Ye(e):e instanceof ox?i.Ra.it(e):i.Ra.et(e),!t.isEqual(Se.min()))try{const r=await jx(i.localStore);t.compareTo(r)>=0&&await(function(l,u){const f=l.Ra.Pt(u);return f.targetChanges.forEach(((d,p)=>{if(d.resumeToken.approximateByteSize()>0){const y=l.Ta.get(p);y&&l.Ta.set(p,y.withResumeToken(d.resumeToken,u))}})),f.targetMismatches.forEach(((d,p)=>{const y=l.Ta.get(d);if(!y)return;l.Ta.set(d,y.withResumeToken(xt.EMPTY_BYTE_STRING,y.snapshotVersion)),Xx(l,d);const _=new Pr(y.target,d,p,y.sequenceNumber);mv(l,_)})),l.remoteSyncer.applyRemoteEvent(f)})(i,t)}catch(r){ce(Eo,"Failed to raise snapshot:",r),await dm(i,r)}}async function dm(i,e,t){if(!fa(e))throw e;i.Ia.add(1),await gu(i),i.Aa.set("Offline"),t||(t=()=>jx(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{ce(Eo,"Retrying IndexedDB access"),await t(),i.Ia.delete(1),await Ph(i)}))}function Wx(i,e){return e().catch((t=>dm(i,t,e)))}async function yu(i){const e=ge(i),t=aa(e);let r=e.Pa.length>0?e.Pa[e.Pa.length-1].batchId:ea;for(;UM(e);)try{const a=await TM(e.localStore,r);if(a===null){e.Pa.length===0&&t.B_();break}r=a.batchId,zM(e,a)}catch(a){await dm(e,a)}Jx(e)&&Zx(e)}function UM(i){return ma(i)&&i.Pa.length<10}function zM(i,e){i.Pa.push(e);const t=aa(i);t.x_()&&t.Z_&&t.X_(e.mutations)}function Jx(i){return ma(i)&&!aa(i).M_()&&i.Pa.length>0}function Zx(i){aa(i).start()}async function BM(i){aa(i).na()}async function FM(i){const e=aa(i);for(const t of i.Pa)e.X_(t.mutations)}async function qM(i,e,t){const r=i.Pa.shift(),a=ev.from(r,e,t);await Wx(i,(()=>i.remoteSyncer.applySuccessfulWrite(a))),await yu(i)}async function HM(i,e){e&&aa(i).Z_&&await(async function(r,a){if((function(u){return sx(u)&&u!==W.ABORTED})(a.code)){const l=r.Pa.shift();aa(r).N_(),await Wx(r,(()=>r.remoteSyncer.rejectFailedWrite(l.batchId,a))),await yu(r)}})(i,e),Jx(i)&&Zx(i)}async function uw(i,e){const t=ge(i);t.asyncQueue.verifyOperationInProgress(),ce(Eo,"RemoteStore received new credentials");const r=ma(t);t.Ia.add(3),await gu(t),r&&t.Aa.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ia.delete(3),await Ph(t)}async function h_(i,e){const t=ge(i);e?(t.Ia.delete(2),await Ph(t)):e||(t.Ia.add(2),await gu(t),t.Aa.set("Unknown"))}function _u(i){return i.Va||(i.Va=(function(t,r,a){const l=ge(t);return l.ia(),new CM(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(i.datastore,i.asyncQueue,{Zo:MM.bind(null,i),e_:kM.bind(null,i),n_:LM.bind(null,i),J_:jM.bind(null,i)}),i.da.push((async e=>{e?(i.Va.N_(),gv(i)?pv(i):i.Aa.set("Unknown")):(await i.Va.stop(),Yx(i))}))),i.Va}function aa(i){return i.ma||(i.ma=(function(t,r,a){const l=ge(t);return l.ia(),new DM(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,a)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),e_:BM.bind(null,i),n_:HM.bind(null,i),ea:FM.bind(null,i),ta:qM.bind(null,i)}),i.da.push((async e=>{e?(i.ma.N_(),await yu(i)):(await i.ma.stop(),i.Pa.length>0&&(ce(Eo,`Stopping write stream with ${i.Pa.length} pending writes`),i.Pa=[]))}))),i.ma}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yv{constructor(e,t,r,a,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=a,this.removalCallback=l,this.deferred=new rn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((u=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,a,l){const u=Date.now()+r,f=new yv(e,t,u,a,l);return f.start(r),f}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(W.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vu(i,e){if(kt("AsyncQueue",`${e}: ${i}`),fa(i))return new oe(W.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{static emptySet(e){return new oo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||pe.comparator(t.key,r.key):(t,r)=>pe.comparator(t.key,r.key),this.keyedMap=Uc(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,r)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof oo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,l=r.getNext().key;if(!a.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new oo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(){this.fa=new pt(pe.comparator)}track(e){const t=e.doc.key,r=this.fa.get(t);r?e.type!==0&&r.type===3?this.fa=this.fa.insert(t,e):e.type===3&&r.type!==1?this.fa=this.fa.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.fa=this.fa.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.fa=this.fa.remove(t):e.type===1&&r.type===2?this.fa=this.fa.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.fa=this.fa.insert(t,{type:2,doc:e.doc}):_e(63341,{At:e,ga:r}):this.fa=this.fa.insert(t,e)}pa(){const e=[];return this.fa.inorderTraversal(((t,r)=>{e.push(r)})),e}}class To{constructor(e,t,r,a,l,u,f,d,p){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=a,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=d,this.hasCachedResults=p}static fromInitialDocuments(e,t,r,a,l){const u=[];return t.forEach((f=>{u.push({type:0,doc:f})})),new To(e,t,oo.emptySet(t),u,r,a,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==r[a].type||!t[a].doc.isEqual(r[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(){this.ya=void 0,this.wa=[]}Sa(){return this.wa.some((e=>e.ba()))}}class KM{constructor(){this.queries=hw(),this.onlineState="Unknown",this.Da=new Set}terminate(){(function(t,r){const a=ge(t),l=a.queries;a.queries=hw(),l.forEach(((u,f)=>{for(const d of f.wa)d.onError(r)}))})(this,new oe(W.ABORTED,"Firestore shutting down"))}}function hw(){return new Kr((i=>HI(i)),Rh)}async function _v(i,e){const t=ge(i);let r=3;const a=e.query;let l=t.queries.get(a);l?!l.Sa()&&e.ba()&&(r=2):(l=new GM,r=e.ba()?0:1);try{switch(r){case 0:l.ya=await t.onListen(a,!0);break;case 1:l.ya=await t.onListen(a,!1);break;case 2:await t.onFirstRemoteStoreListen(a)}}catch(u){const f=vu(u,`Initialization of query '${xl(e.query)}' failed`);return void e.onError(f)}t.queries.set(a,l),l.wa.push(e),e.va(t.onlineState),l.ya&&e.Ca(l.ya)&&Ev(t)}async function vv(i,e){const t=ge(i),r=e.query;let a=3;const l=t.queries.get(r);if(l){const u=l.wa.indexOf(e);u>=0&&(l.wa.splice(u,1),l.wa.length===0?a=e.ba()?0:1:!l.Sa()&&e.ba()&&(a=2))}switch(a){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function $M(i,e){const t=ge(i);let r=!1;for(const a of e){const l=a.query,u=t.queries.get(l);if(u){for(const f of u.wa)f.Ca(a)&&(r=!0);u.ya=a}}r&&Ev(t)}function QM(i,e,t){const r=ge(i),a=r.queries.get(e);if(a)for(const l of a.wa)l.onError(t);r.queries.delete(e)}function Ev(i){i.Da.forEach((e=>{e.next()}))}var f_,fw;(fw=f_||(f_={})).Fa="default",fw.Cache="cache";class Tv{constructor(e,t,r){this.query=e,this.Ma=t,this.xa=!1,this.Oa=null,this.onlineState="Unknown",this.options=r||{}}Ca(e){if(!this.options.includeMetadataChanges){const r=[];for(const a of e.docChanges)a.type!==3&&r.push(a);e=new To(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.xa?this.Na(e)&&(this.Ma.next(e),t=!0):this.Ba(e,this.onlineState)&&(this.La(e),t=!0),this.Oa=e,t}onError(e){this.Ma.error(e)}va(e){this.onlineState=e;let t=!1;return this.Oa&&!this.xa&&this.Ba(this.Oa,e)&&(this.La(this.Oa),t=!0),t}Ba(e,t){if(!e.fromCache||!this.ba())return!0;const r=t!=="Offline";return(!this.options.ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Na(e){if(e.docChanges.length>0)return!0;const t=this.Oa&&this.Oa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}La(e){e=To.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.xa=!0,this.Ma.next(e)}ba(){return this.options.source!==f_.Cache}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,t){this.qa=e,this.byteLength=t}Qa(){return"metadata"in this.qa}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e){this.serializer=e}Qs(e){return tr(this.serializer,e)}$s(e){return e.metadata.exists?Pm(this.serializer,e.document,!1):vt.newNoDocument(this.Qs(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return Lt(e)}}class bv{constructor(e,t){this.$a=e,this.serializer=t,this.Ua=[],this.Ka=[],this.collectionGroups=new Set,this.progress=t1(e)}get queries(){return this.Ua}get documents(){return this.Ka}Wa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Ua.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Ka.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++t;const r=ke.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.qa.document&&(this.Ka[this.Ka.length-1].document=e.qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ga(e){const t=new Map,r=new dw(this.serializer);for(const a of e)if(a.metadata.queries){const l=r.Qs(a.metadata.name);for(const u of a.metadata.queries){const f=(t.get(u)||Ne()).add(l);t.set(u,f)}}return t}async za(e){const t=await bM(e,new dw(this.serializer),this.Ka,this.$a.id),r=this.Ga(this.documents);for(const a of this.Ua)await SM(e,a,r.get(a.name));return this.progress.taskState="Success",{progress:this.progress,ja:this.collectionGroups,Ja:t}}}function t1(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e){this.key=e}}class i1{constructor(e){this.key=e}}class r1{constructor(e,t){this.query=e,this.Ha=t,this.Ya=null,this.hasCachedResults=!1,this.current=!1,this.Za=Ne(),this.mutatedKeys=Ne(),this.Xa=KI(e),this.eu=new oo(this.Xa)}get tu(){return this.Ha}nu(e,t){const r=t?t.ru:new cw,a=t?t.eu:this.eu;let l=t?t.mutatedKeys:this.mutatedKeys,u=a,f=!1;const d=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,p=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((y,_)=>{const b=a.get(y),A=Ch(this.query,_)?_:null,N=!!b&&this.mutatedKeys.has(b.key),M=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let P=!1;b&&A?b.data.isEqual(A.data)?N!==M&&(r.track({type:3,doc:A}),P=!0):this.iu(b,A)||(r.track({type:2,doc:A}),P=!0,(d&&this.Xa(A,d)>0||p&&this.Xa(A,p)<0)&&(f=!0)):!b&&A?(r.track({type:0,doc:A}),P=!0):b&&!A&&(r.track({type:1,doc:b}),P=!0,(d||p)&&(f=!0)),P&&(A?(u=u.add(A),l=M?l.add(y):l.delete(y)):(u=u.delete(y),l=l.delete(y)))})),this.query.limit!==null)for(;u.size>this.query.limit;){const y=this.query.limitType==="F"?u.last():u.first();u=u.delete(y.key),l=l.delete(y.key),r.track({type:1,doc:y})}return{eu:u,ru:r,Ds:f,mutatedKeys:l}}iu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,a){const l=this.eu;this.eu=e.eu,this.mutatedKeys=e.mutatedKeys;const u=e.ru.pa();u.sort(((y,_)=>(function(A,N){const M=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return _e(20277,{At:P})}};return M(A)-M(N)})(y.type,_.type)||this.Xa(y.doc,_.doc))),this.su(r),a=a!=null&&a;const f=t&&!a?this.ou():[],d=this.Za.size===0&&this.current&&!a?1:0,p=d!==this.Ya;return this.Ya=d,u.length!==0||p?{snapshot:new To(this.query,e.eu,l,u,e.mutatedKeys,d===0,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),_u:f}:{_u:f}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({eu:this.eu,ru:new cw,mutatedKeys:this.mutatedKeys,Ds:!1},!1)):{_u:[]}}au(e){return!this.Ha.has(e)&&!!this.eu.has(e)&&!this.eu.get(e).hasLocalMutations}su(e){e&&(e.addedDocuments.forEach((t=>this.Ha=this.Ha.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ha=this.Ha.delete(t))),this.current=e.current)}ou(){if(!this.current)return[];const e=this.Za;this.Za=Ne(),this.eu.forEach((r=>{this.au(r.key)&&(this.Za=this.Za.add(r.key))}));const t=[];return e.forEach((r=>{this.Za.has(r)||t.push(new i1(r))})),this.Za.forEach((r=>{e.has(r)||t.push(new n1(r))})),t}uu(e){this.Ha=e.qs,this.Za=Ne();const t=this.nu(e.documents);return this.applyChanges(t,!0)}cu(){return To.fromInitialDocuments(this.query,this.eu,this.mutatedKeys,this.Ya===0,this.hasCachedResults)}}const pa="SyncEngine";class XM{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class YM{constructor(e){this.key=e,this.lu=!1}}class WM{constructor(e,t,r,a,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=a,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.hu={},this.Pu=new Kr((f=>HI(f)),Rh),this.Tu=new Map,this.Iu=new Set,this.du=new pt(pe.comparator),this.Eu=new Map,this.Au=new av,this.Ru={},this.Vu=new Map,this.mu=vo.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return this.fu===!0}}async function JM(i,e,t=!0){const r=zm(i);let a;const l=r.Pu.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),a=l.view.cu()):a=await s1(r,e,t,!0),a}async function ZM(i,e){const t=zm(i);await s1(t,e,!0,!1)}async function s1(i,e,t,r){const a=await Jl(i.localStore,Sn(e)),l=a.targetId,u=i.sharedClientState.addLocalQueryTarget(l,t);let f;return r&&(f=await Sv(i,e,l,u==="current",a.resumeToken)),i.isPrimaryClient&&t&&Um(i.remoteStore,a),f}async function Sv(i,e,t,r,a){i.gu=(_,b,A)=>(async function(M,P,q,$){let B=P.view.nu(q);B.Ds&&(B=await cm(M.localStore,P.query,!1).then((({documents:R})=>P.view.nu(R,B))));const J=$&&$.targetChanges.get(P.targetId),fe=$&&$.targetMismatches.get(P.targetId)!=null,de=P.view.applyChanges(B,M.isPrimaryClient,J,fe);return d_(M,P.targetId,de._u),de.snapshot})(i,_,b,A);const l=await cm(i.localStore,e,!0),u=new r1(e,l.qs),f=u.nu(l.documents),d=Oh.createSynthesizedTargetChangeForCurrentChange(t,r&&i.onlineState!=="Offline",a),p=u.applyChanges(f,i.isPrimaryClient,d);d_(i,t,p._u);const y=new XM(e,t,u);return i.Pu.set(e,y),i.Tu.has(t)?i.Tu.get(t).push(e):i.Tu.set(t,[e]),p.snapshot}async function ek(i,e,t){const r=ge(i),a=r.Pu.get(e),l=r.Tu.get(a.targetId);if(l.length>1)return r.Tu.set(a.targetId,l.filter((u=>!Rh(u,e)))),void r.Pu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(a.targetId),r.sharedClientState.isActiveQueryTarget(a.targetId)||await Zl(r.localStore,a.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(a.targetId),t&&eu(r.remoteStore,a.targetId),tu(r,a.targetId)})).catch(ha)):(tu(r,a.targetId),await Zl(r.localStore,a.targetId,!0))}async function tk(i,e){const t=ge(i),r=t.Pu.get(e),a=t.Tu.get(r.targetId);t.isPrimaryClient&&a.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),eu(t.remoteStore,r.targetId))}async function nk(i,e,t){const r=xv(i);try{const a=await(function(u,f){const d=ge(u),p=et.now(),y=f.reduce(((A,N)=>A.add(N.key)),Ne());let _,b;return d.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let N=Bn(),M=Ne();return d.Os.getEntries(A,y).next((P=>{N=P,N.forEach(((q,$)=>{$.isValidDocument()||(M=M.add(q))}))})).next((()=>d.localDocuments.getOverlayedDocuments(A,N))).next((P=>{_=P;const q=[];for(const $ of f){const B=x4($,_.get($.key).overlayedDocument);B!=null&&q.push(new $r($.key,B,PI(B.value.mapValue),St.exists(!0)))}return d.mutationQueue.addMutationBatch(A,p,q,f)})).next((P=>{b=P;const q=P.applyToLocalDocumentSet(_,M);return d.documentOverlayCache.saveOverlays(A,P.batchId,q)}))})).then((()=>({batchId:b.batchId,changes:QI(_)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(a.batchId),(function(u,f,d){let p=u.Ru[u.currentUser.toKey()];p||(p=new pt(Ae)),p=p.insert(f,d),u.Ru[u.currentUser.toKey()]=p})(r,a.batchId,t),await Qr(r,a.changes),await yu(r.remoteStore)}catch(a){const l=vu(a,"Failed to persist write");t.reject(l)}}async function a1(i,e){const t=ge(i);try{const r=await EM(t.localStore,e);e.targetChanges.forEach(((a,l)=>{const u=t.Eu.get(l);u&&(Te(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?u.lu=!0:a.modifiedDocuments.size>0?Te(u.lu,14607):a.removedDocuments.size>0&&(Te(u.lu,42227),u.lu=!1))})),await Qr(t,r,e)}catch(r){await ha(r)}}function mw(i,e,t){const r=ge(i);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const a=[];r.Pu.forEach(((l,u)=>{const f=u.view.va(e);f.snapshot&&a.push(f.snapshot)})),(function(u,f){const d=ge(u);d.onlineState=f;let p=!1;d.queries.forEach(((y,_)=>{for(const b of _.wa)b.va(f)&&(p=!0)})),p&&Ev(d)})(r.eventManager,e),a.length&&r.hu.J_(a),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ik(i,e,t){const r=ge(i);r.sharedClientState.updateQueryState(e,"rejected",t);const a=r.Eu.get(e),l=a&&a.key;if(l){let u=new pt(pe.comparator);u=u.insert(l,vt.newNoDocument(l,Se.min()));const f=Ne().add(l),d=new Nh(Se.min(),new Map,new pt(Ae),u,f);await a1(r,d),r.du=r.du.remove(l),r.Eu.delete(e),Iv(r)}else await Zl(r.localStore,e,!1).then((()=>tu(r,e,t))).catch(ha)}async function rk(i,e){const t=ge(i),r=e.batch.batchId;try{const a=await vM(t.localStore,e);Av(t,r,null),wv(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await Qr(t,a)}catch(a){await ha(a)}}async function sk(i,e,t){const r=ge(i);try{const a=await(function(u,f){const d=ge(u);return d.persistence.runTransaction("Reject batch","readwrite-primary",(p=>{let y;return d.mutationQueue.lookupMutationBatch(p,f).next((_=>(Te(_!==null,37113),y=_.keys(),d.mutationQueue.removeMutationBatch(p,_)))).next((()=>d.mutationQueue.performConsistencyCheck(p))).next((()=>d.documentOverlayCache.removeOverlaysForBatchId(p,y,f))).next((()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,y))).next((()=>d.localDocuments.getDocuments(p,y)))}))})(r.localStore,e);Av(r,e,t),wv(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await Qr(r,a)}catch(a){await ha(a)}}async function ak(i,e){const t=ge(i);ma(t.remoteStore)||ce(pa,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await(function(u){const f=ge(u);return f.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(d=>f.mutationQueue.getHighestUnacknowledgedBatchId(d)))})(t.localStore);if(r===ea)return void e.resolve();const a=t.Vu.get(r)||[];a.push(e),t.Vu.set(r,a)}catch(r){const a=vu(r,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}function wv(i,e){(i.Vu.get(e)||[]).forEach((t=>{t.resolve()})),i.Vu.delete(e)}function Av(i,e,t){const r=ge(i);let a=r.Ru[r.currentUser.toKey()];if(a){const l=a.get(e);l&&(t?l.reject(t):l.resolve(),a=a.remove(e)),r.Ru[r.currentUser.toKey()]=a}}function tu(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const r of i.Tu.get(e))i.Pu.delete(r),t&&i.hu.pu(r,t);i.Tu.delete(e),i.isPrimaryClient&&i.Au.zr(e).forEach((r=>{i.Au.containsKey(r)||o1(i,r)}))}function o1(i,e){i.Iu.delete(e.path.canonicalString());const t=i.du.get(e);t!==null&&(eu(i.remoteStore,t),i.du=i.du.remove(e),i.Eu.delete(t),Iv(i))}function d_(i,e,t){for(const r of t)r instanceof n1?(i.Au.addReference(r.key,e),ok(i,r)):r instanceof i1?(ce(pa,"Document no longer in limbo: "+r.key),i.Au.removeReference(r.key,e),i.Au.containsKey(r.key)||o1(i,r.key)):_e(19791,{yu:r})}function ok(i,e){const t=e.key,r=t.path.canonicalString();i.du.get(t)||i.Iu.has(r)||(ce(pa,"New document in limbo: "+t),i.Iu.add(r),Iv(i))}function Iv(i){for(;i.Iu.size>0&&i.du.size<i.maxConcurrentLimboResolutions;){const e=i.Iu.values().next().value;i.Iu.delete(e);const t=new pe(ke.fromString(e)),r=i.mu.next();i.Eu.set(r,new YM(t)),i.du=i.du.insert(t,r),Um(i.remoteStore,new Pr(Sn(du(t.path)),r,"TargetPurposeLimboResolution",Un.ue))}}async function Qr(i,e,t){const r=ge(i),a=[],l=[],u=[];r.Pu.isEmpty()||(r.Pu.forEach(((f,d)=>{u.push(r.gu(d,e,t).then((p=>{var y;if((p||t)&&r.isPrimaryClient){const _=p?!p.fromCache:(y=t==null?void 0:t.targetChanges.get(d.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(d.targetId,_?"current":"not-current")}if(p){a.push(p);const _=cv.Es(d.targetId,p);l.push(_)}})))})),await Promise.all(u),r.hu.J_(a),await(async function(d,p){const y=ge(d);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(_=>K.forEach(p,(b=>K.forEach(b.Is,(A=>y.persistence.referenceDelegate.addReference(_,b.targetId,A))).next((()=>K.forEach(b.ds,(A=>y.persistence.referenceDelegate.removeReference(_,b.targetId,A)))))))))}catch(_){if(!fa(_))throw _;ce(hv,"Failed to update sequence numbers: "+_)}for(const _ of p){const b=_.targetId;if(!_.fromCache){const A=y.Fs.get(b),N=A.snapshotVersion,M=A.withLastLimboFreeSnapshotVersion(N);y.Fs=y.Fs.insert(b,M)}}})(r.localStore,l))}async function lk(i,e){const t=ge(i);if(!t.currentUser.isEqual(e)){ce(pa,"User change. New user:",e.toKey());const r=await Lx(t.localStore,e);t.currentUser=e,(function(l,u){l.Vu.forEach((f=>{f.forEach((d=>{d.reject(new oe(W.CANCELLED,u))}))})),l.Vu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Qr(t,r.Bs)}}function uk(i,e){const t=ge(i),r=t.Eu.get(e);if(r&&r.lu)return Ne().add(r.key);{let a=Ne();const l=t.Tu.get(e);if(!l)return a;for(const u of l){const f=t.Pu.get(u);a=a.unionWith(f.view.tu)}return a}}async function ck(i,e){const t=ge(i),r=await cm(t.localStore,e.query,!0),a=e.view.uu(r);return t.isPrimaryClient&&d_(t,e.targetId,a._u),a}async function hk(i,e){const t=ge(i);return Bx(t.localStore,e).then((r=>Qr(t,r)))}async function fk(i,e,t,r){const a=ge(i),l=await(function(f,d){const p=ge(f),y=ge(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",(_=>y.Xn(_,d).next((b=>b?p.localDocuments.getDocuments(_,b):K.resolve(null)))))})(a.localStore,e);l!==null?(t==="pending"?await yu(a.remoteStore):t==="acknowledged"||t==="rejected"?(Av(a,e,r||null),wv(a,e),(function(f,d){ge(ge(f).mutationQueue).rr(d)})(a.localStore,e)):_e(6720,"Unknown batchState",{wu:t}),await Qr(a,l)):ce(pa,"Cannot apply mutation batch with id: "+e)}async function dk(i,e){const t=ge(i);if(zm(t),xv(t),e===!0&&t.fu!==!0){const r=t.sharedClientState.getAllActiveQueryTargets(),a=await pw(t,r.toArray());t.fu=!0,await h_(t.remoteStore,!0);for(const l of a)Um(t.remoteStore,l)}else if(e===!1&&t.fu!==!1){const r=[];let a=Promise.resolve();t.Tu.forEach(((l,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):a=a.then((()=>(tu(t,u),Zl(t.localStore,u,!0)))),eu(t.remoteStore,u)})),await a,await pw(t,r),(function(u){const f=ge(u);f.Eu.forEach(((d,p)=>{eu(f.remoteStore,p)})),f.Au.jr(),f.Eu=new Map,f.du=new pt(pe.comparator)})(t),t.fu=!1,await h_(t.remoteStore,!1)}}async function pw(i,e,t){const r=ge(i),a=[],l=[];for(const u of e){let f;const d=r.Tu.get(u);if(d&&d.length!==0){f=await Jl(r.localStore,Sn(d[0]));for(const p of d){const y=r.Pu.get(p),_=await ck(r,y);_.snapshot&&l.push(_.snapshot)}}else{const p=await zx(r.localStore,u);f=await Jl(r.localStore,p),await Sv(r,l1(p),u,!1,f.resumeToken)}a.push(f)}return r.hu.J_(l),a}function l1(i){return BI(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function mk(i){return(function(t){return ge(ge(t).persistence).Ps()})(ge(i).localStore)}async function pk(i,e,t,r){const a=ge(i);if(a.fu)return void ce(pa,"Ignoring unexpected query state notification.");const l=a.Tu.get(e);if(l&&l.length>0)switch(t){case"current":case"not-current":{const u=await Bx(a.localStore,GI(l[0])),f=Nh.createSynthesizedRemoteEventForCurrentChange(e,t==="current",xt.EMPTY_BYTE_STRING);await Qr(a,u,f);break}case"rejected":await Zl(a.localStore,e,!0),tu(a,e,r);break;default:_e(64155,t)}}async function gk(i,e,t){const r=zm(i);if(r.fu){for(const a of e){if(r.Tu.has(a)&&r.sharedClientState.isActiveQueryTarget(a)){ce(pa,"Adding an already active target "+a);continue}const l=await zx(r.localStore,a),u=await Jl(r.localStore,l);await Sv(r,l1(l),u.targetId,!1,u.resumeToken),Um(r.remoteStore,u)}for(const a of t)r.Tu.has(a)&&await Zl(r.localStore,a,!1).then((()=>{eu(r.remoteStore,a),tu(r,a)})).catch(ha)}}function zm(i){const e=ge(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=a1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ik.bind(null,e),e.hu.J_=$M.bind(null,e.eventManager),e.hu.pu=QM.bind(null,e.eventManager),e}function xv(i){const e=ge(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sk.bind(null,e),e}function yk(i,e,t){const r=ge(i);(async function(l,u,f){try{const d=await u.getMetadata();if(await(function(A,N){const M=ge(A),P=Lt(N.createTime);return M.persistence.runTransaction("hasNewerBundle","readonly",(q=>M.Ti.getBundleMetadata(q,N.id))).then((q=>!!q&&q.createTime.compareTo(P)>=0))})(l.localStore,d))return await u.close(),f._completeWith((function(A){return{taskState:"Success",documentsLoaded:A.totalDocuments,bytesLoaded:A.totalBytes,totalDocuments:A.totalDocuments,totalBytes:A.totalBytes}})(d)),Promise.resolve(new Set);f._updateProgress(t1(d));const p=new bv(d,u.serializer);let y=await u.Su();for(;y;){const b=await p.Wa(y);b&&f._updateProgress(b),y=await u.Su()}const _=await p.za(l.localStore);return await Qr(l,_.Ja,void 0),await(function(A,N){const M=ge(A);return M.persistence.runTransaction("Save bundle","readwrite",(P=>M.Ti.saveBundleMetadata(P,N)))})(l.localStore,d),f._completeWith(_.progress),Promise.resolve(_.ja)}catch(d){return wn(pa,`Loading bundle failed with ${d}`),f._failWith(d),Promise.resolve(new Set)}})(r,e,t).then((a=>{r.sharedClientState.notifyBundleLoaded(a)}))}class nu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=xo(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return kx(this.persistence,new Mx,e.initialUser,this.serializer)}Du(e){return new ov(jm.Vi,this.serializer)}bu(e){return new Kx}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}nu.provider={build:()=>new nu};class Rv extends nu{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){Te(this.persistence.referenceDelegate instanceof um,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new Cx(r,e.asyncQueue,t)}Du(e){const t=this.cacheSizeBytes!==void 0?Tn.withCacheSize(this.cacheSizeBytes):Tn.DEFAULT;return new ov((r=>um.Vi(r,t)),this.serializer)}}class Cv extends nu{constructor(e,t,r){super(),this.Mu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Mu.initialize(this,e),await xv(this.Mu.syncEngine),await yu(this.Mu.remoteStore),await this.persistence.ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return kx(this.persistence,new Mx,e.initialUser,this.serializer)}Cu(e,t){const r=this.persistence.referenceDelegate.garbageCollector;return new Cx(r,e.asyncQueue,t)}Fu(e,t){const r=new NV(t,this.persistence);return new DV(e.asyncQueue,r)}Du(e){const t=uv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Tn.withCacheSize(this.cacheSizeBytes):Tn.DEFAULT;return new lv(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,$x(),Fd(),this.serializer,this.sharedClientState,!!this.forceOwnership)}bu(e){return new Kx}}class u1 extends Cv{constructor(e,t){super(e,t,!1),this.Mu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Mu.syncEngine;this.sharedClientState instanceof Ty&&(this.sharedClientState.syncEngine={Do:fk.bind(null,t),vo:pk.bind(null,t),Co:gk.bind(null,t),Ps:mk.bind(null,t),bo:hk.bind(null,t)},await this.sharedClientState.start()),await this.persistence.ji((async r=>{await dk(this.Mu.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))}bu(e){const t=$x();if(!Ty.C(t))throw new oe(W.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=uv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ty(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class oa{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>mw(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=lk.bind(null,this.syncEngine),await h_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new KM})()}createDatastore(e){const t=xo(e.databaseInfo.databaseId),r=(function(l){return new RM(l)})(e.databaseInfo);return(function(l,u,f,d){return new OM(l,u,f,d)})(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return(function(r,a,l,u,f){return new VM(r,a,l,u,f)})(this.localStore,this.datastore,e.asyncQueue,(t=>mw(this.syncEngine,t,0)),(function(){return ow.C()?new ow:new wM})())}createSyncEngine(e,t){return(function(a,l,u,f,d,p,y){const _=new WM(a,l,u,f,d,p);return y&&(_.fu=!0),_})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(a){const l=ge(a);ce(Eo,"RemoteStore shutting down."),l.Ia.add(5),await gu(l),l.Ea.shutdown(),l.Aa.set("Unknown")})(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}oa.provider={build:()=>new oa};function gw(i,e=10240){let t=0;return{async read(){if(t<i.byteLength){const r={value:i.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bm{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.xu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.xu(this.observer.error,e):kt("Uncaught Error in snapshot listener:",e.toString()))}Ou(){this.muted=!0}xu(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e,t){this.Nu=e,this.serializer=t,this.metadata=new rn,this.buffer=new Uint8Array,this.Bu=(function(){return new TextDecoder("utf-8")})(),this.Lu().then((r=>{r&&r.Qa()?this.metadata.resolve(r.qa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.qa)}`))}),(r=>this.metadata.reject(r)))}close(){return this.Nu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.Lu()}async Lu(){const e=await this.ku();if(e===null)return null;const t=this.Bu.decode(e),r=Number(t);isNaN(r)&&this.qu(`length string (${t}) is not valid number`);const a=await this.Qu(r);return new e1(JSON.parse(a),e.length+r)}$u(){return this.buffer.findIndex((e=>e===123))}async ku(){for(;this.$u()<0&&!await this.Uu(););if(this.buffer.length===0)return null;const e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Qu(e){for(;this.buffer.length<e;)await this.Uu()&&this.qu("Reached the end of bundle when more is expected.");const t=this.Bu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}qu(e){throw this.Nu.cancel(),new Error(`Invalid bundle format: ${e}`)}async Uu(){const e=await this.Nu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e,t){this.bundleData=e,this.serializer=t,this.cursor=0,this.elements=[];let r=this.Su();if(!r||!r.Qa())throw new Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(r==null?void 0:r.qa)}`);this.metadata=r;do r=this.Su(),r!==null&&this.elements.push(r);while(r!==null)}getMetadata(){return this.metadata}Ku(){return this.elements}Su(){if(this.cursor===this.bundleData.length)return null;const e=this.ku(),t=this.Qu(e);return new e1(JSON.parse(t),e)}Qu(e){if(this.cursor+e>this.bundleData.length)throw new oe(W.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}ku(){const e=this.cursor;let t=this.cursor;for(;t<this.bundleData.length;){if(this.bundleData[t]==="{"){if(t===e)throw new Error("First character is a bracket and not a number");return this.cursor=t,Number(this.bundleData.slice(e,t))}t++}throw new Error("Reached the end of bundle when more is expected.")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new oe(W.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await(async function(a,l){const u=ge(a),f={documents:l.map((_=>fh(u.serializer,_)))},d=await u.Jo("BatchGetDocuments",u.serializer.databaseId,ke.emptyPath(),f,l.length),p=new Map;d.forEach((_=>{const b=k4(u.serializer,_);p.set(b.key.toString(),b)}));const y=[];return l.forEach((_=>{const b=p.get(_.toString());Te(!!b,55234,{key:_}),y.push(b)})),y})(this.datastore,e);return t.forEach((r=>this.recordVersion(r))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new pu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((t,r)=>{const a=pe.fromPath(r);this.mutations.push(new J_(a,this.precondition(a)))})),await(async function(r,a){const l=ge(r),u={writes:a.map((f=>dh(l.serializer,f)))};await l.Wo("Commit",l.serializer.databaseId,ke.emptyPath(),u)})(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw _e(50498,{Wu:e.constructor.name});t=Se.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new oe(W.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Se.min())?St.exists(!1):St.updateTime(t):St.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Se.min()))throw new oe(W.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return St.updateTime(t)}return St.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,t,r,a,l){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=a,this.deferred=l,this.Gu=r.maxAttempts,this.F_=new dv(this.asyncQueue,"transaction_retry")}zu(){this.Gu-=1,this.ju()}ju(){this.F_.g_((async()=>{const e=new Ek(this.datastore),t=this.Ju(e);t&&t.then((r=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(r)})).catch((a=>{this.Hu(a)}))))})).catch((r=>{this.Hu(r)}))}))}Ju(e){try{const t=this.updateFunction(e);return!Ah(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Hu(e){this.Gu>0&&this.Yu(e)?(this.Gu-=1,this.asyncQueue.enqueueAndForget((()=>(this.ju(),Promise.resolve())))):this.deferred.reject(e)}Yu(e){if(e.name==="FirebaseError"){const t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!sx(t)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la="FirestoreClient";class bk{constructor(e,t,r,a,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=a,this.user=nn.UNAUTHENTICATED,this.clientId=bm.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,(async u=>{ce(la,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u})),this.appCheckCredentials.start(r,(u=>(ce(la,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=vu(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Sy(i,e){i.asyncQueue.verifyOperationInProgress(),ce(la,"Initializing OfflineComponentProvider");const t=i.configuration;await e.initialize(t);let r=t.initialUser;i.setCredentialChangeListener((async a=>{r.isEqual(a)||(await Lx(e.localStore,a),r=a)})),e.persistence.setDatabaseDeletedListener((()=>{wn("Terminating Firestore due to IndexedDb database deletion"),i.terminate().then((()=>{ce("Terminating Firestore due to IndexedDb database deletion completed successfully")})).catch((a=>{wn("Terminating Firestore due to IndexedDb database deletion failed",a)}))})),i._offlineComponents=e}async function yw(i,e){i.asyncQueue.verifyOperationInProgress();const t=await Dv(i);ce(la,"Initializing OnlineComponentProvider"),await e.initialize(t,i.configuration),i.setCredentialChangeListener((r=>uw(e.remoteStore,r))),i.setAppCheckTokenChangeListener(((r,a)=>uw(e.remoteStore,a))),i._onlineComponents=e}async function Dv(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){ce(la,"Using user provided OfflineComponentProvider");try{await Sy(i,i._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(a){return a.name==="FirebaseError"?a.code===W.FAILED_PRECONDITION||a.code===W.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(t))throw t;wn("Error using user provided cache. Falling back to memory cache: "+t),await Sy(i,new nu)}}else ce(la,"Using default OfflineComponentProvider"),await Sy(i,new Rv(void 0));return i._offlineComponents}async function Fm(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(ce(la,"Using user provided OnlineComponentProvider"),await yw(i,i._uninitializedComponentsProvider._online)):(ce(la,"Using default OnlineComponentProvider"),await yw(i,new oa))),i._onlineComponents}function c1(i){return Dv(i).then((e=>e.persistence))}function Eu(i){return Dv(i).then((e=>e.localStore))}function h1(i){return Fm(i).then((e=>e.remoteStore))}function Nv(i){return Fm(i).then((e=>e.syncEngine))}function f1(i){return Fm(i).then((e=>e.datastore))}async function iu(i){const e=await Fm(i),t=e.eventManager;return t.onListen=JM.bind(null,e.syncEngine),t.onUnlisten=ek.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ZM.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=tk.bind(null,e.syncEngine),t}function Sk(i){return i.asyncQueue.enqueue((async()=>{const e=await c1(i),t=await h1(i);return e.setNetworkEnabled(!0),(function(a){const l=ge(a);return l.Ia.delete(0),Ph(l)})(t)}))}function wk(i){return i.asyncQueue.enqueue((async()=>{const e=await c1(i),t=await h1(i);return e.setNetworkEnabled(!1),(async function(a){const l=ge(a);l.Ia.add(0),await gu(l),l.Aa.set("Offline")})(t)}))}function Ak(i,e){const t=new rn;return i.asyncQueue.enqueueAndForget((async()=>(async function(a,l,u){try{const f=await(function(p,y){const _=ge(p);return _.persistence.runTransaction("read document","readonly",(b=>_.localDocuments.getDocument(b,y)))})(a,l);f.isFoundDocument()?u.resolve(f):f.isNoDocument()?u.resolve(null):u.reject(new oe(W.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(f){const d=vu(f,`Failed to get document '${l} from cache`);u.reject(d)}})(await Eu(i),e,t))),t.promise}function d1(i,e,t={}){const r=new rn;return i.asyncQueue.enqueueAndForget((async()=>(function(l,u,f,d,p){const y=new Bm({next:b=>{y.Ou(),u.enqueueAndForget((()=>vv(l,_)));const A=b.docs.has(f);!A&&b.fromCache?p.reject(new oe(W.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&b.fromCache&&d&&d.source==="server"?p.reject(new oe(W.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(b)},error:b=>p.reject(b)}),_=new Tv(du(f.path),y,{includeMetadataChanges:!0,ka:!0});return _v(l,_)})(await iu(i),i.asyncQueue,e,t,r))),r.promise}function Ik(i,e){const t=new rn;return i.asyncQueue.enqueueAndForget((async()=>(async function(a,l,u){try{const f=await cm(a,l,!0),d=new r1(l,f.qs),p=d.nu(f.documents),y=d.applyChanges(p,!1);u.resolve(y.snapshot)}catch(f){const d=vu(f,`Failed to execute query '${l} against cache`);u.reject(d)}})(await Eu(i),e,t))),t.promise}function m1(i,e,t={}){const r=new rn;return i.asyncQueue.enqueueAndForget((async()=>(function(l,u,f,d,p){const y=new Bm({next:b=>{y.Ou(),u.enqueueAndForget((()=>vv(l,_))),b.fromCache&&d.source==="server"?p.reject(new oe(W.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(b)},error:b=>p.reject(b)}),_=new Tv(f,y,{includeMetadataChanges:!0,ka:!0});return _v(l,_)})(await iu(i),i.asyncQueue,e,t,r))),r.promise}function xk(i,e,t){const r=new rn;return i.asyncQueue.enqueueAndForget((async()=>{try{const a=await f1(i);r.resolve((async function(u,f,d){var p;const y=ge(u),{request:_,ft:b,parent:A}=px(y.serializer,FI(f),d);y.connection.Qo||delete _.parent;const N=(await y.Jo("RunAggregationQuery",y.serializer.databaseId,A,_,1)).filter((P=>!!P.result));Te(N.length===1,64727);const M=(p=N[0].result)===null||p===void 0?void 0:p.aggregateFields;return Object.keys(M).reduce(((P,q)=>(P[b[q]]=M[q],P)),{})})(a,e,t))}catch(a){r.reject(a)}})),r.promise}function Rk(i,e){const t=new Bm(e);return i.asyncQueue.enqueueAndForget((async()=>(function(a,l){ge(a).Da.add(l),l.next()})(await iu(i),t))),()=>{t.Ou(),i.asyncQueue.enqueueAndForget((async()=>(function(a,l){ge(a).Da.delete(l)})(await iu(i),t)))}}function Ck(i,e,t,r){const a=(function(u,f){let d;return d=typeof u=="string"?j_().encode(u):u,(function(y,_){return new _k(y,_)})((function(y,_){if(y instanceof Uint8Array)return gw(y,_);if(y instanceof ArrayBuffer)return gw(new Uint8Array(y),_);if(y instanceof ReadableStream)return y.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")})(d),f)})(t,xo(e));i.asyncQueue.enqueueAndForget((async()=>{yk(await Nv(i),a,r)}))}function Dk(i,e){return i.asyncQueue.enqueue((async()=>(function(r,a){const l=ge(r);return l.persistence.runTransaction("Get named query","readonly",(u=>l.Ti.getNamedQuery(u,a)))})(await Eu(i),e)))}function p1(i,e){return(function(r,a){return new vk(r,a)})(i,e)}function Nk(i,e){return i.asyncQueue.enqueue((async()=>(async function(r,a){const l=ge(r),u=l.indexManager,f=[];return l.persistence.runTransaction("Configure indexes","readwrite",(d=>u.getFieldIndexes(d).next((p=>(function(_,b,A,N,M){_=[..._],b=[...b],_.sort(A),b.sort(A);const P=_.length,q=b.length;let $=0,B=0;for(;$<q&&B<P;){const J=A(_[B],b[$]);J<0?M(_[B++]):J>0?N(b[$++]):($++,B++)}for(;$<q;)N(b[$++]);for(;B<P;)M(_[B++])})(p,a,IV,(y=>{f.push(u.addFieldIndex(d,y))}),(y=>{f.push(u.deleteFieldIndex(d,y))})))).next((()=>K.waitFor(f)))))})(await Eu(i),e)))}function Ok(i,e){return i.asyncQueue.enqueue((async()=>(function(r,a){ge(r).Cs.Rs=a})(await Eu(i),e)))}function Pk(i){return i.asyncQueue.enqueue((async()=>(function(t){const r=ge(t),a=r.indexManager;return r.persistence.runTransaction("Delete All Indexes","readwrite",(l=>a.deleteAllFieldIndexes(l)))})(await Eu(i))))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _w=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1="firestore.googleapis.com",vw=!0;class Ew{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new oe(W.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=y1,this.ssl=vw}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:vw;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=wx;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Rx)throw new oe(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rI("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=g1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),(function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new oe(W.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new oe(W.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new oe(W.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,a){return r.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Vh{constructor(e,t,r,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ew({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(W.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(W.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ew(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new nI;switch(r.type){case"firstParty":return new EV(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new oe(W.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const r=_w.get(t);r&&(ce("ComponentProvider","Removing Datastore"),_w.delete(t),r.terminate())})(this),Promise.resolve()}}function _1(i,e,t,r={}){var a;i=Le(i,Vh);const l=wo(e),u=i._getSettings(),f=Object.assign(Object.assign({},u),{emulatorOptions:i._getEmulatorOptions()}),d=`${e}:${t}`;l&&(A_(`https://${d}`),iA("Firestore",!0)),u.host!==y1&&u.host!==d&&wn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},u),{host:d,ssl:l,emulatorOptions:r});if(!Di(p,f)&&(i._setSettings(p),r.mockUserToken)){let y,_;if(typeof r.mockUserToken=="string")y=r.mockUserToken,_=nn.MOCK_USER;else{y=CD(r.mockUserToken,(a=i._app)===null||a===void 0?void 0:a.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new oe(W.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new nn(b)}i._authCredentials=new yV(new tI(y,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Qt(this.firestore,e,this._query)}}class rt{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ri(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rt(this.firestore,e,this._key)}toJSON(){return{type:rt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(Io(t,rt._jsonSchema))return new rt(e,r||null,new pe(ke.fromString(t.referencePath)))}}rt._jsonSchemaVersion="firestore/documentReference/1.0",rt._jsonSchema={type:Ht("string",rt._jsonSchemaVersion),referencePath:Ht("string")};class Ri extends Qt{constructor(e,t,r){super(e,t,du(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rt(this.firestore,null,new pe(e))}withConverter(e){return new Ri(this.firestore,e,this._path)}}function ru(i,e,...t){if(i=ht(i),U_("collection","path",e),i instanceof Vh){const r=ke.fromString(e,...t);return lS(r),new Ri(i,null,r)}{if(!(i instanceof rt||i instanceof Ri))throw new oe(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(ke.fromString(e,...t));return lS(r),new Ri(i.firestore,null,r)}}function Vk(i,e){if(i=Le(i,Vh),U_("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new oe(W.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Qt(i,null,(function(r){return new Gr(ke.emptyPath(),r)})(e))}function ct(i,e,...t){if(i=ht(i),arguments.length===1&&(e=bm.newId()),U_("doc","path",e),i instanceof Vh){const r=ke.fromString(e,...t);return oS(r),new rt(i,null,new pe(r))}{if(!(i instanceof rt||i instanceof Ri))throw new oe(W.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=i._path.child(ke.fromString(e,...t));return oS(r),new rt(i.firestore,i instanceof Ri?i.converter:null,new pe(r))}}function Mk(i,e){return i=ht(i),e=ht(e),(i instanceof rt||i instanceof Ri)&&(e instanceof rt||e instanceof Ri)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Ov(i,e){return i=ht(i),e=ht(e),i instanceof Qt&&e instanceof Qt&&i.firestore===e.firestore&&Rh(i._query,e._query)&&i.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw="AsyncQueue";class bw{constructor(e=Promise.resolve()){this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new dv(this,"async_queue_retry"),this.oc=()=>{const r=Fd();r&&ce(Tw,"Visibility state changed to "+r.visibilityState),this.F_.y_()},this._c=e;const t=Fd();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Fd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise((()=>{}));const t=new rn;return this.uc((()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Zu.push(e),this.cc())))}async cc(){if(this.Zu.length!==0){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(e){if(!fa(e))throw e;ce(Tw,"Operation failed with retryable error: "+e)}this.Zu.length>0&&this.F_.g_((()=>this.cc()))}}uc(e){const t=this._c.then((()=>(this.nc=!0,e().catch((r=>{throw this.tc=r,this.nc=!1,kt("INTERNAL UNHANDLED ERROR: ",Sw(r)),r})).then((r=>(this.nc=!1,r))))));return this._c=t,t}enqueueAfterDelay(e,t,r){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const a=yv.createAndSchedule(this,e,t,r,(l=>this.lc(l)));return this.ec.push(a),a}ac(){this.tc&&_e(47125,{hc:Sw(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do e=this._c,await e;while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then((()=>{this.ec.sort(((t,r)=>t.targetTimeMs-r.targetTimeMs));for(const t of this.ec)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Pc()}))}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function Sw(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ml(i){return(function(t,r){if(typeof t!="object"||t===null)return!1;const a=t;for(const l of r)if(l in a&&typeof a[l]=="function")return!0;return!1})(i,["next","error","complete"])}class v1{constructor(){this._progressObserver={},this._taskCompletionResolver=new rn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kk=-1;class ft extends Vh{constructor(e,t,r,a){super(e,t,r,a),this.type="firestore",this._queue=new bw,this._persistenceKey=(a==null?void 0:a.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bw(e),this._firestoreClient=void 0,await e}}}function Lk(i,e,t){t||(t=lh);const r=Eh(i,"firestore");if(r.isInitialized(t)){const a=r.getImmediate({identifier:t}),l=r.getOptions(t);if(Di(l,e))return a;throw new oe(W.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new oe(W.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Rx)throw new oe(W.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&wo(e.host)&&A_(e.host),r.initialize({options:e,instanceIdentifier:t})}function E1(i,e){const t=typeof i=="object"?i:hA(),r=typeof i=="string"?i:e||lh,a=Eh(t,"firestore").getImmediate({identifier:r});if(!a._initialized){const l=xD("firestore");l&&_1(a,...l)}return a}function At(i){if(i._terminated)throw new oe(W.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||T1(i),i._firestoreClient}function T1(i){var e,t,r;const a=i._freezeSettings(),l=(function(f,d,p,y){return new a4(f,d,p,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,g1(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,a);i._componentsProvider||!((t=a.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=a.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(i._componentsProvider={_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider}),i._firestoreClient=new bk(i._authCredentials,i._appCheckCredentials,i._queue,l,i._componentsProvider&&(function(f){const d=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(d),_online:d}})(i._componentsProvider))}function jk(i,e){wn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=i._freezeSettings();return b1(i,oa.provider,{build:r=>new Cv(r,t.cacheSizeBytes,e==null?void 0:e.forceOwnership)}),Promise.resolve()}async function Uk(i){wn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const e=i._freezeSettings();b1(i,oa.provider,{build:t=>new u1(t,e.cacheSizeBytes)})}function b1(i,e,t){if((i=Le(i,ft))._firestoreClient||i._terminated)throw new oe(W.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(i._componentsProvider||i._getSettings().localCache)throw new oe(W.FAILED_PRECONDITION,"SDK cache is already specified.");i._componentsProvider={_online:e,_offline:t},T1(i)}function zk(i){if(i._initialized&&!i._terminated)throw new oe(W.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new rn;return i._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await(async function(r){if(!er.C())return Promise.resolve();const a=r+Vx;await er.delete(a)})(uv(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function Bk(i){return(function(t){const r=new rn;return t.asyncQueue.enqueueAndForget((async()=>ak(await Nv(t),r))),r.promise})(At(i=Le(i,ft)))}function Fk(i){return Sk(At(i=Le(i,ft)))}function qk(i){return wk(At(i=Le(i,ft)))}function Hk(i){return BN(i.app,"firestore",i._databaseId.database),i._delete()}function m_(i,e){const t=At(i=Le(i,ft)),r=new v1;return Ck(t,i._databaseId,e,r),r}function S1(i,e){return Dk(At(i=Le(i,ft)),e).then((t=>t?new Qt(i,null,t.query):null))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class w1{constructor(e,t,r){this._userDataWriter=t,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new jn(xt.fromBase64String(e))}catch(t){throw new oe(W.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new jn(xt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Io(e,jn._jsonSchema))return jn.fromBase64String(e.bytes)}}jn._jsonSchemaVersion="firestore/bytes/1.0",jn._jsonSchema={type:Ht("string",jn._jsonSchemaVersion),bytes:Ht("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new oe(W.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function Gk(){return new ga(Hy)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new oe(W.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new oe(W.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Ci._jsonSchemaVersion}}static fromJSON(e){if(Io(e,Ci._jsonSchema))return new Ci(e.latitude,e.longitude)}}Ci._jsonSchemaVersion="firestore/geoPoint/1.0",Ci._jsonSchema={type:Ht("string",Ci._jsonSchemaVersion),latitude:Ht("number"),longitude:Ht("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,a){if(r.length!==a.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==a[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:yi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Io(e,yi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new yi(e.vectorValues);throw new oe(W.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}yi._jsonSchemaVersion="firestore/vectorValue/1.0",yi._jsonSchema={type:Ht("string",yi._jsonSchemaVersion),vectorValues:Ht("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=/^__.*__$/;class $k{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new $r(e,this.data,this.fieldMask,t,this.fieldTransforms):new mu(e,this.data,t,this.fieldTransforms)}}class A1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new $r(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function I1(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw _e(40011,{Ec:i})}}class qm{constructor(e,t,r,a,l,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=a,l===void 0&&this.Ac(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new qm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Rc({path:r,mc:!1});return a.fc(e),a}gc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),a=this.Rc({path:r,mc:!1});return a.Ac(),a}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return mm(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(e.length===0)throw this.wc("Document fields must not be empty");if(I1(this.Ec)&&Kk.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class Qk{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||xo(e)}Dc(e,t,r,a=!1){return new qm({Ec:e,methodName:t,bc:r,path:Et.emptyPath(),mc:!1,Sc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ro(i){const e=i._freezeSettings(),t=xo(i._databaseId);return new Qk(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Hm(i,e,t,r,a,l={}){const u=i.Dc(l.merge||l.mergeFields?2:0,e,t,a);Uv("Data must be an object, but it was:",u,r);const f=C1(r,u);let d,p;if(l.merge)d=new zn(u.fieldMask),p=u.fieldTransforms;else if(l.mergeFields){const y=[];for(const _ of l.mergeFields){const b=mh(e,_,t);if(!u.contains(b))throw new oe(W.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);N1(y,b)||y.push(b)}d=new zn(y),p=u.fieldTransforms.filter((_=>d.covers(_.field)))}else d=null,p=u.fieldTransforms;return new $k(new gn(f),d,p)}class Mh extends ya{_toFieldTransform(e){if(e.Ec!==2)throw e.Ec===1?e.wc(`${this._methodName}() can only appear at the top level of your update data`):e.wc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mh}}function x1(i,e,t){return new qm({Ec:3,bc:e.settings.bc,methodName:i._methodName,mc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Pv extends ya{_toFieldTransform(e){return new Dh(e.path,new Xl)}isEqual(e){return e instanceof Pv}}class Vv extends ya{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=x1(this,e,!0),r=this.vc.map((l=>Co(l,t))),a=new po(r);return new Dh(e.path,a)}isEqual(e){return e instanceof Vv&&Di(this.vc,e.vc)}}class Mv extends ya{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=x1(this,e,!0),r=this.vc.map((l=>Co(l,t))),a=new go(r);return new Dh(e.path,a)}isEqual(e){return e instanceof Mv&&Di(this.vc,e.vc)}}class kv extends ya{constructor(e,t){super(e),this.Cc=t}_toFieldTransform(e){const t=new Yl(e.serializer,WI(e.serializer,this.Cc));return new Dh(e.path,t)}isEqual(e){return e instanceof kv&&this.Cc===e.Cc}}function Lv(i,e,t,r){const a=i.Dc(1,e,t);Uv("Data must be an object, but it was:",a,r);const l=[],u=gn.empty();da(r,((d,p)=>{const y=Gm(e,d,t);p=ht(p);const _=a.gc(y);if(p instanceof Mh)l.push(y);else{const b=Co(p,_);b!=null&&(l.push(y),u.set(y,b))}}));const f=new zn(l);return new A1(u,f,a.fieldTransforms)}function jv(i,e,t,r,a,l){const u=i.Dc(1,e,t),f=[mh(e,r,t)],d=[a];if(l.length%2!=0)throw new oe(W.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<l.length;b+=2)f.push(mh(e,l[b])),d.push(l[b+1]);const p=[],y=gn.empty();for(let b=f.length-1;b>=0;--b)if(!N1(p,f[b])){const A=f[b];let N=d[b];N=ht(N);const M=u.gc(A);if(N instanceof Mh)p.push(A);else{const P=Co(N,M);P!=null&&(p.push(A),y.set(A,P))}}const _=new zn(p);return new A1(y,_,u.fieldTransforms)}function R1(i,e,t,r=!1){return Co(t,i.Dc(r?4:3,e))}function Co(i,e){if(D1(i=ht(i)))return Uv("Unsupported field value:",e,i),C1(i,e);if(i instanceof ya)return(function(r,a){if(!I1(a.Ec))throw a.wc(`${r._methodName}() can only be used with update() and set()`);if(!a.path)throw a.wc(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(a);l&&a.fieldTransforms.push(l)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.mc&&e.Ec!==4)throw e.wc("Nested arrays are not supported");return(function(r,a){const l=[];let u=0;for(const f of r){let d=Co(f,a.yc(u));d==null&&(d={nullValue:"NULL_VALUE"}),l.push(d),u++}return{arrayValue:{values:l}}})(i,e)}return(function(r,a){if((r=ht(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return WI(a.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=et.fromDate(r);return{timestampValue:Wl(a.serializer,l)}}if(r instanceof et){const l=new et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wl(a.serializer,l)}}if(r instanceof Ci)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof jn)return{bytesValue:ux(a.serializer,r._byteString)};if(r instanceof rt){const l=a.databaseId,u=r.firestore._databaseId;if(!u.isEqual(l))throw a.wc(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:iv(r.firestore._databaseId||a.databaseId,r._key.path)}}if(r instanceof yi)return(function(u,f){return{mapValue:{fields:{[K_]:{stringValue:$_},[Kl]:{arrayValue:{values:u.toArray().map((p=>{if(typeof p!="number")throw f.wc("VectorValues must only contain numeric values.");return W_(f.serializer,p)}))}}}}}})(r,a);throw a.wc(`Unsupported field value: ${Sm(r)}`)})(i,e)}function C1(i,e){const t={};return wI(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):da(i,((r,a)=>{const l=Co(a,e.Vc(r));l!=null&&(t[r]=l)})),{mapValue:{fields:t}}}function D1(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof et||i instanceof Ci||i instanceof jn||i instanceof rt||i instanceof ya||i instanceof yi)}function Uv(i,e,t){if(!D1(t)||!sI(t)){const r=Sm(t);throw r==="an object"?e.wc(i+" a custom object"):e.wc(i+" "+r)}}function mh(i,e,t){if((e=ht(e))instanceof ga)return e._internalPath;if(typeof e=="string")return Gm(i,e);throw mm("Field path arguments must be of type string or ",i,!1,void 0,t)}const Xk=new RegExp("[~\\*/\\[\\]]");function Gm(i,e,t){if(e.search(Xk)>=0)throw mm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new ga(...e.split("."))._internalPath}catch{throw mm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function mm(i,e,t,r,a){const l=r&&!r.isEmpty(),u=a!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let d="";return(l||u)&&(d+=" (found",l&&(d+=` in field ${r}`),u&&(d+=` in document ${a}`),d+=")"),new oe(W.INVALID_ARGUMENT,f+i+d)}function N1(i,e){return i.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph{constructor(e,t,r,a,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=a,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Yk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Km("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Yk extends ph{data(){return super.data()}}function Km(i,e){return typeof e=="string"?Gm(i,e):e instanceof ga?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new oe(W.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zv{}class Tu extends zv{}function P1(i,e,...t){let r=[];e instanceof zv&&r.push(e),r=r.concat(t),(function(l){const u=l.filter((d=>d instanceof Do)).length,f=l.filter((d=>d instanceof bu)).length;if(u>1||u>0&&f>0)throw new oe(W.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const a of r)i=a._apply(i);return i}class bu extends Tu{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new bu(e,t,r)}_apply(e){const t=this._parse(e);return k1(e._query,t),new Qt(e.firestore,e.converter,t_(e._query,t))}_parse(e){const t=Ro(e.firestore);return(function(l,u,f,d,p,y,_){let b;if(p.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new oe(W.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){Aw(_,y);const N=[];for(const M of _)N.push(ww(d,l,M));b={arrayValue:{values:N}}}else b=ww(d,l,_)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||Aw(_,y),b=R1(f,u,_,y==="in"||y==="not-in");return He.create(p,y,b)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function V1(i,e,t){const r=e,a=Km("where",i);return bu._create(a,r,t)}class Do extends zv{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Do(e,t)}_parse(e){const t=this._queryConstraints.map((r=>r._parse(e))).filter((r=>r.getFilters().length>0));return t.length===1?t[0]:it.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(a,l){let u=a;const f=l.getFlattenedFilters();for(const d of f)k1(u,d),u=t_(u,d)})(e._query,t),new Qt(e.firestore,e.converter,t_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Wk(...i){return i.forEach((e=>L1("or",e))),Do._create("or",i)}function Jk(...i){return i.forEach((e=>L1("and",e))),Do._create("and",i)}class $m extends Tu{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new $m(e,t)}_apply(e){const t=(function(a,l,u){if(a.startAt!==null)throw new oe(W.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new oe(W.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new hh(l,u)})(e._query,this._field,this._direction);return new Qt(e.firestore,e.converter,(function(a,l){const u=a.explicitOrderBy.concat([l]);return new Gr(a.path,a.collectionGroup,u,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,t))}}function Zk(i,e="asc"){const t=e,r=Km("orderBy",i);return $m._create(r,t)}class kh extends Tu{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new kh(e,t,r)}_apply(e){return new Qt(e.firestore,e.converter,rm(e._query,this._limit,this._limitType))}}function e3(i){return aI("limit",i),kh._create("limit",i,"F")}function t3(i){return aI("limitToLast",i),kh._create("limitToLast",i,"L")}class Lh extends Tu{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new Lh(e,t,r)}_apply(e){const t=M1(e,this.type,this._docOrFields,this._inclusive);return new Qt(e.firestore,e.converter,(function(a,l){return new Gr(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,l,a.endAt)})(e._query,t))}}function n3(...i){return Lh._create("startAt",i,!0)}function i3(...i){return Lh._create("startAfter",i,!1)}class jh extends Tu{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new jh(e,t,r)}_apply(e){const t=M1(e,this.type,this._docOrFields,this._inclusive);return new Qt(e.firestore,e.converter,(function(a,l){return new Gr(a.path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,l)})(e._query,t))}}function r3(...i){return jh._create("endBefore",i,!1)}function s3(...i){return jh._create("endAt",i,!0)}function M1(i,e,t,r){if(t[0]=ht(t[0]),t[0]instanceof ph)return(function(l,u,f,d,p){if(!d)throw new oe(W.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${f}().`);const y=[];for(const _ of Vl(l))if(_.field.isKeyField())y.push(fo(u,d.key));else{const b=d.data.field(_.field);if(Rm(b))throw new oe(W.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+_.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(b===null){const A=_.field.canonicalString();throw new oe(W.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${A}' (used as the orderBy) does not exist.`)}y.push(b)}return new sa(y,p)})(i._query,i.firestore._databaseId,e,t[0]._document,r);{const a=Ro(i.firestore);return(function(u,f,d,p,y,_){const b=u.explicitOrderBy;if(y.length>b.length)throw new oe(W.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const A=[];for(let N=0;N<y.length;N++){const M=y[N];if(b[N].field.isKeyField()){if(typeof M!="string")throw new oe(W.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof M}`);if(!X_(u)&&M.indexOf("/")!==-1)throw new oe(W.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${M}' contains a slash.`);const P=u.path.child(ke.fromString(M));if(!pe.isDocumentKey(P))throw new oe(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${P}' is not because it contains an odd number of segments.`);const q=new pe(P);A.push(fo(f,q))}else{const P=R1(d,p,M);A.push(P)}}return new sa(A,_)})(i._query,i.firestore._databaseId,a,e,t,r)}}function ww(i,e,t){if(typeof(t=ht(t))=="string"){if(t==="")throw new oe(W.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!X_(e)&&t.indexOf("/")!==-1)throw new oe(W.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ke.fromString(t));if(!pe.isDocumentKey(r))throw new oe(W.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return fo(i,new pe(r))}if(t instanceof rt)return fo(i,t._key);throw new oe(W.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Sm(t)}.`)}function Aw(i,e){if(!Array.isArray(i)||i.length===0)throw new oe(W.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function k1(i,e){const t=(function(a,l){for(const u of a)for(const f of u.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null})(i.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new oe(W.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(W.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function L1(i,e){if(!(e instanceof bu||e instanceof Do))throw new oe(W.INVALID_ARGUMENT,`Function ${i}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class Bv{convertValue(e,t="none"){switch(ia(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw _e(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return da(e,((a,l)=>{r[a]=this.convertValue(l,t)})),r}convertVectorValue(e){var t,r,a;const l=(a=(r=(t=e.fields)===null||t===void 0?void 0:t[Kl].arrayValue)===null||r===void 0?void 0:r.values)===null||a===void 0?void 0:a.map((u=>bt(u.doubleValue)));return new yi(l)}convertGeoPoint(e){return new Ci(bt(e.latitude),bt(e.longitude))}convertArray(e,t){return(e.values||[]).map((r=>this.convertValue(r,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Cm(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(oh(e));default:return null}}convertTimestamp(e){const t=Br(e);return new et(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ke.fromString(e);Te(vx(r),9688,{name:e});const a=new na(r.get(1),r.get(3)),l=new pe(r.popFirst(5));return a.isEqual(t)||kt(`Document ${l} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(i,e,t){let r;return r=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,r}class Fv extends Bv{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rt(this.firestore,null,t)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(i){return new su("sum",mh("sum",i))}function o3(i){return new su("avg",mh("average",i))}function j1(){return new su("count")}function l3(i,e){var t,r;return i instanceof su&&e instanceof su&&i.aggregateType===e.aggregateType&&((t=i._internalFieldPath)===null||t===void 0?void 0:t.canonicalString())===((r=e._internalFieldPath)===null||r===void 0?void 0:r.canonicalString())}function u3(i,e){return Ov(i.query,e.query)&&Di(i.data(),e.data())}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U1="NOT SUPPORTED";class Vr{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fn extends ph{constructor(e,t,r,a,l,u){super(e,t,r,a,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Jc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(Km("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(W.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Fn._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}function c3(i,e,t){if(Io(e,Fn._jsonSchema)){if(e.bundle===U1)throw new oe(W.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=xo(i._databaseId),a=p1(e.bundle,r),l=a.Ku(),u=new bv(a.getMetadata(),r);for(const y of l)u.Wa(y);const f=u.documents;if(f.length!==1)throw new oe(W.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${f.length} documents.`);const d=Pm(r,f[0].document),p=new pe(ke.fromString(e.bundleName));return new Fn(i,new Fv(i),p,d,new Vr(!1,!1),t||null)}}Fn._jsonSchemaVersion="firestore/documentSnapshot/1.0",Fn._jsonSchema={type:Ht("string",Fn._jsonSchemaVersion),bundleSource:Ht("string","DocumentSnapshot"),bundleName:Ht("string"),bundle:Ht("string")};class Jc extends Fn{data(e={}){return super.data(e)}}class qn{constructor(e,t,r,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new Vr(a.hasPendingWrites,a.fromCache),this.query=r}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((r=>{e.call(t,new Jc(this._firestore,this._userDataWriter,r.key,r,new Vr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new oe(W.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(a,l){if(a._snapshot.oldDocs.isEmpty()){let u=0;return a._snapshot.docChanges.map((f=>{const d=new Jc(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Vr(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);return f.doc,{type:"added",doc:d,oldIndex:-1,newIndex:u++}}))}{let u=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((f=>l||f.type!==3)).map((f=>{const d=new Jc(a._firestore,a._userDataWriter,f.doc.key,f.doc,new Vr(a._snapshot.mutatedKeys.has(f.doc.key),a._snapshot.fromCache),a.query.converter);let p=-1,y=-1;return f.type!==0&&(p=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),y=u.indexOf(f.doc.key)),{type:f3(f.type),doc:d,oldIndex:p,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(W.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=qn._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=bm.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],r=[],a=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),r.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),a.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function h3(i,e,t){if(Io(e,qn._jsonSchema)){if(e.bundle===U1)throw new oe(W.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=xo(i._databaseId),a=p1(e.bundle,r),l=a.Ku(),u=new bv(a.getMetadata(),r);for(const b of l)u.Wa(b);if(u.queries.length!==1)throw new oe(W.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${u.queries.length} queries.`);const f=Mm(u.queries[0].bundledQuery),d=u.documents;let p=new oo;d.map((b=>{const A=Pm(r,b.document);p=p.add(A)}));const y=To.fromInitialDocuments(f,p,Ne(),!1,!1),_=new Qt(i,t||null,f);return new qn(i,new Fv(i),_,y)}}function f3(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return _e(61501,{type:i})}}function d3(i,e){return i instanceof Fn&&e instanceof Fn?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(i._document===null?e._document===null:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof qn&&e instanceof qn&&i._firestore===e._firestore&&Ov(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p_(i){i=Le(i,rt);const e=Le(i.firestore,ft);return d1(At(e),i._key).then((t=>Gv(e,i,t)))}qn._jsonSchemaVersion="firestore/querySnapshot/1.0",qn._jsonSchema={type:Ht("string",qn._jsonSchemaVersion),bundleSource:Ht("string","QuerySnapshot"),bundleName:Ht("string"),bundle:Ht("string")};class _a extends Bv{constructor(e){super(),this.firestore=e}convertBytes(e){return new jn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new rt(this.firestore,null,t)}}function m3(i){i=Le(i,rt);const e=Le(i.firestore,ft),t=At(e),r=new _a(e);return Ak(t,i._key).then((a=>new Fn(e,r,i._key,a,new Vr(a!==null&&a.hasLocalMutations,!0),i.converter)))}function p3(i){i=Le(i,rt);const e=Le(i.firestore,ft);return d1(At(e),i._key,{source:"server"}).then((t=>Gv(e,i,t)))}function qv(i){i=Le(i,Qt);const e=Le(i.firestore,ft),t=At(e),r=new _a(e);return O1(i._query),m1(t,i._query).then((a=>new qn(e,r,i,a)))}function g3(i){i=Le(i,Qt);const e=Le(i.firestore,ft),t=At(e),r=new _a(e);return Ik(t,i._query).then((a=>new qn(e,r,i,a)))}function y3(i){i=Le(i,Qt);const e=Le(i.firestore,ft),t=At(e),r=new _a(e);return m1(t,i._query,{source:"server"}).then((a=>new qn(e,r,i,a)))}function z1(i,e,t){i=Le(i,rt);const r=Le(i.firestore,ft),a=Qm(i.converter,e,t);return Su(r,[Hm(Ro(r),"setDoc",i._key,a,i.converter!==null,t).toMutation(i._key,St.none())])}function ut(i,e,t,...r){i=Le(i,rt);const a=Le(i.firestore,ft),l=Ro(a);let u;return u=typeof(e=ht(e))=="string"||e instanceof ga?jv(l,"updateDoc",i._key,e,t,r):Lv(l,"updateDoc",i._key,e),Su(a,[u.toMutation(i._key,St.exists(!0))])}function B1(i){return Su(Le(i.firestore,ft),[new pu(i._key,St.none())])}function Hv(i,e){const t=Le(i.firestore,ft),r=ct(i),a=Qm(i.converter,e);return Su(t,[Hm(Ro(i.firestore),"addDoc",r._key,a,i.converter!==null,{}).toMutation(r._key,St.exists(!1))]).then((()=>r))}function au(i,...e){var t,r,a;i=ht(i);let l={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||Ml(e[u])||(l=e[u++]);const f={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(Ml(e[u])){const _=e[u];e[u]=(t=_.next)===null||t===void 0?void 0:t.bind(_),e[u+1]=(r=_.error)===null||r===void 0?void 0:r.bind(_),e[u+2]=(a=_.complete)===null||a===void 0?void 0:a.bind(_)}let d,p,y;if(i instanceof rt)p=Le(i.firestore,ft),y=du(i._key.path),d={next:_=>{e[u]&&e[u](Gv(p,i,_))},error:e[u+1],complete:e[u+2]};else{const _=Le(i,Qt);p=Le(_.firestore,ft),y=_._query;const b=new _a(p);d={next:A=>{e[u]&&e[u](new qn(p,b,_,A))},error:e[u+1],complete:e[u+2]},O1(i._query)}return(function(b,A,N,M){const P=new Bm(M),q=new Tv(A,P,N);return b.asyncQueue.enqueueAndForget((async()=>_v(await iu(b),q))),()=>{P.Ou(),b.asyncQueue.enqueueAndForget((async()=>vv(await iu(b),q)))}})(At(p),y,f,d)}function _3(i,e,...t){const r=ht(i),a=(function(d){const p={bundle:"",bundleName:"",bundleSource:""},y=["bundle","bundleName","bundleSource"];for(const _ of y){if(!(_ in d)){p.error=`snapshotJson missing required field: ${_}`;break}const b=d[_];if(typeof b!="string"){p.error=`snapshotJson field '${_}' must be a string.`;break}if(b.length===0){p.error=`snapshotJson field '${_}' cannot be an empty string.`;break}_==="bundle"?p.bundle=b:_==="bundleName"?p.bundleName=b:_==="bundleSource"&&(p.bundleSource=b)}return p})(e);if(a.error)throw new oe(W.INVALID_ARGUMENT,a.error);let l,u=0;if(typeof t[u]!="object"||Ml(t[u])||(l=t[u++]),a.bundleSource==="QuerySnapshot"){let f=null;if(typeof t[u]=="object"&&Ml(t[u])){const d=t[u++];f={next:d.next,error:d.error,complete:d.complete}}else f={next:t[u++],error:t[u++],complete:t[u++]};return(function(p,y,_,b,A){let N,M=!1;return m_(p,y.bundle).then((()=>S1(p,y.bundleName))).then((q=>{q&&!M&&(A&&q.withConverter(A),N=au(q,_||{},b))})).catch((q=>(b.error&&b.error(q),()=>{}))),()=>{M||(M=!0,N&&N())}})(r,a,l,f,t[u])}if(a.bundleSource==="DocumentSnapshot"){let f=null;if(typeof t[u]=="object"&&Ml(t[u])){const d=t[u++];f={next:d.next,error:d.error,complete:d.complete}}else f={next:t[u++],error:t[u++],complete:t[u++]};return(function(p,y,_,b,A){let N,M=!1;return m_(p,y.bundle).then((()=>{if(!M){const q=new rt(p,A||null,pe.fromPath(y.bundleName));N=au(q,_||{},b)}})).catch((q=>(b.error&&b.error(q),()=>{}))),()=>{M||(M=!0,N&&N())}})(r,a,l,f,t[u])}throw new oe(W.INVALID_ARGUMENT,`unsupported bundle source: ${a.bundleSource}`)}function v3(i,e){return Rk(At(i=Le(i,ft)),Ml(e)?e:{next:e})}function Su(i,e){return(function(r,a){const l=new rn;return r.asyncQueue.enqueueAndForget((async()=>nk(await Nv(r),a,l))),l.promise})(At(i),e)}function Gv(i,e,t){const r=t.docs.get(e._key),a=new _a(i);return new Fn(i,a,e._key,r,new Vr(t.hasPendingWrites,t.fromCache),e.converter)}function E3(i){return F1(i,{count:j1()})}function F1(i,e){const t=Le(i.firestore,ft),r=At(t),a=SI(e,((l,u)=>new rx(u,l.aggregateType,l._internalFieldPath)));return xk(r,i._query,a).then((l=>(function(f,d,p){const y=new _a(f);return new w1(d,y,p)})(t,i,l)))}class T3{constructor(e){this.kind="memory",this._onlineComponentProvider=oa.provider,e!=null&&e.garbageCollector?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider={build:()=>new Rv(void 0)}}toJSON(){return{kind:this.kind}}}class b3{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=q1(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class S3{constructor(){this.kind="memoryEager",this._offlineComponentProvider=nu.provider}toJSON(){return{kind:this.kind}}}class w3{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new Rv(e)}}toJSON(){return{kind:this.kind}}}function A3(){return new S3}function I3(i){return new w3(i==null?void 0:i.cacheSizeBytes)}function x3(i){return new T3(i)}function R3(i){return new b3(i)}class C3{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=oa.provider,this._offlineComponentProvider={build:t=>new Cv(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class D3{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=oa.provider,this._offlineComponentProvider={build:t=>new u1(t,e==null?void 0:e.cacheSizeBytes)}}}function q1(i){return new C3(i==null?void 0:i.forceOwnership)}function N3(){return new D3}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H1{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ro(e)}set(e,t,r){this._verifyNotCommitted();const a=Qs(e,this._firestore),l=Qm(a.converter,t,r),u=Hm(this._dataReader,"WriteBatch.set",a._key,l,a.converter!==null,r);return this._mutations.push(u.toMutation(a._key,St.none())),this}update(e,t,r,...a){this._verifyNotCommitted();const l=Qs(e,this._firestore);let u;return u=typeof(t=ht(t))=="string"||t instanceof ga?jv(this._dataReader,"WriteBatch.update",l._key,t,r,a):Lv(this._dataReader,"WriteBatch.update",l._key,t),this._mutations.push(u.toMutation(l._key,St.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Qs(e,this._firestore);return this._mutations=this._mutations.concat(new pu(t._key,St.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new oe(W.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Qs(i,e){if((i=ht(i)).firestore!==e)throw new oe(W.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Ro(e)}get(e){const t=Qs(e,this._firestore),r=new Fv(this._firestore);return this._transaction.lookup([t._key]).then((a=>{if(!a||a.length!==1)return _e(24041);const l=a[0];if(l.isFoundDocument())return new ph(this._firestore,r,l.key,l,t.converter);if(l.isNoDocument())return new ph(this._firestore,r,t._key,null,t.converter);throw _e(18433,{doc:l})}))}set(e,t,r){const a=Qs(e,this._firestore),l=Qm(a.converter,t,r),u=Hm(this._dataReader,"Transaction.set",a._key,l,a.converter!==null,r);return this._transaction.set(a._key,u),this}update(e,t,r,...a){const l=Qs(e,this._firestore);let u;return u=typeof(t=ht(t))=="string"||t instanceof ga?jv(this._dataReader,"Transaction.update",l._key,t,r,a):Lv(this._dataReader,"Transaction.update",l._key,t),this._transaction.update(l._key,u),this}delete(e){const t=Qs(e,this._firestore);return this._transaction.delete(t._key),this}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1 extends P3{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Qs(e,this._firestore),r=new _a(this._firestore);return super.get(e).then((a=>new Fn(this._firestore,r,t._key,a._document,new Vr(!1,!1),t.converter)))}}function K1(i,e,t){i=Le(i,ft);const r=Object.assign(Object.assign({},O3),t);return(function(l){if(l.maxAttempts<1)throw new oe(W.INVALID_ARGUMENT,"Max attempts must be at least 1")})(r),(function(l,u,f){const d=new rn;return l.asyncQueue.enqueueAndForget((async()=>{const p=await f1(l);new Tk(l.asyncQueue,p,f,u,d).zu()})),d.promise})(At(i),(a=>e(new G1(i,a))),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(){return new Mh("deleteField")}function V3(){return new Pv("serverTimestamp")}function Q1(...i){return new Vv("arrayUnion",i)}function X1(...i){return new Mv("arrayRemove",i)}function M3(i){return new kv("increment",i)}function k3(i){return new yi(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(i){return At(i=Le(i,ft)),new H1(i,(e=>Su(i,e)))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L3(i,e){const t=At(i=Le(i,ft));if(!t._uninitializedComponentsProvider||t._uninitializedComponentsProvider._offline.kind==="memory")return wn("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=(function(l){const u=typeof l=="string"?(function(p){try{return JSON.parse(p)}catch(y){throw new oe(W.INVALID_ARGUMENT,"Failed to parse JSON: "+(y==null?void 0:y.message))}})(l):l,f=[];if(Array.isArray(u.indexes))for(const d of u.indexes){const p=Iw(d,"collectionGroup"),y=[];if(Array.isArray(d.fields))for(const _ of d.fields){const b=Gm("setIndexConfiguration",Iw(_,"fieldPath"));_.arrayConfig==="CONTAINS"?y.push(new so(b,2)):_.order==="ASCENDING"?y.push(new so(b,0)):_.order==="DESCENDING"&&y.push(new so(b,1))}f.push(new zl(zl.UNKNOWN_ID,p,y,Bl.empty()))}return f})(e);return Nk(t,r)}function Iw(i,e){if(typeof i[e]!="string")throw new oe(W.INVALID_ARGUMENT,"Missing string value for: "+e);return i[e]}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function j3(i){var e;i=Le(i,ft);const t=xw.get(i);if(t)return t;if(((e=At(i)._uninitializedComponentsProvider)===null||e===void 0?void 0:e._offline.kind)!=="persistent")return null;const r=new W1(i);return xw.set(i,r),r}function U3(i){J1(i,!0)}function z3(i){J1(i,!1)}function B3(i){Pk(At(i._firestore)).then((e=>ce("deleting all persistent cache indexes succeeded"))).catch((e=>wn("deleting all persistent cache indexes failed",e)))}function J1(i,e){Ok(At(i._firestore),e).then((t=>ce(`setting persistent cache index auto creation isEnabled=${e} succeeded`))).catch((t=>wn(`setting persistent cache index auto creation isEnabled=${e} failed`,t)))}const xw=new WeakMap;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F3(i){var e;const t=(e=At(Le(i.firestore,ft))._onlineComponents)===null||e===void 0?void 0:e.datastore.serializer;return t===void 0?null:Vm(t,Sn(i._query)).Vt}function q3(i,e){var t;const r=SI(e,((l,u)=>new rx(u,l.aggregateType,l._internalFieldPath))),a=(t=At(Le(i.firestore,ft))._onlineComponents)===null||t===void 0?void 0:t.datastore.serializer;return a===void 0?null:px(a,FI(i._query),r,!0).request}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return Kv.instance.onExistenceFilterMismatch(e)}}class Kv{constructor(){this.Fc=new Map}static get instance(){return wd||(wd=new Kv,(function(t){if(sm)throw new Error("a TestingHooksSpi instance is already set");sm=t})(wd)),wd}ct(e){this.Fc.forEach((t=>t(e)))}onExistenceFilterMismatch(e){const t=Symbol(),r=this.Fc;return r.set(t,e),()=>r.delete(t)}}let wd=null;(function(e,t=!0){(function(a){fu=a})(cu),Ll(new uo("firestore",((r,{instanceIdentifier:a,options:l})=>{const u=r.getProvider("app").getImmediate(),f=new ft(new _V(r.getProvider("auth-internal")),new TV(u,r.getProvider("app-check-internal")),(function(p,y){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new oe(W.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new na(p.options.projectId,y)})(u,a),u);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f}),"PUBLIC").setMultipleInstances(!0)),Js(rS,sS,e),Js(rS,sS,"esm2017")})();const G3=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:Bv,AggregateField:su,AggregateQuerySnapshot:w1,Bytes:jn,CACHE_SIZE_UNLIMITED:kk,CollectionReference:Ri,DocumentReference:rt,DocumentSnapshot:Fn,FieldPath:ga,FieldValue:ya,Firestore:ft,FirestoreError:oe,GeoPoint:Ci,LoadBundleTask:v1,PersistentCacheIndexManager:W1,Query:Qt,QueryCompositeFilterConstraint:Do,QueryConstraint:Tu,QueryDocumentSnapshot:Jc,QueryEndAtConstraint:jh,QueryFieldFilterConstraint:bu,QueryLimitConstraint:kh,QueryOrderByConstraint:$m,QuerySnapshot:qn,QueryStartAtConstraint:Lh,SnapshotMetadata:Vr,Timestamp:et,Transaction:G1,VectorValue:yi,WriteBatch:H1,_AutoId:bm,_ByteString:xt,_DatabaseId:na,_DocumentKey:pe,_EmptyAppCheckTokenProvider:bV,_EmptyAuthCredentialsProvider:nI,_FieldPath:Et,_TestingHooks:H3,_cast:Le,_debugAssert:gV,_internalAggregationQueryToProtoRunAggregationQueryRequest:q3,_internalQueryToProtoQueryTarget:F3,_isBase64Available:r4,_logWarn:wn,_validateIsNotUsedTogether:rI,addDoc:Hv,aggregateFieldEqual:l3,aggregateQuerySnapshotEqual:u3,and:Jk,arrayRemove:X1,arrayUnion:Q1,average:o3,clearIndexedDbPersistence:zk,collection:ru,collectionGroup:Vk,connectFirestoreEmulator:_1,count:j1,deleteAllPersistentCacheIndexes:B3,deleteDoc:B1,deleteField:$1,disableNetwork:qk,disablePersistentCacheIndexAutoCreation:z3,doc:ct,documentId:Gk,documentSnapshotFromJSON:c3,enableIndexedDbPersistence:jk,enableMultiTabIndexedDbPersistence:Uk,enableNetwork:Fk,enablePersistentCacheIndexAutoCreation:U3,endAt:s3,endBefore:r3,ensureFirestoreConfigured:At,executeWrite:Su,getAggregateFromServer:F1,getCountFromServer:E3,getDoc:p_,getDocFromCache:m3,getDocFromServer:p3,getDocs:qv,getDocsFromCache:g3,getDocsFromServer:y3,getFirestore:E1,getPersistentCacheIndexManager:j3,increment:M3,initializeFirestore:Lk,limit:e3,limitToLast:t3,loadBundle:m_,memoryEagerGarbageCollector:A3,memoryLocalCache:x3,memoryLruGarbageCollector:I3,namedQuery:S1,onSnapshot:au,onSnapshotResume:_3,onSnapshotsInSync:v3,or:Wk,orderBy:Zk,persistentLocalCache:R3,persistentMultipleTabManager:N3,persistentSingleTabManager:q1,query:P1,queryEqual:Ov,querySnapshotFromJSON:h3,refEqual:Mk,runTransaction:K1,serverTimestamp:V3,setDoc:z1,setIndexConfiguration:L3,setLogLevel:pV,snapshotEqual:d3,startAfter:i3,startAt:n3,sum:a3,terminate:Hk,updateDoc:ut,vector:k3,waitForPendingWrites:Bk,where:V1,writeBatch:Y1},Symbol.toStringTag,{value:"Module"}));var K3="firebase",$3="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Js(K3,$3,"app");const Q3={apiKey:"AIzaSyBzcgOL0zca1DdWy8FvO8oteY3Y4Q3JpjM",authDomain:"habbi0.firebaseapp.com",projectId:"habbi0",storageBucket:"habbi0.firebasestorage.app",messagingSenderId:"1004937043158",appId:"1:1004937043158:web:32fc24b06b58927052bd77"},Z1=cA(Q3),Xm=dV(Z1),Qe=E1(Z1),eR=z.createContext(null);function X3({children:i}){const[e,t]=z.useState(null),[r,a]=z.useState(null),[l,u]=z.useState(!0);return z.useEffect(()=>tP(Xm,d=>{t(d),d||(a(null),u(!1))}),[]),z.useEffect(()=>e?au(ct(Qe,"users",e.uid),d=>{a(d.exists()?{id:d.id,...d.data()}:null),u(!1)}):void 0,[e]),S.jsx(eR.Provider,{value:{user:e,profile:r,loading:l},children:i})}const Hn=()=>z.useContext(eR),mn=[];for(let i=0;i<256;++i)mn.push((i+256).toString(16).slice(1));function Y3(i,e=0){return(mn[i[e+0]]+mn[i[e+1]]+mn[i[e+2]]+mn[i[e+3]]+"-"+mn[i[e+4]]+mn[i[e+5]]+"-"+mn[i[e+6]]+mn[i[e+7]]+"-"+mn[i[e+8]]+mn[i[e+9]]+"-"+mn[i[e+10]]+mn[i[e+11]]+mn[i[e+12]]+mn[i[e+13]]+mn[i[e+14]]+mn[i[e+15]]).toLowerCase()}let wy;const W3=new Uint8Array(16);function J3(){if(!wy){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");wy=crypto.getRandomValues.bind(crypto)}return wy(W3)}const Z3=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Rw={randomUUID:Z3};function e6(i,e,t){var a;if(Rw.randomUUID&&!i)return Rw.randomUUID();i=i||{};const r=i.random??((a=i.rng)==null?void 0:a.call(i))??J3();if(r.length<16)throw new Error("Random bytes length must be >= 16");return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Y3(r)}const t6=[[3,0,"#39ff14"],[4,0,"#39ff14"],[2,1,"#39ff14"],[3,1,"#2bcc0e"],[4,1,"#2bcc0e"],[5,1,"#39ff14"],[1,2,"#39ff14"],[2,2,"#2bcc0e"],[3,2,"#006600"],[4,2,"#006600"],[5,2,"#2bcc0e"],[6,2,"#39ff14"],[1,3,"#39ff14"],[2,3,"#2bcc0e"],[3,3,"#ffffff"],[4,3,"#2bcc0e"],[5,3,"#ffffff"],[6,3,"#39ff14"],[1,4,"#39ff14"],[2,4,"#2bcc0e"],[3,4,"#2bcc0e"],[4,4,"#2bcc0e"],[5,4,"#2bcc0e"],[6,4,"#39ff14"],[1,5,"#2bcc0e"],[2,5,"#006600"],[3,5,"#2bcc0e"],[4,5,"#2bcc0e"],[5,5,"#006600"],[6,5,"#2bcc0e"],[0,6,"#39ff14"],[1,6,"#2bcc0e"],[2,6,"#2bcc0e"],[3,6,"#2bcc0e"],[4,6,"#2bcc0e"],[5,6,"#2bcc0e"],[6,6,"#2bcc0e"],[7,6,"#39ff14"],[0,7,"#006600"],[1,7,"#006600"],[2,7,"#006600"],[3,7,"#006600"],[4,7,"#006600"],[5,7,"#006600"],[6,7,"#006600"],[7,7,"#006600"]],n6=[[3,0,"#f5f5dc"],[4,0,"#f5f5dc"],[2,1,"#f5f5dc"],[3,1,"#d4a574"],[4,1,"#d4a574"],[5,1,"#f5f5dc"],[2,2,"#8b0000"],[3,2,"#ffffff"],[4,2,"#ffffff"],[5,2,"#8b0000"],[3,3,"#d4a574"],[4,3,"#d4a574"],[2,4,"#f5f5dc"],[3,4,"#f5f5dc"],[4,4,"#f5f5dc"],[5,4,"#f5f5dc"],[1,5,"#d4a574"],[2,5,"#f5f5dc"],[3,5,"#8b0000"],[4,5,"#8b0000"],[5,5,"#f5f5dc"],[6,5,"#d4a574"],[2,6,"#f5f5dc"],[3,6,"#f5f5dc"],[4,6,"#f5f5dc"],[5,6,"#f5f5dc"],[2,7,"#d4a574"],[3,7,"#d4a574"],[4,7,"#d4a574"],[5,7,"#d4a574"],[1,8,"#f5f5dc"],[2,8,"#f5f5dc"],[5,8,"#f5f5dc"],[6,8,"#f5f5dc"]],i6=[[3,0,"#4a4a8a"],[4,0,"#4a4a8a"],[2,1,"#2d1b69"],[3,1,"#333366"],[4,1,"#333366"],[5,1,"#2d1b69"],[2,2,"#ff4444"],[3,2,"#2d1b69"],[4,2,"#2d1b69"],[5,2,"#ff4444"],[2,3,"#2d1b69"],[3,3,"#1a0a3e"],[4,3,"#1a0a3e"],[5,3,"#2d1b69"],[1,4,"#4a4a8a"],[2,4,"#2d1b69"],[3,4,"#2d1b69"],[4,4,"#2d1b69"],[5,4,"#2d1b69"],[6,4,"#4a4a8a"],[0,5,"#888888"],[1,5,"#2d1b69"],[2,5,"#333366"],[3,5,"#ff4444"],[4,5,"#ff4444"],[5,5,"#333366"],[6,5,"#2d1b69"],[7,5,"#888888"],[2,6,"#1a0a3e"],[3,6,"#2d1b69"],[4,6,"#2d1b69"],[5,6,"#1a0a3e"],[2,7,"#2d1b69"],[3,7,"#2d1b69"],[4,7,"#2d1b69"],[5,7,"#2d1b69"],[1,8,"#1a0a3e"],[2,8,"#1a0a3e"],[5,8,"#1a0a3e"],[6,8,"#1a0a3e"]],r6=[[1,0,"#ff6600"],[6,0,"#ff6600"],[1,1,"#cc3300"],[2,1,"#ff6600"],[5,1,"#ff6600"],[6,1,"#cc3300"],[2,2,"#ff6600"],[3,2,"#ffcc00"],[4,2,"#ffcc00"],[5,2,"#ff6600"],[1,3,"#cc3300"],[2,3,"#ffcc00"],[3,3,"#ffffff"],[4,3,"#ffffff"],[5,3,"#ffcc00"],[6,3,"#cc3300"],[2,4,"#ff6600"],[3,4,"#cc3300"],[4,4,"#cc3300"],[5,4,"#ff6600"],[0,5,"#cc3300"],[1,5,"#ff6600"],[2,5,"#ff6600"],[3,5,"#ffcc00"],[4,5,"#ffcc00"],[5,5,"#ff6600"],[6,5,"#ff6600"],[7,5,"#cc3300"],[1,6,"#cc3300"],[2,6,"#ff6600"],[3,6,"#ff6600"],[4,6,"#ff6600"],[5,6,"#ff6600"],[6,6,"#cc3300"],[2,7,"#cc3300"],[3,7,"#ff6600"],[4,7,"#ff6600"],[5,7,"#cc3300"],[1,8,"#cc3300"],[2,8,"#993300"],[5,8,"#993300"],[6,8,"#cc3300"]],s6=[[3,0,"#9900ff"],[4,0,"#9900ff"],[2,1,"#4a0080"],[3,1,"#9900ff"],[4,1,"#9900ff"],[5,1,"#4a0080"],[2,2,"#00ffcc"],[3,2,"#4a0080"],[4,2,"#4a0080"],[5,2,"#00ffcc"],[2,3,"#4a0080"],[3,3,"#9900ff"],[4,3,"#9900ff"],[5,3,"#4a0080"],[1,4,"#9900ff"],[2,4,"#4a0080"],[3,4,"#00ffcc"],[4,4,"#00ffcc"],[5,4,"#4a0080"],[6,4,"#9900ff"],[0,5,"#4a0080"],[1,5,"#9900ff"],[2,5,"#9900ff"],[3,5,"#4a0080"],[4,5,"#4a0080"],[5,5,"#9900ff"],[6,5,"#9900ff"],[7,5,"#4a0080"],[1,6,"#4a0080"],[2,6,"#9900ff"],[3,6,"#9900ff"],[4,6,"#9900ff"],[5,6,"#9900ff"],[6,6,"#4a0080"],[2,7,"#4a0080"],[3,7,"#4a0080"],[4,7,"#4a0080"],[5,7,"#4a0080"],[1,8,"#9900ff"],[2,8,"#4a0080"],[5,8,"#4a0080"],[6,8,"#9900ff"]],a6=[[2,0,"#0a0a2e"],[3,0,"#ff00ff"],[4,0,"#ff00ff"],[5,0,"#0a0a2e"],[1,1,"#0a0a2e"],[2,1,"#000033"],[3,1,"#0a0a2e"],[4,1,"#0a0a2e"],[5,1,"#000033"],[6,1,"#0a0a2e"],[1,2,"#ff00ff"],[2,2,"#ffffff"],[3,2,"#000033"],[4,2,"#000033"],[5,2,"#ffffff"],[6,2,"#ff00ff"],[1,3,"#0a0a2e"],[2,3,"#000033"],[3,3,"#0a0a2e"],[4,3,"#0a0a2e"],[5,3,"#000033"],[6,3,"#0a0a2e"],[0,4,"#000033"],[1,4,"#0a0a2e"],[2,4,"#0a0a2e"],[3,4,"#ff00ff"],[4,4,"#ff00ff"],[5,4,"#0a0a2e"],[6,4,"#0a0a2e"],[7,4,"#000033"],[0,5,"#0a0a2e"],[1,5,"#000033"],[2,5,"#0a0a2e"],[3,5,"#000033"],[4,5,"#000033"],[5,5,"#0a0a2e"],[6,5,"#000033"],[7,5,"#0a0a2e"],[1,6,"#0a0a2e"],[2,6,"#000033"],[3,6,"#0a0a2e"],[4,6,"#0a0a2e"],[5,6,"#000033"],[6,6,"#0a0a2e"],[1,7,"#000033"],[2,7,"#0a0a2e"],[5,7,"#0a0a2e"],[6,7,"#000033"],[0,8,"#ff00ff"],[1,8,"#0a0a2e"],[6,8,"#0a0a2e"],[7,8,"#ff00ff"]],o6=[[1,0,"#ffff00"],[3,0,"#ff0000"],[4,0,"#ff0000"],[6,0,"#ffff00"],[0,1,"#ff0000"],[1,1,"#ffff00"],[2,1,"#ff0000"],[3,1,"#000000"],[4,1,"#000000"],[5,1,"#ff0000"],[6,1,"#ffff00"],[7,1,"#ff0000"],[1,2,"#ff0000"],[2,2,"#ffffff"],[3,2,"#ff0000"],[4,2,"#ff0000"],[5,2,"#ffffff"],[6,2,"#ff0000"],[1,3,"#000000"],[2,3,"#ff0000"],[3,3,"#ffff00"],[4,3,"#ffff00"],[5,3,"#ff0000"],[6,3,"#000000"],[0,4,"#ff0000"],[1,4,"#ff0000"],[2,4,"#000000"],[3,4,"#ff0000"],[4,4,"#ff0000"],[5,4,"#000000"],[6,4,"#ff0000"],[7,4,"#ff0000"],[0,5,"#ffff00"],[1,5,"#000000"],[2,5,"#ff0000"],[3,5,"#000000"],[4,5,"#000000"],[5,5,"#ff0000"],[6,5,"#000000"],[7,5,"#ffff00"],[1,6,"#ff0000"],[2,6,"#ff0000"],[3,6,"#ff0000"],[4,6,"#ff0000"],[5,6,"#ff0000"],[6,6,"#ff0000"],[1,7,"#000000"],[2,7,"#ff0000"],[3,7,"#000000"],[4,7,"#000000"],[5,7,"#ff0000"],[6,7,"#000000"],[0,8,"#ffff00"],[1,8,"#ff0000"],[2,8,"#000000"],[5,8,"#000000"],[6,8,"#ff0000"],[7,8,"#ffff00"]],bo={slime_king:{key:"slime_king",name:"Slime King",level:1,maxHp:100,attackPower:5,rewards:{xp:30,gold:15},emoji:"",description:"A wobbling mass of green ooze.",pixels:t6,glowColor:"#39ff14"},skeleton_lord:{key:"skeleton_lord",name:"Skeleton Lord",level:2,maxHp:200,attackPower:8,rewards:{xp:60,gold:30},emoji:"",description:"Bones rattle with each step.",pixels:n6,glowColor:"#f5f5dc"},shadow_knight:{key:"shadow_knight",name:"Shadow Knight",level:3,maxHp:350,attackPower:12,rewards:{xp:100,gold:50},emoji:"",description:"Dark armor gleams with malice.",pixels:i6,glowColor:"#ff4444"},fire_wyrm:{key:"fire_wyrm",name:"Fire Wyrm",level:4,maxHp:500,attackPower:16,rewards:{xp:150,gold:75},emoji:"",description:"Scales burn with eternal flame.",pixels:r6,glowColor:"#ff6600"},lich_emperor:{key:"lich_emperor",name:"Lich Emperor",level:5,maxHp:750,attackPower:20,rewards:{xp:200,gold:100},emoji:"",description:"Undead sorcerer of immense power.",pixels:s6,glowColor:"#9900ff"},void_titan:{key:"void_titan",name:"Void Titan",level:6,maxHp:1e3,attackPower:25,rewards:{xp:300,gold:150},emoji:"",description:"Reality warps around its form.",pixels:a6,glowColor:"#ff00ff"},chaos_god:{key:"chaos_god",name:"Chaos God",level:7,maxHp:1500,attackPower:30,rewards:{xp:500,gold:250},emoji:"",description:"The final challenge. All creation trembles.",pixels:o6,glowColor:"#ffff00"}},Xs=["slime_king","skeleton_lord","shadow_knight","fire_wyrm","lich_emperor","void_titan","chaos_god"];function l6(){return e6().replace(/-/g,"").substring(0,8).toUpperCase()}function u6(i){const[e,t]=z.useState(null),[r,a]=z.useState(!0);return z.useEffect(()=>{if(!i){t(null),a(!1);return}return au(ct(Qe,"parties",i),y=>{t(y.exists()?{id:y.id,...y.data()}:null),a(!1)})},[i]),{party:e,loading:r,createParty:async(p,y,_,b,A,N)=>{const M=l6(),P=await Hv(ru(Qe,"parties"),{name:_,inviteCode:M,leaderId:p,memberIds:[p],members:{[p]:{displayName:y,level:b,hp:A,maxHp:N}},activeBoss:null,bossLevel:0,damageFeed:[],createdAt:new Date().toISOString()});return await ut(ct(Qe,"users",p),{partyId:P.id}),P.id},joinParty:async(p,y,_,b,A,N)=>{const M=P1(ru(Qe,"parties"),V1("inviteCode","==",N.toUpperCase())),P=await qv(M);if(P.empty)throw new Error("Invalid invite code");const q=P.docs[0];if(q.data().memberIds.includes(p))throw new Error("Already in this party");return await ut(q.ref,{memberIds:Q1(p),[`members.${p}`]:{displayName:y,level:_,hp:b,maxHp:A}}),await ut(ct(Qe,"users",p),{partyId:q.id}),q.id},leaveParty:async p=>{if(!e)return;const y=ct(Qe,"parties",e.id);await ut(y,{memberIds:X1(p),[`members.${p}`]:$1()}),await ut(ct(Qe,"users",p),{partyId:null})},startBoss:async()=>{if(!e)return;const p=Math.min(e.bossLevel,Xs.length-1),y=Xs[p],_=bo[y],b=ct(Qe,"parties",e.id);await ut(b,{activeBoss:{bossKey:_.key,name:_.name,currentHp:_.maxHp,maxHp:_.maxHp,attackPower:_.attackPower,level:_.level,rewards:_.rewards},damageFeed:[]})}}}const tR=z.createContext(null);function c6({children:i}){const{profile:e}=Hn(),t=u6(e==null?void 0:e.partyId);return S.jsx(tR.Provider,{value:t,children:i})}const Uh=()=>z.useContext(tR),x={bgDarkest:"#0a0a1a",bgDark:"#1a1a2e",bgMedium:"#16213e",bgLight:"#0f3460",neonGreen:"#39ff14",neonCyan:"#00ffcc",neonBlue:"#00bfff",fireOrange:"#ff6600",fireRed:"#ff4444",gold:"#ffd700",textPrimary:"#e0e0e0",textSecondary:"#888888",textMuted:"#555555",border:"#333366",borderLight:"#4a4a8a",barEmpty:"#222222",barBorder:"#111111"},ee={pixel:'"Press Start 2P", cursive'},D={fontXs:8,fontSm:10,fontMd:12,fontLg:16,fontXl:20,fontTitle:24,spacing:8,borderWidth:3},va={border:`${D.borderWidth}px solid ${x.border}`,boxShadow:`inset -${D.borderWidth}px -${D.borderWidth}px 0 0 ${x.bgDarkest}, inset ${D.borderWidth}px ${D.borderWidth}px 0 0 ${x.borderLight}`},h6={backgroundColor:x.bgDark,padding:D.spacing*2,...va},f6={fontFamily:ee.pixel,fontSize:D.fontSm,padding:`${D.spacing}px ${D.spacing*2}px`,backgroundColor:x.bgMedium,color:x.neonGreen,cursor:"pointer",border:`${D.borderWidth}px solid ${x.border}`,boxShadow:`inset -${D.borderWidth}px -${D.borderWidth}px 0 0 ${x.bgDarkest}, inset ${D.borderWidth}px ${D.borderWidth}px 0 0 ${x.borderLight}`,transition:"background-color 0.1s"},d6={fontFamily:ee.pixel,fontSize:D.fontSm,padding:`${D.spacing}px ${D.spacing*1.5}px`,backgroundColor:x.bgDarkest,color:x.textPrimary,border:`${D.borderWidth}px solid ${x.border}`,boxShadow:`inset ${D.borderWidth}px ${D.borderWidth}px 0 0 ${x.bgDarkest}`,outline:"none",width:"100%"},m6=[{path:"/dashboard",label:"QUESTS",icon:""},{path:"/boss",label:"BOSS",icon:""},{path:"/shop",label:"SHOP",icon:""},{path:"/skills",label:"SKILLS",icon:""},{path:"/party",label:"PARTY",icon:""}];function p6(){const i=qr(),e=uu();return S.jsx("nav",{style:{position:"fixed",bottom:0,left:0,right:0,backgroundColor:x.bgDark,display:"flex",zIndex:50,...va,borderLeft:"none",borderRight:"none",borderBottom:"none"},children:m6.map(t=>{const r=i.pathname===t.path;return S.jsxs("button",{onClick:()=>e(t.path),style:{flex:1,padding:`${D.spacing}px 0`,background:r?x.bgMedium:"transparent",border:"none",cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[S.jsx("span",{style:{fontSize:18},children:t.icon}),S.jsx("span",{style:{fontFamily:ee.pixel,fontSize:6,color:r?x.neonGreen:x.textMuted,letterSpacing:1},children:t.label})]},t.path)})})}function g6(){return S.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:9999,background:`repeating-linear-gradient(
        0deg,
        rgba(0, 0, 0, 0.12) 0px,
        rgba(0, 0, 0, 0.12) 1px,
        transparent 1px,
        transparent 3px
      )`,boxShadow:"inset 0 0 120px rgba(0,0,0,0.4)"}})}const $i={warrior:{key:"warrior",name:"Warrior",emoji:"",description:"Brute force specialist. Excels at raw damage from Dailies.",color:"#ff4444",baseStats:{hp:60,maxHp:60,attack:2},skills:[{id:"warrior_power_strike",name:"Power Strike",emoji:"",description:"+10% damage per level from Dailies",maxLevel:5,cost:[1,2,3,4,5],effect:{type:"daily_damage_percent",value:10}},{id:"warrior_iron_will",name:"Iron Will",emoji:"",description:"+5 max HP per level",maxLevel:5,cost:[1,1,2,2,3],effect:{type:"max_hp",value:5}},{id:"warrior_battle_cry",name:"Battle Cry",emoji:"",description:"+5% party damage per level",maxLevel:3,cost:[2,3,5],effect:{type:"party_damage_percent",value:5}},{id:"warrior_berserker",name:"Berserker",emoji:"",description:"+15% damage when HP below 50%",maxLevel:3,cost:[2,4,6],effect:{type:"low_hp_damage_percent",value:15}},{id:"warrior_shield_wall",name:"Shield Wall",emoji:"",description:"Reduce boss damage taken by 8% per level",maxLevel:3,cost:[3,4,5],effect:{type:"damage_reduction_percent",value:8}},{id:"warrior_warlord",name:"Warlord",emoji:"",description:"ULTIMATE: +3 flat damage to all attacks",maxLevel:1,cost:[10],effect:{type:"flat_damage",value:3},requires:"warrior_berserker",requiresLevel:2}]},mage:{key:"mage",name:"Mage",emoji:"",description:"XP specialist. Levels faster and excels with Habits.",color:"#9900ff",baseStats:{hp:45,maxHp:45,attack:1},skills:[{id:"mage_arcane_power",name:"Arcane Power",emoji:"",description:"+10% XP gained per level",maxLevel:5,cost:[1,2,3,4,5],effect:{type:"xp_percent",value:10}},{id:"mage_mana_shield",name:"Mana Shield",emoji:"",description:"+5 max HP per level",maxLevel:3,cost:[1,2,3],effect:{type:"max_hp",value:5}},{id:"mage_elemental",name:"Elemental Mastery",emoji:"",description:"+8% damage per level from Habits",maxLevel:5,cost:[1,2,3,4,5],effect:{type:"habit_damage_percent",value:8}},{id:"mage_time_warp",name:"Time Warp",emoji:"",description:"Streak bonus grows 50% faster per level",maxLevel:3,cost:[2,4,6],effect:{type:"streak_bonus_multiplier",value:50}},{id:"mage_wisdom",name:"Wisdom",emoji:"",description:"+12% gold per level",maxLevel:3,cost:[2,3,5],effect:{type:"gold_percent",value:12}},{id:"mage_archmage",name:"Archmage",emoji:"",description:"ULTIMATE: +2 base damage to all task types",maxLevel:1,cost:[10],effect:{type:"flat_damage",value:2},requires:"mage_elemental",requiresLevel:3}]},healer:{key:"healer",name:"Healer",emoji:"",description:"Support specialist. Keeps the party alive.",color:"#39ff14",baseStats:{hp:55,maxHp:55,attack:1},skills:[{id:"healer_restoration",name:"Restoration",emoji:"",description:"Heal 2 HP per level when completing a Daily",maxLevel:5,cost:[1,2,3,4,5],effect:{type:"heal_on_daily",value:2}},{id:"healer_holy_shield",name:"Holy Shield",emoji:"",description:"Party takes 5% less boss damage per level",maxLevel:5,cost:[1,2,3,4,5],effect:{type:"party_damage_reduction",value:5}},{id:"healer_blessed_streak",name:"Blessed Streak",emoji:"",description:"+1 streak protection per level (missed dailies forgiven)",maxLevel:3,cost:[3,5,8],effect:{type:"streak_protection",value:1}},{id:"healer_divine_light",name:"Divine Light",emoji:"",description:"+10% XP per level",maxLevel:3,cost:[2,3,5],effect:{type:"xp_percent",value:10}},{id:"healer_sanctuary",name:"Sanctuary",emoji:"",description:"+8 max HP per level",maxLevel:3,cost:[2,3,4],effect:{type:"max_hp",value:8}},{id:"healer_miracle",name:"Miracle",emoji:"",description:"ULTIMATE: Completing all dailies heals party for 10 HP",maxLevel:1,cost:[10],effect:{type:"party_heal_on_perfect_day",value:10},requires:"healer_restoration",requiresLevel:3}]},rogue:{key:"rogue",name:"Rogue",emoji:"",description:"Gold hunter. Excels at To-Dos and finding treasure.",color:"#ffd700",baseStats:{hp:50,maxHp:50,attack:2},skills:[{id:"rogue_backstab",name:"Backstab",emoji:"",description:"+12% damage per level from To-Dos",maxLevel:5,cost:[1,2,3,4,5],effect:{type:"todo_damage_percent",value:12}},{id:"rogue_treasure_hunter",name:"Treasure Hunter",emoji:"",description:"+15% gold per level",maxLevel:5,cost:[1,2,3,4,5],effect:{type:"gold_percent",value:15}},{id:"rogue_evasion",name:"Evasion",emoji:"",description:"10% chance per level to dodge boss damage",maxLevel:3,cost:[2,4,6],effect:{type:"dodge_percent",value:10}},{id:"rogue_poison",name:"Poison Blade",emoji:"",description:"Minions take 1 extra damage per level each day",maxLevel:3,cost:[2,3,5],effect:{type:"minion_dot",value:1}},{id:"rogue_shadow_step",name:"Shadow Step",emoji:"",description:"+10% damage per level to minions",maxLevel:3,cost:[2,3,4],effect:{type:"minion_damage_percent",value:10}},{id:"rogue_assassinate",name:"Assassinate",emoji:"",description:"ULTIMATE: Minions below 20% HP are instantly killed",maxLevel:1,cost:[10],effect:{type:"execute_threshold",value:20},requires:"rogue_backstab",requiresLevel:3}]}},y6=["warrior","mage","healer","rogue"];function Qi(i,e){let t=0;for(const r of Object.values($i))for(const a of r.skills)if(a.effect.type===e){const l=(i==null?void 0:i[a.id])||0;t+=a.effect.value*l}return t}function nR({current:i,max:e,height:t=16,showLabel:r=!0,label:a="HP"}){const u=Math.max(0,i/e),f=Math.ceil(u*20),d=u>.5?x.neonGreen:u>.25?x.gold:x.fireRed;return S.jsxs("div",{children:[r&&S.jsxs("div",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textSecondary,marginBottom:2,display:"flex",justifyContent:"space-between"},children:[S.jsx("span",{children:a}),S.jsxs("span",{style:{color:d},children:[i,"/",e]})]}),S.jsx("div",{style:{display:"flex",gap:1},children:Array.from({length:20}).map((p,y)=>S.jsx("div",{style:{flex:1,height:t,backgroundColor:y<f?d:x.barEmpty,border:`1px solid ${x.barBorder}`,transition:"background-color 0.3s"}},y))})]})}function _6({label:i,value:e,max:t,icon:r,color:a=x.neonCyan}){const l=t?Math.min(100,e/t*100):0;return S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:D.spacing},children:[r&&S.jsx("span",{style:{fontSize:D.fontLg},children:r}),S.jsxs("div",{style:{flex:1},children:[S.jsxs("div",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textSecondary,marginBottom:2,display:"flex",justifyContent:"space-between"},children:[S.jsx("span",{children:i}),S.jsxs("span",{style:{color:a},children:[e,t?`/${t}`:""]})]}),t&&S.jsx("div",{style:{height:8,backgroundColor:x.barEmpty,border:`1px solid ${x.barBorder}`},children:S.jsx("div",{style:{height:"100%",width:`${l}%`,backgroundColor:a,transition:"width 0.3s"}})})]})]})}function Pc({children:i}){const{profile:e}=Hn(),t=e!=null&&e.class?$i[e.class]:null;return S.jsxs("div",{style:{minHeight:"100vh",backgroundColor:x.bgDarkest,paddingBottom:70},children:[S.jsx(g6,{}),e&&S.jsxs("div",{style:{backgroundColor:x.bgDark,padding:`${D.spacing}px ${D.spacing*2}px`,borderBottom:`${D.borderWidth}px solid ${x.border}`,display:"flex",alignItems:"center",gap:D.spacing*2},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:D.spacing},children:[S.jsx("div",{style:{width:36,height:36,backgroundColor:x.bgMedium,border:`2px solid ${(t==null?void 0:t.color)||x.neonGreen}`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:18},children:(t==null?void 0:t.emoji)||""}),S.jsxs("div",{children:[S.jsxs("div",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.neonGreen},children:["LV.",e.level]}),S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontSm,color:x.textPrimary},children:e.displayName})]})]}),S.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",gap:4},children:[S.jsx(nR,{current:e.hp,max:e.maxHp,height:10,showLabel:!1}),S.jsx(_6,{label:"",value:e.xp,max:100*e.level,color:x.gold})]}),S.jsxs("div",{style:{fontFamily:ee.pixel,fontSize:D.fontSm,color:x.gold,display:"flex",alignItems:"center",gap:4},children:[S.jsx("span",{children:""}),e.gold]})]}),i,S.jsx(p6,{})]})}function sn({children:i,onClick:e,variant:t="default",disabled:r,style:a}){const[l,u]=z.useState(!1),f={default:{color:x.neonGreen,bg:x.bgMedium,hoverBg:x.bgLight},danger:{color:x.fireRed,bg:x.bgMedium,hoverBg:"#3d1111"},gold:{color:x.bgDarkest,bg:x.gold,hoverBg:"#ffed4a"},ghost:{color:x.textSecondary,bg:"transparent",hoverBg:x.bgDark}},d=f[t]||f.default;return S.jsx("button",{onClick:e,disabled:r,onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),style:{...f6,color:d.color,backgroundColor:l&&!r?d.hoverBg:d.bg,opacity:r?.4:1,cursor:r?"not-allowed":"pointer",...a},children:i})}function Lr({value:i,onChange:e,placeholder:t,type:r="text",style:a}){const[l,u]=z.useState(!1);return S.jsx("input",{type:r,value:i,onChange:e,placeholder:t,onFocus:()=>u(!0),onBlur:()=>u(!1),style:{...d6,borderColor:l?x.neonGreen:x.border,...a}})}function ni({children:i,style:e}){return S.jsx("div",{style:{...h6,...e},children:i})}function v6(){const[i,e]=z.useState(""),[t,r]=z.useState(""),[a,l]=z.useState(""),[u,f]=z.useState(!1),d=uu(),p=async y=>{y.preventDefault(),l(""),f(!0);try{await JO(Xm,i,t),d("/dashboard")}catch(_){l(_.code==="auth/invalid-credential"?"Wrong email or password":"Login failed. Try again.")}f(!1)};return S.jsxs("div",{style:{minHeight:"100vh",backgroundColor:x.bgDarkest,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:D.spacing*2},children:[S.jsx("div",{style:{fontSize:48,marginBottom:D.spacing*2},children:""}),S.jsx("h1",{style:{fontFamily:ee.pixel,fontSize:D.fontXl,color:x.gold,marginBottom:D.spacing,textAlign:"center"},children:"QUEST HABITS"}),S.jsx("p",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textMuted,marginBottom:D.spacing*4,letterSpacing:2},children:"SLAY YOUR HABITS"}),S.jsxs(ni,{style:{maxWidth:380,width:"100%"},children:[S.jsxs("form",{onSubmit:p,style:{display:"flex",flexDirection:"column",gap:D.spacing*2},children:[S.jsxs("div",{children:[S.jsx("label",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textSecondary,display:"block",marginBottom:4},children:"EMAIL"}),S.jsx(Lr,{type:"email",value:i,onChange:y=>e(y.target.value),placeholder:"hero@quest.com"})]}),S.jsxs("div",{children:[S.jsx("label",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textSecondary,display:"block",marginBottom:4},children:"PASSWORD"}),S.jsx(Lr,{type:"password",value:t,onChange:y=>r(y.target.value),placeholder:"********"})]}),a&&S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.fireRed,textAlign:"center"},children:a}),S.jsx(sn,{variant:"gold",disabled:u,style:{width:"100%",padding:`${D.spacing*1.5}px 0`},children:u?"ENTERING...":"ENTER DUNGEON"})]}),S.jsxs("div",{style:{marginTop:D.spacing*2,textAlign:"center",fontFamily:ee.pixel,fontSize:D.fontXs},children:[S.jsx("span",{style:{color:x.textMuted},children:"New hero? "}),S.jsx(ym,{to:"/register",style:{color:x.neonCyan,textDecoration:"none"},children:"CREATE CHARACTER"})]})]})]})}function E6(){const[i,e]=z.useState(""),[t,r]=z.useState(""),[a,l]=z.useState(""),[u,f]=z.useState(""),[d,p]=z.useState(!1),y=uu(),_=async b=>{if(b.preventDefault(),f(""),i.trim().length<2){f("Name must be 2+ characters");return}if(a.length<6){f("Password must be 6+ characters");return}p(!0);try{const A=await WO(Xm,t,a);await z1(ct(Qe,"users",A.user.uid),{displayName:i.trim(),email:t,hp:50,maxHp:50,xp:0,level:1,gold:0,partyId:null,lastCron:new Date().toISOString(),createdAt:new Date().toISOString()}),y("/dashboard")}catch(A){A.code==="auth/email-already-in-use"?f("Email already in use"):A.code==="auth/weak-password"?f("Password too weak"):f("Registration failed")}p(!1)};return S.jsxs("div",{style:{minHeight:"100vh",backgroundColor:x.bgDarkest,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:D.spacing*2},children:[S.jsx("div",{style:{fontSize:48,marginBottom:D.spacing*2},children:""}),S.jsx("h1",{style:{fontFamily:ee.pixel,fontSize:D.fontLg,color:x.gold,marginBottom:D.spacing,textAlign:"center"},children:"CREATE CHARACTER"}),S.jsx("p",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textMuted,marginBottom:D.spacing*4,letterSpacing:2},children:"BEGIN YOUR QUEST"}),S.jsxs(ni,{style:{maxWidth:380,width:"100%"},children:[S.jsxs("form",{onSubmit:_,style:{display:"flex",flexDirection:"column",gap:D.spacing*2},children:[S.jsxs("div",{children:[S.jsx("label",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textSecondary,display:"block",marginBottom:4},children:"HERO NAME"}),S.jsx(Lr,{value:i,onChange:b=>e(b.target.value),placeholder:"DragonSlayer"})]}),S.jsxs("div",{children:[S.jsx("label",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textSecondary,display:"block",marginBottom:4},children:"EMAIL"}),S.jsx(Lr,{type:"email",value:t,onChange:b=>r(b.target.value),placeholder:"hero@quest.com"})]}),S.jsxs("div",{children:[S.jsx("label",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textSecondary,display:"block",marginBottom:4},children:"PASSWORD"}),S.jsx(Lr,{type:"password",value:a,onChange:b=>l(b.target.value),placeholder:"6+ characters"})]}),u&&S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.fireRed,textAlign:"center"},children:u}),S.jsx(sn,{variant:"gold",disabled:d,style:{width:"100%",padding:`${D.spacing*1.5}px 0`},children:d?"FORGING...":"FORGE CHARACTER"})]}),S.jsxs("div",{style:{marginTop:D.spacing*2,textAlign:"center",fontFamily:ee.pixel,fontSize:D.fontXs},children:[S.jsx("span",{style:{color:x.textMuted},children:"Veteran? "}),S.jsx(ym,{to:"/login",style:{color:x.neonCyan,textDecoration:"none"},children:"LOG IN"})]})]})]})}function T6(){const{user:i}=Hn(),[e,t]=z.useState(null),[r,a]=z.useState(!1),l=async()=>{if(!e||!i)return;a(!0);const u=$i[e];await ut(ct(Qe,"users",i.uid),{class:e,hp:u.baseStats.hp,maxHp:u.baseStats.maxHp,skills:{},skillPoints:1,equipment:{weapon:null,armor:null,accessory:null}}),a(!1)};return S.jsxs("div",{style:{minHeight:"100vh",backgroundColor:x.bgDarkest,padding:D.spacing*2,display:"flex",flexDirection:"column",alignItems:"center"},children:[S.jsx("div",{style:{fontSize:48,marginTop:D.spacing*4},children:""}),S.jsx("h1",{style:{fontFamily:ee.pixel,fontSize:D.fontLg,color:x.gold,marginBottom:4,textAlign:"center"},children:"CHOOSE YOUR CLASS"}),S.jsx("p",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textMuted,marginBottom:D.spacing*3,textAlign:"center"},children:"This defines your skills and playstyle"}),S.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:D.spacing,maxWidth:500,width:"100%",marginBottom:D.spacing*3},children:y6.map(u=>{const f=$i[u],d=e===u;return S.jsxs("div",{onClick:()=>t(u),style:{...va,backgroundColor:d?`${f.color}15`:x.bgDark,borderColor:d?f.color:x.border,padding:D.spacing*2,cursor:"pointer",textAlign:"center",transition:"border-color 0.15s"},children:[S.jsx("div",{style:{fontSize:36,marginBottom:D.spacing},children:f.emoji}),S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontMd,color:d?f.color:x.textPrimary,marginBottom:4},children:f.name}),S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:7,color:x.textMuted,lineHeight:1.6,marginBottom:D.spacing},children:f.description}),S.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:D.spacing*2},children:[S.jsx("div",{children:S.jsxs("div",{style:{fontFamily:ee.pixel,fontSize:7,color:x.fireRed},children:[" ",f.baseStats.hp]})}),S.jsx("div",{children:S.jsxs("div",{style:{fontFamily:ee.pixel,fontSize:7,color:x.neonGreen},children:[" ",f.baseStats.attack]})})]})]},u)})}),e&&S.jsxs(ni,{style:{maxWidth:500,width:"100%",marginBottom:D.spacing*2},children:[S.jsxs("div",{style:{fontFamily:ee.pixel,fontSize:D.fontSm,color:$i[e].color,marginBottom:D.spacing,textAlign:"center"},children:[$i[e].emoji," ",$i[e].name.toUpperCase()," SKILLS"]}),S.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4},children:$i[e].skills.map(u=>S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:D.spacing,padding:4,backgroundColor:x.bgDarkest,border:`1px solid ${x.border}`},children:[S.jsx("span",{style:{fontSize:16,width:24,textAlign:"center"},children:u.emoji}),S.jsxs("div",{style:{flex:1},children:[S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:7,color:x.textPrimary},children:u.name}),S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:7,color:x.textMuted},children:u.description})]})]},u.id))})]}),S.jsx(sn,{variant:"gold",disabled:!e||r,onClick:l,style:{maxWidth:500,width:"100%",padding:`${D.spacing*2}px 0`,fontSize:D.fontMd},children:r?"FORGING...":e?`BECOME ${$i[e].name.toUpperCase()}`:"SELECT A CLASS"})]})}const iR={trivial:.5,easy:1,medium:1.5,hard:2},kl={trivial:"#94a3b8",easy:"#39ff14",medium:"#ffd700",hard:"#ff4444"},b6={habit:2,daily:3,todo:4},S6=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],lo={wooden_sword:{id:"wooden_sword",name:"Wooden Sword",emoji:"",slot:"weapon",tier:1,cost:20,stats:{attack:1},description:"A simple wooden training sword."},iron_sword:{id:"iron_sword",name:"Iron Sword",emoji:"",slot:"weapon",tier:2,cost:75,stats:{attack:3},description:"Sturdy iron blade, battle-tested."},fire_blade:{id:"fire_blade",name:"Fire Blade",emoji:"",slot:"weapon",tier:3,cost:200,stats:{attack:5,minionDamage:2},description:"Burns with an eternal flame."},void_slayer:{id:"void_slayer",name:"Void Slayer",emoji:"",slot:"weapon",tier:4,cost:500,stats:{attack:8},description:"Forged in the abyss. Cuts through reality."},leather_vest:{id:"leather_vest",name:"Leather Vest",emoji:"",slot:"armor",tier:1,cost:15,stats:{maxHp:5},description:"Basic leather protection."},chain_mail:{id:"chain_mail",name:"Chain Mail",emoji:"",slot:"armor",tier:2,cost:60,stats:{maxHp:12},description:"Interlocking iron rings."},plate_armor:{id:"plate_armor",name:"Plate Armor",emoji:"",slot:"armor",tier:3,cost:180,stats:{maxHp:22,damageReduction:5},description:"Heavy plates of forged steel."},adamantine_armor:{id:"adamantine_armor",name:"Adamantine Armor",emoji:"",slot:"armor",tier:4,cost:450,stats:{maxHp:35,damageReduction:10},description:"Unbreakable. Legends are made of this."},lucky_charm:{id:"lucky_charm",name:"Lucky Charm",emoji:"",slot:"accessory",tier:1,cost:25,stats:{goldBonus:15},description:"Find 15% more gold."},xp_amulet:{id:"xp_amulet",name:"XP Amulet",emoji:"",slot:"accessory",tier:2,cost:80,stats:{xpBonus:20},description:"Gain 20% more experience."},ring_of_power:{id:"ring_of_power",name:"Ring of Power",emoji:"",slot:"accessory",tier:3,cost:250,stats:{attack:3,maxHp:10},description:"One ring to rule your habits."},crown_of_wisdom:{id:"crown_of_wisdom",name:"Crown of Wisdom",emoji:"",slot:"accessory",tier:4,cost:600,stats:{xpBonus:30,goldBonus:25,attack:2},description:"Ultimate reward for the dedicated."}},w6={weapon:Object.values(lo).filter(i=>i.slot==="weapon"),armor:Object.values(lo).filter(i=>i.slot==="armor"),accessory:Object.values(lo).filter(i=>i.slot==="accessory")};function Ym(i){const e={attack:0,maxHp:0,goldBonus:0,xpBonus:0,damageReduction:0,minionDamage:0};for(const t of["weapon","armor","accessory"]){const r=i==null?void 0:i[t];if(r&&lo[r]){const a=lo[r].stats;for(const[l,u]of Object.entries(a))e[l]=(e[l]||0)+u}}return e}function Ay(i,e,t="boss"){const r=b6[i.type]||2,a=iR[i.difficulty]||1,l=e.skills||{},u=e.equipment||{};let f=1;if(i.type==="daily"&&i.streak){const P=1+Qi(l,"streak_bonus_multiplier")/100;f=Math.min(1+i.streak*.05*P,2.5)}const d=1+e.level*.02,p=Ym(u),y=p.attack||0,_=Qi(l,"flat_damage");let b=0;i.type==="daily"&&(b+=Qi(l,"daily_damage_percent")),i.type==="habit"&&(b+=Qi(l,"habit_damage_percent")),i.type==="todo"&&(b+=Qi(l,"todo_damage_percent"));let A=0;t==="minion"&&(A+=Qi(l,"minion_damage_percent"),A+=p.minionDamage||0);let N=0;e.hp&&e.maxHp&&e.hp<e.maxHp*.5&&(N=Qi(l,"low_hp_damage_percent"));let M=(r+y+_)*a*f*d;return M*=1+(b+A+N)/100,Math.round(M*10)/10}function A6(i,e,t){const r={},a={},l=i*e*.5,u=Qi(r,"damage_reduction_percent"),d=Ym(a).damageReduction||0,p=Math.min(u+d,75),y=l*(1-p/100);return Math.round(y*10)/10}function Iy(i,e){const t=(e==null?void 0:e.level)||1,r=(e==null?void 0:e.skills)||{},a=(e==null?void 0:e.equipment)||{},l=iR[i.difficulty]||1;let u=Math.round(5*l*(1+t*.01)),f=Math.round(2*l);const d=Qi(r,"xp_percent"),p=Ym(a),y=p.xpBonus||0;u=Math.round(u*(1+(d+y)/100));const _=Qi(r,"gold_percent"),b=p.goldBonus||0;return f=Math.round(f*(1+(_+b)/100)),{xp:u,gold:f}}function xy(i,e){const t=100*e;return i>=t?{levelsGained:1,remainingXp:i-t,newMaxHp:50+e*5}:null}function I6(){const{user:i,profile:e}=Hn(),[t,r]=z.useState({habits:[],dailies:[],todos:[]}),[a,l]=z.useState(!0);z.useEffect(()=>{if(!i)return;const A=ru(Qe,"users",i.uid,"tasks");return au(A,M=>{const P=[],q=[],$=[];M.forEach(B=>{const J={id:B.id,...B.data()};J.type==="habit"?P.push(J):J.type==="daily"?q.push(J):J.type==="todo"&&$.push(J)}),r({habits:P,dailies:q,todos:$}),l(!1)})},[i]);const u=async A=>{if(!i)return;const N=ru(Qe,"users",i.uid,"tasks");await Hv(N,{...A,createdAt:new Date().toISOString()})},f=async(A,N)=>{if(!i)return;const M=ct(Qe,"users",i.uid,"tasks",A);await ut(M,N)},d=async A=>{if(!i)return;const N=ct(Qe,"users",i.uid,"tasks",A);await B1(N)},p=async(A,N,M)=>{const P=ct(Qe,"users",i.uid);M?await ut(P,{xp:M.remainingXp,gold:e.gold+N,level:e.level+1,maxHp:e.maxHp+5,hp:e.maxHp+5,skillPoints:(e.skillPoints||0)+1}):await ut(P,{xp:e.xp+A,gold:e.gold+N})};return{tasks:t,loading:a,addTask:u,updateTask:f,deleteTask:d,scoreHabit:async(A,N,M)=>{if(!i||!e)return null;const P={};if(N==="up"?P.counterUp=(A.counterUp||0)+1:P.counterDown=(A.counterDown||0)+1,await f(A.id,P),N==="up"){const q=Ay(A,e,M||"boss"),{xp:$,gold:B}=Iy(A,e),J=e.xp+$,fe=xy(J,e.level);return await p($,B,fe),{damage:q,xp:$,gold:B,levelUp:!!fe}}return null},completeDaily:async(A,N)=>{if(!i||!e||A.completed)return null;const M=(A.streak||0)+1;await f(A.id,{completed:!0,streak:M});const P=Ay({...A,streak:M},e,N||"boss"),{xp:q,gold:$}=Iy(A,e),B=e.xp+q,J=xy(B,e.level);return await p(q,$,J),{damage:P,xp:q,gold:$,levelUp:!!J}},completeTodo:async(A,N)=>{if(!i||!e||A.completed)return null;await f(A.id,{completed:!0});const M=Ay(A,e,N||"boss"),{xp:P,gold:q}=Iy(A,e),$=e.xp+P,B=xy($,e.level);return await p(P,q,B),{damage:M,xp:P,gold:q,levelUp:!!B}}}}const Cw=[[2,0,"#39ff14"],[3,0,"#39ff14"],[1,1,"#2bcc0e"],[2,1,"#006600"],[3,1,"#006600"],[4,1,"#2bcc0e"],[1,2,"#39ff14"],[2,2,"#2bcc0e"],[3,2,"#2bcc0e"],[4,2,"#39ff14"],[0,3,"#2bcc0e"],[1,3,"#2bcc0e"],[2,3,"#2bcc0e"],[3,3,"#2bcc0e"],[4,3,"#2bcc0e"],[5,3,"#2bcc0e"],[0,4,"#006600"],[1,4,"#006600"],[2,4,"#006600"],[3,4,"#006600"],[4,4,"#006600"],[5,4,"#006600"]],Ry=[[2,0,"#f5f5dc"],[3,0,"#f5f5dc"],[1,1,"#8b0000"],[2,1,"#d4a574"],[3,1,"#d4a574"],[4,1,"#8b0000"],[2,2,"#f5f5dc"],[3,2,"#f5f5dc"],[1,3,"#d4a574"],[2,3,"#f5f5dc"],[3,3,"#f5f5dc"],[4,3,"#d4a574"],[2,4,"#f5f5dc"],[3,4,"#f5f5dc"],[1,5,"#d4a574"],[4,5,"#d4a574"]],Cy=[[2,0,"#2d1b69"],[3,0,"#2d1b69"],[1,1,"#1a0a3e"],[2,1,"#ff4444"],[3,1,"#ff4444"],[4,1,"#1a0a3e"],[1,2,"#2d1b69"],[2,2,"#1a0a3e"],[3,2,"#1a0a3e"],[4,2,"#2d1b69"],[0,3,"#888888"],[1,3,"#2d1b69"],[2,3,"#2d1b69"],[3,3,"#2d1b69"],[4,3,"#2d1b69"],[5,3,"#888888"],[1,4,"#1a0a3e"],[2,4,"#2d1b69"],[3,4,"#2d1b69"],[4,4,"#1a0a3e"],[1,5,"#1a0a3e"],[4,5,"#1a0a3e"]],Ad=[[1,0,"#ffcc00"],[4,0,"#ffcc00"],[1,1,"#ff6600"],[2,1,"#cc3300"],[3,1,"#cc3300"],[4,1,"#ff6600"],[1,2,"#cc3300"],[2,2,"#ffffff"],[3,2,"#ffffff"],[4,2,"#cc3300"],[0,3,"#ff6600"],[1,3,"#cc3300"],[2,3,"#cc3300"],[3,3,"#cc3300"],[4,3,"#cc3300"],[5,3,"#ff6600"],[1,4,"#993300"],[2,4,"#cc3300"],[3,4,"#cc3300"],[4,4,"#993300"],[1,5,"#993300"],[4,5,"#993300"]],Id=[[2,0,"#4a0080"],[3,0,"#4a0080"],[1,1,"#00ffcc"],[2,1,"#4a0080"],[3,1,"#4a0080"],[4,1,"#00ffcc"],[2,2,"#9900ff"],[3,2,"#9900ff"],[1,3,"#4a0080"],[2,3,"#9900ff"],[3,3,"#9900ff"],[4,3,"#4a0080"],[2,4,"#4a0080"],[3,4,"#4a0080"],[1,5,"#9900ff"],[4,5,"#9900ff"]],Vc=[[2,0,"#ff00ff"],[3,0,"#ff00ff"],[1,1,"#0a0a2e"],[2,1,"#ffffff"],[3,1,"#ffffff"],[4,1,"#0a0a2e"],[1,2,"#000033"],[2,2,"#0a0a2e"],[3,2,"#0a0a2e"],[4,2,"#000033"],[0,3,"#ff00ff"],[1,3,"#0a0a2e"],[2,3,"#000033"],[3,3,"#000033"],[4,3,"#0a0a2e"],[5,3,"#ff00ff"],[1,4,"#0a0a2e"],[2,4,"#000033"],[3,4,"#000033"],[4,4,"#0a0a2e"],[1,5,"#ff00ff"],[4,5,"#ff00ff"]],Mc=[[1,0,"#ffff00"],[4,0,"#ffff00"],[1,1,"#ff0000"],[2,1,"#ffffff"],[3,1,"#ffffff"],[4,1,"#ff0000"],[0,2,"#ff0000"],[1,2,"#000000"],[2,2,"#ff0000"],[3,2,"#ff0000"],[4,2,"#000000"],[5,2,"#ff0000"],[1,3,"#ff0000"],[2,3,"#ffff00"],[3,3,"#ffff00"],[4,3,"#ff0000"],[1,4,"#000000"],[2,4,"#ff0000"],[3,4,"#ff0000"],[4,4,"#000000"],[0,5,"#ffff00"],[5,5,"#ffff00"]],g_={slime_king:[{key:"slime_blob",name:"Slime Blob",maxHp:20,xp:8,gold:5,emoji:"",glowColor:"#39ff14",pixels:Cw},{key:"slime_glob",name:"Slime Glob",maxHp:25,xp:10,gold:6,emoji:"",glowColor:"#39ff14",pixels:Cw}],skeleton_lord:[{key:"skeleton_grunt",name:"Skeleton Grunt",maxHp:25,xp:10,gold:7,emoji:"",glowColor:"#f5f5dc",pixels:Ry},{key:"skeleton_archer",name:"Skeleton Archer",maxHp:30,xp:12,gold:8,emoji:"",glowColor:"#f5f5dc",pixels:Ry},{key:"skeleton_mage",name:"Skeleton Mage",maxHp:35,xp:15,gold:10,emoji:"",glowColor:"#d4a574",pixels:Ry}],shadow_knight:[{key:"shadow_squire",name:"Shadow Squire",maxHp:35,xp:15,gold:10,emoji:"",glowColor:"#2d1b69",pixels:Cy},{key:"shadow_assassin",name:"Shadow Assassin",maxHp:40,xp:18,gold:12,emoji:"",glowColor:"#ff4444",pixels:Cy},{key:"dark_hound",name:"Dark Hound",maxHp:45,xp:20,gold:14,emoji:"",glowColor:"#1a0a3e",pixels:Cy}],fire_wyrm:[{key:"fire_imp",name:"Fire Imp",maxHp:40,xp:18,gold:12,emoji:"",glowColor:"#ff6600",pixels:Ad},{key:"lava_hound",name:"Lava Hound",maxHp:50,xp:22,gold:15,emoji:"",glowColor:"#cc3300",pixels:Ad},{key:"flame_dancer",name:"Flame Dancer",maxHp:55,xp:25,gold:18,emoji:"",glowColor:"#ffcc00",pixels:Ad},{key:"ash_golem",name:"Ash Golem",maxHp:60,xp:28,gold:20,emoji:"",glowColor:"#993300",pixels:Ad}],lich_emperor:[{key:"zombie",name:"Zombie",maxHp:50,xp:22,gold:15,emoji:"",glowColor:"#4a0080",pixels:Id},{key:"wraith",name:"Wraith",maxHp:60,xp:28,gold:18,emoji:"",glowColor:"#9900ff",pixels:Id},{key:"death_knight",name:"Death Knight",maxHp:70,xp:32,gold:22,emoji:"",glowColor:"#00ffcc",pixels:Id},{key:"bone_dragon",name:"Bone Dragon",maxHp:80,xp:38,gold:28,emoji:"",glowColor:"#f5f5dc",pixels:Id}],void_titan:[{key:"void_spawn",name:"Void Spawn",maxHp:60,xp:28,gold:20,emoji:"",glowColor:"#ff00ff",pixels:Vc},{key:"reality_shard",name:"Reality Shard",maxHp:70,xp:32,gold:24,emoji:"",glowColor:"#00bfff",pixels:Vc},{key:"phase_walker",name:"Phase Walker",maxHp:80,xp:38,gold:28,emoji:"",glowColor:"#9900ff",pixels:Vc},{key:"null_beast",name:"Null Beast",maxHp:90,xp:42,gold:32,emoji:"",glowColor:"#000033",pixels:Vc},{key:"entropy_wisp",name:"Entropy Wisp",maxHp:100,xp:48,gold:38,emoji:"",glowColor:"#ff00ff",pixels:Vc}],chaos_god:[{key:"chaos_imp",name:"Chaos Imp",maxHp:80,xp:38,gold:28,emoji:"",glowColor:"#ff0000",pixels:Mc},{key:"chaos_knight",name:"Chaos Knight",maxHp:90,xp:42,gold:32,emoji:"",glowColor:"#ffff00",pixels:Mc},{key:"chaos_hydra",name:"Chaos Hydra",maxHp:100,xp:48,gold:38,emoji:"",glowColor:"#ff0000",pixels:Mc},{key:"doom_herald",name:"Doom Herald",maxHp:110,xp:55,gold:45,emoji:"",glowColor:"#000000",pixels:Mc},{key:"chaos_avatar",name:"Chaos Avatar",maxHp:120,xp:60,gold:50,emoji:"",glowColor:"#ffff00",pixels:Mc}]};function rR(i){const e=async()=>{if(!(i!=null&&i.id))return{success:!1,error:"No party ID found"};const p=Math.min(i.bossLevel||0,Xs.length-1),y=Xs[p],_=bo[y];if(!_)return{success:!1,error:`Boss "${y}" not found (index ${p})`};const A=(g_[y]||[]).map((M,P)=>({key:M.key,name:M.name,maxHp:M.maxHp,currentHp:M.maxHp,xp:M.xp,gold:M.gold,emoji:M.emoji,glowColor:M.glowColor||null,defeated:!1,index:P})),N=ct(Qe,"parties",i.id);try{return await ut(N,{encounter:{phase:A.length>0?"minions":"boss",currentMinionIndex:0,bossKey:y,minions:A,boss:{bossKey:_.key,name:_.name,currentHp:_.maxHp,maxHp:_.maxHp,attackPower:_.attackPower,level:_.level,rewards:_.rewards}},activeBoss:{bossKey:_.key,name:_.name,currentHp:_.maxHp,maxHp:_.maxHp,attackPower:_.attackPower,level:_.level,rewards:_.rewards},damageFeed:[]}),{success:!0}}catch(M){return console.error("startEncounter failed:",M),{success:!1,error:M.message||"Firestore write failed"}}},t=async(p,y,_,b)=>{if(!(i!=null&&i.encounter))return 0;const A=ct(Qe,"parties",i.id),N=i.encounter,M={userId:_,displayName:b,damage:p,taskTitle:y.title,timestamp:new Date().toISOString(),type:"dealt"},P=[...i.damageFeed||[],M].slice(-20);try{if(N.phase==="minions"){const q=N.currentMinionIndex,$=[...N.minions],B={...$[q]};if(B.currentHp=Math.max(0,B.currentHp-p),M.targetName=B.name,B.currentHp<=0){B.defeated=!0,B.currentHp=0,$[q]=B;const J=ct(Qe,"users",_),fe=await p_(J);if(fe.exists()){const R=fe.data(),C=R.xp+B.xp,V=R.gold+B.gold,j=100*R.level;C>=j?await ut(J,{xp:C-j,gold:V,level:R.level+1,maxHp:R.maxHp+5,hp:R.maxHp+5,skillPoints:(R.skillPoints||0)+1}):await ut(J,{xp:C,gold:V})}const de=$.findIndex((R,C)=>C>q&&!R.defeated);de===-1?await ut(A,{encounter:{...N,minions:$,phase:"boss",currentMinionIndex:q},damageFeed:P}):await ut(A,{encounter:{...N,minions:$,currentMinionIndex:de},damageFeed:P})}else $[q]=B,await ut(A,{encounter:{...N,minions:$},damageFeed:P});return p}if(N.phase==="boss"){const q={...N.boss};return q.currentHp=Math.max(0,q.currentHp-p),M.targetName=q.name,await ut(A,{encounter:{...N,boss:q},"activeBoss.currentHp":q.currentHp,damageFeed:P}),q.currentHp<=0&&await r(i.id),p}}catch(q){console.error("dealDamageToEncounter failed:",q)}return 0},r=async p=>{const y=ct(Qe,"parties",p);try{await K1(Qe,async _=>{var N;const A=(await _.get(y)).data();!((N=A.encounter)!=null&&N.boss)||A.encounter.boss.currentHp>0||A.encounter.phase!=="victory"&&_.update(y,{encounter:{...A.encounter,phase:"victory",rewardsClaimedBy:[]},activeBoss:null,bossLevel:(A.bossLevel||0)+1})})}catch(_){console.error("defeatBoss failed:",_)}},a=async p=>{var A,N,M;if(!((N=(A=i==null?void 0:i.encounter)==null?void 0:A.boss)!=null&&N.rewards)||i.encounter.phase!=="victory"||(M=i.encounter.rewardsClaimedBy)!=null&&M.includes(p))return;const y=i.encounter.boss.rewards,_=ct(Qe,"parties",i.id),b=ct(Qe,"users",p);try{const P=await p_(b);if(!P.exists())return;const q=P.data(),$=q.xp+y.xp,B=100*q.level;$>=B?await ut(b,{xp:$-B,gold:q.gold+y.gold,level:q.level+1,maxHp:q.maxHp+5,hp:q.maxHp+5,skillPoints:(q.skillPoints||0)+1}):await ut(b,{xp:$,gold:q.gold+y.gold});const J=[...i.encounter.rewardsClaimedBy||[],p];await ut(_,{"encounter.rewardsClaimedBy":J})}catch(P){console.error("claimBossRewards failed:",P)}},l=p=>{var b;if(!((b=i==null?void 0:i.encounter)!=null&&b.bossKey))return null;const _=(g_[i.encounter.bossKey]||[]).find(A=>A.key===p.key);return(_==null?void 0:_.pixels)||null};return{startEncounter:e,dealDamageToEncounter:t,getCurrentTarget:()=>{if(!(i!=null&&i.encounter))return null;const p=i.encounter;if(p.phase==="minions"){const y=p.minions[p.currentMinionIndex],_=l(y);return{type:"minion",data:{...y,pixels:_},remaining:p.minions.filter(b=>!b.defeated).length,total:p.minions.length}}return p.phase==="boss"?{type:"boss",data:p.boss}:null},defeatBoss:r,forceResetBoss:async()=>{if(!(i!=null&&i.id))return{success:!1,error:"No party ID"};const p=ct(Qe,"parties",i.id);try{return await ut(p,{activeBoss:null,encounter:null,bossLevel:(i.bossLevel||0)+1}),{success:!0}}catch(y){return console.error("forceResetBoss failed:",y),{success:!1,error:y.message}}},claimBossRewards:a,clearEncounter:async()=>{if(!(i!=null&&i.id))return;const p=ct(Qe,"parties",i.id);try{await ut(p,{encounter:null})}catch(y){console.error("clearEncounter failed:",y)}}}}const x6=[{key:"habits",label:"HABITS",icon:""},{key:"dailies",label:"DAILIES",icon:""},{key:"todos",label:"TO-DOS",icon:""}];function R6({activeTab:i,onTabChange:e}){return S.jsx("div",{style:{display:"flex",gap:2,marginBottom:D.spacing*2},children:x6.map(t=>S.jsxs("button",{onClick:()=>e(t.key),style:{flex:1,padding:`${D.spacing}px 0`,fontFamily:ee.pixel,fontSize:D.fontXs,border:`${D.borderWidth}px solid ${i===t.key?x.neonGreen:x.border}`,backgroundColor:i===t.key?"rgba(57, 255, 20, 0.1)":x.bgDark,color:i===t.key?x.neonGreen:x.textMuted,cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[S.jsx("span",{style:{fontSize:16},children:t.icon}),t.label]},t.key))})}function C6({task:i,onScore:e,onEdit:t}){const[r,a]=z.useState(null),l=async u=>{a(u),await e(i,u),setTimeout(()=>a(null),300)};return S.jsxs("div",{style:{...va,backgroundColor:x.bgDark,padding:D.spacing,display:"flex",alignItems:"center",gap:D.spacing,animation:r?"taskComplete 0.3s ease":void 0},children:[i.positive!==!1&&S.jsx("button",{onClick:()=>l("up"),style:{width:36,height:36,backgroundColor:"rgba(57, 255, 20, 0.15)",border:`2px solid ${x.neonGreen}`,color:x.neonGreen,fontFamily:ee.pixel,fontSize:D.fontLg,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"+"}),S.jsxs("div",{style:{flex:1,cursor:"pointer"},onClick:()=>t(i),children:[S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontSm,color:x.textPrimary,marginBottom:2},children:i.title}),S.jsxs("div",{style:{display:"flex",gap:D.spacing,alignItems:"center"},children:[S.jsx("span",{style:{fontFamily:ee.pixel,fontSize:7,color:kl[i.difficulty],textTransform:"uppercase"},children:i.difficulty}),(i.counterUp>0||i.counterDown>0)&&S.jsxs("span",{style:{fontFamily:ee.pixel,fontSize:7,color:x.textMuted},children:["+",i.counterUp||0," / -",i.counterDown||0]})]})]}),i.negative!==!1&&S.jsx("button",{onClick:()=>l("down"),style:{width:36,height:36,backgroundColor:"rgba(255, 68, 68, 0.15)",border:`2px solid ${x.fireRed}`,color:x.fireRed,fontFamily:ee.pixel,fontSize:D.fontLg,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:"-"})]})}function D6({task:i,onComplete:e,onEdit:t}){const[r,a]=z.useState(!1),l=async()=>{i.completed||(a(!0),await e(i),setTimeout(()=>a(!1),300))};return S.jsxs("div",{style:{...va,backgroundColor:i.completed?"rgba(57, 255, 20, 0.05)":x.bgDark,padding:D.spacing,display:"flex",alignItems:"center",gap:D.spacing,opacity:i.completed?.6:1,animation:r?"taskComplete 0.3s ease":void 0},children:[S.jsx("button",{onClick:l,style:{width:28,height:28,backgroundColor:i.completed?x.neonGreen:"transparent",border:`2px solid ${i.completed?x.neonGreen:x.border}`,color:i.completed?x.bgDarkest:"transparent",fontFamily:ee.pixel,fontSize:D.fontSm,cursor:i.completed?"default":"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:i.completed?"":""}),S.jsxs("div",{style:{flex:1,cursor:"pointer"},onClick:()=>t(i),children:[S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontSm,color:x.textPrimary,textDecoration:i.completed?"line-through":"none",marginBottom:2},children:i.title}),S.jsx("div",{style:{display:"flex",gap:D.spacing,alignItems:"center"},children:S.jsx("span",{style:{fontFamily:ee.pixel,fontSize:7,color:kl[i.difficulty],textTransform:"uppercase"},children:i.difficulty})})]}),i.streak>0&&S.jsxs("div",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.fireOrange,display:"flex",alignItems:"center",gap:2},children:[" ",i.streak]})]})}function N6({task:i,onComplete:e,onDelete:t,onEdit:r}){const[a,l]=z.useState(!1),u=async()=>{i.completed||(l(!0),await e(i),setTimeout(()=>l(!1),300))};return S.jsxs("div",{style:{...va,backgroundColor:i.completed?"rgba(57, 255, 20, 0.05)":x.bgDark,padding:D.spacing,display:"flex",alignItems:"center",gap:D.spacing,opacity:i.completed?.6:1,animation:a?"taskComplete 0.3s ease":void 0},children:[S.jsx("button",{onClick:u,style:{width:28,height:28,backgroundColor:i.completed?x.neonGreen:"transparent",border:`2px solid ${i.completed?x.neonGreen:x.border}`,color:i.completed?x.bgDarkest:"transparent",fontFamily:ee.pixel,fontSize:D.fontSm,cursor:i.completed?"default":"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:i.completed?"":""}),S.jsxs("div",{style:{flex:1,cursor:"pointer"},onClick:()=>r(i),children:[S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontSm,color:x.textPrimary,textDecoration:i.completed?"line-through":"none",marginBottom:2},children:i.title}),S.jsxs("div",{style:{display:"flex",gap:D.spacing,alignItems:"center"},children:[S.jsx("span",{style:{fontFamily:ee.pixel,fontSize:7,color:kl[i.difficulty],textTransform:"uppercase"},children:i.difficulty}),i.dueDate&&S.jsxs("span",{style:{fontFamily:ee.pixel,fontSize:7,color:x.textMuted},children:["Due: ",new Date(i.dueDate).toLocaleDateString()]})]})]}),i.completed&&S.jsx("button",{onClick:()=>t(i.id),style:{background:"none",border:"none",color:x.fireRed,cursor:"pointer",fontSize:14,padding:4},children:""})]})}function O6({tasks:i,type:e,onScore:t,onComplete:r,onDelete:a,onEdit:l}){return i.length===0?S.jsxs("div",{style:{textAlign:"center",padding:D.spacing*4,fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textMuted},children:["No ",e," yet. Create one!"]}):S.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4},children:i.map(u=>e==="habits"?S.jsx(C6,{task:u,onScore:t,onEdit:l},u.id):e==="dailies"?S.jsx(D6,{task:u,onComplete:r,onEdit:l},u.id):S.jsx(N6,{task:u,onComplete:r,onDelete:a,onEdit:l},u.id))})}function sR({children:i,onClose:e,title:t}){return S.jsx("div",{onClick:e,style:{position:"fixed",inset:0,backgroundColor:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:100,padding:D.spacing*2,animation:"fadeIn 0.2s ease"},children:S.jsxs("div",{onClick:r=>r.stopPropagation(),style:{backgroundColor:x.bgDark,padding:D.spacing*3,maxWidth:440,width:"100%",maxHeight:"80vh",overflowY:"auto",...va},children:[t&&S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontLg,color:x.gold,marginBottom:D.spacing*2,textAlign:"center"},children:t}),i]})})}function P6({task:i,taskType:e,onSave:t,onDelete:r,onClose:a}){const l=!!i,[u,f]=z.useState(""),[d,p]=z.useState(""),[y,_]=z.useState("easy"),[b,A]=z.useState(!0),[N,M]=z.useState(!0),[P,q]=z.useState("daily"),[$,B]=z.useState([0,1,2,3,4,5,6]);z.useEffect(()=>{i&&(f(i.title||""),p(i.notes||""),_(i.difficulty||"easy"),A(i.positive!==!1),M(i.negative!==!1),q(i.frequency||"daily"),B(i.daysOfWeek||[0,1,2,3,4,5,6]))},[i]);const J=(i==null?void 0:i.type)||e,fe=()=>{if(!u.trim())return;const R={type:J,title:u.trim(),notes:d.trim(),difficulty:y};J==="habit"&&(R.positive=b,R.negative=N,l||(R.counterUp=0,R.counterDown=0)),J==="daily"&&(R.frequency=P,R.daysOfWeek=P==="weekly"?$:[0,1,2,3,4,5,6],l||(R.streak=0,R.completed=!1)),J==="todo"&&(l||(R.completed=!1)),t(R,i==null?void 0:i.id)},de=R=>{B(C=>C.includes(R)?C.filter(V=>V!==R):[...C,R])};return S.jsx(sR,{onClose:a,title:l?"EDIT QUEST":"NEW QUEST",children:S.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:D.spacing*2},children:[S.jsxs("div",{children:[S.jsx("label",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textSecondary,display:"block",marginBottom:4},children:"TITLE"}),S.jsx(Lr,{value:u,onChange:R=>f(R.target.value),placeholder:"Enter quest name..."})]}),S.jsxs("div",{children:[S.jsx("label",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textSecondary,display:"block",marginBottom:4},children:"NOTES"}),S.jsx(Lr,{value:d,onChange:R=>p(R.target.value),placeholder:"Optional details..."})]}),S.jsxs("div",{children:[S.jsx("label",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textSecondary,display:"block",marginBottom:4},children:"DIFFICULTY"}),S.jsx("div",{style:{display:"flex",gap:4},children:["trivial","easy","medium","hard"].map(R=>S.jsx("button",{onClick:()=>_(R),style:{flex:1,padding:`${D.spacing}px 4px`,fontFamily:ee.pixel,fontSize:7,backgroundColor:y===R?`${kl[R]}20`:x.bgDarkest,color:y===R?kl[R]:x.textMuted,border:`2px solid ${y===R?kl[R]:x.border}`,cursor:"pointer",textTransform:"uppercase"},children:R},R))})]}),J==="habit"&&S.jsxs("div",{children:[S.jsx("label",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textSecondary,display:"block",marginBottom:4},children:"DIRECTIONS"}),S.jsxs("div",{style:{display:"flex",gap:D.spacing},children:[S.jsx("button",{onClick:()=>A(!b),style:{flex:1,padding:D.spacing,fontFamily:ee.pixel,fontSize:D.fontXs,backgroundColor:b?"rgba(57, 255, 20, 0.15)":x.bgDarkest,color:b?x.neonGreen:x.textMuted,border:`2px solid ${b?x.neonGreen:x.border}`,cursor:"pointer"},children:"+ POSITIVE"}),S.jsx("button",{onClick:()=>M(!N),style:{flex:1,padding:D.spacing,fontFamily:ee.pixel,fontSize:D.fontXs,backgroundColor:N?"rgba(255, 68, 68, 0.15)":x.bgDarkest,color:N?x.fireRed:x.textMuted,border:`2px solid ${N?x.fireRed:x.border}`,cursor:"pointer"},children:"- NEGATIVE"})]})]}),J==="daily"&&S.jsxs(S.Fragment,{children:[S.jsxs("div",{children:[S.jsx("label",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textSecondary,display:"block",marginBottom:4},children:"FREQUENCY"}),S.jsx("div",{style:{display:"flex",gap:4},children:["daily","weekly"].map(R=>S.jsx("button",{onClick:()=>q(R),style:{flex:1,padding:D.spacing,fontFamily:ee.pixel,fontSize:D.fontXs,backgroundColor:P===R?"rgba(0, 191, 255, 0.15)":x.bgDarkest,color:P===R?x.neonBlue:x.textMuted,border:`2px solid ${P===R?x.neonBlue:x.border}`,cursor:"pointer",textTransform:"uppercase"},children:R},R))})]}),P==="weekly"&&S.jsxs("div",{children:[S.jsx("label",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textSecondary,display:"block",marginBottom:4},children:"ACTIVE DAYS"}),S.jsx("div",{style:{display:"flex",gap:3},children:S6.map((R,C)=>S.jsx("button",{onClick:()=>de(C),style:{flex:1,padding:`${D.spacing}px 2px`,fontFamily:ee.pixel,fontSize:7,backgroundColor:$.includes(C)?"rgba(0, 255, 204, 0.15)":x.bgDarkest,color:$.includes(C)?x.neonCyan:x.textMuted,border:`2px solid ${$.includes(C)?x.neonCyan:x.border}`,cursor:"pointer"},children:R},C))})]})]}),S.jsxs("div",{style:{display:"flex",gap:D.spacing,marginTop:D.spacing},children:[l&&r&&S.jsx(sn,{variant:"danger",onClick:()=>r(i.id),style:{flex:1},children:"DELETE"}),S.jsx(sn,{variant:"ghost",onClick:a,style:{flex:1},children:"CANCEL"}),S.jsx(sn,{variant:"gold",onClick:fe,style:{flex:2},children:l?"SAVE":"CREATE"})]})]})})}function V6({boss:i,minion:e,encounterInfo:t}){const r=uu(),a=!!e,l=a?e:i,u=!a&&i?bo[i.bossKey]:null;if(!l)return null;const f=l.currentHp,d=l.maxHp,p=Math.max(0,f/d),y=p>.5?x.neonGreen:p>.25?x.gold:x.fireRed,_=a?l.glowColor||x.neonGreen:(u==null?void 0:u.glowColor)||x.border;return S.jsxs("div",{onClick:()=>r("/boss"),style:{...va,backgroundColor:x.bgDark,padding:D.spacing,marginBottom:D.spacing*2,cursor:"pointer",display:"flex",alignItems:"center",gap:D.spacing},children:[S.jsx("div",{style:{width:40,height:40,backgroundColor:x.bgDarkest,border:`2px solid ${_}`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:22,flexShrink:0,boxShadow:`0 0 8px ${_}44`},children:a?l.emoji||"":(u==null?void 0:u.emoji)||""}),S.jsxs("div",{style:{flex:1},children:[S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:4},children:[S.jsx("span",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textPrimary},children:a?l.name:(i==null?void 0:i.name)||"Boss"}),S.jsxs("span",{style:{fontFamily:ee.pixel,fontSize:7,color:y},children:[f,"/",d]})]}),S.jsx("div",{style:{height:8,backgroundColor:"#111",border:"1px solid #222"},children:S.jsx("div",{style:{height:"100%",width:`${p*100}%`,backgroundColor:y,transition:"width 0.5s",boxShadow:`0 0 4px ${y}`}})}),t&&S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:7,color:x.textMuted,marginTop:2},children:a?`MINION ${t.total-t.remaining+1}/${t.total}`:"BOSS PHASE"})]}),S.jsx("span",{style:{fontFamily:ee.pixel,fontSize:D.fontSm,color:x.textMuted},children:">"})]})}function M6(){const{user:i,profile:e}=Hn(),{tasks:t,loading:r,addTask:a,updateTask:l,deleteTask:u,scoreHabit:f,completeDaily:d,completeTodo:p}=I6(),{party:y}=Uh(),{dealDamageToEncounter:_,getCurrentTarget:b}=rR(y),[A,N]=z.useState("habits"),[M,P]=z.useState(!1),[q,$]=z.useState(null),[B,J]=z.useState(null),fe=b(),de=(fe==null?void 0:fe.type)||"boss",R=z.useCallback(he=>{he&&(J(he),setTimeout(()=>J(null),1500))},[]),C=z.useCallback(async(he,ye)=>{!he||!(y!=null&&y.encounter)||await _(he.damage,ye,i.uid,e.displayName)},[_,y,i,e]),V=z.useCallback(async(he,ye)=>{const Ve=await f(he,ye,de);Ve&&(y!=null&&y.encounter)&&ye==="up"&&await C(Ve,he),R(Ve)},[f,C,y,de,R]),j=z.useCallback(async he=>{const ye=await d(he,de);ye&&(y!=null&&y.encounter)&&await C(ye,he),R(ye)},[d,C,y,de,R]),F=z.useCallback(async he=>{const ye=await p(he,de);ye&&(y!=null&&y.encounter)&&await C(ye,he),R(ye)},[p,C,y,de,R]),G=async(he,ye)=>{ye?await l(ye,he):await a(he),P(!1),$(null)},O=he=>{$(he),P(!0)},dt=async he=>{await u(he),P(!1),$(null)},Rt=A==="habits"?t.habits:A==="dailies"?t.dailies:t.todos,ie=A==="habits"?"habit":A==="dailies"?"daily":"todo";return r?S.jsx("div",{style:{padding:D.spacing*4,textAlign:"center",fontFamily:ee.pixel,fontSize:D.fontSm,color:x.textMuted},children:"LOADING QUESTS..."}):S.jsxs("div",{style:{padding:D.spacing*2,position:"relative"},children:[B&&S.jsxs("div",{style:{position:"fixed",top:"30%",left:"50%",transform:"translateX(-50%)",zIndex:200,textAlign:"center",animation:"damageFloat 1.5s ease-out forwards",pointerEvents:"none"},children:[B.damage>0&&S.jsxs("div",{style:{fontFamily:ee.pixel,fontSize:D.fontXl,color:x.neonGreen,textShadow:`0 0 10px ${x.neonGreen}`},children:[" -",B.damage]}),S.jsxs("div",{style:{fontFamily:ee.pixel,fontSize:D.fontSm,color:x.gold,marginTop:4},children:["+",B.xp," XP  +",B.gold," "]}),B.levelUp&&S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontLg,color:x.gold,textShadow:`0 0 15px ${x.gold}`,marginTop:4},children:"LEVEL UP! +1 SKILL POINT"})]}),(y==null?void 0:y.encounter)&&fe&&S.jsx(V6,{boss:fe.type==="boss"?fe.data:null,minion:fe.type==="minion"?fe.data:null,encounterInfo:fe}),S.jsx(R6,{activeTab:A,onTabChange:N}),S.jsx("div",{style:{marginBottom:D.spacing*2},children:S.jsxs(sn,{variant:"gold",onClick:()=>{$(null),P(!0)},style:{width:"100%",padding:`${D.spacing*1.5}px 0`},children:["+ NEW ",ie.toUpperCase()]})}),S.jsx(O6,{tasks:Rt,type:A,onScore:V,onComplete:A==="dailies"?j:F,onDelete:dt,onEdit:O}),M&&S.jsx(P6,{task:q,taskType:ie,onSave:G,onDelete:dt,onClose:()=>{P(!1),$(null)}})]})}function k6(i,e){return!i||i.length===0?"none":i.map(([t,r,a])=>`${t*e}px ${r*e}px 0 0 ${a}`).join(", ")}function Dw({bossKey:i,pixels:e,glowColor:t,scale:r=6,animate:a=!0,hit:l=!1}){const u=i?bo[i]:null,f=e||(u==null?void 0:u.pixels),d=t||(u==null?void 0:u.glowColor)||"#ff0000",p=z.useMemo(()=>f?k6(f,r):"none",[f,r]);if(!f)return S.jsx("div",{style:{fontSize:64,textAlign:"center"},children:""});const y=Math.max(...f.map(([N])=>N)),_=Math.max(...f.map(([,N])=>N)),b=(y+1)*r,A=(_+1)*r;return S.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",padding:r*2},children:S.jsxs("div",{style:{width:b,height:A,position:"relative"},children:[S.jsx("div",{style:{width:r,height:r,boxShadow:p,animation:l?"bossHit 0.3s ease":a?"bossBob 1.5s ease-in-out infinite":"none",filter:l?"brightness(2)":"none",transition:"filter 0.1s"}}),S.jsx("div",{style:{position:"absolute",bottom:-r,left:"50%",transform:"translateX(-50%)",width:b*.8,height:r*2,background:`radial-gradient(ellipse, ${d}33 0%, transparent 70%)`,borderRadius:"50%"}})]})})}function L6({currentHp:i,maxHp:e}){const r=Math.max(0,i/e),a=Math.ceil(r*20),l=r>.5?x.neonGreen:r>.25?x.gold:x.fireRed;return S.jsxs("div",{children:[S.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:4,fontFamily:ee.pixel,fontSize:D.fontXs},children:[S.jsx("span",{style:{color:x.textSecondary},children:"BOSS HP"}),S.jsxs("span",{style:{color:l},children:[i," / ",e]})]}),S.jsx("div",{style:{display:"flex",gap:2,padding:3,backgroundColor:x.barBorder,border:`2px solid ${x.border}`},children:Array.from({length:20}).map((u,f)=>S.jsx("div",{style:{flex:1,height:20,backgroundColor:f<a?l:x.barEmpty,border:`1px solid ${x.bgDarkest}`,transition:"background-color 0.3s",boxShadow:f<a?`0 0 4px ${l}44`:"none"}},f))})]})}function j6({amount:i,type:e="dealt",id:t}){const[r,a]=z.useState(!0);if(z.useEffect(()=>{const d=setTimeout(()=>a(!1),1500);return()=>clearTimeout(d)},[]),!r)return null;const l=e==="dealt"?x.neonGreen:x.fireRed,u=e==="dealt"?"-":"+",f=Math.random()*60-30;return S.jsxs("div",{style:{position:"absolute",top:"40%",left:`calc(50% + ${f}px)`,transform:"translateX(-50%)",fontFamily:ee.pixel,fontSize:D.fontXl,color:l,textShadow:`0 0 10px ${l}, 0 0 20px ${l}`,animation:"damageFloat 1.5s ease-out forwards",pointerEvents:"none",zIndex:10},children:[u,i]})}function U6({feed:i}){return!i||i.length===0?S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textMuted,textAlign:"center",padding:D.spacing*2},children:"No damage dealt yet..."}):S.jsx("div",{style:{maxHeight:200,overflowY:"auto",display:"flex",flexDirection:"column",gap:2},children:[...i].reverse().map((e,t)=>{const r=e.type==="dealt";return S.jsx("div",{style:{padding:`4px ${D.spacing}px`,backgroundColor:r?"rgba(57, 255, 20, 0.05)":"rgba(255, 68, 68, 0.05)",borderLeft:`3px solid ${r?x.neonGreen:x.fireRed}`,fontFamily:ee.pixel,fontSize:7,color:x.textSecondary,display:"flex",justifyContent:"space-between",alignItems:"center"},children:S.jsxs("span",{children:[S.jsx("span",{style:{color:x.textPrimary},children:e.displayName}),r?" dealt ":" took ",S.jsx("span",{style:{color:r?x.neonGreen:x.fireRed},children:e.damage})," dmg",e.taskTitle&&S.jsxs("span",{style:{color:x.textMuted},children:[" (",e.taskTitle,")"]})]})},t)})})}function z6({bossKey:i,onStartNext:e,onClose:t}){const r=bo[i];return r?S.jsx(sR,{onClose:t,title:"VICTORY!",children:S.jsxs("div",{style:{textAlign:"center"},children:[S.jsx("div",{style:{fontSize:64,marginBottom:D.spacing*2,opacity:.5,filter:"grayscale(0.5)"},children:r.emoji}),S.jsxs("div",{style:{fontFamily:ee.pixel,fontSize:D.fontMd,color:x.textPrimary,marginBottom:D.spacing},children:[r.name," has been slain!"]}),S.jsxs("div",{style:{backgroundColor:x.bgDarkest,border:`2px solid ${x.gold}`,padding:D.spacing*2,marginBottom:D.spacing*2},children:[S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.gold,marginBottom:D.spacing},children:"REWARDS FOR ALL PARTY MEMBERS"}),S.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:D.spacing*3},children:[S.jsxs("div",{children:[S.jsxs("div",{style:{fontFamily:ee.pixel,fontSize:D.fontLg,color:x.neonCyan},children:["+",r.rewards.xp]}),S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:7,color:x.textMuted},children:"XP"})]}),S.jsxs("div",{children:[S.jsxs("div",{style:{fontFamily:ee.pixel,fontSize:D.fontLg,color:x.gold},children:["+",r.rewards.gold]}),S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:7,color:x.textMuted},children:"GOLD"})]})]})]}),S.jsx(sn,{variant:"gold",onClick:e,style:{width:"100%",padding:`${D.spacing*1.5}px 0`},children:"SUMMON NEXT BOSS"}),S.jsx("div",{style:{marginTop:D.spacing},children:S.jsx(sn,{variant:"ghost",onClick:t,style:{width:"100%"},children:"LATER"})})]})}):null}function aR({members:i,leaderId:e}){const t=Object.entries(i||{});return t.length===0?S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textMuted,textAlign:"center",padding:D.spacing*2},children:"No members yet"}):S.jsx("div",{style:{display:"flex",flexDirection:"column",gap:4},children:t.map(([r,a])=>S.jsx(ni,{style:{padding:D.spacing},children:S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:D.spacing},children:[S.jsx("div",{style:{width:32,height:32,backgroundColor:x.bgMedium,border:`2px solid ${r===e?x.gold:x.border}`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:16,flexShrink:0},children:""}),S.jsxs("div",{style:{flex:1},children:[S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:D.spacing},children:[S.jsx("span",{style:{fontFamily:ee.pixel,fontSize:D.fontSm,color:x.textPrimary},children:a.displayName}),r===e&&S.jsx("span",{style:{fontFamily:ee.pixel,fontSize:7,color:x.gold},children:" LEADER"})]}),S.jsxs("div",{style:{fontFamily:ee.pixel,fontSize:7,color:x.textMuted,marginBottom:4},children:["LV.",a.level]}),S.jsx(nR,{current:a.hp,max:a.maxHp,height:6,showLabel:!1})]})]})},r))})}function B6(){var he,ye,Ve,$e;const{user:i}=Hn(),{party:e,loading:t}=Uh(),{startEncounter:r,getCurrentTarget:a,defeatBoss:l,forceResetBoss:u,claimBossRewards:f,clearEncounter:d}=rR(e),[p,y]=z.useState(!1),[_,b]=z.useState([]),[A,N]=z.useState(!1),[M,P]=z.useState(!1),[q,$]=z.useState(null),B=z.useRef(null),J=e==null?void 0:e.encounter,fe=a(),de=(J==null?void 0:J.phase)==="victory";z.useEffect(()=>{((J==null?void 0:J.phase)==="minions"||(J==null?void 0:J.phase)==="boss")&&N(!1)},[J==null?void 0:J.phase]),z.useEffect(()=>{var k;(J==null?void 0:J.phase)==="boss"&&((k=J.boss)==null?void 0:k.currentHp)<=0&&(e!=null&&e.id)&&l(e.id)},[J==null?void 0:J.phase,(he=J==null?void 0:J.boss)==null?void 0:he.currentHp,e==null?void 0:e.id]),z.useEffect(()=>{var k;de&&(i!=null&&i.uid)&&!((k=J==null?void 0:J.rewardsClaimedBy)!=null&&k.includes(i.uid))&&f(i.uid)},[de,i==null?void 0:i.uid,J==null?void 0:J.rewardsClaimedBy]),z.useEffect(()=>{if(!(fe!=null&&fe.data)){B.current=null;return}const k=fe.data.currentHp;if(B.current!==null&&k<B.current){const re=B.current-k;y(!0),setTimeout(()=>y(!1),300),b(ue=>[...ue.slice(-5),{id:Date.now(),amount:re,type:"dealt"}])}B.current=k},[(ye=fe==null?void 0:fe.data)==null?void 0:ye.currentHp]);const R=async()=>{b([]),N(!1),$(null),P(!0);try{const k=await r();k&&!k.success&&$(k.error)}catch(k){$(k.message||"Unknown error")}finally{P(!1)}},C=async()=>{b([]),N(!1),$(null),P(!0);try{const k=await r();k&&!k.success&&$(k.error)}catch(k){$(k.message||"Unknown error")}finally{P(!1)}},V=()=>{if(!de)return null;const k=Math.min((e.bossLevel||1)-1,Xs.length-1);return Xs[k]};if(t)return S.jsx("div",{style:{padding:D.spacing*4,textAlign:"center",fontFamily:ee.pixel,fontSize:D.fontSm,color:x.textMuted},children:"LOADING..."});if(!e)return S.jsxs("div",{style:{padding:D.spacing*4,textAlign:"center"},children:[S.jsx("div",{style:{fontSize:48,marginBottom:D.spacing*2},children:""}),S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontMd,color:x.textSecondary,marginBottom:D.spacing},children:"NO PARTY"}),S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textMuted},children:"Join or create a party to fight bosses together!"})]});if(!J||de){const k=Math.min(e.bossLevel||0,Xs.length-1),re=Xs[k],ue=bo[re],ve=g_[re]||[],Ie=V();return S.jsxs("div",{style:{padding:D.spacing*2,textAlign:"center"},children:[S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontLg,color:x.gold,marginBottom:D.spacing*2},children:"BOSS ARENA"}),S.jsxs(ni,{style:{marginBottom:D.spacing*2},children:[S.jsx("div",{style:{fontSize:64,marginBottom:D.spacing},children:(ue==null?void 0:ue.emoji)||""}),S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontMd,color:x.textPrimary,marginBottom:4},children:(ue==null?void 0:ue.name)||"Unknown Boss"}),S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textMuted,marginBottom:D.spacing},children:ue==null?void 0:ue.description}),S.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:D.spacing*3,marginBottom:D.spacing},children:[S.jsx("div",{children:S.jsxs("div",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.fireRed},children:[ue==null?void 0:ue.maxHp," HP"]})}),S.jsx("div",{children:S.jsxs("div",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.fireOrange},children:[ue==null?void 0:ue.attackPower," ATK"]})}),S.jsx("div",{children:S.jsxs("div",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.neonCyan},children:["LV.",ue==null?void 0:ue.level]})})]}),ve.length>0&&S.jsxs("div",{style:{borderTop:`1px solid ${x.border}`,paddingTop:D.spacing,marginTop:D.spacing},children:[S.jsxs("div",{style:{fontFamily:ee.pixel,fontSize:7,color:x.textMuted,marginBottom:D.spacing},children:[ve.length," MINION",ve.length>1?"S":""," GUARD THIS BOSS"]}),S.jsx("div",{style:{display:"flex",justifyContent:"center",gap:D.spacing,flexWrap:"wrap"},children:ve.map((Ce,je)=>S.jsxs("div",{style:{backgroundColor:x.bgDarkest,border:`1px solid ${x.border}`,padding:"4px 6px",textAlign:"center"},children:[S.jsx("div",{style:{fontSize:16},children:Ce.emoji}),S.jsxs("div",{style:{fontFamily:ee.pixel,fontSize:7,color:x.textMuted},children:[Ce.maxHp,"HP"]})]},je))})]})]}),S.jsx(sn,{variant:"gold",onClick:R,disabled:M,style:{width:"100%",padding:`${D.spacing*2}px 0`,fontSize:D.fontMd,opacity:M?.6:1},children:M?" STARTING...":" BEGIN ENCOUNTER"}),e.activeBoss&&e.activeBoss.currentHp<=0&&!J&&S.jsx(sn,{variant:"danger",onClick:async()=>{const Ce=await u();Ce.success||$(Ce.error)},style:{width:"100%",padding:`${D.spacing}px 0`,marginTop:D.spacing},children:" FORCE DEFEAT (STUCK BOSS)"}),q&&S.jsxs("div",{style:{marginTop:D.spacing,padding:D.spacing,backgroundColor:"#330000",border:`2px solid ${x.fireRed}`,fontFamily:ee.pixel,fontSize:D.fontXs,color:x.fireRed,textAlign:"center"},children:["ERROR: ",q]}),de&&!A&&Ie&&S.jsx(z6,{bossKey:Ie,onStartNext:C,onClose:()=>{N(!0),d()}})]})}const j=J.phase==="minions",F=J.phase==="boss",G=bo[J.boss.bossKey],O=fe==null?void 0:fe.data,dt=j?(O==null?void 0:O.glowColor)||x.neonGreen:(G==null?void 0:G.glowColor)||x.fireRed,Rt=((Ve=J.minions)==null?void 0:Ve.length)||0,ie=(($e=J.minions)==null?void 0:$e.filter(k=>k.defeated).length)||0;return S.jsxs("div",{style:{padding:D.spacing*2},children:[S.jsxs("div",{style:{textAlign:"center",marginBottom:D.spacing},children:[S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textMuted,letterSpacing:2},children:j?"MINION WAVE":"BOSS ARENA"}),S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontLg,color:dt,textShadow:`0 0 10px ${dt}44`},children:(O==null?void 0:O.name)||"Unknown"}),j&&S.jsxs("div",{style:{fontFamily:ee.pixel,fontSize:7,color:x.textMuted},children:["WAVE ",ie+1,"/",Rt,"  Boss: ",J.boss.name]}),F&&S.jsxs("div",{style:{fontFamily:ee.pixel,fontSize:7,color:x.textMuted},children:["LV.",J.boss.level,"  ATK ",J.boss.attackPower]})]}),j&&Rt>1&&S.jsx("div",{style:{display:"flex",justifyContent:"center",gap:4,marginBottom:D.spacing},children:J.minions.map((k,re)=>S.jsx("div",{style:{width:12,height:12,border:`1px solid ${k.defeated?x.neonGreen:x.border}`,backgroundColor:k.defeated?x.neonGreen:re===J.currentMinionIndex?dt:x.bgDarkest,opacity:k.defeated?.5:1,display:"flex",alignItems:"center",justifyContent:"center",fontSize:7},children:k.defeated?"":""},re))}),S.jsxs("div",{style:{position:"relative",backgroundColor:x.bgDarkest,border:`${D.borderWidth}px solid ${x.border}`,padding:`${D.spacing*3}px 0`,marginBottom:D.spacing*2,minHeight:120,overflow:"hidden",backgroundImage:`radial-gradient(circle at 50% 100%, ${dt}22 0%, transparent 60%)`},children:[j?S.jsx(Dw,{pixels:O==null?void 0:O.pixels,glowColor:O==null?void 0:O.glowColor,scale:8,hit:p}):S.jsx(Dw,{bossKey:J.boss.bossKey,scale:7,hit:p}),_.map(k=>S.jsx(j6,{amount:k.amount,type:k.type,id:k.id},k.id))]}),S.jsx("div",{style:{marginBottom:D.spacing},children:S.jsx(L6,{currentHp:(O==null?void 0:O.currentHp)||0,maxHp:(O==null?void 0:O.maxHp)||1})}),O&&S.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:D.spacing*2,marginBottom:D.spacing*2},children:[j&&S.jsxs(S.Fragment,{children:[S.jsxs("span",{style:{fontFamily:ee.pixel,fontSize:7,color:x.neonCyan},children:["+",O.xp," XP"]}),S.jsxs("span",{style:{fontFamily:ee.pixel,fontSize:7,color:x.gold},children:["+",O.gold," "]})]}),F&&J.boss.rewards&&S.jsxs(S.Fragment,{children:[S.jsxs("span",{style:{fontFamily:ee.pixel,fontSize:7,color:x.neonCyan},children:["+",J.boss.rewards.xp," XP"]}),S.jsxs("span",{style:{fontFamily:ee.pixel,fontSize:7,color:x.gold},children:["+",J.boss.rewards.gold," "]})]})]}),S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textMuted,textAlign:"center",marginBottom:D.spacing*2,padding:`0 ${D.spacing}px`},children:"Complete your habits, dailies, and to-dos to deal damage!"}),S.jsxs(ni,{style:{marginBottom:D.spacing*2},children:[S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textSecondary,marginBottom:D.spacing},children:"BATTLE LOG"}),S.jsx(U6,{feed:e.damageFeed})]}),S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textSecondary,marginBottom:D.spacing},children:"PARTY STATUS"}),S.jsx(aR,{members:e.members,leaderId:e.leaderId})]})}function F6(){const{user:i,profile:e}=Hn(),{createParty:t}=Uh(),[r,a]=z.useState(""),[l,u]=z.useState(!1),[f,d]=z.useState(""),p=async y=>{if(y.preventDefault(),!!r.trim()){u(!0),d("");try{await t(i.uid,e.displayName,r.trim(),e.level,e.hp,e.maxHp)}catch(_){d(_.message||"Failed to create party")}u(!1)}};return S.jsxs(ni,{children:[S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontMd,color:x.gold,marginBottom:D.spacing*2,textAlign:"center"},children:" CREATE PARTY"}),S.jsxs("form",{onSubmit:p,style:{display:"flex",flexDirection:"column",gap:D.spacing*2},children:[S.jsxs("div",{children:[S.jsx("label",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textSecondary,display:"block",marginBottom:4},children:"PARTY NAME"}),S.jsx(Lr,{value:r,onChange:y=>a(y.target.value),placeholder:"Dragon Slayers"})]}),f&&S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.fireRed,textAlign:"center"},children:f}),S.jsx(sn,{variant:"gold",disabled:l,style:{width:"100%"},children:l?"FORGING...":"CREATE PARTY"})]})]})}function q6(){const{user:i,profile:e}=Hn(),{joinParty:t}=Uh(),[r,a]=z.useState(""),[l,u]=z.useState(!1),[f,d]=z.useState(""),p=async y=>{if(y.preventDefault(),!!r.trim()){u(!0),d("");try{await t(i.uid,e.displayName,e.level,e.hp,e.maxHp,r.trim())}catch(_){d(_.message||"Failed to join party")}u(!1)}};return S.jsxs(ni,{children:[S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontMd,color:x.neonCyan,marginBottom:D.spacing*2,textAlign:"center"},children:" JOIN PARTY"}),S.jsxs("form",{onSubmit:p,style:{display:"flex",flexDirection:"column",gap:D.spacing*2},children:[S.jsxs("div",{children:[S.jsx("label",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textSecondary,display:"block",marginBottom:4},children:"INVITE CODE"}),S.jsx(Lr,{value:r,onChange:y=>a(y.target.value.toUpperCase()),placeholder:"ENTER CODE",style:{textAlign:"center",letterSpacing:4,fontSize:D.fontLg}})]}),f&&S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.fireRed,textAlign:"center"},children:f}),S.jsx(sn,{variant:"gold",disabled:l,style:{width:"100%"},children:l?"JOINING...":"JOIN PARTY"})]})]})}function H6({code:i}){const[e,t]=z.useState(!1),r=async()=>{try{await navigator.clipboard.writeText(i),t(!0),setTimeout(()=>t(!1),2e3)}catch{const a=document.createElement("textarea");a.value=i,document.body.appendChild(a),a.select(),document.execCommand("copy"),document.body.removeChild(a),t(!0),setTimeout(()=>t(!1),2e3)}};return S.jsxs(ni,{style:{textAlign:"center"},children:[S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textSecondary,marginBottom:D.spacing},children:"INVITE CODE"}),S.jsx("div",{onClick:r,style:{fontFamily:ee.pixel,fontSize:D.fontTitle,color:x.neonCyan,letterSpacing:8,padding:D.spacing*2,backgroundColor:x.bgDarkest,border:`2px solid ${x.neonCyan}`,cursor:"pointer",marginBottom:D.spacing,textShadow:`0 0 10px ${x.neonCyan}`},children:i}),S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:e?x.neonGreen:x.textMuted},children:e?"COPIED!":"CLICK TO COPY"})]})}function G6(){const{user:i,profile:e}=Hn(),{party:t,loading:r,leaveParty:a}=Uh(),l=async()=>{i&&await a(i.uid)},u=async()=>{await nP(Xm)};return r?S.jsx("div",{style:{padding:D.spacing*4,textAlign:"center",fontFamily:ee.pixel,fontSize:D.fontSm,color:x.textMuted},children:"LOADING..."}):t?S.jsxs("div",{style:{padding:D.spacing*2,display:"flex",flexDirection:"column",gap:D.spacing*2},children:[S.jsxs(ni,{style:{textAlign:"center"},children:[S.jsxs("div",{style:{fontFamily:ee.pixel,fontSize:D.fontLg,color:x.gold,marginBottom:4},children:[" ",t.name]}),S.jsxs("div",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textMuted},children:[t.memberIds.length," member",t.memberIds.length!==1?"s":""," Boss Level ",t.bossLevel]})]}),S.jsx(H6,{code:t.inviteCode}),S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontSm,color:x.textSecondary,marginTop:D.spacing},children:"PARTY MEMBERS"}),S.jsx(aR,{members:t.members,leaderId:t.leaderId}),S.jsx("div",{style:{marginTop:D.spacing*2},children:S.jsx(sn,{variant:"danger",onClick:l,style:{width:"100%"},children:"LEAVE PARTY"})}),S.jsx("div",{style:{marginTop:D.spacing,textAlign:"center"},children:S.jsx(sn,{variant:"ghost",onClick:u,children:"LOGOUT"})})]}):S.jsxs("div",{style:{padding:D.spacing*2,display:"flex",flexDirection:"column",gap:D.spacing*2},children:[S.jsx("div",{style:{textAlign:"center",fontFamily:ee.pixel,fontSize:D.fontLg,color:x.gold,marginBottom:D.spacing},children:" PARTY"}),S.jsx("div",{style:{textAlign:"center",fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textSecondary,marginBottom:D.spacing*2},children:"Join forces to slay bosses together!"}),S.jsx(F6,{}),S.jsx("div",{style:{textAlign:"center",fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textMuted,padding:`${D.spacing}px 0`},children:" OR "}),S.jsx(q6,{}),S.jsx("div",{style:{marginTop:D.spacing*4,textAlign:"center"},children:S.jsx(sn,{variant:"ghost",onClick:u,children:"LOGOUT"})})]})}const Nw={weapon:{label:"WEAPONS",icon:""},armor:{label:"ARMOR",icon:""},accessory:{label:"ACCESSORIES",icon:""}};function K6(){const{user:i,profile:e}=Hn(),[t,r]=z.useState("weapon"),[a,l]=z.useState(null);if(!e)return null;const u=e.equipment||{weapon:null,armor:null,accessory:null},f=e.gold||0,d=Ym(u),p=async _=>{var M,P;if(f<_.cost)return;l(_.id);const b={...u,[_.slot]:_.id},A=u[_.slot]?lo[u[_.slot]]:null;let N={};if(_.stats.maxHp||(M=A==null?void 0:A.stats)!=null&&M.maxHp){const q=((P=A==null?void 0:A.stats)==null?void 0:P.maxHp)||0,B=(_.stats.maxHp||0)-q;if(B!==0){const J=e.maxHp+B;N={maxHp:J,hp:Math.min(e.hp+Math.max(0,B),J)}}}await ut(ct(Qe,"users",i.uid),{equipment:b,gold:f-_.cost,...N}),l(null)},y=_=>Object.values(u).includes(_);return S.jsxs("div",{style:{padding:D.spacing*2},children:[S.jsxs("div",{style:{textAlign:"center",marginBottom:D.spacing*2},children:[S.jsx("div",{style:{fontSize:36},children:""}),S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontLg,color:x.gold,marginBottom:4},children:"EQUIPMENT SHOP"}),S.jsxs("div",{style:{fontFamily:ee.pixel,fontSize:D.fontSm,color:x.gold},children:[" ",f," GOLD"]})]}),S.jsxs(ni,{style:{marginBottom:D.spacing*2,padding:D.spacing},children:[S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.textSecondary,marginBottom:D.spacing},children:"EQUIPPED"}),S.jsx("div",{style:{display:"flex",justifyContent:"space-around"},children:["weapon","armor","accessory"].map(_=>{const b=u[_],A=b?lo[b]:null;return S.jsxs("div",{style:{textAlign:"center"},children:[S.jsx("div",{style:{width:36,height:36,backgroundColor:x.bgDarkest,border:`2px solid ${A?x.gold:x.border}`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:18,margin:"0 auto 4px"},children:A?A.emoji:Nw[_].icon}),S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:7,color:A?x.textPrimary:x.textMuted},children:A?A.name:"Empty"})]},_)})}),S.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:D.spacing*2,marginTop:D.spacing,paddingTop:D.spacing,borderTop:`1px solid ${x.border}`},children:[d.attack>0&&S.jsxs("span",{style:{fontFamily:ee.pixel,fontSize:7,color:x.fireRed},children:["+",d.attack," ATK"]}),d.maxHp>0&&S.jsxs("span",{style:{fontFamily:ee.pixel,fontSize:7,color:x.neonGreen},children:["+",d.maxHp," HP"]}),d.goldBonus>0&&S.jsxs("span",{style:{fontFamily:ee.pixel,fontSize:7,color:x.gold},children:["+",d.goldBonus,"% GOLD"]}),d.xpBonus>0&&S.jsxs("span",{style:{fontFamily:ee.pixel,fontSize:7,color:x.neonCyan},children:["+",d.xpBonus,"% XP"]})]})]}),S.jsx("div",{style:{display:"flex",gap:2,marginBottom:D.spacing*2},children:Object.entries(Nw).map(([_,{label:b,icon:A}])=>S.jsxs("button",{onClick:()=>r(_),style:{flex:1,padding:`${D.spacing}px 0`,fontFamily:ee.pixel,fontSize:7,border:`${D.borderWidth}px solid ${t===_?x.gold:x.border}`,backgroundColor:t===_?"rgba(255, 215, 0, 0.1)":x.bgDark,color:t===_?x.gold:x.textMuted,cursor:"pointer",display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[S.jsx("span",{style:{fontSize:14},children:A}),b]},_))}),S.jsx("div",{style:{display:"flex",flexDirection:"column",gap:D.spacing},children:w6[t].map(_=>{const b=y(_.id),A=f>=_.cost;return S.jsx(ni,{style:{padding:D.spacing,borderColor:b?x.gold:x.border,backgroundColor:b?`${x.gold}08`:x.bgDark},children:S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:D.spacing},children:[S.jsx("div",{style:{width:40,height:40,backgroundColor:x.bgDarkest,border:`2px solid ${b?x.gold:x.border}`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:22,flexShrink:0},children:_.emoji}),S.jsxs("div",{style:{flex:1},children:[S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontSm,color:b?x.gold:x.textPrimary,marginBottom:2},children:_.name}),S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:7,color:x.textMuted,marginBottom:4},children:_.description}),S.jsx("div",{style:{display:"flex",gap:D.spacing,flexWrap:"wrap"},children:Object.entries(_.stats).map(([N,M])=>{const q={attack:{label:"ATK",color:x.fireRed},maxHp:{label:"HP",color:x.neonGreen},goldBonus:{label:"% GOLD",color:x.gold},xpBonus:{label:"% XP",color:x.neonCyan},damageReduction:{label:"% DEF",color:x.neonBlue},minionDamage:{label:"MOB DMG",color:x.fireOrange}}[N]||{label:N,color:x.textSecondary};return S.jsxs("span",{style:{fontFamily:ee.pixel,fontSize:7,color:q.color},children:["+",M," ",q.label]},N)})})]}),S.jsx("div",{style:{flexShrink:0,textAlign:"center"},children:b?S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.gold},children:"EQUIPPED"}):S.jsx(sn,{variant:A?"gold":"ghost",disabled:!A||a===_.id,onClick:()=>p(_),style:{padding:"6px 10px"},children:S.jsxs("div",{children:[S.jsx("div",{style:{fontSize:D.fontXs},children:"BUY"}),S.jsxs("div",{style:{fontSize:7},children:["",_.cost]})]})})})]})},_.id)})})]})}function $6(){const{user:i,profile:e}=Hn(),[t,r]=z.useState(null);if(!(e!=null&&e.class))return null;const a=$i[e.class],l=e.skills||{},u=e.skillPoints||0,f=p=>{const y=l[p.id]||0;return!(y>=p.maxLevel||p.cost[y]>u||p.requires&&(l[p.requires]||0)<(p.requiresLevel||1))},d=async p=>{if(!f(p))return;const y=l[p.id]||0,_=p.cost[y];r(p.id);const b={...l,[p.id]:y+1};await ut(ct(Qe,"users",i.uid),{skills:b,skillPoints:u-_}),r(null)};return S.jsxs("div",{style:{padding:D.spacing*2},children:[S.jsxs("div",{style:{textAlign:"center",marginBottom:D.spacing*2},children:[S.jsx("div",{style:{fontSize:36},children:a.emoji}),S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontLg,color:a.color,marginBottom:4},children:a.name.toUpperCase()}),S.jsxs("div",{style:{fontFamily:ee.pixel,fontSize:D.fontSm,color:x.gold},children:[" ",u," SKILL POINT",u!==1?"S":""," AVAILABLE"]}),S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:7,color:x.textMuted,marginTop:4},children:"Earn skill points by leveling up"})]}),S.jsx("div",{style:{display:"flex",flexDirection:"column",gap:D.spacing},children:a.skills.map(p=>{var P;const y=l[p.id]||0,_=y>=p.maxLevel,b=f(p),A=_?0:p.cost[y],N=p.requires&&(l[p.requires]||0)<(p.requiresLevel||1),M=p.maxLevel===1&&p.requires;return S.jsx(ni,{style:{padding:D.spacing,opacity:N?.4:1,borderColor:_?x.gold:M?a.color:x.border,backgroundColor:_?`${x.gold}08`:x.bgDark},children:S.jsxs("div",{style:{display:"flex",alignItems:"center",gap:D.spacing},children:[S.jsx("div",{style:{width:40,height:40,backgroundColor:x.bgDarkest,border:`2px solid ${_?x.gold:N?x.textMuted:a.color}`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:20,flexShrink:0},children:N?"":p.emoji}),S.jsxs("div",{style:{flex:1},children:[S.jsxs("div",{style:{fontFamily:ee.pixel,fontSize:D.fontSm,color:_?x.gold:x.textPrimary,marginBottom:2,display:"flex",alignItems:"center",gap:D.spacing},children:[p.name,M&&S.jsx("span",{style:{fontFamily:ee.pixel,fontSize:7,color:x.bgDarkest,backgroundColor:a.color,padding:"1px 4px"},children:"ULTIMATE"})]}),S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:7,color:x.textMuted,marginBottom:4},children:p.description}),S.jsxs("div",{style:{display:"flex",gap:3,alignItems:"center"},children:[Array.from({length:p.maxLevel}).map((q,$)=>S.jsx("div",{style:{width:12,height:8,backgroundColor:$<y?a.color:"#222",border:"1px solid #111"}},$)),S.jsxs("span",{style:{fontFamily:ee.pixel,fontSize:7,color:x.textMuted,marginLeft:4},children:[y,"/",p.maxLevel]})]}),N&&S.jsxs("div",{style:{fontFamily:ee.pixel,fontSize:7,color:x.fireRed,marginTop:4},children:["Requires: ",(P=a.skills.find(q=>q.id===p.requires))==null?void 0:P.name," LV.",p.requiresLevel]})]}),!_&&!N&&S.jsx(sn,{variant:b?"gold":"ghost",disabled:!b||t===p.id,onClick:()=>d(p),style:{flexShrink:0,padding:"6px 10px"},children:S.jsxs("div",{style:{textAlign:"center"},children:[S.jsx("div",{style:{fontSize:D.fontXs},children:"UP"}),S.jsxs("div",{style:{fontSize:7,color:b?x.bgDarkest:x.textMuted},children:["",A]})]})}),_&&S.jsx("div",{style:{fontFamily:ee.pixel,fontSize:D.fontXs,color:x.gold,flexShrink:0},children:"MAX "})]})},p.id)})})]})}const Q6="modulepreload",X6=function(i){return"/quest-habits/"+i},Ow={},Y6=function(e,t,r){let a=Promise.resolve();if(t&&t.length>0){let u=function(p){return Promise.all(p.map(y=>Promise.resolve(y).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),d=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));a=u(t.map(p=>{if(p=X6(p),p in Ow)return;Ow[p]=!0;const y=p.endsWith(".css"),_=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${_}`))return;const b=document.createElement("link");if(b.rel=y?"stylesheet":Q6,y||(b.as="script"),b.crossOrigin="",b.href=p,d&&b.setAttribute("nonce",d),document.head.appendChild(b),y)return new Promise((A,N)=>{b.addEventListener("load",A),b.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${p}`)))})}))}function l(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return a.then(u=>{for(const f of u||[])f.status==="rejected"&&l(f.reason);return e().catch(l)})};function W6(i){if(!i)return!0;const e=new Date(i),t=new Date,r=new Date(t.getFullYear(),t.getMonth(),t.getDate());return e<r}function J6(i){if(!i||i.type!=="daily")return!1;const e=new Date().getDay();return i.frequency==="weekly"?(i.daysOfWeek||[]).includes(e):!0}function Z6(){const{user:i,profile:e}=Hn(),t=z.useRef(!1);z.useEffect(()=>{!i||!e||t.current||W6(e.lastCron)&&(t.current=!0,eL(i.uid,e))},[i,e])}async function eL(i,e){try{const t=ru(Qe,"users",i,"tasks"),r=await qv(t),a=[];r.forEach(d=>{const p={id:d.id,...d.data()};p.type==="daily"&&a.push(p)});let l=0;const u=Y1(Qe);for(const d of a){const p=J6(d),y=ct(Qe,"users",i,"tasks",d.id);d.completed?u.update(y,{completed:!1}):p&&(l++,u.update(y,{completed:!1,streak:0}))}await u.commit(),l>0&&e.partyId&&await tL(i,e,l);const f=ct(Qe,"users",i);await ut(f,{lastCron:new Date().toISOString()})}catch(t){console.error("Daily reset failed:",t)}}async function tL(i,e,t){try{const r=ct(Qe,"parties",e.partyId),{getDoc:a}=await Y6(async()=>{const{getDoc:_}=await Promise.resolve().then(()=>G3);return{getDoc:_}},[]),l=await a(r);if(!l.exists())return;const u=l.data();if(!u.activeBoss)return;const f=A6(t,u.activeBoss.attackPower),d={};for(const _ of u.memberIds){const b=u.members[_];if(!b)continue;const A=Math.max(0,b.hp-f);d[`members.${_}.hp`]=A;const N=ct(Qe,"users",_),M=await a(N);if(M.exists()){const P=M.data();let q=Math.max(0,P.hp-f);const $={hp:q};if(q<=0){const B=Math.max(1,P.level-1),J=50+(B-1)*5;$.hp=J,$.level=B,$.maxHp=J,$.gold=Math.max(0,P.gold-10),d[`members.${_}.hp`]=J,d[`members.${_}.level`]=B,d[`members.${_}.maxHp`]=J}await ut(N,$)}}const p={userId:i,displayName:e.displayName,damage:f,taskTitle:`${t} missed daily${t>1?"s":""}`,timestamp:new Date().toISOString(),type:"received"},y=[...u.damageFeed||[],p].slice(-20);d.damageFeed=y,await ut(r,d)}catch(r){console.error("Boss attack failed:",r)}}function nL(){Z6();const{profile:i}=Hn();return i&&!i.class?S.jsx(Ny,{children:S.jsx(Gi,{path:"*",element:S.jsx(T6,{})})}):S.jsx(c6,{children:S.jsxs(Ny,{children:[S.jsx(Gi,{path:"/dashboard",element:S.jsx(Pc,{children:S.jsx(M6,{})})}),S.jsx(Gi,{path:"/boss",element:S.jsx(Pc,{children:S.jsx(B6,{})})}),S.jsx(Gi,{path:"/party",element:S.jsx(Pc,{children:S.jsx(G6,{})})}),S.jsx(Gi,{path:"/shop",element:S.jsx(Pc,{children:S.jsx(K6,{})})}),S.jsx(Gi,{path:"/skills",element:S.jsx(Pc,{children:S.jsx($6,{})})}),S.jsx(Gi,{path:"*",element:S.jsx(U2,{to:"/dashboard",replace:!0})})]})})}function iL(){const{user:i,loading:e}=Hn();return e?S.jsx("div",{style:{minHeight:"100vh",backgroundColor:x.bgDarkest,display:"flex",alignItems:"center",justifyContent:"center",fontFamily:ee.pixel,color:x.neonGreen,fontSize:12},children:"LOADING..."}):i?S.jsx(nL,{}):S.jsxs(Ny,{children:[S.jsx(Gi,{path:"/register",element:S.jsx(E6,{})}),S.jsx(Gi,{path:"*",element:S.jsx(v6,{})})]})}qC.createRoot(document.getElementById("root")).render(S.jsx(z.StrictMode,{children:S.jsx(cD,{children:S.jsx(X3,{children:S.jsx(iL,{})})})}));
